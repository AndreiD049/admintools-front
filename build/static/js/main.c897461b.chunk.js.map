{"version":3,"sources":["components/notification/NotificationContainer.jsx","services/NotificationService.js","utils/constants.js","components/notification/Notification.jsx","components/notification/index.js","components/shared/table/Table.jsx","components/shared/table/index.js","services/validators/operators.js","services/validators/UserValidators.js","services/validators/General.js","services/validators/AppraisalValidators.js","services/validators/index.js","services/GlobalContext.js","services/AuthorizationService.js","services/LoginService.js","components/shared/user-info-provider/index.js","components/shared/user-info-provider/UserInfoProvider.jsx","components/shared/user-securities-provider/index.js","components/shared/user-securities-provider/UserSecuritiesProvider.jsx","styles/keytipStyles.js","themes/lightTheme.js","themes/darkTheme.js","themes/warmTheme.js","themes/blackWhiteTheme.js","themes/index.js","components/shared/select-theme/theme_dark_icon.png","components/shared/select-theme/theme_light_icon.png","components/shared/select-theme/theme_solarized_icon.png","components/shared/select-theme/theme_blackwhite_icon.png","components/shared/select-theme/SelectTheme.jsx","components/navigation/components/choose-theme-modal/ChooseThemeModal.jsx","components/navigation/components/user-info/UserInfo.jsx","components/navigation/components/app-bar/AppBar.jsx","components/navigation/components/app-bar/index.js","components/navigation/components/drawer/Drawer.jsx","components/navigation/components/drawer/index.js","components/navigation/Navigation.jsx","components/shared/authorization-redirect-component/index.js","components/shared/authorization-redirect-component/AuthorizationRedirectComponent.jsx","components/appraisal-details/components/appraisal-info/index.js","components/appraisal-details/components/appraisal-info/AppraisalDetailsInfo.jsx","services/UserService.js","components/shared/single-picker/SinglePicker.jsx","components/shared/team-mates-autocomplete/index.js","components/shared/team-mates-autocomplete/TeamMatesAutocomplete.jsx","components/appraisal-details/components/appraisal-user-redirect/AppraisalUserRedirect.jsx","components/appraisal-details/components/appraisal-user-redirect/index.js","components/shared/authorization-component/index.js","components/shared/authorization-component/AuthorizationComponent.jsx","components/shared/chip/Chip.jsx","components/shared/chip/index.js","components/appraisal-details/components/appraisal-input/AppraisalInput.jsx","components/appraisal-details/components/appraisal-input/index.js","components/shared/box/Box.jsx","components/shared/box/index.js","components/appraisal-details/components/appraisal-field-set/FieldSet.jsx","components/appraisal-details/components/appraisal-field-set/index.js","components/appraisal-details/components/appraisal-details-display/AppraisalDetailsDisplay.jsx","components/appraisal-details/components/appraisal-details-display/index.js","components/appraisal-details/components/appraisal-user-info/index.js","components/appraisal-details/components/appraisal-user-info/AppraisalUserInfo.jsx","components/appraisal-details/components/appraisal-user-details-display/AppraisalUserDetails.jsx","components/appraisal-details/components/appraisal-user-details-display/index.js","components/appraisal-details/index.js","components/appraisal-details/AppraisalDetails.jsx","routes/appraisal-details/index.js","routes/appraisal-details/AppraisalDetailsPage.jsx","components/appraisal-list/panel-new/PanelNew.jsx","components/appraisal-list/panel-edit/PanelEdit.jsx","routes/appraisals/AppraisalsPage.jsx","routes/appraisals/index.js","routes/settings-general/index.js","routes/settings-general/SettingsGeneral.jsx","services/TeamService.js","routes/settings-users/components/user-edit-panel/UserEditPanel.jsx","routes/settings-users/components/user-edit-panel/index.js","routes/settings-users/index.js","routes/settings-users/SettingsUsers.jsx","routes/settings-app-periods/index.js","routes/settings-app-periods/SettingsAppraisalPeriods.jsx","routes/settings-app-items/index.js","routes/settings-app-items/SettingsAppraisalItems.jsx","components/appraisal-details/components/security-details/components/security-info-provider/index.js","components/appraisal-details/components/security-details/components/security-info-provider/SecurityInfoProvider.jsx","components/appraisal-details/components/security-details/components/security-details-role-display/SecurityDetailsRoleDisplay.jsx","components/appraisal-details/components/security-details/components/security-details-role-display/index.js","components/appraisal-details/components/security-details/components/security-details-user-display/SecurityDetailsUserDisplay.jsx","components/appraisal-details/components/security-details/components/security-details-user-display/index.js","components/appraisal-details/components/security-details/SecurityDetails.jsx","routes/settings-role-permissions/index.js","routes/settings-role-permissions/SettingsRoles.jsx","routes/settings/index.js","routes/settings/SettingsPage.jsx","components/reports/components/reports-info-provider/ReportsInfoProvider.jsx","components/reports/components/reports-info-provider/index.js","components/reports/components/reports-new-panel/ReportsNewPanel.jsx","components/reports/components/reports-new-panel/index.js","components/reports/components/reports-details-panel/ReportsDetailsPanel.jsx","components/reports/components/reports-edit-panel/ReportsEditPanel.jsx","components/reports/components/reports-edit-panel/index.js","components/reports/index.js","components/reports/Reports.jsx","routes/reporting-reports/index.js","routes/reporting-reports/ReportsPage.jsx","components/report-templates/index.js","routes/reporting-templates/index.js","routes/reporting-templates/ReportTemplatesPage.jsx","components/appraisal-report/AppraisalReport.jsx","routes/reporting/index.js","routes/reporting/ReportingPage.jsx","components/shared/login-required/index.js","components/shared/login-required/LoginRequired.jsx","routes/login/index.js","routes/login/LoginPage.jsx","services/hooks/useFetch.js","services/tasks/TaskService.js","utils/date.js","components/ui-hooks/usePanel.jsx","components/shared/autocomplete/Autocomplete.jsx","components/task-dashboard/components/add-task/AddTask.jsx","components/task-dashboard/components/add-task/index.js","components/task-dashboard/components/current-date/CurrentDate.jsx","components/task-dashboard/components/task-personas/TaskPersonas.jsx","components/task-dashboard/components/task-collapsed/TaskCollapsed.jsx","components/task-dashboard/components/task-item/TaskItem.jsx","components/task-dashboard/components/task-item/index.js","components/task-dashboard/components/task-container/TaskContainer.jsx","components/task-dashboard/components/working-hours/WorkingHours.jsx","components/ui-hooks/useDialog.jsx","components/task-dashboard/components/task-busy-conflict/TaskBusyConflict.jsx","components/ui-hooks/useLocalStorage.jsx","services/ConnectionService.js","components/task-dashboard/components/task-live-update/TaskLiveUpdate.jsx","components/task-dashboard/TaskDashboard.jsx","utils/serviceRequestWrapper.js","services/tasks/TaskFlowService.js","components/task-flows/components/add-flow/AddFlow.jsx","components/task-flows/components/edit-flow/EditFlow.jsx","components/task-flows/index.js","components/task-flows/TaskFlows.jsx","components/task-planning/components/planning-cell/PlanningCell.jsx","components/task-planning/components/planning-matrix/PlanningMatrix.jsx","services/tasks/TaskPlanningService.js","components/task-planning/components/flow-picker/FlowPicker.jsx","components/task-planning/components/flow-picker/index.js","components/task-planning/components/planning-flows-dialog/PlanningFlowsDialog.jsx","components/task-planning/components/planning-flows-dialog/index.js","components/task-planning/TaskPlanning.jsx","services/tasks/TaskRuleService.js","components/task-rules/components/add-rule-type/AddRuleType.jsx","components/shared/people-picker/PeoplePicker.jsx","components/task-rules/components/add-rule/AddRule.jsx","components/task-rules/components/rule-details/RuleDetails.jsx","components/task-rules/index.js","components/task-rules/TaskRules.jsx","routes/tasks/index.js","routes/tasks/Tasks.jsx","components/shared/connection-manager/ConnectionManager.jsx","components/app/App.jsx","components/app/index.js","index.js","components/shared/accordion/index.js","components/report-templates/components/create-panel/CreateTemplatePanel.jsx","components/report-templates/components/create-panel/index.js","components/report-templates/components/details-panel/TemplateDetailsPanel.jsx","components/report-templates/components/details-panel/index.js","components/report-templates/components/edit-panel/TemplateEditPanel.jsx","components/report-templates/ReportTemplates.jsx","services/ReportingService.js","services/AppraisalService.js","components/shared/page-header/index.js","components/shared/command-table/CommandTable.jsx","components/shared/Emitter/Emitter.js","components/shared/Emitter/index.js","components/shared/page-header/PageHeader.jsx","components/shared/accordion/Accordion.jsx"],"names":["NotificationContainer","timeout","useState","items","setItems","onDismiss","idx","prev","found","find","i","id","timer","clearTimeout","filter","useEffect","Emitter","on","item","uuid","onRender","bind","setTimeout","prevState","off","className","map","classNames","NotificationService","notify","text","type","actions","emit","notifyError","this","notifySuccess","notifyInfo","notifySevereWarning","constants","dialogAnswers","Yes","No","Cancel","Ok","timeOptions","options","h","m","str","slice","push","key","connections","INSERT","UPDATE","DELETE","tasks","status","New","InProgress","Paused","Finished","Cancelled","types","Daily","Weekly","Monthly","DayTypes","Workday","Calendar","MonthlyOnType","Day","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","colors","securities","REPORTS","code","description","grants","read","create","update","delete","APPRAISAL_DETAILS","createFinished","updateFinished","deleteFinished","APPRAISAL_DETAILS_OTHER","toggleLock","APPRAISAL_PERIODS","finish","SETTINGS","general","users","appraisalItems","appraisalPeriods","permissions","AUDITS","REPORT_TEMPLATES","TASK","TASK_RULE","TASK_FLOW","TASK_PLANNING","Notification","typeMessage","MessageBarType","success","warning","error","info","blocked","severeWarning","MessageBar","messageBarType","Text","variant","Table","columns","searchValue","sortedCol","setSelectionDetails","props","sortedColumn","setSortedColumn","_columns","setColumns","_items","selection","Selection","onSelectionChanged","count","getSelectedCount","getSelection","handleSort","evt","column","isSortable","columnCopy","columnsCopy","col","c","isSorted","isSortedDescending","filterValues","useCallback","values","rg","RegExp","filterableColumns","isFilterable","length","val","fieldName","filterValueAccessor","test","copy","sort","a","b","DetailsList","onColumnClick","selectionPreservedOnEmptyClick","defaultProps","and","validations","Error","Promise","all","v","results","every","result","message","andSync","last","l","err","or","some","orSync","not","validation","notSync","perform","throwExceptions","performSync","userExists","user","Boolean","userAuthorized","context","grant","Authorize","isTruthy","obj","operators","AD","ADO","periodStatus","period","name","periodExists","itemExists","periodLocked","userId","userPeriod","u","_id","locked","itemStatus","content","itemType","itemSameUser","String","username","itemRelated","relatedItemId","itemContentNotNull","trim","canInsert","generalVal","userVal","canUpdate","canDelete","validate","appraisalValidators","userValidators","generalValidators","GlobalContext","React","createContext","connection","connectionId","notification","setContext","userPreferences","theme","AuthorizationService","getRolesPath","getCurrentUserSecuritiesPath","getUserSecuritiesPath","getOrganizationUsersSecuritiesPath","getRolesSecuritiesPath","getPermissionCodesPath","addPermissionPath","updatePermissionPath","deletePermissionPath","getRoles","axios","get","data","response","getSecurities","getUserSecurities","getOrganizationUsersSecurities","getRolesSecurities","getPermissionCodes","addPermission","permission","post","updatePermission","put","deletePermission","security","index","el","indexOf","LoginService","currentUserPath","getCurrentUser","DefaultButton","as","href","UserInfoProvider","verified","setVerified","global","useContext","displayName","avatar","split","n","join","toUpperCase","userLoaded","getUser","UserSecuritiesProvider","run","root","padding","createTheme","palette","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","black","white","accent","isInverted","selectTheme","localStorage","getItem","lightTheme","darkTheme","warmTheme","blackWhiteTheme","SelectTheme","setTheme","imageSrc","lightImg","selectedImageSrc","imageSize","width","height","solarizedImg","darkImg","blackWhiteImg","Stack","verticalAlign","tokens","childrenGap","ChoiceGroup","selectedKey","onChange","option","setItem","ChooseThemeModal","isOpen","setOpen","Modal","isBlocking","styles","scrollableContent","minWidth","minHeight","style","horizontalAlign","StackItem","grow","align","onClick","useStyles","makeStyles","display","flexFlow","justifyContent","link","color","textAlign","paddingRight","fluidLink","usernameText","overflow","textDecoration","callout","UserInfo","classes","calloutVisible","setCalloutVisible","themeModalOpen","setThemeModalOpen","userLinkRef","useKeytipRef","keytipProps","keytipStyles","keySequences","onExecute","click","handleCalloutToggle","ref","wrap","horizontal","Persona","size","PersonaSize","size32","hidePersonaDetails","marginRight","Callout","role","gapSpace","target","setInitialFocus","isBeakVisible","Separator","size56","ActionButton","iconProps","iconName","position","backgroundColor","flex","icon","alignSelf","AppBar","toggleDrawer","useTheme","IconButton","hasMenu","title","ariaLabel","block","nowrap","Icon","fontSize","spacing","s2","classNamesFunction","borderBottom","top","left","nav","marginTop","Drawer","history","useHistory","handleLinkClick","preventDefault","url","links","keyTipContent","keyTipSequence","navLinks","filterLinks","forEach","visibleLinksGroup","setVisibleLinksGroup","Panel","hasCloseButton","PanelType","smallFixedNear","isLightDismiss","marginLeft","Nav","groups","onRenderLink","isExpanded","zIndex","Navigation","navPaneOpened","setOpened","AuthorizationRedirectComponent","to","failureNotification","access","setAccess","redirect","setRedirect","notified","setNotified","isAuthorized","children","AppraisalDetailsInfo","periodId","setPeriodDetails","AppraisalService","getItems","UserService","baseUrl","teamUsersPath","updateUsersPath","getUserPath","getUserOrganizationsPath","getUserTeamMembersPath","getSettingsUsersPath","putSettingsUsersPath","normalizeUser","organization","organizations","o","getSettingsUsers","statusText","updateUser","updateSettingsUser","getUserOrganizations","getUserTeamMembers","border","suggestion","defaultGetText","SinglePicker","getTextFromItem","selected","onSelect","onRenderItem","onRenderSuggestionsItem","placeholder","maxHeight","sc","useScreenClass","_selected","setSelected","maxWidth","setMaxwidth","inputRef","useRef","getText","renderItem","defaultRenderItem","renderSuggestionsItem","defaultRenderSuggestionItem","current","clientWidth","BasePicker","inputProps","pickerCalloutProps","pickerSuggestionsProps","suggestionsContainer","selectedItems","onItemSelected","onEmptyResolveSuggestions","onResolveSuggestions","suggestions","toLowerCase","TeamMatesAutocomplete","onUserSelect","setUsers","mounted","value","AppraisalUserRedirect","defaultValue","useParams","selectedUser","setSelectedUser","handleSelect","AuthorizationComponent","onReject","chip","borderRadius","Chip","calloutPrefix","boxShadow","effects","elevation64","CustomPrefix","isCalloutVisible","setIsCalloutVisible","tabIndex","CustomSuffix","menuProps","AppraisalInput","changeHandler","blurHandler","removeHandler","changeTypeHandler","multilineTrashold","setValue","modified","setModified","multiline","setMultiline","isRelated","isDeletable","isFinished","inputEditable","setValidations","calls","checkRelated","checkFinished","checkEditable","handleBlur","e","persist","mod","handleChange","newMultiline","handleTypeChange","handleDelete","shouldFocusOnMount","shouldFocusOnContainer","replace","disabled","tooltip","Item","createdUser","createdDate","Date","toLocaleString","modifiedUser","modifiedDate","TextField","resizable","prefix","suffix","field","onRenderPrefix","onRenderSuffix","autoAdjustHeight","autoComplete","onBlur","readOnly","bottom","right","box","l2","Box","stack","paddingTop","s1","FieldSet","details","setOtherItems","labels","Achieved","Planned","Training_Planned","Training_Achieved","SWOT_S","SWOT_W","SWOT_O","SWOT_T","Feedback","min","isLocked","normalizeSet","addItem","addItemToSet","addUserItemToSet","updateItem","updateItemInSet","updateUserItemInSet","deleteItem","deleteItemFromSet","deleteUserItemFromSet","firstChange","itemId","concat","Number","isNaN","isNew","isToBeDeleted","listItem","label","chipContent","alignItems","lockedChip","lockIcon","container","AppraisalDetailsDisplay","periodDetails","achieved","setAchieved","planned","setPlanned","trainingPlanned","setTrainingPlanned","trainingAchieved","setTrainingAchieved","swotS","setSWOTS","swotW","setSWOTW","swotO","setSWOTO","swotT","setSWOTT","feedBack","setFeedBack","setLocked","md","xs","justify","lg","size24","nogutter","AppraisalUserInfo","setUserDetails","userData","getUserItems","periodData","userStyles","AppraisalUserDetails","userDetails","handleLockButton","finished","setFinished","PrimaryButton","primary","AppraisalDetails","toggleLockPeriod","AppraisalDetailsPage","header","PanelNew","handleCreate","setVal","smallFixedFar","headerText","onSubmit","finally","margin","autoFocus","PanelEdit","handleEdit","AP","REP","AppraisalsPage","screenClass","filteredItems","setFilteredItems","showClosed","setShowClosed","newPanelOpen","setNewPanelOpen","editPanelOpen","setEditPanelOpen","setSearchValue","path","useRouteMatch","selectionDetails","blue","green","isResizable","isPadded","getPeriods","loadData","handleItemInvoked","clickFinishHandler","finishPeriod","addPeriod","organizationId","updatePeriod","handleGenerateReport","ReportingService","generateAppraisalReport","periods","reportBlob","downloadBlob","exact","sm","CommandBar","SearchBox","Checkbox","checked","selectionMode","SelectionMode","single","onItemInvoked","ctx","setCtx","SettingsGeneral","TeamService","team","getTeams","addTeam","UserEditPanel","setFunc","teams","roles","selTeams","setSelTeams","selPrimaryTeam","setSelPrimaryTeam","selOrganizations","setSelOrganizations","selRole","setSelRole","handleMultiCombobox","handleDeselect","t","ComboBox","multiSelect","useComboBoxAsMenuWidth","r","SettingsUsers","setData","setTeams","setRoles","indices","selectedColumn","handleUpdate","findIndex","_teams","_roles","fluid","CommandTable","commandItems","tableProps","layoutMode","DetailsListLayoutMode","justified","SettingsAppraisalPeriods","SettingsAppraisalItems","SecurityInfoProvider","setLoaded","setPermissionCodes","setRolePermissions","setUserPermissions","codes","rolesInfo","userInfo","rolesMap","reference","userPermissions","userPermMap","autocomplete","secondaryText","searchBox","SecurityDetailsRoleDisplay","rolePermissions","selectedRole","setSelectedRole","expanded","setExpanded","setFilter","handleExpandSingle","p","handleFilterInputChange","handleSetPermission","handleAdd","permissionType","handleClick","g","getPermissionChecked","buttonStyles","onClear","paddingLeft","render","Accordion","getKey","headerProps","onRenderHeaderText","onToggle","renderPermissions","SecurityDetailsUserDisplay","SecurityDetails","permissionCodes","loaded","Pivot","aria-label","PivotItem","itemIcon","SettingsRolesPage","SettingsPage","ReportsInfoProvider","setReports","getReports","reports","propTypes","PropTypes","func","isRequired","topMargin","borderTop","invisibleInput","background","outline","ReportsNewPanel","addReport","setName","setDescription","template","setTemplate","parameter","setParameter","templates","setTemplates","parameters","setParameters","selectedParameters","setSelectedParameters","set","handleChangeParameterName","handleChangeParameterValue","handleSubmit","formData","FormData","append","JSON","stringify","getTemplates","getTempalteParameters","params","large","onRenderFooterContent","form","required","Label","templ","temp","underlined","param","paths","flat","handleChangeParameter","sp","ReportsDetailsPanel","setDetails","getReport","reportDetails","parse","aggregation","ReportsEditPanel","setReport","parametersList","setParametersList","inputErrorMessages","setInputErrorMessages","newParameter","setNewParameter","handleChangeParams","property","handleChangeNewParam","handleSave","updateReport","errorMessage","newParamName","newParamPath","Reports","detailsPanelOpen","setDetailsPanelOpen","PageHeader","report","ReportsPage","ReportTemplates","require","default","ReportTemplatesPage","AppraisalReport","setPeriods","dateFrom","setDateFrom","dateTo","setDateTo","selectedPeriods","setSelectedPeriods","handleChangeDate","dt","UTC","getFullYear","getMonth","getDate","handleGenerate","Dropdown","selectedKeys","DatePicker","onSelectDate","ReportingPage","LoginRequired","LoginPage","useFetch","initialData","dependencies","cb","TaskService","taskPath","taskStatusPath","tasksCheckConflictsPath","getTasks","getBusyTasks","getTask","createTask","updateTask","updateTaskStatus","deleteTask","createTaskObject","task","startRaw","DateTime","fromISO","expectedStartDate","toUTC","endRaw","expectedFinishDate","fromObject","year","month","day","hour","minute","second","zone","toISO","getHoursFromText","hours","minutes","seconds","s","combineDateHours","date","makeUTC","getHours","getMinutes","getSeconds","getWeekFromDate","firstDay","firstDayUTC","makeUTCDateOnly","getDay","setDate","getNearestTime","Math","round","PanelContext","isPanel","onRenderFooter","setOnRenderFooter","usePanel","Component","componentProps","componentRef","Provider","isFooterAtBottom","borderColor","whiteSpace","textOverflow","fontWeight","hidden","Autocomplete","calloutWidth","setCalloutWidth","input","toggleSelect","ev","clear","itemProps","undefined","onRenderLabel","onSuggestionClick","document","body","AddTask","setTasks","userOptions","setUserOptions","remarks","expectedStartTime","duration","isBackgroundTask","selectedUsers","setValues","hr","expDate","getTime","assignedTo","calloutProps","calloutMaxHeight","SpinButton","onIncrement","onDecrement","step","incrementButtonAriaLabel","decrementButtonAriaLabel","labelPosition","Position","CurrentDate","currentDate","setCurrentDate","from","fromJSDate","millisecond","minus","toJSDate","firstDayOfWeek","plus","TaskPersonas","Facepile","personaSize","maxDisplayablePersonas","overflowButtonType","OverflowButtonType","descriptive","overflowButtonProps","ariaDescription","personas","personaName","borderCollapse","TaskCollapsed","collapsed","setCollapsed","handleStatusChange","isOpened","ButtonGrid","columnCount","borderLeft","collapse","cursor","marginBottom","chevron","chevronIcon","rows","flexGrow","taskDescription","prewrap","neutralSecondaryAlt","time","lineHeight","TaskItem","setTime","startDate","finishDate","fromHours","fromMinutes","toHours","toMinutes","clsx","onKeyDown","alignContent","semanticColors","bodyBackground","l1","TaskContainer","hourOptions","combo","space","WorkingHours","setHours","DialogContext","isDialog","isVisible","setVisible","show","accept","cancel","resolve","setResolve","dialogFooter","setDialogFooter","useDialog","visible","res","Dialog","modalProps","dialogContentProps","DialogType","normal","subText","DialogFooter","TaskBusyConflict","conflictTasks","paused","ctask","component","Link","actualStartDate","useLocalStorageState","initialValue","ConnectionService","subscribePath","connectSSE","es","EventSource","subscribe","TaskLiveUpdate","handleMessage","action","initiator","addEventListener","removeEventListener","searchIcon","TaskDashboard","setSelectedUsers","fromDate","DU","toDate","newPanel","dialogProps","setDialogProps","resolveBusyConflictDialog","_accept","handleUserSelect","conflicts","updated","ts","unpaused","openOnKeyboardFocus","selUser","t1","t2","serviceRequestWrapper","requestFunc","successStatusCode","showNotification","TaskFlowService","singleUrl","getTaskFlow","createTaskFlow","updateTaskFlow","AddFlow","setFlows","panel","handleDataChange","args","createdFlow","htmlFor","SwatchColorPicker","cellHeight","cellWidth","cellShape","colorCells","selectedId","onColorChanged","EditFlow","isActive","flow","setFlow","fl","TaskFlows","flows","addFlowPanel","getElementById","contains","editFlowPanel","flowItem","noSelect","userSelect","PlanningCell","userFlows","handleInvoke","isSelected","onDoubleClick","Array","f","row","PlanningMatrix","userFlowMap","dates","selectedCell","setSelectedCell","today","toLocaleDateString","userCol","handleSelectCell","fixedColumns","onRenderRow","DetailsRow","none","TaskPlanningService","addFlowUrl","planningId","flowId","removeFlowUrl","createPlanning","addFlowToPlanning","removeFromFromPlanning","suggestionRoot","suggestionCheck","picker","colorBox","removeIcon","FlowPicker","onRemove","showDeleteIcon","showCheckboxes","selectedSet","useMemo","Set","handleCheckboxClick","stopPropagation","has","resolveDelay","preventDismissOnScroll","focusPoint","visibility","PlanningFlowsDialog","planning","addFlow","removeFlow","validOptions","userTeams","TaskPlanning","DateUtils","setDates","selectedTeam","setSelectedTeam","Map","handleAddFlow","plan","handleRemoveFlow","flowsDialog","largeHeader","isMonthPickerVisible","dateRangeType","DateRangeType","Week","showWeekNumbers","showSixWeeksByDefault","showGoToToday","selDate","selDates","TaskRuleService","taskRulePath","getTaskRules","getTaskRule","createTaskRule","updateTaskRule","deleteTaskRule","monthlyOptions","weeklyCheck","monthlyCheck","monthlyDropdown","AddRuleType","handleSetWeeklyData","weeklyDays","d","handleSetMonths","monthlyMonths","isDaySelected","defaultSelectedKey","dailyType","verticalFill","monthlyOn","newVal","max","placeHolder","monthlyOnType","suggestionText","textTransform","itemRoot","PeoplePicker","AddRule","setRules","isSharedTask","taskStartTime","validFrom","taskDuration","local","zoneName","typeOptions","Object","keys","handleSelectDate","validTo","weekday","setMonth","setMinutes","exp","utcExpected","utc","checkbox","typeIcon","typeDetails","paddingBottom","userColumn","separator","weekDay","weekDays","months","getOrdinalSuffix","number","RuleTypeDetails","rule","getTypeIcon","ruleDetails","getRenderDetails","RuleDetails","editing","setEditing","flowsData","renderFooter","borderless","allowTextInput","vertical","TaskRules","rules","detailsPanel","medium","_isOpen","Tasks","ConnectionManager","con","HomePage","lazy","App","initContext","ThemeProvider","applyTo","KeytipLayer","keytipStartSequences","modifierKeys","KeyCodes","alt","fallback","initializeIcons","ReactDOM","StrictMode","CreateTemplatePanel","setAggregation","file","setFile","sample","setSample","openAcordion","setOpenAccordion","generateTemplate","handleSample","getSample","createTemplate","rel","open","fieldGroup","filelist","files","TemplateDetailsPanel","setEdit","getTemplate","filename","downloadTemplate","TemplateEditPanel","updateTemplates","setUpdate","updateTemplate","updateResult","labelId","controlId","aria-labelledby","ItemType","createPanelOpen","setCreatePanelOpen","templatesPath","templatePath","templateDownloadPath","templateParametersPath","generateTemplatePath","templateSamplePath","formdata","headers","responseType","appraisalReportPath","reportPath","postReportGeneratePath","reportsPath","generateReport","getPeriodsPath","addPeriodsPath","periodPath","periodFinishPath","getItemsPath","getUserItemsPath","toggleLockPeriodPath","getItemPath","getOrphansPath","addItemPath","updateItemPath","deleteItemPath","addItemToPeriodPath","addUserItemPath","updateItemInPeriodPath","updateUserItemPath","deleteItemFromPeriodPath","deleteUserItemPath","updateItemTypePath","updateUserItemTypePath","getOrphans","addOrphan","addUserItem","updateItemInPeriod","updateUserItem","updateItemType","updateUserItemType","deleteItemFromPeriod","deleteUserItem","blankItem","dif","eventEmitter","EventEmitter","event","fn","once","payload","freeze","defaultRenderHeaderFold","headerIcon","headerIconOpen","defaultRenderHeaderText","defaultRenderHeader","classProps","onRenderHeaderFold","AccordionItemContainer","onKeyPress","onRenderHeader","itemContent","exclusive","compact","concatStyleSets","elevation4","transition","transform","transformOrigin","defstyles","defHeaderProps","handleSetOpen","itemKey"],"mappings":"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","file":"static/js/main.c897461b.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { v4 as uuid } from 'uuid';\r\nimport Emitter from '../shared/Emitter';\r\nimport './styles.css';\r\n\r\nconst NotificationContainer = ({ timeout = 5000 }) => {\r\n  const [items, setItems] = useState([]);\r\n\r\n  const onDismiss = (idx) => () => {\r\n    setItems((prev) => {\r\n      const found = prev.find((i) => i.id === idx);\r\n      if (found) {\r\n        if (found.timer) clearTimeout(found.timer);\r\n        return prev.filter((i) => i.id !== idx);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  // Use below effect to start listening to Notification events\r\n  // When element is unmounted, listener is removed\r\n  useEffect(() => {\r\n    const listener = (item) => {\r\n      const idx = uuid();\r\n      setItems((prev) => [...prev, {\r\n        ...item,\r\n        onRender: item.onRender.bind({}, onDismiss(idx)),\r\n        id: idx,\r\n        timer: setTimeout(\r\n          () => setItems((prevState) => prevState.filter((i) => i.id !== idx)), timeout,\r\n        ),\r\n      }]);\r\n    };\r\n\r\n    Emitter.on('notification-add', listener);\r\n    return () => {\r\n      Emitter.off('notification-add');\r\n    };\r\n  }, [timeout]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <TransitionGroup>\r\n        {items.map((item) => (\r\n          <CSSTransition\r\n            key={item.id}\r\n            timeout={400}\r\n            classNames=\"notification\"\r\n          >\r\n            <div className=\"item-wrapper\">\r\n              {item.onRender()}\r\n            </div>\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationContainer;\r\n","import React from 'react';\r\nimport { Notification } from '../components/notification';\r\nimport Emitter from '../components/shared/Emitter';\r\n\r\nconst NotificationService = {\r\n  notify(text, type, actions) {\r\n    Emitter.emit('notification-add', {\r\n      onRender: (onDismiss) => (\r\n        // eslint-disable-next-line react/jsx-filename-extension\r\n        <Notification\r\n          text={text}\r\n          type={type}\r\n          actions={actions}\r\n          onDismiss={onDismiss}\r\n        />\r\n      ),\r\n    });\r\n  },\r\n\r\n  notifyError(text) {\r\n    this.notify(text, 'error');\r\n  },\r\n\r\n  notifySuccess(text) {\r\n    this.notify(text, 'success');\r\n  },\r\n\r\n  notifyInfo(text) {\r\n    this.notify(text, 'info');\r\n  },\r\n\r\n  notifySevereWarning(text) {\r\n    this.notify(text, 'severeWarning');\r\n  },\r\n};\r\n\r\nexport default NotificationService;\r\n","const constants = {\r\n  dialogAnswers: {\r\n    Yes: 1,\r\n    No: 0,\r\n    Cancel: 2,\r\n    Ok: 3,\r\n  },\r\n  timeOptions: (() => {\r\n    const options = [];\r\n    for (let h = 0; h < 24; h += 1) {\r\n      for (let m = 0; m < 60; m += 10) {\r\n        const str = `${`0${h}`.slice(-2)}:${`0${m}`.slice(-2)}`;\r\n        options.push({\r\n          key: str,\r\n          text: str,\r\n        });\r\n      }\r\n    }\r\n    return options;\r\n  })(),\r\n  connections: {\r\n    actions: {\r\n      INSERT: 'INSERT',\r\n      UPDATE: 'UPDATE',\r\n      DELETE: 'DELETE',\r\n    },\r\n  },\r\n  tasks: {\r\n    status: {\r\n      New: 'New',\r\n      InProgress: 'InProgress',\r\n      Paused: 'Paused',\r\n      Finished: 'Finished',\r\n      Cancelled: 'Cancelled',\r\n    },\r\n    types: {\r\n      Daily: 'Daily',\r\n      Weekly: 'Weekly',\r\n      Monthly: 'Monthly',\r\n    },\r\n    DayTypes: {\r\n      Workday: 'Work',\r\n      Calendar: 'Calendar',\r\n    },\r\n    MonthlyOnType: {\r\n      Day: 'Day',\r\n      Workday: 'Workday',\r\n      Monday: 'Monday',\r\n      Tuesday: 'Tuesday',\r\n      Wednesday: 'Wednesday',\r\n      Thursday: 'Thursday',\r\n      Friday: 'Friday',\r\n      Saturday: 'Saturday',\r\n      Sunday: 'Sunday',\r\n    },\r\n  },\r\n  colors: [\r\n    '#FFB900', '#FF8C00', '#E74856', '#E81123',\r\n    '#0078D7', '#0063B1', '#0099BC', '#2D7D9A',\r\n    '#EA005E', '#C30052', '#8E8CD8', '#6B69D6',\r\n    '#00B7C3', '#038387', '#7A7574', '#5D5A58',\r\n    '#68768A', '#515C6B', '#B146C2', '#881798',\r\n    '#00CC6A', '#10893E', '#498205', '#107C10',\r\n  ],\r\n  securities: {\r\n    REPORTS: {\r\n      code: 'REPORTS',\r\n      description: 'Access to view, generate, create and edit reports',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    APPRAISAL_DETAILS: {\r\n      code: 'APPRAISAL DETAILS',\r\n      description: 'Access to see, add, edit, delete Appraisal details for user himself',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        createFinished: 'create-finished',\r\n        updateFinished: 'update-finished',\r\n        deleteFinished: 'delete-finished',\r\n      },\r\n    },\r\n    APPRAISAL_DETAILS_OTHER: {\r\n      code: 'APPRAISAL DETAILS - OTHER USERS',\r\n      description: 'Access to see, add, edit, delete Appraisal details for other users within the team',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        createFinished: 'create-finished',\r\n        updateFinished: 'update-finished',\r\n        deleteFinished: 'delete-finished',\r\n        toggleLock: 'toggle-lock',\r\n      },\r\n    },\r\n    APPRAISAL_PERIODS: {\r\n      code: 'APPRAISAL PERIODS',\r\n      description: 'Access to see, add, edit, finish Appraisal Periods',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        finish: 'finish',\r\n      },\r\n    },\r\n    SETTINGS: {\r\n      code: 'SETTINGS',\r\n      description: 'Access to various settings. Be careful about following: users - will allow users to modify other users; permissions - will allow users to alter permissions',\r\n      grants: {\r\n        read: 'read',\r\n        general: 'general',\r\n        users: 'users',\r\n        appraisalItems: 'appraisal-items',\r\n        appraisalPeriods: 'appraisal-periods',\r\n        permissions: 'permissions',\r\n      },\r\n    },\r\n    AUDITS: {\r\n      code: 'AUDITS',\r\n      description: 'Access to request, execute, update, delete audits.',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    REPORT_TEMPLATES: {\r\n      code: 'REPORT-TEMPLATES',\r\n      description: 'Access to create and edit report templates',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK: {\r\n      code: 'TASK',\r\n      description: 'Access to read, update, create or delete tasks',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_RULE: {\r\n      code: 'TASK-RULE',\r\n      description: 'Access to read, update, create or delete task rules',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_FLOW: {\r\n      code: 'TASK-FLOW',\r\n      description: 'Access to read, update, create or delete task flows',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_PLANNING: {\r\n      code: 'TASK-PLANNING',\r\n      description: 'Access to read, update, create or delete task planning items',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport default constants;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MessageBar, MessageBarType, Text } from '@fluentui/react';\n\nconst Notification = ({\n  type, text, actions, onDismiss,\n}) => {\n  let typeMessage;\n  switch (type) {\n    case 'success':\n      typeMessage = MessageBarType.success;\n      break;\n    case 'warning':\n      typeMessage = MessageBarType.warning;\n      break;\n    case 'error':\n      typeMessage = MessageBarType.error;\n      break;\n    case 'info':\n      typeMessage = MessageBarType.info;\n      break;\n    case 'blocked':\n      typeMessage = MessageBarType.blocked;\n      break;\n    case 'severeWarning':\n      typeMessage = MessageBarType.severeWarning;\n      break;\n    default:\n      typeMessage = MessageBarType.info;\n      break;\n  }\n  return (\n    <MessageBar\n      messageBarType={typeMessage}\n      actions={actions || null}\n      onDismiss={onDismiss}\n    >\n      <Text variant=\"medium\">{text}</Text>\n    </MessageBar>\n  );\n};\n\nNotification.propTypes = {\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  actions: PropTypes.shape({}).isRequired,\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default Notification;\n","import NotificationContainer from './NotificationContainer';\r\nimport Notification from './Notification';\r\n\r\nexport default NotificationContainer;\r\n\r\nexport { Notification };\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { DetailsList, Selection } from '@fluentui/react';\r\n\r\nconst Table = ({\r\n  columns, items, searchValue, sortedCol, setSelectionDetails, ...props\r\n}) => {\r\n  const [sortedColumn, setSortedColumn] = useState(null);\r\n  const [_columns, setColumns] = useState(columns);\r\n  const [_items, setItems] = useState([]);\r\n  const selection = new Selection({\r\n    onSelectionChanged: () => {\r\n      setSelectionDetails({\r\n        count: selection.getSelectedCount(),\r\n        items: selection.getSelection(),\r\n      });\r\n    },\r\n  });\r\n\r\n  const getSortFunction = (column) => {\r\n    const sortFunc = (a, b) => {\r\n      if (!column.isSortedDescending) {\r\n        return a[column.fieldName] < b[column.fieldName] ? -1 : 1;\r\n      }\r\n      return a[column.fieldName] > b[column.fieldName] ? -1 : 1;\r\n    };\r\n    if (column.sort) {\r\n      return (a, b) => {\r\n        if (!column.isSortedDescending) {\r\n          return column.sort(b, a);\r\n        }\r\n        return column.sort(a, b);\r\n      };\r\n    }\r\n    return sortFunc;\r\n  };\r\n\r\n  const handleSort = (evt, column) => {\r\n    if (column.isSortable) {\r\n      let columnCopy = column;\r\n      const columnsCopy = _columns.map((col) => {\r\n        const c = col;\r\n        // column we're sorting now\r\n        if (c.key === column.key) {\r\n        // if it's already sorted, just invert the sorting\r\n          columnCopy = c;\r\n          if (c.isSorted) {\r\n            c.isSortedDescending = !c.isSortedDescending;\r\n            return c;\r\n          }\r\n          // columns was not sorted previously, just set it sorted\r\n          c.isSorted = true;\r\n          c.isSortedDescending = true;\r\n        } else {\r\n        // other column, remove the sorting\r\n          c.isSorted = false;\r\n          c.isSortedDescending = false;\r\n        }\r\n        return c;\r\n      });\r\n      setColumns(columnsCopy);\r\n      // setItems(_items.sort(getSortFunction(columnCopy)));\r\n      setSortedColumn(columnCopy);\r\n    }\r\n  };\r\n\r\n  const filterValues = useCallback((values) => {\r\n    if (!searchValue) {\r\n      return values;\r\n    }\r\n    const rg = new RegExp(searchValue, 'i');\r\n    return values.filter((item) => {\r\n      const filterableColumns = _columns.filter((c) => c.isFilterable);\r\n      for (let i = 0; i < filterableColumns.length; i += 1) {\r\n        const col = filterableColumns[i];\r\n        let val = item[col.fieldName];\r\n        if (col.filterValueAccessor) {\r\n          val = col.filterValueAccessor(item);\r\n        }\r\n        if (rg.test(val)) return true;\r\n      }\r\n      return false;\r\n    });\r\n  }, [_columns, searchValue]);\r\n\r\n  useEffect(() => {\r\n    const copy = items.slice();\r\n    if (sortedColumn) {\r\n      copy.sort(getSortFunction(sortedColumn));\r\n    }\r\n    if (!searchValue) {\r\n      return setItems(copy);\r\n    }\r\n    return setItems(filterValues(copy));\r\n  }, [items, searchValue, filterValues, sortedColumn]);\r\n\r\n  useEffect(() => {\r\n    if (sortedCol) {\r\n      setColumns((prev) => prev.map((col) => (col.key === sortedCol.key\r\n        ? ({\r\n          ...col,\r\n          isSorted: sortedCol.isSorted,\r\n          isSortedDescending: sortedCol.isSortedDescending,\r\n        }) : col)));\r\n      setSortedColumn(sortedCol);\r\n    }\r\n  }, [sortedCol]);\r\n\r\n  return (\r\n    <DetailsList\r\n      {...props}\r\n      selection={selection}\r\n      columns={_columns.map((c) => ({ ...c, onColumnClick: handleSort }))}\r\n      items={_items}\r\n      selectionPreservedOnEmptyClick\r\n    />\r\n  );\r\n};\r\n\r\nTable.propTypes = {\r\n  columns: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    name: PropTypes.string,\r\n    fieldName: PropTypes.string,\r\n    minWidth: PropTypes.number,\r\n    maxWidth: PropTypes.number,\r\n    isSortable: PropTypes.bool,\r\n    isFilterable: PropTypes.bool,\r\n    isResizable: PropTypes.bool,\r\n    sort: PropTypes.func,\r\n    onRender: PropTypes.func,\r\n  })).isRequired,\r\n  items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  searchValue: PropTypes.string,\r\n  sortedCol: PropTypes.shape({\r\n    key: PropTypes.string,\r\n    name: PropTypes.string,\r\n    fieldName: PropTypes.string,\r\n    minWidth: PropTypes.number,\r\n    maxWidth: PropTypes.number,\r\n    isSortable: PropTypes.bool,\r\n    isFilterable: PropTypes.bool,\r\n    isResizable: PropTypes.bool,\r\n    sort: PropTypes.func,\r\n    onRender: PropTypes.func,\r\n    isSorted: PropTypes.bool,\r\n    isSortedDescending: PropTypes.bool,\r\n  }),\r\n  setSelectionDetails: PropTypes.func,\r\n};\r\n\r\nTable.defaultProps = {\r\n  searchValue: '',\r\n  sortedCol: null,\r\n  setSelectionDetails: () => {},\r\n};\r\n\r\nexport default Table;\r\n","import Table from './Table';\r\n\r\nexport default Table;\r\n","/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst and = (validations) => async () => {\r\n  try {\r\n    if (validations.length === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    const results = await Promise.all(validations.map((v) => v()));\r\n    if (results.every((v) => v.result)) {\r\n      return results[0];\r\n    }\r\n    return results.find((v) => v.result === false);\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: err.message,\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst andSync = (validations) => () => {\r\n  try {\r\n    const l = validations.length;\r\n    if (l === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    let last;\r\n    for (let i = 0; i < l; i += 1) {\r\n      last = validations[i]();\r\n      if (!last.result) break;\r\n    }\r\n    return last;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst or = (validations) => async () => {\r\n  try {\r\n    if (validations.length === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    const results = await Promise.all(validations.map((v) => v()));\r\n    if (results.some((v) => v.result)) {\r\n      return results.find((v) => v.result);\r\n    }\r\n    return results[results.length - 1];\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst orSync = (validations) => () => {\r\n  try {\r\n    const l = validations.length;\r\n    if (l === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    let last;\r\n    for (let i = 0; i < l; i += 1) {\r\n      last = validations[i]();\r\n      if (last.result) break;\r\n    }\r\n    return last;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {function(): {result: boolean, message: string}} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst not = (validation) => async () => {\r\n  try {\r\n    const val = await validation();\r\n    val.result = !val.result;\r\n    val.message = `Not - ${val.message}`;\r\n    return val;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {function(): {result: boolean, message: string}} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst notSync = (validation) => () => {\r\n  try {\r\n    const val = validation();\r\n    val.result = !val.result;\r\n    return val;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {function(): {result: boolean, message: string}} validation\r\n * @param {boolean} throwExceptions\r\n * @returns {Promise<{result: boolean, message: string}>}\r\n */\r\nconst perform = async (validation, throwExceptions = true) => {\r\n  const v = await validation();\r\n  if (!v.result) {\r\n    if (throwExceptions) {\r\n      throw new Error(v.message);\r\n    } else {\r\n      return v;\r\n    }\r\n  } else {\r\n    return v;\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {function(): {result: boolean, message: string}} validation\r\n * @param {boolean} throwExceptions\r\n * @returns {{ result: boolean, message: string }}\r\n */\r\nconst performSync = (validation, throwExceptions = true) => {\r\n  const v = validation();\r\n  if (!v.result) {\r\n    if (throwExceptions) {\r\n      throw new Error(v.message);\r\n    } else {\r\n      return v;\r\n    }\r\n  } else {\r\n    return v;\r\n  }\r\n};\r\n\r\nexport default {\r\n  and,\r\n  andSync,\r\n  or,\r\n  orSync,\r\n  not,\r\n  notSync,\r\n  perform,\r\n  performSync,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\n\r\nconst userExists = (user) => async () => ({\r\n  result: Boolean(user),\r\n  message: 'User doesn\\'t exist.',\r\n});\r\n\r\nconst userAuthorized = (context, code, grant) => async () => ({\r\n  result: context.Authorize(code, grant),\r\n  message: `Access denied. Code: ${code}, Grant: ${grant}`,\r\n});\r\n\r\nexport default {\r\n  userExists,\r\n  userAuthorized,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\n\r\n/**\r\n * @param {any} obj\r\n * @returns {function(): {result: boolean, message: string}} validation result\r\n */\r\nconst isTruthy = (obj) => () => ({\r\n  result: Boolean(obj),\r\n  message: `${obj} is not true`,\r\n});\r\n\r\nexport default {\r\n  isTruthy,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\nimport operators from './operators';\r\nimport userVal from './UserValidators';\r\nimport generalVal from './General';\r\nimport constants from '../../utils/constants';\r\n\r\nconst {\r\n  and, or, not, perform,\r\n} = operators;\r\nconst AD = constants.securities.APPRAISAL_DETAILS;\r\nconst ADO = constants.securities.APPRAISAL_DETAILS_OTHER;\r\n\r\nconst periodExists = (period) => async () => ({\r\n  result: Boolean(period),\r\n  message: 'Period doesn\\'t exist.',\r\n});\r\n\r\nconst periodLocked = (period, userId, message = null) => async () => {\r\n  const { users } = period;\r\n  if (users) {\r\n    // eslint-disable-next-line no-underscore-dangle\r\n    const userPeriod = users.find((u) => u._id === userId);\r\n    if (userPeriod) {\r\n      return {\r\n        result: Boolean(userPeriod.locked),\r\n        message: message || 'Period is not locked',\r\n      };\r\n    }\r\n  }\r\n  return {\r\n    result: false,\r\n    message: message || 'Period is not locked',\r\n  };\r\n};\r\n\r\nconst itemExists = (item) => async () => ({\r\n  result: Boolean(item),\r\n  message: 'Item doesn\\'t exist.',\r\n});\r\n\r\nconst periodStatus = (period, status) => async () => ({\r\n  result: Boolean(period.status === status),\r\n  message: `Period '${period.name}' status is not valid. Expected (${status})`,\r\n});\r\n\r\nconst itemStatus = (item, status) => async () => ({\r\n  result: Boolean(item.status === status),\r\n  message: `Item '${item.content}' status is not valid. Expected '${status}'.`,\r\n});\r\n\r\nconst itemType = (item, type) => async () => ({\r\n  result: Boolean(item.type === type),\r\n  message: `Item '${item.content}' type is not valid. Expected '${type}'.`,\r\n});\r\n\r\nconst itemSameUser = (item, user) => async () => ({\r\n  result: Boolean(String(item.user) === String(user.id)),\r\n  message: `Item '${item.content}'s user is not the same as '${user.username}'`,\r\n});\r\n\r\nconst itemRelated = (item) => async () => ({\r\n  result: Boolean(item.relatedItemId),\r\n  message: 'Item is related.',\r\n});\r\n\r\nconst itemContentNotNull = (item) => async () => ({\r\n  result: Boolean(item.content.trim().length > 0),\r\n  message: 'Item content is empty',\r\n});\r\n\r\nconst canInsert = (context, period, userId) => async () => {\r\n  const result = perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.create),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.create),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.createFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.createFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nconst canUpdate = (context, period, userId) => async () => {\r\n  const result = perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.update),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.update),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.updateFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.updateFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nconst canDelete = (context, period, userId) => async () => {\r\n  const result = await perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.delete),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.delete),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.deleteFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.deleteFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  periodExists,\r\n  itemExists,\r\n  periodStatus,\r\n  periodLocked,\r\n  itemStatus,\r\n  itemType,\r\n  itemSameUser,\r\n  itemRelated,\r\n  itemContentNotNull,\r\n  canInsert,\r\n  canUpdate,\r\n  canDelete,\r\n};\r\n","import appraisalValidators from './AppraisalValidators';\r\nimport userValidators from './UserValidators';\r\nimport generalValidators from './General';\r\nimport operators from './operators';\r\n\r\nconst {\r\n  and, andSync, or, orSync, not, notSync, perform, performSync,\r\n} = operators;\r\n\r\nconst validate = {\r\n  ...appraisalValidators,\r\n  ...userValidators,\r\n  ...generalValidators,\r\n};\r\n\r\nexport {\r\n  and,\r\n  andSync,\r\n  or,\r\n  orSync,\r\n  not,\r\n  notSync,\r\n  perform,\r\n  performSync,\r\n  validate,\r\n};\r\n","import React from 'react';\r\nimport { Notification } from '../components/notification';\r\nimport Emitter from '../components/shared/Emitter';\r\n\r\n// Global context will store the everything that should be shared across all\r\n// components but i don't want to pass it around as props.\r\nconst GlobalContext = React.createContext({\r\n  user: null,\r\n  connection: null,\r\n  connectionId: null,\r\n  // eslint-disable-next-line no-unused-vars\r\n  Authorize: (code, grant, notification) => false,\r\n  setContext: () => null,\r\n  userPreferences: {\r\n    theme: null,\r\n  },\r\n  notify: (text, type, actions = null) => {\r\n    Emitter.emit('notification-add', {\r\n      onRender: (onDismiss) => (\r\n        // eslint-disable-next-line react/jsx-filename-extension\r\n        <Notification\r\n          text={text}\r\n          type={type}\r\n          actions={actions}\r\n          onDismiss={onDismiss}\r\n        />\r\n      ),\r\n    });\r\n  },\r\n});\r\n\r\nexport default GlobalContext;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst AuthorizationService = {\r\n  getRolesPath: '/api/security/roles',\r\n  getCurrentUserSecuritiesPath: '/api/security/permissions/me',\r\n  getUserSecuritiesPath: (id) => `/api/security/permissions/user/${id}`,\r\n  getOrganizationUsersSecuritiesPath: '/api/security/permissions/organization',\r\n  getRolesSecuritiesPath: '/api/security/permissions/role',\r\n  getPermissionCodesPath: '/api/security/permissions/code',\r\n  addPermissionPath: '/api/security/permissions',\r\n  updatePermissionPath: (id) => `/api/security/permissions/${id}`,\r\n  deletePermissionPath: (id) => `/api/security/permissions/${id}`,\r\n\r\n  async getRoles() {\r\n    try {\r\n      const result = await axios.get(this.getRolesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getCurrentUserSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserSecurities(id) {\r\n    try {\r\n      const result = await axios.get(this.getUserSecuritiesPath(id));\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getOrganizationUsersSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getOrganizationUsersSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getRolesSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getRolesSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getPermissionCodes() {\r\n    try {\r\n      const result = await axios.get(this.getPermissionCodesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addPermission(permission) {\r\n    try {\r\n      const result = await axios.post(this.addPermissionPath, permission);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updatePermission(id, permission) {\r\n    try {\r\n      const result = await axios.put(this.updatePermissionPath(id), permission);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deletePermission(id) {\r\n    try {\r\n      const result = await axios.delete(this.deletePermissionPath(id));\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  // this function is meant to be injected in the context in order to have access to 'this'\r\n  Authorize(code, grant) {\r\n    try {\r\n      if (this.security) {\r\n        const codes = this.security.map((el) => el.code);\r\n        const index = codes.indexOf(code);\r\n        if (index !== -1) {\r\n          return this.security[index].grants.indexOf(grant) !== -1;\r\n        }\r\n      }\r\n      return false;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default AuthorizationService;\r\n","import React from 'react';\r\nimport { DefaultButton } from '@fluentui/react';\r\nimport axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst LoginService = {\r\n  currentUserPath: '/api/me',\r\n  async getCurrentUser() {\r\n    try {\r\n      const response = await axios.get(this.currentUserPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService.notify(`Not logged in. ${(err.response.data && err.response.data.error) || err.message}`,\r\n        'error', (\r\n          // eslint-disable-next-line react/jsx-filename-extension\r\n          <DefaultButton\r\n            as=\"a\"\r\n            href=\"/auth/login\"\r\n          >\r\n            Log in\r\n          </DefaultButton>));\r\n      return null;\r\n    }\r\n  },\r\n};\r\n\r\nexport default LoginService;\r\n","import UserInfoProvider from './UserInfoProvider';\r\n\r\nexport default UserInfoProvider;\r\n","import { useEffect, useState, useContext } from 'react';\r\n\r\nimport LoginService from '../../../services/LoginService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst UserInfoProvider = () => {\r\n  const [verified, setVerified] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function getUser() {\r\n      if (!global.setContext) return setVerified(false);\r\n      if (!global.user && !verified) {\r\n        setVerified(true);\r\n        const user = await LoginService.getCurrentUser();\r\n        if (user) {\r\n          const name = user.displayName || user.username || 'Unknown';\r\n          user.avatar = name.split(/[. ,_-]/).map((n) => n[0]).join('').slice(0, 2)\r\n            .toUpperCase();\r\n        }\r\n        return global.setContext({ ...global, user, userLoaded: true });\r\n      }\r\n      return null;\r\n    }\r\n    getUser();\r\n  }, [verified, global]);\r\n  return null;\r\n};\r\n\r\nexport default UserInfoProvider;\r\n","import UserSecuritiesProvider from './UserSecuritiesProvider';\r\n\r\nexport default UserSecuritiesProvider;\r\n","import { useEffect, useContext } from 'react';\r\nimport AuthorizationService from '../../../services/AuthorizationService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst UserSecuritiesProvider = () => {\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (!global.security && global.user !== null) {\r\n        const result = await AuthorizationService.getSecurities();\r\n        if (result) {\r\n          global.setContext((prev) => ({\r\n            ...prev,\r\n            security: result,\r\n          }));\r\n        }\r\n      }\r\n    }\r\n    run();\r\n  }, [global.user, global.security, global.setContext]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default UserSecuritiesProvider;\r\n","export default {\r\n  root: {\r\n    padding: '3px',\r\n  },\r\n};\r\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#0078d7',\n    themeLighterAlt: '#f3f9fd',\n    themeLighter: '#d1e7f8',\n    themeLight: '#aad2f3',\n    themeTertiary: '#5ca8e7',\n    themeSecondary: '#1a84db',\n    themeDarkAlt: '#006ac1',\n    themeDark: '#005aa3',\n    themeDarker: '#004278',\n    neutralLighterAlt: '#faf9f8',\n    neutralLighter: '#f3f2f1',\n    neutralLight: '#edebe9',\n    neutralQuaternaryAlt: '#e1dfdd',\n    neutralQuaternary: '#d0d0d0',\n    neutralTertiaryAlt: '#c8c6c4',\n    neutralTertiary: '#a19f9d',\n    neutralSecondary: '#605e5c',\n    neutralPrimaryAlt: '#3b3a39',\n    neutralPrimary: '#323130',\n    neutralDark: '#201f1e',\n    black: '#000000',\n    white: '#ffffff',\n    accent: '#ffffff',\n  },\n  type: 'light',\n});\n","import { createTheme } from '@fluentui/react';\n\nconst theme = createTheme({\n  palette: {\n    themePrimary: '#0078d7',\n    themeLighterAlt: '#000509',\n    themeLighter: '#001322',\n    themeLight: '#002340',\n    themeTertiary: '#004781',\n    themeSecondary: '#0068bc',\n    themeDarkAlt: '#1682da',\n    themeDark: '#3693e0',\n    themeDarker: '#66aee8',\n    neutralLighterAlt: '#212121',\n    neutralLighter: '#2a2a2a',\n    neutralLight: '#393939',\n    neutralQuaternaryAlt: '#424242',\n    neutralQuaternary: '#494949',\n    neutralTertiaryAlt: '#686868',\n    neutralTertiary: '#c8c8c8',\n    neutralSecondary: '#d0d0d0',\n    neutralPrimaryAlt: '#dadada',\n    neutralPrimary: '#ffffff',\n    neutralDark: '#f4f4f4',\n    black: '#f8f8f8',\n    white: '#171717',\n    accent: '#ffffff',\n  },\n  type: 'dark',\n  isInverted: true,\n});\n\nexport default theme;\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#268bd2',\n    themeLighterAlt: '#f5fafd',\n    themeLighter: '#d7eaf8',\n    themeLight: '#b6d9f1',\n    themeTertiary: '#74b5e3',\n    themeSecondary: '#3c96d7',\n    themeDarkAlt: '#227cbc',\n    themeDark: '#1d699f',\n    themeDarker: '#154d75',\n    neutralLighterAlt: '#f6efdd',\n    neutralLighter: '#f2ebd9',\n    neutralLight: '#e8e2d1',\n    neutralQuaternaryAlt: '#d8d2c2',\n    neutralQuaternary: '#cec9b9',\n    neutralTertiaryAlt: '#c6c1b2',\n    neutralTertiary: '#585959',\n    neutralSecondary: '#363737',\n    neutralPrimaryAlt: '#2e2f2f',\n    neutralPrimary: '#000000',\n    neutralDark: '#151515',\n    black: '#0b0b0b',\n    white: '#fdf6e3',\n    accent: '#ffffff',\n  },\n});\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#ffffff',\n    themeLighterAlt: '#767676',\n    themeLighter: '#a6a6a6',\n    themeLight: '#c8c8c8',\n    themeTertiary: '#d0d0d0',\n    themeSecondary: '#dadada',\n    themeDarkAlt: '#eaeaea',\n    themeDark: '#f4f4f4',\n    themeDarker: '#f8f8f8',\n    neutralLighterAlt: '#333839',\n    neutralLighter: '#3a4041',\n    neutralLight: '#464d4e',\n    neutralQuaternaryAlt: '#4e5456',\n    neutralQuaternary: '#545b5d',\n    neutralTertiaryAlt: '#6f7679',\n    neutralTertiary: '#f3f3f3',\n    neutralSecondary: '#f5f5f5',\n    neutralPrimaryAlt: '#f7f7f7',\n    neutralPrimary: '#ededed',\n    neutralDark: '#fbfbfb',\n    black: '#fdfdfd',\n    white: '#2b2f30',\n    accent: '#000000',\n  },\n});\n","import lightTheme from './lightTheme';\r\nimport darkTheme from './darkTheme';\r\nimport warmTheme from './warmTheme';\r\nimport blackWhiteTheme from './blackWhiteTheme';\r\n\r\nconst selectTheme = (theme) => {\r\n  const localStorageTheme = theme || localStorage.getItem('theme');\r\n  switch (localStorageTheme) {\r\n    case 'light':\r\n      return lightTheme;\r\n    case 'dark':\r\n      return darkTheme;\r\n    case 'warm':\r\n      return warmTheme;\r\n    case 'blackwhite':\r\n      return blackWhiteTheme;\r\n    default:\r\n      return lightTheme;\r\n  }\r\n};\r\n\r\nexport {\r\n  lightTheme,\r\n  darkTheme,\r\n  warmTheme,\r\n  selectTheme,\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAGuElEQVR4nO2aS2waVxSG/3uHVzAm2CBiaCDGE0VJ5RAFlKSLLKo+sqgqxYq6qdRuskj2aStVaqS2UleVsLKLFGXVl6pKUYmyidR20V3VGKM4XkQ4ECeyDZiABwwGLGZuF85MwU8eA0Me34o59zJzzj/3ee4QbMLv9w8YDIb3GGM8AP3m8hcRQsg6gDhj7M9IJLLWUFb/OxAIfE4I+QrA/p562DsEAN9FIpFJAAz4XwAaDAZ/AvCxVp71mF8ikcgnABgBgEAg8AUh5Hu51Gg0wmq1guM4zTxUE1EUUSgUUK1W682fRSKRSeL3+wf0ev0injd7h8MBj8cDSqkmznYLSZLw9OlTZLNZ2SQAeIMaDIZ38Tx4o9H4UgYPAJRSeL1eGI1G2WRjjL1DGWNHZIvValWCZ4whm83WK9a0rV+hlMJqtSrXhJAjOkKIhTEGANDr/5/1crkc5ufn5YoYHh5u2tbP1MdICLG+fG29RXQ7FdjtdhCyMUvKb7VZ24vEjgIA2wfUrO1F4XUXqL9YXV1VmvPLwtDQUP3Ut4UtAqyurnbdqV7y7NkzjI+P71hOAcR7507/oZuamvo5EAgwl8v1o9bOqA2lFENDQ7vWUTr8pUuXWNc96gOSySSWlpYAAISQb1/5WeC1AKdPnz4SDAYTs7OzqFQqWvvTc2itVvsIgK9arUIQBK396TmUUmqQL+Rd4avEKz8G7LoZapVarQZBEFAulwEAZrMZNputr3OLqgmQyWSwsLAASZIa7BzH4eDBg3A4HGo9SlVUESCVSmFxcXHbMlEU8eTJE4iiiAMHDqjxOFXpeAyoVCrKymo3FhcX+3Ka7ViATCbT1OzBGEMmk+n0carTsQClUqkrdXtFxwJsHvTUqtsrOhbAYDDsXek5u2VmtKJjAWw2W1fq9oqOp0G73Y5MJoO1tbVd65nN5razxysrKxAEAevr69DpdLBYLHA4HKossDpuAYQQ8Dy/a/M2mUzgeb7lhKsoipibm0MikUAul0OxWIQgCHA4HDh+/DhMJlOn7quzEDIYDDh27BjS6TSy2SzW19cVu91ux8jISMsHrnLwm2cOi8WCy5cvg1KKEydO4Pbt23u2vt1QbSnMcRzcbjfcbjdEUQQhpO1T5p2CBzYWXoVCATabDYODg5iYmEA4HG5bhK7sBjmO60rwwMaG69q1aygUCgA2WsSFCxdgsVjael5fbYf3Cl4mmUwiFAopIpjNZkxMTLQlQt8I0GzwMqlUCqFQCPl8HkD7IlBJktblC62OxVoNXiaVSmFycrJtERhjVc7j8aQZYx8YjcZht9sNnU7VHMmetBu8TLFYxIMHDxAIBGAymaDX68HzPBKJhDIb1WMwGJDP5yGKYlwUxa80PRjpNPh6RkZGcOXKFezfv/GJ49raGsLhMIrF4rb1b9y4QQANxwA1gwfaHxM0EUDt4GXS6TRCoZCS3pdFGBwc3PE/uwogiiIEQUA2m0WhUFBlOyuKImKxWNdyA+l0GpOTkw0inD9/vuHrsHp2FGBpaQkzMzOIx+OYn5/H3NwclpeXO9qAyMF3snRthlZE2CIAYwyJRALJZLLhjY+NjeHq1au4ePEiRkdHW3aqV8HLbO4O+/bt21aEBgHk4FdWVrbc0Ol0glIKQgjOnTsHn8/XtDNyn+9V8DLLy8vbilA/JijtORAIfPP48eMdzweTySQOHToEp9MJAOB5Htlsds/zxF6/+c2USqUt64TR0VGk0+lfHz16lJUFoMPDw19v9+ZlGGOYnp6Gx+NR8vs8zyOfzyOXy237H62DlymVSpiZmcHJkydhMpnAGMOdO3feXFhY+IEDgGAw+GWlUnl3rxtJkoRoNNoggs/n21aEfgleplQqIRqNolwuIxwOI5fL+Vwu12/cmTNnrJIk/Q6gqYylLEJ9d/D5fBAEQekOer0e4+PjOHr0KGKxGGq1WtcCa4VyuYxYLKYslgDc51wu14cAPm3lRpIkYXp6ukGEsbExOJ1OOBwOnD17FjzPw+v1QhAE5WPqfoMQ8i8FwLfz51qthuvXr2N2dlaxeTwe+P1+ZfnJGNvxzLAfIIToOLfb/T6At9u5gSRJiEQi0Ov18Hq9DYukXC6Hmzdv4uHDh2r5qzqEkL873vuKoohbt27h7t27OHz4MAYGBpDJZBCPx/vyJGgzqm3+S6US7t+/r9btekbfpMS04rUAWjugNZQxVt272ssJY6xKCSFTWjuiFZIk/Uunpqb+IIT8pLUzvYYx9mM0Gv1LyQqfOnXqPUmS3gLQ3hnTi0ORUvrPvXv3/gSA/wDZmkXYs+fHBwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { ChoiceGroup, Stack, Text } from '@fluentui/react';\r\nimport React, { useContext, useState } from 'react';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\nimport { selectTheme } from '../../../themes';\r\nimport darkImg from './theme_dark_icon.png';\r\nimport lightImg from './theme_light_icon.png';\r\nimport solarizedImg from './theme_solarized_icon.png';\r\nimport blackWhiteImg from './theme_blackwhite_icon.png';\r\n\r\nconst SelectTheme = () => {\r\n  const global = useContext(GlobalContext);\r\n  const [theme, setTheme] = useState(global.userPreferences.theme.type);\r\n  const [items] = useState([\r\n    {\r\n      key: 'light',\r\n      text: 'Light',\r\n      imageSrc: lightImg,\r\n      selectedImageSrc: lightImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'warm',\r\n      text: 'Warm',\r\n      imageSrc: solarizedImg,\r\n      selectedImageSrc: solarizedImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'dark',\r\n      text: 'Dark',\r\n      imageSrc: darkImg,\r\n      selectedImageSrc: darkImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'blackwhite',\r\n      text: 'Dark Black&White',\r\n      imageSrc: blackWhiteImg,\r\n      selectedImageSrc: blackWhiteImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n  ]);\r\n\r\n  const handleChange = (evt, option) => {\r\n    if (option && option.key) {\r\n      setTheme(option.key);\r\n      localStorage.setItem('theme', option.key);\r\n      global.setContext((prev) => ({\r\n        ...prev,\r\n        userPreferences: {\r\n          ...global.userPreferences,\r\n          theme: selectTheme(option.key),\r\n        },\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Stack verticalAlign=\"start\" tokens={{ childrenGap: 16 }}>\r\n      <Text variant=\"large\">Select color theme:</Text>\r\n      <ChoiceGroup\r\n        options={items}\r\n        selectedKey={theme}\r\n        onChange={handleChange}\r\n      />\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default SelectTheme;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Modal, Stack, StackItem,\r\n} from '@fluentui/react';\r\nimport SelectTheme from '../../../shared/select-theme/SelectTheme';\r\n\r\nconst ChooseThemeModal = ({ isOpen, setOpen }) => (\r\n  <Modal\r\n    isOpen={isOpen}\r\n    onDismiss={() => setOpen(false)}\r\n    isBlocking={false}\r\n    styles={{\r\n      scrollableContent: {\r\n        minWidth: 300,\r\n        minHeight: 300,\r\n        height: 300,\r\n      },\r\n    }}\r\n  >\r\n    <Stack\r\n      style={{\r\n        height: '100%',\r\n        padding: '16px',\r\n      }}\r\n      horizontalAlign=\"space-evenly\"\r\n      verticalAlign=\"center\"\r\n    >\r\n      <StackItem grow={1}>\r\n        <SelectTheme />\r\n      </StackItem>\r\n      <StackItem align=\"center\">\r\n        <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n      </StackItem>\r\n    </Stack>\r\n  </Modal>\r\n);\r\n\r\nChooseThemeModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChooseThemeModal;\r\n","import React, { useContext, useState } from 'react';\nimport {\n  Persona,\n  PersonaSize,\n  Stack,\n  Text,\n  Link as FluidLink,\n  Callout,\n  Separator,\n  ActionButton,\n  makeStyles,\n  useKeytipRef,\n} from '@fluentui/react';\nimport keytipStyles from '../../../../styles/keytipStyles';\nimport GlobalContext from '../../../../services/GlobalContext';\nimport ChooseThemeModal from '../choose-theme-modal/ChooseThemeModal';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '40px',\n    width: '200px',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    justifyContent: 'center',\n  },\n  link: {\n    color: theme.palette.accent,\n    textAlign: 'center',\n    display: 'block',\n    paddingRight: '16px',\n  },\n  fluidLink: {\n    color: theme.palette.accent,\n  },\n  usernameText: {\n    overflow: 'hidden',\n    paddingRight: '8px',\n    textDecoration: 'none',\n    color: theme.palette.accent,\n  },\n  callout: {\n    minWidth: '200px',\n    minHeight: '100px',\n    padding: '16px',\n  },\n}));\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const [calloutVisible, setCalloutVisible] = useState(false);\n  const [themeModalOpen, setThemeModalOpen] = useState(false);\n  const global = useContext(GlobalContext);\n  const userLinkRef = useKeytipRef({\n    keytipProps: {\n      styles: keytipStyles,\n      content: 'I',\n      keySequences: ['i'],\n      onExecute: (el) => el.click(),\n    },\n  });\n  const displayName = global.user\n    ? (global.user.displayName || global.user.username)\n    : 'Unknown';\n\n  const handleCalloutToggle = () => setCalloutVisible((prev) => !prev);\n\n  return (\n    <div className={classes.root}>\n      {\n        global.user\n          ? (\n            <FluidLink\n              ref={userLinkRef}\n              onClick={handleCalloutToggle}\n              style={{\n                textDecoration: 'none',\n              }}\n              id=\"persona\"\n            >\n              <Stack verticalAlign=\"center\" wrap={false} horizontal>\n                <Text className={classes.usernameText}>{global.user.username}</Text>\n                <Persona\n                  size={PersonaSize.size32}\n                  text={displayName}\n                  hidePersonaDetails\n                  className={classes.fluidLink}\n                  styles={{\n                    root: {\n                      marginRight: '18px',\n                    },\n                  }}\n                />\n              </Stack>\n              {\n                calloutVisible && (\n                <Callout\n                  role=\"alertdialog\"\n                  gapSpace={0}\n                  target=\"#persona\"\n                  setInitialFocus\n                  isBeakVisible={false}\n                  onDismiss={handleCalloutToggle}\n                >\n                  <Stack className={classes.callout}>\n                    <Stack horizontalAlign=\"space-between\" horizontal>\n                      <Text variant=\"medium\">Admin Tools</Text>\n                      <FluidLink href=\"/auth/logout\">\n                        <Text variant=\"medium\">Sign Out</Text>\n                      </FluidLink>\n                    </Stack>\n                    <Separator />\n                    <Stack horizontal horizontalAlign=\"space-evenly\" wrap>\n                      <Persona size={PersonaSize.size56} />\n                      <Text variant=\"mediumPlus\">{global.user.username}</Text>\n                    </Stack>\n                    <Separator />\n                    <ActionButton\n                      onClick={() => setThemeModalOpen(true)}\n                      iconProps={{\n                        iconName: 'Brush',\n                      }}\n                    >\n                      Chgange Layout\n                    </ActionButton>\n                    <Separator />\n                  </Stack>\n                  <ChooseThemeModal\n                    isOpen={themeModalOpen}\n                    setOpen={setThemeModalOpen}\n                  />\n                </Callout>\n                )\n              }\n            </FluidLink>\n          )\n          : (\n            <div>\n              {\n                global.userLoaded\n                  ? (\n                    <FluidLink className={classes.link} href=\"/auth/login\">\n                      <Text variant=\"mediumPlus\">\n                        Login\n                      </Text>\n                    </FluidLink>\n                  )\n                  : null\n              }\n            </div>\n          )\n      }\n    </div>\n  );\n};\n\nexport default UserInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Icon, IconButton, makeStyles, Text, useTheme,\n} from '@fluentui/react';\nimport UserInfo from '../user-info/UserInfo';\nimport keytipStyles from '../../../../styles/keytipStyles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    backgroundColor: theme.palette.themeDark,\n    height: '40px',\n    width: '100vw',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    justifyContent: 'space-between',\n  },\n  flex: {\n    height: '40px',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    justifyContent: 'start',\n  },\n  icon: {\n    height: '40px',\n    color: theme.palette.accent,\n  },\n  text: {\n    width: '150px',\n    alignSelf: 'center',\n    textAlign: 'center',\n    color: theme.palette.accent,\n  },\n}));\n\nconst AppBar = ({ toggleDrawer }) => {\n  const theme = useTheme();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.flex}>\n        <IconButton\n          keytipProps={{\n            styles: keytipStyles,\n            content: 'M',\n            keySequences: ['m'],\n            onExecute: toggleDrawer,\n            hasMenu: true,\n          }}\n          className={classes.icon}\n          iconProps={{ iconName: 'GlobalNavButton' }}\n          title=\"Global Nav\"\n          ariaLabel=\"Global Navigation\"\n          onClick={toggleDrawer}\n        />\n        <Text className={classes.text} variant=\"large\" block nowrap>\n          <Icon\n            iconName=\"Glasses\"\n            styles={{\n              root: {\n                fontSize: '25px',\n                padding: theme.spacing.s2,\n              },\n            }}\n          />\n          Admin Tools\n        </Text>\n      </div>\n      <UserInfo />\n    </div>\n  );\n};\n\nAppBar.propTypes = {\n  toggleDrawer: PropTypes.func.isRequired,\n};\n\nexport default AppBar;\n","import AppBar from './AppBar';\n\nexport default AppBar;\n","/* eslint-disable react/prop-types */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport {\n  Panel, PanelType, classNamesFunction, Icon, ActionButton, Nav,\n} from '@fluentui/react';\nimport constants from '../../../../utils/constants';\nimport GlobalContext from '../../../../services/GlobalContext';\nimport keytipStyles from '../../../../styles/keytipStyles';\n\nconst classNames = classNamesFunction();\nconst styles = () => ({\n  root: {\n  },\n  icon: {\n    height: '40px',\n    width: '100%',\n    borderBottom: '1px solid',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n  },\n  nav: {\n    marginTop: '40px',\n  },\n});\n\nconst Drawer = ({ isOpen, toggleDrawer }) => {\n  const classes = classNames(styles);\n  const global = useContext(GlobalContext);\n  const history = useHistory();\n\n  const handleLinkClick = (evt, link) => {\n    evt.preventDefault();\n    history.push(link.url);\n    toggleDrawer();\n  };\n\n  const [navLinks] = useState([\n    {\n      links: [\n        {\n          name: 'Home',\n          url: '/',\n          icon: 'Home',\n          keyTipContent: '1',\n          keyTipSequence: ['m', '1'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Appraisals',\n          url: '/appraisals',\n          code: constants.securities.APPRAISAL_PERIODS.code,\n          grant: 'read',\n          icon: 'Feedback',\n          keyTipContent: '2',\n          keyTipSequence: ['m', '2'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Audits',\n          url: '/audits',\n          code: constants.securities.AUDITS.code,\n          grant: 'read',\n          icon: 'ComplianceAudit',\n          keyTipContent: '3',\n          keyTipSequence: ['m', '3'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Reporting',\n          code: constants.securities.REPORTS.code,\n          grant: 'read',\n          keyTipContent: '4',\n          keyTipSequence: ['m', '4'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'Appraisal report',\n              url: '/reporting/appraisal-report',\n              code: constants.securities.REPORTS.code,\n              grant: 'read',\n              icon: 'AutoFillTemplate',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '4', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Custom reports',\n              url: '/reporting/reports',\n              code: constants.securities.REPORTS.code,\n              grant: 'read',\n              icon: 'ReportDocument',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '4', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Templates',\n              url: '/reporting/templates',\n              code: constants.securities.REPORT_TEMPLATES.code,\n              grant: 'read',\n              icon: 'FileTemplate',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '4', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n        {\n          name: 'Tasks',\n          code: constants.securities.TASK.code,\n          grant: constants.securities.TASK.grants.read,\n          keyTipContent: '5',\n          keyTipSequence: ['m', '5'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'Dashboard',\n              url: '/tasks',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'ViewDashboard',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '5', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Planning',\n              url: '/tasks/planning',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'PlanView',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '5', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Rules',\n              url: '/tasks/task-rules',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'AustralianRules',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '5', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Flows',\n              url: '/tasks/task-flows',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'Flow',\n              keyTipContent: '4',\n              keyTipSequence: ['m', '5', '4'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n        {\n          name: 'Settings',\n          code: constants.securities.SETTINGS.code,\n          grant: 'read',\n          keyTipContent: '6',\n          keyTipSequence: ['m', '6'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'General',\n              url: '/settings',\n              code: constants.securities.SETTINGS.code,\n              grant: 'read',\n              icon: 'Settings',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '6', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Users',\n              url: '/settings/users',\n              code: constants.securities.SETTINGS.code,\n              grant: 'users',\n              icon: 'UserFollowed',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '6', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Permissions',\n              url: '/settings/permissions',\n              code: constants.securities.SETTINGS.code,\n              grant: 'permissions',\n              icon: 'Permissions',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '6', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n      ],\n    },\n  ]);\n\n  const filterLinks = (links) => {\n    const result = [];\n    links.forEach((link) => {\n      if (link.code && link.grant) {\n        if (global.Authorize(link.code, link.grant)) {\n          if (link.links) {\n            // eslint-disable-next-line no-param-reassign\n            link.links = filterLinks(link.links);\n          }\n          result.push(link);\n        }\n      } else {\n        result.push(link);\n      }\n    });\n    return result;\n  };\n\n  const [visibleLinksGroup, setVisibleLinksGroup] = useState([]);\n\n  useEffect(() => {\n    setVisibleLinksGroup([{\n      links: filterLinks(navLinks[0].links),\n    }]);\n  }, [global.security, global.user, global.Authorize]);\n\n  return (\n    <Panel\n      isOpen={isOpen}\n      hasCloseButton={false}\n      type={PanelType.smallFixedNear}\n      isLightDismiss\n      onDismiss={toggleDrawer}\n    >\n      <ActionButton\n        className={classes.icon}\n        onClick={toggleDrawer}\n      >\n        <Icon\n          iconName=\"GlobalNavButton\"\n          style={{ marginLeft: 5 }}\n        />\n      </ActionButton>\n      <Nav\n        className={classes.nav}\n        ariaLabel=\"Global navigation\"\n        selectedKey=\"\"\n        groups={visibleLinksGroup}\n        onRenderLink={(link) => (\n          <ActionButton\n            keytipProps={\n                link.keyTipContent\n                && ({\n                  styles: keytipStyles,\n                  content: link.keyTipContent,\n                  onExecute: (el) => (link.links ? link.isExpanded || el.click() : el.click()),\n                  keySequences: link.keyTipSequence,\n                  hasMenu: link.hasMenu || false,\n                })\n              }\n          >\n            {link.name}\n          </ActionButton>\n        )}\n      />\n    </Panel>\n  );\n};\n\nDrawer.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  toggleDrawer: PropTypes.func.isRequired,\n};\n\nexport default Drawer;\n","import Drawer from './Drawer';\n\nexport default Drawer;\n","import React, { useState } from 'react';\r\nimport { classNamesFunction } from '@fluentui/react';\r\nimport AppBar from './components/app-bar';\r\nimport Drawer from './components/drawer';\r\n\r\nconst classNames = classNamesFunction();\r\nconst styles = {\r\n  root: {\r\n    position: 'fixed',\r\n    zIndex: 1002,\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n};\r\n\r\nexport default function Navigation() {\r\n  const classes = classNames(styles);\r\n  const [navPaneOpened, setOpened] = useState(false);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar toggleDrawer={() => setOpened(true)} />\r\n      <Drawer isOpen={navPaneOpened} toggleDrawer={() => setOpened((prev) => !prev)} />\r\n    </div>\r\n  );\r\n}\r\n","import AuthorizationRedirectComponent from './AuthorizationRedirectComponent';\r\n\r\nexport default AuthorizationRedirectComponent;\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\nimport NotificationService from '../../../services/NotificationService';\r\n\r\nconst AuthorizationRedirectComponent = ({\r\n  code, grant, to, failureNotification, ...props\r\n}) => {\r\n  const global = useContext(GlobalContext);\r\n  const [access, setAccess] = useState(false);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [notified, setNotified] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const isAuthorized = global.Authorize(code, grant);\r\n    setAccess(isAuthorized);\r\n    if (global.security) {\r\n      setRedirect(!isAuthorized);\r\n      if (failureNotification && !isAuthorized && !notified) {\r\n        NotificationService.notify(failureNotification.content);\r\n        setNotified(true);\r\n      }\r\n    }\r\n  }, [global, code, grant, failureNotification, notified]);\r\n\r\n  let result = null;\r\n\r\n  if (access) {\r\n    result = props.children;\r\n  }\r\n\r\n  if (redirect) {\r\n    result = (<Redirect to={to || '/'} />);\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport default AuthorizationRedirectComponent;\r\n","import AppraisalDetailsInfo from './AppraisalDetailsInfo';\r\n\r\nexport default AppraisalDetailsInfo;\r\n","import { useEffect } from 'react';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\n\r\nconst AppraisalDetailsInfo = ({ periodId, setPeriodDetails }) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      const data = await AppraisalService.getItems(periodId);\r\n      setPeriodDetails(data);\r\n    }\r\n    run();\r\n  }, [periodId, setPeriodDetails]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default AppraisalDetailsInfo;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst UserService = {\r\n  baseUrl: '/api/users',\r\n  teamUsersPath: '/api/users/team-users',\r\n  updateUsersPath: (id) => `/api/users/${id}`,\r\n  getUserPath: (id) => `/api/users/user/${id}`,\r\n  getUserOrganizationsPath: '/api/users/organizations',\r\n  getUserTeamMembersPath: '/api/users/team-members',\r\n  getSettingsUsersPath: '/api/settings/users',\r\n  putSettingsUsersPath: (id) => `/api/settings/users/${id}`,\r\n\r\n  normalizeUser(user) {\r\n    const u = user;\r\n    if (u.role && u.role.id) {\r\n      u.role = u.role.id;\r\n    }\r\n    if (u.organization && u.organization.id) {\r\n      u.organization = u.organization.id;\r\n    }\r\n    u.organizations = u.organizations.map((o) => o.id || o);\r\n    return u;\r\n  },\r\n\r\n  async getSettingsUsers() {\r\n    try {\r\n      const response = await axios.get(this.getSettingsUsersPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUser(id) {\r\n    try {\r\n      const response = await axios.get(this.getUserPath(id));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUser(id, user) {\r\n    try {\r\n      const response = await axios.put(this.updateUsersPath(id), this.normalizeUser(user));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}\\n`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateSettingsUser(id, user) {\r\n    try {\r\n      const response = await axios.put(this.putSettingsUsersPath(id), this.normalizeUser(user));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}\\n`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserOrganizations() {\r\n    try {\r\n      const response = await axios.get(this.getUserOrganizationsPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserTeamMembers() {\r\n    try {\r\n      const response = await axios.get(this.getUserTeamMembersPath);\r\n      return response.data;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n};\r\nexport default UserService;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { BasePickerListBelow, makeStyles, Text } from '@fluentui/react';\r\nimport { useScreenClass } from 'react-grid-system';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  item: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing.m,\r\n    color: theme.palette.neutralSecondary,\r\n    marginTop: theme.spacing.s2,\r\n    '& > *': {\r\n      padding: theme.spacing.s2,\r\n      border: `1px solid ${theme.palette.themeSecondary}`,\r\n    },\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.m,\r\n  },\r\n  root: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralTertiary,\r\n      '& ::placeholder': {\r\n        color: theme.palette.neutralTertiary,\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nconst defaultGetText = (item) => item.text;\r\n\r\nconst defaultRenderSuggestionItem = (getText, classes) => (item) => (\r\n  <div className={classes.suggestion}>\r\n    <Text variant=\"mediumPlus\">{getText(item)}</Text>\r\n  </div>\r\n);\r\n\r\nconst defaultRenderItem = (getText, classes) => (item) => (\r\n  <div className={classes.item} key={item.key}>\r\n    <Text variant=\"mediumPlus\">{getText(item)}</Text>\r\n  </div>\r\n);\r\n\r\nconst SinglePicker = ({\r\n  options,\r\n  getTextFromItem,\r\n  selected,\r\n  onSelect,\r\n  onRenderItem,\r\n  onRenderSuggestionsItem,\r\n  placeholder = 'Select or search a value in the list...',\r\n  className,\r\n  styles,\r\n  maxHeight,\r\n}) => {\r\n  const classes = useStyles();\r\n  const sc = useScreenClass();\r\n  const [_selected, setSelected] = useState([]);\r\n  const [maxWidth, setMaxwidth] = useState(200);\r\n  const inputRef = useRef();\r\n  const getText = getTextFromItem || defaultGetText;\r\n  const renderItem = onRenderItem || defaultRenderItem(getText, classes);\r\n  const renderSuggestionsItem = onRenderSuggestionsItem\r\n  || defaultRenderSuggestionItem(getText, classes);\r\n\r\n  const handleFilter = (filter, suggestions) => {\r\n    if (filter === '') return suggestions;\r\n    return options.filter(\r\n      (option) => getText(option).toLowerCase().indexOf(filter.toLowerCase()) !== -1,\r\n    );\r\n  };\r\n\r\n  const handleSelect = (item) => {\r\n    if (onSelect) {\r\n      onSelect(item);\r\n    }\r\n    setSelected([item]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (inputRef.current) {\r\n      setMaxwidth(inputRef.current.clientWidth);\r\n    }\r\n  }, [inputRef, sc]);\r\n\r\n  return (\r\n    <div\r\n      ref={inputRef}\r\n      className={`${classes.root} ${className}`}\r\n    >\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder,\r\n        }}\r\n        pickerCalloutProps={{\r\n          styles: {\r\n            root: {\r\n              width: maxWidth,\r\n            },\r\n          },\r\n        }}\r\n        pickerSuggestionsProps={{\r\n          styles: {\r\n            suggestionsContainer: {\r\n              maxHeight,\r\n            },\r\n          },\r\n        }}\r\n        styles={styles}\r\n        selectedItems={selected ? [selected] : _selected}\r\n        onItemSelected={handleSelect}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onResolveSuggestions={handleFilter}\r\n        onRenderItem={({ item }) => renderItem(item)}\r\n        getTextFromItem={getText}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nSinglePicker.propTypes = {\r\n  options: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n  })).isRequired,\r\n  getTextFromItem: PropTypes.func,\r\n  selected: PropTypes.shape({\r\n    key: PropTypes.string,\r\n  }),\r\n  onSelect: PropTypes.func,\r\n  onRenderItem: PropTypes.func,\r\n  onRenderSuggestionsItem: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  className: PropTypes.string,\r\n  styles: PropTypes.shape({\r\n    input: PropTypes.shape({}),\r\n    itemsWrapper: PropTypes.shape({}),\r\n    root: PropTypes.shape({}),\r\n    screenReaderText: PropTypes.shape({}),\r\n    text: PropTypes.shape({}),\r\n  }),\r\n  maxHeight: PropTypes.string,\r\n};\r\n\r\nSinglePicker.defaultProps = {\r\n  getTextFromItem: defaultGetText,\r\n  selected: null,\r\n  onSelect: null,\r\n  onRenderItem: null,\r\n  onRenderSuggestionsItem: null,\r\n  placeholder: 'Select or search a value in the list...',\r\n  className: '',\r\n  styles: null,\r\n  maxHeight: '600px',\r\n};\r\n\r\nexport default SinglePicker;\r\n","import TeamMatesAutocomplete from './TeamMatesAutocomplete';\r\n\r\nexport default TeamMatesAutocomplete;\r\n","import React, { useState, useEffect } from 'react';\r\nimport UserService from '../../../services/UserService';\r\nimport SinglePicker from '../single-picker/SinglePicker';\r\n\r\nconst TeamMatesAutocomplete = ({ onUserSelect }) => {\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await UserService.getUserTeamMembers();\r\n      if (mounted) setUsers(data);\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const handleSelect = (value) => {\r\n    if (onUserSelect) { onUserSelect(value.data); }\r\n  };\r\n\r\n  const autocomplete = (\r\n    <SinglePicker\r\n      placeholder=\"Select or search for a user\"\r\n      options={users.map((u) => ({\r\n        key: u.id,\r\n        data: u,\r\n      }))}\r\n      getTextFromItem={(u) => u.data.username}\r\n      onSelect={handleSelect}\r\n      onRenderItem={() => null}\r\n    />\r\n  );\r\n\r\n  return (\r\n    autocomplete\r\n  );\r\n};\r\n\r\nexport default TeamMatesAutocomplete;\r\n","import React, { useCallback, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport TeamMatesAutocomplete from '../../../shared/team-mates-autocomplete';\r\n\r\nconst AppraisalUserRedirect = ({ defaultValue }) => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const [selectedUser, setSelectedUser] = useState(defaultValue || null);\r\n\r\n  const handleSelect = useCallback((user) => {\r\n    if (user) return history.push(`/appraisals/${id}/user/${user.id}`);\r\n    return setSelectedUser(user);\r\n  }, [history, id]);\r\n\r\n  return (\r\n    <>\r\n      <TeamMatesAutocomplete\r\n        value={selectedUser}\r\n        onUserSelect={(user) => handleSelect(user)}\r\n        defaultValue={defaultValue}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nAppraisalUserRedirect.propTypes = {\r\n  defaultValue: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }),\r\n};\r\n\r\nAppraisalUserRedirect.defaultProps = {\r\n  defaultValue: null,\r\n};\r\n\r\nexport default AppraisalUserRedirect;\r\n","import AppraisalUserRedirect from './AppraisalUserRedirect';\r\n\r\nexport default AppraisalUserRedirect;\r\n","import AuthorizationComponent from './AuthorizationComponent';\r\n\r\nexport default AuthorizationComponent;\r\n","import { useContext, useState, useEffect } from 'react';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst AuthorizationComponent = ({\r\n  code, grant, onReject, ...props\r\n}) => {\r\n  const global = useContext(GlobalContext);\r\n  const [access, setAccess] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setAccess(global.Authorize(code, grant));\r\n  }, [global, code, grant]);\r\n\r\n  if (access) {\r\n    return props.children;\r\n  } if (onReject) {\r\n    return onReject();\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default AuthorizationComponent;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  chip: {\r\n    borderRadius: '16px',\r\n    textAlign: 'center',\r\n    verticalAlign: 'middle',\r\n  },\r\n}));\r\n\r\nconst Chip = ({ style, children, className }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={`${className} ${classes.chip}`} style={style}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nChip.propTypes = {\r\n  style: PropTypes.shape({}),\r\n  className: PropTypes.string,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.any.isRequired,\r\n};\r\n\r\nChip.defaultProps = {\r\n  className: '',\r\n  style: {},\r\n};\r\n\r\nexport default Chip;\r\n","import Chip from './Chip';\r\n\r\nexport default Chip;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  Callout,\r\n  DefaultButton,\r\n  makeStyles,\r\n  Separator,\r\n  Stack,\r\n  Text,\r\n  TextField,\r\n} from '@fluentui/react';\r\nimport { useScreenClass } from 'react-grid-system';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  validate, perform, not, and, or,\r\n} from '../../../../services/validators';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  calloutPrefix: {\r\n    boxShadow: theme.effects.elevation64,\r\n  },\r\n}));\r\n\r\nconst CustomPrefix = ({ children, id }) => {\r\n  const classes = useStyles();\r\n  const [isCalloutVisible, setIsCalloutVisible] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <ActionButton\r\n        id={`prefix-${id}`}\r\n        tabIndex={-1}\r\n        iconProps={{\r\n          iconName: 'Info',\r\n        }}\r\n        onClick={() => setIsCalloutVisible((prev) => !prev)}\r\n      />\r\n      {\r\n        isCalloutVisible\r\n          ? (\r\n            <Callout\r\n              className={classes.calloutPrefix}\r\n              target={`#prefix-${id}`}\r\n              setInitialFocus\r\n              onDismiss={() => setIsCalloutVisible(false)}\r\n              role=\"alertdialog\"\r\n            >\r\n              <Stack\r\n                horizontalAlign=\"start\"\r\n                tokens={{\r\n                  childrenGap: 4,\r\n                }}\r\n                style={{\r\n                  padding: '20px',\r\n                }}\r\n              >\r\n                {children}\r\n                <DefaultButton onClick={() => setIsCalloutVisible(false)}>Close</DefaultButton>\r\n              </Stack>\r\n            </Callout>\r\n          )\r\n          : null\r\n      }\r\n    </>\r\n  );\r\n};\r\n\r\nconst CustomSuffix = ({ menuProps }) => (\r\n  <ActionButton\r\n    tabIndex={-1}\r\n    // onRenderMenuIcon={() => null}\r\n    iconProps={{\r\n      iconName: 'MoreVertical',\r\n    }}\r\n    menuProps={menuProps}\r\n  />\r\n);\r\n\r\nconst AppraisalInput = ({\r\n  item,\r\n  idx,\r\n  changeHandler,\r\n  blurHandler,\r\n  removeHandler,\r\n  changeTypeHandler,\r\n  canInsert,\r\n  canUpdate,\r\n  canDelete,\r\n}) => {\r\n  const sc = useScreenClass();\r\n  let multilineTrashold = 80;\r\n  if (sc === 'sm' || sc === 'xl') {\r\n    multilineTrashold = 50;\r\n  } else if (sc === 'xs' || sc === 'md') {\r\n    multilineTrashold = 25;\r\n  }\r\n  const [value, setValue] = useState({ ...item });\r\n  const [modified, setModified] = useState(false);\r\n  const [multiline, setMultiline] = useState(item.content.length > multilineTrashold);\r\n  const { userId } = useParams();\r\n  const [validations, setValidations] = useState({\r\n    isRelated: false,\r\n    isDeletable: false,\r\n    isFinished: false,\r\n    inputEditable: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const calls = [\r\n        perform(validate.itemRelated(item), false),\r\n        perform(validate.itemStatus(item, 'Finished'), false),\r\n        perform(and([\r\n          not(validate.itemRelated(item)),\r\n          or([\r\n            not(validate.isTruthy(userId)),\r\n            validate.isTruthy(userId),\r\n          ]),\r\n        ]), false),\r\n      ];\r\n      const [checkRelated, checkFinished, checkEditable] = await Promise.all(calls);\r\n      const isRelated = checkRelated.result;\r\n      const isFinished = checkFinished.result;\r\n      const inputEditable = (canInsert || canUpdate)\r\n      && checkEditable.result;\r\n      const isDeletable = canDelete && !isRelated;\r\n      if (mounted) {\r\n        setValidations({\r\n          isRelated,\r\n          isDeletable,\r\n          isFinished,\r\n          inputEditable,\r\n        });\r\n      }\r\n    }\r\n    setValue({ ...item });\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [item, canInsert, canUpdate, canDelete, userId]);\r\n\r\n  const handleBlur = async (e) => {\r\n    e.persist();\r\n    const mod = modified;\r\n    setModified(false);\r\n    await blurHandler(value, idx, mod);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    if (item.type !== 'Feedback') {\r\n      const newMultiline = e.target.value.length > multilineTrashold;\r\n      if (multiline !== newMultiline) {\r\n        setMultiline(newMultiline);\r\n      }\r\n    }\r\n    setValue({ ...item, content: e.target.value });\r\n    changeHandler({ ...value, content: e.target.value }, idx, !modified);\r\n    setModified(true);\r\n  };\r\n\r\n  const handleTypeChange = (type) => async () => {\r\n    if (item.id !== 0) { await changeTypeHandler(item.id, type); }\r\n  };\r\n\r\n  const handleDelete = async (e) => {\r\n    e.persist();\r\n    setValue({ ...item, content: '' });\r\n    await removeHandler(value, idx);\r\n    setModified(false);\r\n  };\r\n\r\n  const menuProps = {\r\n    shouldFocusOnMount: true,\r\n    shouldFocusOnContainer: true,\r\n    items: [],\r\n  };\r\n\r\n  if (item.type.indexOf('Planned') !== -1) {\r\n    menuProps.items.push({\r\n      key: 'moveAchieved',\r\n      text: 'Move to Achieved',\r\n      iconProps: {\r\n        iconName: 'ChevronLeftSmall',\r\n      },\r\n      onClick: handleTypeChange(item.type.replace('Planned', 'Achieved')),\r\n    });\r\n  }\r\n\r\n  if (item.type.indexOf('Achieved') !== -1) {\r\n    menuProps.items.push({\r\n      key: 'movePlanned',\r\n      text: 'Move to Planned',\r\n      iconProps: {\r\n        iconName: 'ChevronRightSmall',\r\n      },\r\n      onClick: handleTypeChange(item.type.replace('Achieved', 'Planned')),\r\n    });\r\n  }\r\n\r\n  menuProps.items.push({\r\n    key: 'delete',\r\n    text: 'Delete',\r\n    iconProps: {\r\n      iconName: 'Delete',\r\n    },\r\n    disabled: !validations.isDeletable,\r\n    onClick: handleDelete,\r\n  });\r\n\r\n  const tooltip = (\r\n    <Stack\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: '3',\r\n      }}\r\n    >\r\n      {\r\n        validations.isRelated\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  This item was added automatically from previous appraisals\r\n                </Text>\r\n              </Stack.Item>\r\n              <Stack.Item align=\"stretch\">\r\n                <Separator />\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n      <Text variant=\"medium\">\r\n        <strong>Created user:</strong>\r\n        {' '}\r\n        {item.createdUser && item.createdUser.username}\r\n      </Text>\r\n      <Text variant=\"medium\">\r\n        <strong>Created date:</strong>\r\n        {' '}\r\n        {item.createdDate && new Date(item.createdDate).toLocaleString()}\r\n      </Text>\r\n      <Stack.Item align=\"stretch\">\r\n        <Separator />\r\n      </Stack.Item>\r\n      {\r\n        item.modifiedUser\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  <strong>Modified user:</strong>\r\n                  {' '}\r\n                  {item.modifiedUser && item.modifiedUser.username}\r\n                </Text>\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n      {\r\n        item.modifiedUser\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  <strong>Modified date:</strong>\r\n                  {' '}\r\n                  {item.modifiedDate && new Date(item.modifiedDate).toLocaleString()}\r\n                </Text>\r\n              </Stack.Item>\r\n              <Stack.Item align=\"stretch\">\r\n                <Separator />\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n    </Stack>\r\n  );\r\n\r\n  return item.type !== 'Feedback'\r\n    ? (\r\n      <TextField\r\n        id={`app-item-${item.type.toLowerCase()}-${idx}`}\r\n        value={value.content}\r\n        resizable\r\n        multiline={multiline}\r\n        styles={{\r\n          prefix: {\r\n            backgroundColor: 'transparent',\r\n            padding: '0',\r\n          },\r\n          suffix: {\r\n            backgroundColor: 'transparent',\r\n            padding: '0',\r\n          },\r\n          field: {\r\n            padding: '0',\r\n          },\r\n        }}\r\n        onRenderPrefix={() => (item.id !== 0 ? <CustomPrefix id={`${item.type}-${idx}`}>{tooltip}</CustomPrefix> : null)}\r\n        onRenderSuffix={() => (item.id !== 0 ? <CustomSuffix menuProps={menuProps} /> : null)}\r\n        autoAdjustHeight\r\n        autoComplete=\"off\"\r\n        onChange={handleChange}\r\n        onBlur={handleBlur}\r\n        readOnly={!validations.inputEditable}\r\n        iconProps={validations.isRelated ? {\r\n          iconName: 'History',\r\n          style: {\r\n            position: 'relative',\r\n            alignSelf: 'center',\r\n            bottom: 0,\r\n            right: 0,\r\n            paddingRight: 0,\r\n            marginLeft: '8px',\r\n          },\r\n        } : null}\r\n      />\r\n    )\r\n    : (\r\n      <TextField\r\n        id={`app-item-${item.type.toLowerCase()}-${idx}`}\r\n        value={value.content}\r\n        multiline\r\n        autoAdjustHeight\r\n        autoComplete=\"off\"\r\n        onChange={handleChange}\r\n        onBlur={handleBlur}\r\n        disabled={!validations.inputEditable}\r\n      />\r\n    );\r\n};\r\n\r\nAppraisalInput.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    status: PropTypes.string,\r\n    type: PropTypes.string,\r\n    content: PropTypes.string,\r\n    relatedItemId: PropTypes.string,\r\n    createdUser: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    })]),\r\n    createdDate: PropTypes.oneOfType([PropTypes.string, PropTypes.objectOf(Date)]),\r\n    modifiedUser: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n    modifiedDate: PropTypes.string,\r\n  }).isRequired,\r\n  idx: PropTypes.number.isRequired,\r\n  changeHandler: PropTypes.func.isRequired,\r\n  blurHandler: PropTypes.func.isRequired,\r\n  removeHandler: PropTypes.func.isRequired,\r\n  changeTypeHandler: PropTypes.func.isRequired,\r\n  canInsert: PropTypes.bool.isRequired,\r\n  canUpdate: PropTypes.bool.isRequired,\r\n  canDelete: PropTypes.bool.isRequired,\r\n};\r\n\r\nCustomPrefix.propTypes = {\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.any.isRequired,\r\n  id: PropTypes.string.isRequired,\r\n};\r\n\r\nCustomSuffix.propTypes = {\r\n  menuProps: PropTypes.shape({}).isRequired,\r\n};\r\n\r\nexport default AppraisalInput;\r\n","import AppraisalInput from './AppraisalInput';\r\n\r\nexport default AppraisalInput;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    padding: theme.spacing.l2,\r\n  },\r\n}));\r\n\r\nconst Box = ({ children, style, className }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div style={style} className={`${classes.box} ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nBox.propTypes = {\r\n  style: PropTypes.shape({}),\r\n  className: PropTypes.string,\r\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\r\n};\r\n\r\nBox.defaultProps = {\r\n  style: {},\r\n  className: '',\r\n};\r\n\r\nexport default Box;\r\n","import Box from './Box';\r\n\r\nexport default Box;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams } from 'react-router-dom';\r\nimport { makeStyles, Stack, Text } from '@fluentui/react';\r\nimport AppraisalInput from '../appraisal-input';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\nimport Box from '../../../shared/box';\r\nimport { validate, perform } from '../../../../services/validators';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  stack: {\r\n    '& > * + *': {\r\n      paddingTop: theme.spacing.s1,\r\n    },\r\n  },\r\n}));\r\n\r\nconst FieldSet = ({\r\n  context,\r\n  items,\r\n  setItems,\r\n  details,\r\n  type,\r\n  setOtherItems,\r\n}) => {\r\n  const minItems = {\r\n    Achieved: 5,\r\n    Planned: 5,\r\n    Training_Planned: 3,\r\n    Training_Achieved: 3,\r\n    SWOT_S: 5,\r\n    SWOT_W: 5,\r\n    SWOT_O: 5,\r\n    SWOT_T: 5,\r\n    Feedback: 1,\r\n  };\r\n\r\n  const labels = {\r\n    Achieved: 'Achieved',\r\n    Planned: 'Planned',\r\n    Training_Planned: 'Planned',\r\n    Training_Achieved: 'Achieved',\r\n    SWOT_S: 'Strengths',\r\n    SWOT_W: 'Weaknesses',\r\n    SWOT_O: 'Opportunities',\r\n    SWOT_T: 'Threats',\r\n    Feedback: 'Remarks / Other feedback',\r\n  };\r\n  const periodId = details.id;\r\n  const classes = useStyles();\r\n  const min = minItems[type] || 0;\r\n  const [validations, setValidations] = useState({\r\n    canInsert: false,\r\n    canUpdate: false,\r\n    canDelete: false,\r\n  });\r\n  const { userId } = useParams();\r\n  const { user } = context;\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      // if we have no userid, we need to check if the period is locked\r\n      let isLocked = !userId\r\n        ? (await validate.periodLocked(details, user.id)()).result\r\n        : false;\r\n      const isFinished = (await validate.periodStatus(details, 'Finished')()).result;\r\n      // Locked is false by default for finished periods\r\n      if (isFinished) isLocked = false;\r\n      // if period is locked, we cannot insert, update or delete items\r\n      if (!isLocked) {\r\n        const canInsert = (await perform(validate\r\n          .canInsert(context, details, userId), false)).result;\r\n        const canUpdate = (await perform(validate\r\n          .canUpdate(context, details, userId), false)).result;\r\n        const canDelete = (await perform(validate\r\n          .canDelete(context, details, userId), false)).result;\r\n        setValidations((prev) => ({\r\n          ...prev,\r\n          canInsert,\r\n          canUpdate,\r\n          canDelete,\r\n        }));\r\n      }\r\n    }\r\n    setItems(AppraisalService.normalizeSet(\r\n      periodId,\r\n      context.user,\r\n      items,\r\n      min,\r\n      type,\r\n    ));\r\n    run();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // CRUD functions\r\n  const addItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.addItemToSet(id, item);\r\n    }\r\n    return AppraisalService.addUserItemToSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const updateItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.updateItemInSet(id, item);\r\n    }\r\n    return AppraisalService.updateUserItemInSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const deleteItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.deleteItemFromSet(id, item);\r\n    }\r\n    return AppraisalService.deleteUserItemFromSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const changeHandler = useCallback((item, idx, firstChange) => {\r\n    if (firstChange) {\r\n      setItems((prev) => {\r\n        const copy = prev.slice();\r\n        copy[idx].content = item.content;\r\n        return AppraisalService.normalizeSet(\r\n          periodId, user, copy, min, type,\r\n        );\r\n      });\r\n    }\r\n  }, [user, periodId, type, min, setItems]);\r\n\r\n  const changeTypeHandler = useCallback(async (itemId, itemType) => {\r\n    if (itemId !== 0 && setOtherItems) {\r\n      const item = items.find((i) => i.id === itemId);\r\n      if (item) {\r\n        item.type = itemType;\r\n        const result = await updateItem(periodId, item);\r\n        if (!result.error) {\r\n          setItems((prev) => (\r\n            AppraisalService.normalizeSet(\r\n              periodId,\r\n              user,\r\n              prev.filter((i) => i.id !== result.value.id),\r\n              min,\r\n              itemType,\r\n            )));\r\n          setOtherItems((prev) => AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            prev.filter((i) => i.content !== '').concat(result.value),\r\n            min,\r\n            itemType,\r\n          ));\r\n        }\r\n      }\r\n    }\r\n  }, [user, setOtherItems, min, items, periodId, setItems, updateItem]);\r\n\r\n  // Handle the remove button press\r\n  const removeHandler = useCallback(async (item, idx) => {\r\n    try {\r\n      if (!Number.isNaN(idx) && idx < items.length) {\r\n        if (item.id !== 0) {\r\n          const result = await deleteItem(periodId, items[idx]);\r\n          if (result.error !== null) {\r\n            throw result.error;\r\n          }\r\n        }\r\n        setItems((prev) => {\r\n          const copy = prev.filter((i) => i.id !== item.id);\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setItems((prev) => {\r\n        const copy = prev.slice();\r\n        copy[idx] = item;\r\n        return AppraisalService.normalizeSet(\r\n          periodId,\r\n          user,\r\n          copy,\r\n          min,\r\n          type,\r\n        );\r\n      });\r\n    }\r\n  }, [user, items, periodId, type, min, deleteItem, setItems]);\r\n\r\n  /*\r\n      Following procedure needs to syncronize the current\r\n    item modification with the database\r\n    whenever user loses focus of the input field.\r\n    (Press Tab or click out).\r\n    I receive the item that i was modifying, it's order in\r\n    the group of inputs (index), and a\r\n    flag saiyng whether it was modified.\r\n   */\r\n  const blurHandler = useCallback(async (item, idx, modified) => {\r\n    // If the element i want to syncronize is valid, meaning it has correct order number and type.\r\n    if (idx < items.length && item.type === type) {\r\n      // I determine if the item is new (if it was earlier saved to the database)\r\n      const isNew = item.id === 0 && item.content;\r\n      // I determine if the item needs to be deleted from the database\r\n      // (is not new and content is empty)\r\n      const isToBeDeleted = item.id !== 0 && item.content === '';\r\n      if (isNew) {\r\n        // I try to add the item to the database.\r\n        const result = await addItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          const copy = prev.slice();\r\n          if (!result.error) {\r\n            copy[idx] = result.value;\r\n          } else {\r\n            copy[idx] = item;\r\n            copy[idx].content = '';\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      } else if (isToBeDeleted) {\r\n        // I try to delete the item from the database:\r\n        const result = await deleteItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          let copy = prev.slice();\r\n          if (!result.error) {\r\n            copy = copy.filter((i) => i.id !== item.id);\r\n          } else if (result.value) {\r\n            copy[idx] = result.value;\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      } else if (!isNew && !isToBeDeleted && modified && item.content !== '') {\r\n        // I try to modify item in the database\r\n        const result = await updateItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          let copy;\r\n          if (result.error) {\r\n            copy = prev.slice();\r\n            if (result.value) copy[idx] = result.value;\r\n          } else {\r\n            copy = prev.map((i) => {\r\n              if (i.id === item.id) {\r\n                return result.value;\r\n              }\r\n              return i;\r\n            });\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      }\r\n    }\r\n  }, [user, items, periodId, type, min, addItem, deleteItem, updateItem, setItems]);\r\n\r\n  return (\r\n    <Box>\r\n      <Stack verticalAlign=\"center\" className={classes.stack}>\r\n        <Stack.Item align=\"center\">\r\n          <Text variant=\"mediumPlus\">{labels[type]}</Text>\r\n        </Stack.Item>\r\n        {items.map((i, idx) => {\r\n          const key = i.id === 0 ? idx : i.id;\r\n          return (\r\n            <Stack.Item\r\n              className={classes.listItem}\r\n              key={key}\r\n            >\r\n              <AppraisalInput\r\n                item={i}\r\n                idx={idx}\r\n                label={labels[type]}\r\n                changeHandler={changeHandler}\r\n                blurHandler={blurHandler}\r\n                removeHandler={removeHandler}\r\n                changeTypeHandler={changeTypeHandler}\r\n                canInsert={validations.canInsert}\r\n                canUpdate={validations.canUpdate}\r\n                canDelete={validations.canDelete}\r\n              />\r\n            </Stack.Item>\r\n          );\r\n        })}\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n\r\nFieldSet.propTypes = {\r\n  context: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n    Authorize: PropTypes.func,\r\n  }).isRequired,\r\n  items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  setItems: PropTypes.func.isRequired,\r\n  details: PropTypes.shape({\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  setOtherItems: PropTypes.func,\r\n};\r\n\r\nFieldSet.defaultProps = {\r\n  setOtherItems: null,\r\n};\r\n\r\nexport default FieldSet;\r\n","import FieldSet from './FieldSet';\r\n\r\nexport default FieldSet;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Icon,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  Separator,\r\n  Text,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport AppraisalUserRedirect from '../appraisal-user-redirect';\r\nimport AuthorizationComponent from '../../../shared/authorization-component';\r\nimport { validate } from '../../../../services/validators';\r\nimport PageHeader from '../../../shared/page-header';\r\nimport Chip from '../../../shared/chip';\r\nimport FieldSet from '../appraisal-field-set';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chipContent: {\r\n    backgroundColor: theme.palette.neutralQuaternary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  lockedChip: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: '#fff',\r\n  },\r\n  lockIcon: {\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  container: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalDetailsDisplay = ({ context, periodDetails }) => {\r\n  const classes = useStyles();\r\n  const [achieved, setAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Achieved'));\r\n  const [planned, setPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Planned'));\r\n  const [trainingPlanned, setTrainingPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Training_Planned'));\r\n  const [trainingAchieved, setTrainingAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Training_Achieved'));\r\n  const [swotS, setSWOTS] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_S'));\r\n  const [swotW, setSWOTW] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_W'));\r\n  const [swotO, setSWOTO] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_O'));\r\n  const [swotT, setSWOTT] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_T'));\r\n  const [feedBack, setFeedBack] = useState(periodDetails.items.filter((el) => el.type === 'Feedback'));\r\n  const [locked, setLocked] = useState(false);\r\n  const { user } = context;\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const isLocked = (await validate.periodLocked(periodDetails, user.id)()).result;\r\n      if (mounted) {\r\n        setLocked(isLocked);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [periodDetails, user.id]);\r\n\r\n  return (\r\n    <Container md className={classes.container}>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <PageHeader text={`Details '${periodDetails.name ? periodDetails.name : ''}'`} />\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={6} lg={4}>\r\n          <AuthorizationComponent code=\"APPRAISAL DETAILS - OTHER USERS\" grant=\"read\">\r\n            <AppraisalUserRedirect />\r\n          </AuthorizationComponent>\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {user\r\n            ? (\r\n              <Chip className={classes.chipContent}>\r\n                <Persona size={PersonaSize.size24} text={user.username} />\r\n              </Chip>\r\n            )\r\n            : null}\r\n        </div>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {\r\n          locked\r\n            ? (\r\n              <Chip className={classes.lockedChip}>\r\n                <Icon className={classes.lockIcon} iconName=\"LockSolid\" />\r\n                <Text variant=\"smallPlus\">Locked</Text>\r\n              </Chip>\r\n            )\r\n            : null\r\n          }\r\n        </div>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Objectives</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={achieved} setItems={setAchieved} type=\"Achieved\" setOtherItems={setPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={planned} setItems={setPlanned} type=\"Planned\" setOtherItems={setAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Trainings</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingAchieved} setItems={setTrainingAchieved} type=\"Training_Achieved\" setOtherItems={setTrainingPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingPlanned} setItems={setTrainingPlanned} type=\"Training_Planned\" setOtherItems={setTrainingAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">SWOT</Text></Separator>\r\n      <Row nogutter>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotS} setItems={setSWOTS} type=\"SWOT_S\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotW} setItems={setSWOTW} type=\"SWOT_W\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotO} setItems={setSWOTO} type=\"SWOT_O\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotT} setItems={setSWOTT} type=\"SWOT_T\" />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <FieldSet context={context} details={periodDetails} items={feedBack} setItems={setFeedBack} type=\"Feedback\" />\r\n        </Col>\r\n      </Row>\r\n      <div style={{ padding: '20px' }} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nAppraisalDetailsDisplay.propTypes = {\r\n  context: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      avatar: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n  }).isRequired,\r\n  periodDetails: PropTypes.shape({\r\n    name: PropTypes.string,\r\n    items: PropTypes.arrayOf(PropTypes.shape({\r\n      type: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n};\r\n\r\nexport default AppraisalDetailsDisplay;\r\n","import AppraisalDetailsDisplay from './AppraisalDetailsDisplay';\r\n\r\nexport default AppraisalDetailsDisplay;\r\n","import AppraisalUserInfo from './AppraisalUserInfo';\r\n\r\nexport default AppraisalUserInfo;\r\n","import { useEffect } from 'react';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\nimport UserService from '../../../../services/UserService';\r\n\r\nconst AppraisalUserInfo = ({\r\n  periodId, userId, setUserDetails, setPeriodDetails,\r\n}) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      /*\r\n        I try to get user's info and set it\r\n        Then i try to get periodInfo and set it\r\n        If i fail, i throw an error\r\n      */\r\n      const userData = await UserService.getUser(userId);\r\n      setUserDetails(userData);\r\n      const periodData = await AppraisalService.getUserItems(periodId, userId);\r\n      setPeriodDetails(periodData);\r\n    }\r\n    run();\r\n  }, [periodId, userId, setPeriodDetails, setUserDetails]);\r\n  return null;\r\n};\r\n\r\nexport default AppraisalUserInfo;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Icon, makeStyles, Persona, PersonaSize, PrimaryButton, Separator, Text,\r\n} from '@fluentui/react';\r\nimport FieldSet from '../appraisal-field-set';\r\nimport AppraisalUserRedirect from '../appraisal-user-redirect';\r\nimport AuthorizationComponent from '../../../shared/authorization-component';\r\nimport constants from '../../../../utils/constants';\r\nimport { validate } from '../../../../services/validators';\r\nimport Chip from '../../../shared/chip';\r\nimport PageHeader from '../../../shared/page-header';\r\n\r\nconst userStyles = makeStyles((theme) => ({\r\n  chipContent: {\r\n    backgroundColor: theme.palette.neutralQuaternary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  lockedChip: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: '#fff',\r\n  },\r\n  lockIcon: {\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  container: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalUserDetails = ({\r\n  context, periodDetails, userDetails, handleLockButton,\r\n}) => {\r\n  const classes = userStyles();\r\n  const [achieved, setAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Achieved'));\r\n  const [planned, setPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Planned'));\r\n  const [trainingPlanned, setTrainingPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Training_Planned'));\r\n  const [trainingAchieved, setTrainingAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Training_Achieved'));\r\n  const [swotS, setSWOTS] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_S'));\r\n  const [swotW, setSWOTW] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_W'));\r\n  const [swotO, setSWOTO] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_O'));\r\n  const [swotT, setSWOTT] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_T'));\r\n  const [feedBack, setFeedBack] = useState(periodDetails.items.filter((el) => el.type === 'Feedback'));\r\n  const [locked, setLocked] = useState(false);\r\n  const [finished, setFinished] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const isLocked = (await validate.periodLocked(periodDetails, userDetails.id)()).result;\r\n      const isFinished = (await validate.periodStatus(periodDetails, 'Finished')()).result;\r\n      if (mounted) {\r\n        setLocked(isLocked);\r\n        setFinished(isFinished);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [periodDetails, userDetails.id]);\r\n\r\n  return (\r\n    <Container md className={classes.container}>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <PageHeader text={`Details '${periodDetails.name ? periodDetails.name : ''}'`} />\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={6} lg={4}>\r\n          <AuthorizationComponent code=\"APPRAISAL DETAILS - OTHER USERS\" grant=\"read\">\r\n            <AppraisalUserRedirect />\r\n          </AuthorizationComponent>\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {userDetails\r\n            ? (\r\n              <Chip className={classes.chipContent}>\r\n                <Persona size={PersonaSize.size24} text={userDetails.username} />\r\n              </Chip>\r\n            )\r\n            : null}\r\n        </div>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {\r\n          locked\r\n            ? (\r\n              <Chip className={classes.lockedChip}>\r\n                <Icon className={classes.lockIcon} iconName=\"LockSolid\" />\r\n                <Text variant=\"smallPlus\">Locked</Text>\r\n              </Chip>\r\n            )\r\n            : null\r\n          }\r\n        </div>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Objectives</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={achieved} setItems={setAchieved} type=\"Achieved\" setOtherItems={setPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={planned} setItems={setPlanned} type=\"Planned\" setOtherItems={setAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Trainings</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingAchieved} setItems={setTrainingAchieved} type=\"Training_Achieved\" setOtherItems={setTrainingPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingPlanned} setItems={setTrainingPlanned} type=\"Training_Planned\" setOtherItems={setTrainingAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">SWOT</Text></Separator>\r\n      <Row nogutter>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotS} setItems={setSWOTS} type=\"SWOT_S\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotW} setItems={setSWOTW} type=\"SWOT_W\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotO} setItems={setSWOTO} type=\"SWOT_O\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotT} setItems={setSWOTT} type=\"SWOT_T\" />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <FieldSet context={context} details={periodDetails} items={feedBack} setItems={setFeedBack} type=\"Feedback\" />\r\n        </Col>\r\n      </Row>\r\n      <AuthorizationComponent\r\n        code={constants.securities.APPRAISAL_DETAILS_OTHER.code}\r\n        grant={constants.securities.APPRAISAL_DETAILS_OTHER.grants.toggleLock}\r\n      >\r\n        {\r\n           !finished\r\n             ? (\r\n               <Row align=\"center\" justify=\"center\">\r\n                 <PrimaryButton\r\n                   primary\r\n                   iconProps={{\r\n                     iconName: locked ? 'Unlock' : 'Lock',\r\n                   }}\r\n                   onClick={handleLockButton}\r\n                   text={locked ? 'Unlock' : 'Lock'}\r\n                 />\r\n               </Row>\r\n             )\r\n             : null\r\n         }\r\n        <div style={{ padding: '20px' }} />\r\n      </AuthorizationComponent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nAppraisalUserDetails.propTypes = {\r\n  context: PropTypes.shape({\r\n\r\n  }).isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  userDetails: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }).isRequired,\r\n  periodDetails: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n    items: PropTypes.arrayOf(PropTypes.shape({\r\n      type: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n  handleLockButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AppraisalUserDetails;\r\n","import AppraisalUserDetails from './AppraisalUserDetails';\r\n\r\nexport default AppraisalUserDetails;\r\n","import AppraisalDetails from './AppraisalDetails';\r\n\r\nexport default AppraisalDetails;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport AppraisalDetailsInfo from './components/appraisal-info';\r\nimport AppraisalDetailsDisplay from './components/appraisal-details-display';\r\nimport AppraisalUserInfo from './components/appraisal-user-info';\r\nimport AppraisalUserDetails from './components/appraisal-user-details-display';\r\nimport AppraisalService from '../../services/AppraisalService';\r\n\r\nconst AppraisalDetails = ({ context }) => {\r\n  const [periodDetails, setPeriodDetails] = useState(null);\r\n  const [userDetails, setUserDetails] = useState(null);\r\n  const periodId = useParams().id;\r\n  const { userId } = useParams();\r\n\r\n  useEffect(() => {\r\n    setPeriodDetails(null);\r\n    setUserDetails(null);\r\n  }, [userId]);\r\n\r\n  /**\r\n   * Handle locking button for user period\r\n   */\r\n  const handleLockButton = async () => {\r\n    if (userId) {\r\n      const result = await AppraisalService.toggleLockPeriod(periodDetails.id, userId);\r\n      setPeriodDetails((prev) => {\r\n        if (prev) {\r\n          return {\r\n            ...prev,\r\n            users: result.users.slice(),\r\n          };\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n  };\r\n\r\n  let display;\r\n  if (!userId) {\r\n    display = (\r\n      <>\r\n        {\r\n          periodDetails === null\r\n            ? <AppraisalDetailsInfo periodId={periodId} setPeriodDetails={setPeriodDetails} />\r\n            : <AppraisalDetailsDisplay context={context} periodDetails={periodDetails} />\r\n        }\r\n      </>\r\n    );\r\n  } else {\r\n    display = (\r\n      <>\r\n        {\r\n          periodDetails === null || userDetails === null\r\n            ? (\r\n              <AppraisalUserInfo\r\n                periodId={periodId}\r\n                userId={userId}\r\n                setUserDetails={setUserDetails}\r\n                setPeriodDetails={setPeriodDetails}\r\n              />\r\n            )\r\n            : (\r\n              <AppraisalUserDetails\r\n                context={context}\r\n                periodDetails={periodDetails}\r\n                userDetails={userDetails}\r\n                handleLockButton={handleLockButton}\r\n              />\r\n            )\r\n}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DocumentTitle title={periodDetails ? periodDetails.name : 'App'}>\r\n      {display}\r\n    </DocumentTitle>\r\n  );\r\n};\r\n\r\nAppraisalDetails.propTypes = {\r\n  context: PropTypes.shape({}).isRequired,\r\n};\r\n\r\nexport default AppraisalDetails;\r\n","import AppraisalDetailsPage from './AppraisalDetailsPage';\r\n\r\nexport default AppraisalDetailsPage;\r\n","import React, { useContext } from 'react';\r\nimport { Container } from 'react-grid-system';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport AppraisalDetails from '../../components/appraisal-details';\r\nimport constants from '../../utils/constants';\r\n\r\nconst AppraisalDetailsPage = () => {\r\n  const global = useContext(GlobalContext);\r\n  return (\r\n    <Container md>\r\n      <AuthorizationRedirectComponent\r\n        code={constants.securities.APPRAISAL_DETAILS.code}\r\n        grant={constants.securities.APPRAISAL_DETAILS.grants.read}\r\n        to=\"/appraisals\"\r\n        failureNotification={{\r\n          type: 'info',\r\n          header: 'No access',\r\n          content: 'You have no access to this page. Please contact your administrator',\r\n        }}\r\n      >\r\n        <AppraisalDetails context={global} />\r\n      </AuthorizationRedirectComponent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppraisalDetailsPage;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack, TextField,\r\n} from '@fluentui/react';\r\n\r\nconst PanelNew = ({ isOpen, setOpen, handleCreate }) => {\r\n  const [val, setVal] = useState('');\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleCreate(val).finally(() => {\r\n      setVal('');\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      type={PanelType.smallFixedFar}\r\n      headerText=\"Create period\"\r\n    >\r\n      <form onSubmit={handleSubmit}>\r\n        <Stack verticalAlign=\"start\">\r\n          <Stack.Item tokens={{\r\n            margin: '10px 0',\r\n          }}\r\n          >\r\n            <TextField\r\n              label=\"Name\"\r\n              value={val}\r\n              autoFocus\r\n              onChange={(e) => {\r\n                const result = e.target.value;\r\n                setVal(result);\r\n              }}\r\n            />\r\n          </Stack.Item>\r\n          <Stack horizontal horizontalAlign=\"space-evenly\">\r\n            <PrimaryButton type=\"submit\">Create</PrimaryButton>\r\n            <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n          </Stack>\r\n        </Stack>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nPanelNew.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleCreate: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default PanelNew;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack, TextField,\r\n} from '@fluentui/react';\r\n\r\nconst PanelEdit = ({\r\n  item, isOpen, setOpen, handleEdit,\r\n}) => {\r\n  const [val, setVal] = useState(item ? item.name : '');\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleEdit(item.id, val).finally(() => {\r\n      setVal('');\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setVal(item ? item.name : '');\r\n  }, [item]);\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      type={PanelType.smallFixedFar}\r\n      headerText=\"Edit period\"\r\n    >\r\n      <form onSubmit={handleSubmit}>\r\n        <Stack verticalAlign=\"start\">\r\n          <Stack.Item tokens={{\r\n            margin: '10px 0',\r\n          }}\r\n          >\r\n            <TextField\r\n              label=\"Name\"\r\n              value={val}\r\n              autoFocus\r\n              onChange={(e) => {\r\n                const result = e.target.value;\r\n                setVal(result);\r\n              }}\r\n            />\r\n          </Stack.Item>\r\n          <Stack horizontal horizontalAlign=\"space-evenly\">\r\n            <PrimaryButton type=\"submit\">Update</PrimaryButton>\r\n            <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n          </Stack>\r\n        </Stack>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nPanelEdit.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  }),\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleEdit: PropTypes.func.isRequired,\r\n};\r\n\r\nPanelEdit.defaultProps = {\r\n  item: null,\r\n};\r\n\r\nexport default PanelEdit;\r\n","/* eslint-disable no-param-reassign */\r\nimport React, {\r\n  useState, useEffect, useContext,\r\n} from 'react';\r\nimport {\r\n  Switch, Route, useRouteMatch, useHistory,\r\n} from 'react-router-dom';\r\nimport {\r\n  Checkbox,\r\n  CommandBar,\r\n  SearchBox,\r\n  SelectionMode,\r\n  Separator,\r\n  Stack,\r\n  Text,\r\n  useTheme,\r\n} from '@fluentui/react';\r\nimport {\r\n  Col, Container, Row, useScreenClass,\r\n} from 'react-grid-system';\r\nimport { downloadBlob } from 'download.js';\r\nimport Table from '../../components/shared/table';\r\nimport AppraisalService from '../../services/AppraisalService';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AppraisalDetailsPage from '../appraisal-details';\r\nimport PageHeader from '../../components/shared/page-header';\r\nimport Chip from '../../components/shared/chip';\r\nimport PanelNew from '../../components/appraisal-list/panel-new/PanelNew';\r\nimport constants from '../../utils/constants';\r\nimport PanelEdit from '../../components/appraisal-list/panel-edit/PanelEdit';\r\nimport NotificationService from '../../services/NotificationService';\r\nimport ReportingService from '../../services/ReportingService';\r\n\r\nconst { APPRAISAL_PERIODS: AP, REPORTS: REP } = constants.securities;\r\n\r\nconst AppraisalsPage = () => {\r\n  const theme = useTheme();\r\n  const history = useHistory();\r\n  const screenClass = useScreenClass();\r\n  const [items, setItems] = useState([]);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [showClosed, setShowClosed] = useState(true);\r\n  const [newPanelOpen, setNewPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const global = useContext(GlobalContext);\r\n  const { path } = useRouteMatch();\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'status',\r\n      name: 'Status',\r\n      fieldName: 'status',\r\n      minWidth: 70,\r\n      maxWidth: 70,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      sort: (a, b) => (a.status > b.status ? -1 : 1),\r\n      onRender: (item) => (\r\n        <Chip\r\n          style={{\r\n            backgroundColor: item.status === 'Finished'\r\n              ? theme.palette.blue\r\n              : theme.palette.green,\r\n            padding: '3px',\r\n          }}\r\n        >\r\n          <Text\r\n            variant=\"xSmall\"\r\n            style={{\r\n              color: '#fff',\r\n            }}\r\n          >\r\n            {item.status}\r\n          </Text>\r\n        </Chip>\r\n      ),\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: 'Name',\r\n      fieldName: 'name',\r\n      data: 'string',\r\n      isResizable: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      minWidth: 100,\r\n      maxWidth: 350,\r\n    },\r\n    {\r\n      key: 'createdUser',\r\n      name: 'Created by',\r\n      fieldName: 'createdUser',\r\n      isPadded: true,\r\n      isResizable: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      filterValueAccessor: (i) => i.createdUser.username,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      data: 'string',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{item.createdUser.username}</div>),\r\n    },\r\n    {\r\n      key: 'createdDate',\r\n      name: 'Created on',\r\n      fieldName: 'createdDate',\r\n      isResizable: true,\r\n      isPadded: true,\r\n      isSortable: true,\r\n      data: 'date',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{new Date(item.createdDate).toLocaleString()}</div>),\r\n    },\r\n  ]);\r\n  const [sortedColumn, setSortedColumn] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      const result = await AppraisalService.getPeriods();\r\n      setItems(result);\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSortedColumn({\r\n      ...columns[3],\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n    });\r\n  }, [columns]);\r\n\r\n  useEffect(() => {\r\n    setFilteredItems(showClosed ? items : items.filter((i) => i.status !== 'Finished'));\r\n  }, [showClosed, items]);\r\n\r\n  const handleItemInvoked = (item) => {\r\n    history.push(`${path}/${item.id}`);\r\n  };\r\n\r\n  const clickFinishHandler = async () => {\r\n    if (selectionDetails.count) {\r\n      const item = selectionDetails.items[0];\r\n      const result = await AppraisalService.finishPeriod(item.id);\r\n      if (result) {\r\n        setItems((prev) => prev.map((i) => (i.id === item.id ? { ...item, status: 'Finished' } : i)));\r\n        NotificationService.notifySuccess(`Period '${item.name}' finished`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreate = async (name) => {\r\n    if (global.user\r\n      && global.user.id\r\n      && global.user.organization\r\n      && global.user.organization.id) {\r\n      const result = await AppraisalService.addPeriod({\r\n        name,\r\n        status: 'Active',\r\n        organizationId: global.user.organization.id,\r\n        createdUser: global.user.id,\r\n      });\r\n      setItems((prev) => prev.slice().concat(result));\r\n      NotificationService.notifySuccess(`Period '${name}' created`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = async (id, name) => {\r\n    if (global.user\r\n      && global.user.id\r\n      && global.user.organization\r\n      && global.user.organization.id\r\n      && global.Authorize(AP.code, AP.grants.update)) {\r\n      const result = await AppraisalService.updatePeriod(id, {\r\n        name,\r\n      });\r\n      setItems((prev) => prev.map((i) => (i.id === result.id ? result : i)));\r\n    }\r\n  };\r\n\r\n  const handleGenerateReport = async (id) => {\r\n    try {\r\n      const reportBlob = await ReportingService.generateAppraisalReport({\r\n        periods: [id],\r\n      });\r\n      if (reportBlob) {\r\n        downloadBlob('appraisal.xlsx', reportBlob);\r\n        NotificationService.notifySuccess('Report generated');\r\n      }\r\n    } catch (err) {\r\n      NotificationService.notifyError('Cannot generate report -', err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route exact path={path}>\r\n          <Container md>\r\n            <Row>\r\n              <Col xs={12}>\r\n                <PageHeader text=\"Appraisals\" />\r\n              </Col>\r\n            </Row>\r\n            <Separator />\r\n            <Row>\r\n              <Col xs={12}>\r\n                <Stack horizontalAlign=\"stretch\">\r\n                  <Row align=\"start\">\r\n                    <Col xs={12} sm={6}>\r\n                      <CommandBar items={[\r\n                        {\r\n                          key: 'openItem',\r\n                          text: 'Open',\r\n                          disabled: selectionDetails.count === 0\r\n                          || !global.Authorize(AP.code, AP.grants.read),\r\n                          iconProps: { iconName: 'OpenFile' },\r\n                          onClick: () => handleItemInvoked(\r\n                            selectionDetails.count\r\n                            && selectionDetails.items[0],\r\n                          ),\r\n                        },\r\n                        {\r\n                          key: 'newItem',\r\n                          text: 'New',\r\n                          disabled: !global.Authorize(AP.code, AP.grants.create),\r\n                          iconProps: { iconName: 'Add' },\r\n                          onClick: () => setNewPanelOpen(true),\r\n                        },\r\n                        {\r\n                          key: 'editItem',\r\n                          text: 'Edit',\r\n                          disabled: selectionDetails.count === 0\r\n                          || !global.Authorize(AP.code, AP.grants.update),\r\n                          iconProps: { iconName: 'Edit' },\r\n                          onClick: () => setEditPanelOpen(true),\r\n                        },\r\n                        {\r\n                          key: 'finishItem',\r\n                          text: 'Finish',\r\n                          disabled: selectionDetails.count === 0\r\n                            || (selectionDetails.count && selectionDetails.items[0].status === 'Finished')\r\n                            || !global.Authorize(AP.code, AP.grants.finish),\r\n                          iconProps: { iconName: 'SaveAndClose' },\r\n                          onClick: clickFinishHandler,\r\n                        },\r\n                        {\r\n                          key: 'generateReport',\r\n                          text: 'Appraisal report',\r\n                          disabled: selectionDetails.count === 0\r\n                            || !global.Authorize(REP.code, REP.grants.read),\r\n                          iconProps: { iconName: 'MobileReport' },\r\n                          onClick: () => handleGenerateReport(\r\n                            selectionDetails.count ? selectionDetails.items[0].id : null,\r\n                          ),\r\n                        },\r\n                      ]}\r\n                      />\r\n                    </Col>\r\n                    <Col xs={12} sm={6}>\r\n                      <Stack horizontalAlign={screenClass === 'xs' ? 'start' : 'end'} horizontal>\r\n                        <Stack verticalAlign=\"center\" horizontalAlign=\"start\">\r\n                          <SearchBox\r\n                            placeholder=\"Search\"\r\n                            styles={{\r\n                              root: {\r\n                                minWidth: 250,\r\n                              },\r\n                            }}\r\n                            value={searchValue}\r\n                            onChange={(e) => setSearchValue(e && e.target ? e.target.value : '')}\r\n                          />\r\n                          <Checkbox\r\n                            label=\"Show closed\"\r\n                            checked={showClosed}\r\n                            onChange={() => setShowClosed((prev) => !prev)}\r\n                            styles={{\r\n                              root: {\r\n                                paddingTop: theme.spacing.s1,\r\n                              },\r\n                            }}\r\n                          />\r\n                        </Stack>\r\n                      </Stack>\r\n                    </Col>\r\n                  </Row>\r\n                  <Separator />\r\n                  <Table\r\n                    items={filteredItems}\r\n                    columns={columns}\r\n                    selectionMode={SelectionMode.single}\r\n                    onItemInvoked={handleItemInvoked}\r\n                    searchValue={searchValue}\r\n                    sortedCol={sortedColumn}\r\n                    setSelectionDetails={setSelectionDetails}\r\n                  />\r\n                  <PanelNew\r\n                    isOpen={newPanelOpen}\r\n                    setOpen={setNewPanelOpen}\r\n                    handleCreate={handleCreate}\r\n                  />\r\n                  <PanelEdit\r\n                    item={selectionDetails.count ? selectionDetails.items[0] : null}\r\n                    isOpen={editPanelOpen}\r\n                    setOpen={setEditPanelOpen}\r\n                    handleEdit={handleEdit}\r\n                  />\r\n                </Stack>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Route>\r\n        <Route exact path={`${path}/:id/user/:userId`}>\r\n          <AppraisalDetailsPage ctx={global} setCtx={global.setContext} />\r\n        </Route>\r\n        <Route path={`${path}/:id`}>\r\n          <AppraisalDetailsPage ctx={global} setCtx={global.setContext} />\r\n        </Route>\r\n      </Switch>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppraisalsPage;\r\n","import AppraisalsPage from './AppraisalsPage';\r\n\r\nexport default AppraisalsPage;\r\n","import SettingsGeneral from './SettingsGeneral';\r\n\r\nexport default SettingsGeneral;\r\n","import React from 'react';\r\n\r\nconst SettingsGeneral = () => (\r\n  <>\r\n    <h1>Settings general</h1>\r\n  </>\r\n);\r\n\r\nexport default SettingsGeneral;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst TeamService = {\r\n  baseUrl: '/api/teams',\r\n\r\n  validate(team) {\r\n    if (!team) throw new Error('Team name missing');\r\n    return true;\r\n  },\r\n\r\n  async getTeams() {\r\n    try {\r\n      const response = await axios.get(this.baseUrl);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addTeam(team) {\r\n    try {\r\n      this.validate(team);\r\n      const response = await axios.post(this.baseUrl, { team });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n};\r\n\r\nexport default TeamService;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ComboBox,\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack,\r\n} from '@fluentui/react';\r\n\r\nconst UserEditPanel = ({\r\n  isOpen, user, setOpen, handleEdit, teams, organizations, roles,\r\n}) => {\r\n  const [selTeams, setSelTeams] = useState([]);\r\n  const [selPrimaryTeam, setSelPrimaryTeam] = useState(null);\r\n  const [selOrganizations, setSelOrganizations] = useState([]);\r\n  const [selRole, setSelRole] = useState(null);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleEdit({\r\n      ...user,\r\n      teams: selTeams,\r\n      team: selPrimaryTeam,\r\n      organizations: selOrganizations,\r\n      role: selRole,\r\n    }).finally(() => {\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  const handleSelect = (item, setFunc) => {\r\n    setFunc((prev) => prev.concat(item));\r\n  };\r\n\r\n  const handleDeselect = (item, setFunc) => {\r\n    setFunc((prev) => prev.filter((i) => i.id !== item.id));\r\n  };\r\n\r\n  const handleMultiCombobox = (setFunc) => (evt, item) => {\r\n    if (item.selected) {\r\n      handleSelect(item.data, setFunc);\r\n    } else {\r\n      handleDeselect(item.data, setFunc);\r\n    }\r\n  };\r\n\r\n  const handleCombobox = (setFunc) => (evt, item) => {\r\n    setFunc(item.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setSelTeams(user.teams);\r\n      setSelPrimaryTeam(user.team);\r\n      setSelOrganizations(user.organizations);\r\n      if (user.role) {\r\n        setSelRole(user.role);\r\n      }\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (selPrimaryTeam?.id && !selTeams.find((t) => t.id === selPrimaryTeam?.id)) {\r\n      setSelPrimaryTeam(null);\r\n    }\r\n  }, [selTeams]);\r\n\r\n  return (\r\n    <>\r\n      <Panel\r\n        isOpen={isOpen}\r\n        onDismiss={() => setOpen(false)}\r\n        type={PanelType.smallFixedFar}\r\n        headerText=\"Edit user\"\r\n      >\r\n        <form onSubmit={handleSubmit}>\r\n          <Stack verticalAlign=\"start\">\r\n            <Stack.Item tokens={{\r\n              margin: '10px 0',\r\n            }}\r\n            >\r\n              <ComboBox\r\n                label=\"Teams\"\r\n                multiSelect\r\n                id=\"user-edit-select-team\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selTeams.map((t) => t.id)}\r\n                onChange={handleMultiCombobox(setSelTeams)}\r\n                options={teams.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Primary team\"\r\n                id=\"user-edit-select-primary-team\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selPrimaryTeam?.id}\r\n                onChange={(evt, option) => setSelPrimaryTeam(option.data)}\r\n                options={selTeams.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Organizations\"\r\n                multiSelect\r\n                id=\"user-edit-select-organizations\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selOrganizations.map((o) => o.id)}\r\n                onChange={handleMultiCombobox(setSelOrganizations)}\r\n                options={organizations.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Role\"\r\n                id=\"user-edit-select-role\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selRole && selRole.id}\r\n                onChange={handleCombobox(setSelRole)}\r\n                options={roles.map((r) => ({\r\n                  key: r.id,\r\n                  text: r.name,\r\n                  data: r,\r\n                }))}\r\n              />\r\n            </Stack.Item>\r\n            <Stack horizontal horizontalAlign=\"space-evenly\">\r\n              <PrimaryButton type=\"submit\">Update</PrimaryButton>\r\n              <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n            </Stack>\r\n          </Stack>\r\n        </form>\r\n      </Panel>\r\n    </>\r\n  );\r\n};\r\n\r\nUserEditPanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  user: PropTypes.shape({\r\n    teams: PropTypes.arrayOf(PropTypes.shape({})),\r\n    team: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      name: PropTypes.string,\r\n    }),\r\n    organizations: PropTypes.arrayOf(PropTypes.shape({})),\r\n    role: PropTypes.shape({}),\r\n  }),\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleEdit: PropTypes.func.isRequired,\r\n  teams: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n  organizations: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n  roles: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n};\r\n\r\nUserEditPanel.defaultProps = {\r\n  user: null,\r\n  teams: [],\r\n  organizations: [],\r\n  roles: [],\r\n};\r\n\r\nexport default UserEditPanel;\r\n","import UserEditPanel from './UserEditPanel';\r\n\r\nexport default UserEditPanel;\r\n","import SettingsUsers from './SettingsUsers';\r\n\r\nexport default SettingsUsers;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport {\r\n  Col, Container, Row,\r\n} from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport UserService from '../../services/UserService';\r\nimport TeamService from '../../services/TeamService';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AuthorizationService from '../../services/AuthorizationService';\r\nimport PageHeader from '../../components/shared/page-header';\r\nimport CommandTable from '../../components/shared/command-table/CommandTable';\r\nimport UserEditPanel from './components/user-edit-panel';\r\n\r\nconst SettingsUsers = () => {\r\n  const [data, setData] = useState([]);\r\n  const [teams, setTeams] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n    indices: [],\r\n  });\r\n  const [columns] = useState([\r\n    {\r\n      key: 'username',\r\n      name: ' Username',\r\n      fieldName: 'username',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'UserOptional',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'teams',\r\n      name: ' Teams',\r\n      fieldName: 'teams',\r\n      onRender: (item) => item.teams.map((t) => t.name).join(', '),\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.teams[0].name > b.teams[0].name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.teams.map((t) => t.name).join(','),\r\n      iconName: 'Teamwork',\r\n      minWidth: 100,\r\n      maxWidth: 500,\r\n    },\r\n    {\r\n      key: 'organizations',\r\n      name: ' Organizations',\r\n      fieldName: 'organizations',\r\n      onRender: (item) => item.organizations.map((o) => o.name).join(', '),\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.organizations[0]?.name > b.organizations[0]?.name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.organizations.map((o) => o.name).join(','),\r\n      iconName: 'Org',\r\n      minWidth: 50,\r\n      maxWidth: 200,\r\n    },\r\n    {\r\n      key: 'role',\r\n      name: ' Role',\r\n      onRender: (item) => item.role && item.role?.name,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.role?.name > b.role?.name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.role && i.role?.name,\r\n      iconName: 'Signin',\r\n      isPadded: true,\r\n    },\r\n  ]);\r\n  const [selectedColumn] = useState({\r\n    key: 'role',\r\n    name: ' Role',\r\n    onRender: (item) => item.role && item.role?.name,\r\n    isSortable: true,\r\n    isFilterable: true,\r\n    isResizable: true,\r\n    sort: (a, b) => (a.role?.name > b.role?.name ? -1 : 1),\r\n    filterValueAccessor: (i) => i.role && i.role?.name,\r\n    iconName: 'Signin',\r\n    isPadded: true,\r\n    isSorted: true,\r\n    isSortedDescending: false,\r\n  });\r\n\r\n  const handleUpdate = async (user) => {\r\n    const idx = data.findIndex((u) => u.id === user.id);\r\n    const copy = data.slice();\r\n    if (idx !== -1) {\r\n      let organization = user.organization || null;\r\n      if (!user.organization && user.organizations.length) {\r\n        organization = user.organizations[0].id;\r\n      } else if (user.organizations.length === 0) {\r\n        organization = null;\r\n      }\r\n      const result = await UserService.updateSettingsUser(user.id, {\r\n        ...user,\r\n        teams: user.teams.map((t) => t.id),\r\n        team: user.team?.id || null,\r\n        organizations: user.organizations.map((o) => o.id),\r\n        organization,\r\n      });\r\n      if (result) copy[idx] = result;\r\n      setData(copy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Retrieve the users list\r\n   */\r\n  useEffect(() => {\r\n    async function run() {\r\n      const [users, _teams, _roles] = await Promise.all(\r\n        [\r\n          UserService.getSettingsUsers(),\r\n          TeamService.getTeams(),\r\n          AuthorizationService.getRoles(),\r\n        ],\r\n      );\r\n      setData(() => users);\r\n      setTeams(() => _teams);\r\n      setRoles(() => _roles);\r\n    }\r\n    run();\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row justify=\"center\">\r\n        <PageHeader text=\"Users Settings\" />\r\n      </Row>\r\n      <Separator />\r\n      <Row align=\"start\">\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: true,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: data,\r\n              columns,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setEditPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: selectedColumn,\r\n              setSelectionDetails,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <UserEditPanel\r\n        isOpen={editPanelOpen}\r\n        handleEdit={handleUpdate}\r\n        setOpen={setEditPanelOpen}\r\n        user={selectionDetails.count ? selectionDetails.items[0] : null}\r\n        teams={teams}\r\n        organizations={global.user.organizations}\r\n        roles={roles}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SettingsUsers;\r\n","import SettingsAppraisalPeriods from './SettingsAppraisalPeriods';\r\n\r\nexport default SettingsAppraisalPeriods;\r\n","import React from 'react';\r\n\r\nconst SettingsAppraisalPeriods = () => (\r\n  <h1>AppraisalPeriods Settings</h1>\r\n);\r\n\r\nexport default SettingsAppraisalPeriods;\r\n","import SettingsAppraisalItems from './SettingsAppraisalItems';\r\n\r\nexport default SettingsAppraisalItems;\r\n","import React from 'react';\r\n\r\nconst SettingsAppraisalItems = () => (\r\n  <h1>AppraisalItems Settings</h1>\r\n);\r\n\r\nexport default SettingsAppraisalItems;\r\n","import SecurityInfoProvider from './SecurityInfoProvider';\r\n\r\nexport default SecurityInfoProvider;\r\n","import { useEffect } from 'react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport UserService from '../../../../../../services/UserService';\r\n\r\nconst SecurityInfoProvider = ({\r\n  setLoaded,\r\n  setPermissionCodes,\r\n  setRoles,\r\n  setUsers,\r\n  setRolePermissions,\r\n  setUserPermissions,\r\n}) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      // Get Permission Codes\r\n      const codes = await AuthorizationService.getPermissionCodes();\r\n      setPermissionCodes(codes.sort((a, b) => (a.code < b.code ? -1 : 1)));\r\n\r\n      // get all roles\r\n      const rolesInfo = await AuthorizationService.getRoles();\r\n      setRoles(rolesInfo.sort((a, b) => (a.name < b.name ? -1 : 1)));\r\n\r\n      // get all users\r\n      const userInfo = await UserService.getSettingsUsers();\r\n      setUsers(userInfo.sort((a, b) => (a.username < b.username ? -1 : 1)));\r\n\r\n      // get All role permissions\r\n      const roles = await AuthorizationService.getRolesSecurities();\r\n      const rolesMap = {};\r\n      roles.forEach((role) => {\r\n        rolesMap[role.reference.name] = {\r\n          ...rolesMap[role.reference.name],\r\n          [role.code.code]: role,\r\n        };\r\n      });\r\n      setRolePermissions(rolesMap);\r\n\r\n      // get my organization's user permission\r\n      const userPermissions = await AuthorizationService.getOrganizationUsersSecurities();\r\n      const userPermMap = {};\r\n      userPermissions.forEach((user) => {\r\n        userPermMap[user.reference.username] = {\r\n          ...userPermMap[user.reference.username],\r\n          [user.code.code]: user,\r\n        };\r\n      });\r\n      setUserPermissions(userPermMap);\r\n\r\n      // Confirm information was loaded\r\n      setLoaded(true);\r\n    }\r\n    run();\r\n  }, [\r\n    setPermissionCodes,\r\n    setLoaded,\r\n    setRoles,\r\n    setUsers,\r\n    setRolePermissions,\r\n    setUserPermissions,\r\n  ]);\r\n  return null;\r\n};\r\n\r\nexport default SecurityInfoProvider;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Checkbox,\r\n  CommandBar, makeStyles, SearchBox, Stack, Text,\r\n} from '@fluentui/react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport Accordion from '../../../../../shared/accordion/Accordion';\r\nimport SinglePicker from '../../../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n  autocomplete: {\r\n    marginTop: theme.spacing.l2,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralTertiary,\r\n  },\r\n  searchBox: {\r\n    alignSelf: 'center',\r\n    marginLeft: theme.spacing.m,\r\n    minWidth: 200,\r\n  },\r\n}));\r\n\r\nconst SecurityDetailsRoleDisplay = ({\r\n  codes,\r\n  roles,\r\n  rolePermissions,\r\n  setRolePermissions,\r\n  selectedRole,\r\n  setSelectedRole,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n\r\n  const handleExpandSingle = (e, item, isExpanded) => {\r\n    if (isExpanded) {\r\n      setExpanded((prev) => [...prev, item.code]);\r\n    } else {\r\n      setExpanded((prev) => prev.filter((p) => p !== item.code));\r\n    }\r\n  };\r\n\r\n  const handleExpandAll = () => {\r\n    if (expanded.length === codes.length) {\r\n      setExpanded([]);\r\n    } else {\r\n      setExpanded(codes.map((e) => e.code));\r\n    }\r\n  };\r\n\r\n  const handleFilterInputChange = (e) => {\r\n    if (e && e.target) {\r\n      setFilter(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSetPermission = (role, code, permission) => {\r\n    setRolePermissions((prev) => ({\r\n      ...prev,\r\n      [role.name]: {\r\n        ...prev[role.name],\r\n        [code.code]: permission,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleAdd = async (role, code, grant) => {\r\n    const result = await AuthorizationService.addPermission({\r\n      grants: [grant],\r\n      code: code.id,\r\n      permissionType: 'Role',\r\n      reference: role.id,\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const handleUpdate = async (permission) => {\r\n    const result = await AuthorizationService.updatePermission(permission.id, permission);\r\n    return result;\r\n  };\r\n\r\n  const handleDelete = async (permission) => {\r\n    try {\r\n      const result = await AuthorizationService.deletePermission(permission.id);\r\n      return result;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleClick = (role, code, grant) => async (e) => {\r\n    e.persist();\r\n    // check if it's a new permission\r\n    if (!rolePermissions[role.name] || !rolePermissions[role.name][code.code]) {\r\n      const result = await handleAdd(role, code, grant);\r\n      result && handleSetPermission(role, code, result);\r\n    } else if (e.target.checked) {\r\n      // add a grant\r\n      const grants = [...rolePermissions[role.name][code.code].grants, grant];\r\n      const result = await handleUpdate({ ...rolePermissions[role.name][code.code], grants });\r\n      result && handleSetPermission(role, code, result);\r\n    } else if (!e.target.checked) {\r\n      const grants = rolePermissions[role.name][code.code].grants.filter((g) => g !== grant);\r\n      if (grants.length === 0) {\r\n        await handleDelete(rolePermissions[role.name][code.code]);\r\n        handleSetPermission(role, code, null);\r\n      } else {\r\n        const result = await handleUpdate({ ...rolePermissions[role.name][code.code], grants });\r\n        result && handleSetPermission(role, code, result);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPermissionChecked = (role, code, grant) => {\r\n    const permission = rolePermissions[role.name] && rolePermissions[role.name][code.code];\r\n    if (permission) {\r\n      return permission.grants.indexOf(grant) !== -1;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const renderPermissions = () => {\r\n    if (selectedRole) {\r\n      const render = codes.filter((el) => (\r\n        el.code.toLowerCase().indexOf(filter.toLowerCase()) !== -1));\r\n      return (\r\n        <Accordion\r\n          items={render.map(\r\n            (permission) => (\r\n              {\r\n                ...permission,\r\n                text: permission.code,\r\n                isOpen: expanded.indexOf(permission.code) !== -1,\r\n              }),\r\n          )}\r\n          getKey={(code) => code.id}\r\n          headerProps={{\r\n            onRenderHeaderText: (item) => (\r\n              <div>\r\n                <Text variant=\"mediumPlus\" block>{item.code}</Text>\r\n                <Text variant=\"medium\" className={classes.secondaryText}>{item.description}</Text>\r\n              </div>\r\n            ),\r\n          }}\r\n          onRenderItem={(item) => (\r\n            <Stack\r\n              verticalAlign=\"start\"\r\n              tokens={{\r\n                childrenGap: 3,\r\n              }}\r\n            >\r\n              {\r\n                  item.grants.map((grant) => (\r\n                    <Checkbox\r\n                      key={`${item.id}-${grant}`}\r\n                      label={grant}\r\n                      checked={getPermissionChecked(selectedRole, item, grant)}\r\n                      onChange={handleClick(selectedRole, item, grant)}\r\n                    />\r\n                  ))\r\n                }\r\n            </Stack>\r\n          )}\r\n          onToggle={handleExpandSingle}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={4}>\r\n          <SinglePicker\r\n            className={classes.autocomplete}\r\n            options={roles.map((r) => ({ key: r.id, data: r }))}\r\n            getTextFromItem={(item) => item.data.name}\r\n            selected={{ key: selectedRole.id, data: selectedRole }}\r\n            onSelect={(item) => setSelectedRole(item.data)}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandBar\r\n            items={[\r\n              {\r\n                key: 'expandAll',\r\n                text: `${expanded.length === codes.length ? 'Collapse' : 'Expand'} All`,\r\n                iconProps: {\r\n                  iconName: `${expanded.length === codes.length ? 'ChevronFold10' : 'ChevronUnfold10'}`,\r\n                },\r\n                onClick: handleExpandAll,\r\n                buttonStyles: {\r\n                  root: {\r\n                    minWidth: '120px',\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                key: 'search',\r\n                onRender: () => (\r\n                  <SearchBox\r\n                    className={classes.searchBox}\r\n                    value={filter}\r\n                    onChange={handleFilterInputChange}\r\n                    onClear={() => setFilter('')}\r\n                  />\r\n                ),\r\n              },\r\n            ]}\r\n            styles={{\r\n              root: {\r\n                paddingLeft: 0,\r\n              },\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        { renderPermissions() }\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nSecurityDetailsRoleDisplay.propTypes = {\r\n  codes: PropTypes.arrayOf(PropTypes.shape({\r\n    code: PropTypes.string,\r\n  })).isRequired,\r\n  roles: PropTypes.arrayOf(PropTypes.shape({\r\n    name: PropTypes.string,\r\n  })).isRequired,\r\n  rolePermissions: PropTypes.shape({}).isRequired,\r\n  setRolePermissions: PropTypes.func.isRequired,\r\n  selectedRole: PropTypes.shape({\r\n    username: PropTypes.string,\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  setSelectedRole: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SecurityDetailsRoleDisplay;\r\n","import SecurityDetailsRoleDisplay from './SecurityDetailsRoleDisplay';\r\n\r\nexport default SecurityDetailsRoleDisplay;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Checkbox, CommandBar, makeStyles, SearchBox, Stack, Text,\r\n} from '@fluentui/react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport Accordion from '../../../../../shared/accordion/Accordion';\r\nimport SinglePicker from '../../../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n  autocomplete: {\r\n    marginTop: theme.spacing.l2,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralTertiary,\r\n  },\r\n  searchBox: {\r\n    alignSelf: 'center',\r\n    marginLeft: theme.spacing.m,\r\n    minWidth: 200,\r\n  },\r\n}));\r\n\r\nconst SecurityDetailsUserDisplay = ({\r\n  codes,\r\n  users,\r\n  userPermissions,\r\n  setUserPermissions,\r\n  selectedUser,\r\n  setSelectedUser,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n\r\n  const handleExpandSingle = (e, item, isExpanded) => {\r\n    if (isExpanded) {\r\n      setExpanded((prev) => [...prev, item.code]);\r\n    } else {\r\n      setExpanded((prev) => prev.filter((err) => err !== item.code));\r\n    }\r\n  };\r\n\r\n  const handleExpandAll = () => {\r\n    if (expanded.length === codes.length) {\r\n      setExpanded([]);\r\n    } else {\r\n      setExpanded(codes.map((e) => e.code));\r\n    }\r\n  };\r\n\r\n  const handleFilterInputChange = (e) => {\r\n    if (e && e.target) {\r\n      setFilter(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSetPermission = (user, code, permission) => {\r\n    setUserPermissions((prev) => ({\r\n      ...prev,\r\n      [user.username]: {\r\n        ...prev[user.username],\r\n        [code.code]: permission,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleAdd = async (user, code, grant) => {\r\n    const result = await AuthorizationService.addPermission({\r\n      grants: [grant],\r\n      code: code.id,\r\n      permissionType: 'User',\r\n      reference: user.id,\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const handleUpdate = async (permission) => {\r\n    const result = await AuthorizationService.updatePermission(permission.id, permission);\r\n    return result;\r\n  };\r\n\r\n  const handleDelete = async (permission) => {\r\n    try {\r\n      const result = await AuthorizationService.deletePermission(permission.id);\r\n      return result;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleClick = (user, code, grant) => async (e) => {\r\n    e.persist();\r\n    // check if it's a new permission\r\n    if (!userPermissions[user.username] || !userPermissions[user.username][code.code]) {\r\n      const result = await handleAdd(user, code, grant);\r\n      result && handleSetPermission(user, code, result);\r\n    } else if (e.target.checked) {\r\n      // add a grant\r\n      const grants = [...userPermissions[user.username][code.code].grants, grant];\r\n      const result = await handleUpdate({ ...userPermissions[user.username][code.code], grants });\r\n      result && handleSetPermission(user, code, result);\r\n    } else if (!e.target.checked) {\r\n      const grants = userPermissions[user.username][code.code].grants.filter((g) => g !== grant);\r\n      if (grants.length === 0) {\r\n        await handleDelete(userPermissions[user.username][code.code]);\r\n        handleSetPermission(user, code, null);\r\n      } else {\r\n        const result = await handleUpdate({ ...userPermissions[user.username][code.code], grants });\r\n        result && handleSetPermission(user, code, result);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPermissionChecked = (user, code, grant) => {\r\n    const permission = userPermissions[user.username] && userPermissions[user.username][code.code];\r\n    if (permission) {\r\n      return permission.grants.indexOf(grant) !== -1;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const renderPermissions = () => {\r\n    if (selectedUser) {\r\n      const render = codes.filter((el) => (\r\n        el.code.toLowerCase().indexOf(filter.toLowerCase()) !== -1));\r\n      return (\r\n        <Accordion\r\n          items={render.map(\r\n            (permission) => (\r\n              {\r\n                ...permission,\r\n                text: permission.code,\r\n                isOpen: expanded.indexOf(permission.code) !== -1,\r\n              }),\r\n          )}\r\n          getKey={(code) => code.id}\r\n          headerProps={{\r\n            onRenderHeaderText: (item) => (\r\n              <div>\r\n                <Text variant=\"mediumPlus\" block>{item.code}</Text>\r\n                <Text variant=\"medium\" className={classes.secondaryText}>{item.description}</Text>\r\n              </div>\r\n            ),\r\n          }}\r\n          onRenderItem={(item) => (\r\n            <Stack\r\n              verticalAlign=\"start\"\r\n              tokens={{\r\n                childrenGap: 3,\r\n              }}\r\n            >\r\n              <Checkbox\r\n                label=\"overrule\"\r\n                checked={getPermissionChecked(selectedUser, item, 'overrule')}\r\n                onChange={handleClick(selectedUser, item, 'overrule')}\r\n              />\r\n              {\r\n                  item.grants.map((grant) => (\r\n                    <Checkbox\r\n                      label={grant}\r\n                      checked={getPermissionChecked(selectedUser, item, grant)}\r\n                      onChange={handleClick(selectedUser, item, grant)}\r\n                    />\r\n                  ))\r\n                }\r\n            </Stack>\r\n          )}\r\n          onToggle={handleExpandSingle}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={4}>\r\n          <SinglePicker\r\n            className={classes.autocomplete}\r\n            options={users.map((u) => ({ key: u.id, data: u }))}\r\n            getTextFromItem={(item) => item.data.username}\r\n            selected={{ key: selectedUser.id, data: selectedUser }}\r\n            onSelect={(item) => setSelectedUser(item.data)}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandBar\r\n            items={[\r\n              {\r\n                key: 'expandAll',\r\n                text: `${expanded.length === codes.length ? 'Collapse' : 'Expand'} All`,\r\n                iconProps: {\r\n                  iconName: `${expanded.length === codes.length ? 'ChevronFold10' : 'ChevronUnfold10'}`,\r\n                },\r\n                onClick: handleExpandAll,\r\n                buttonStyles: {\r\n                  root: {\r\n                    minWidth: '120px',\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                key: 'search',\r\n                onRender: () => (\r\n                  <SearchBox\r\n                    className={classes.searchBox}\r\n                    value={filter}\r\n                    onChange={handleFilterInputChange}\r\n                    onClear={() => setFilter('')}\r\n                  />\r\n                ),\r\n              },\r\n            ]}\r\n            styles={{\r\n              root: {\r\n                paddingLeft: 0,\r\n              },\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        { renderPermissions() }\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nSecurityDetailsUserDisplay.propTypes = {\r\n  codes: PropTypes.arrayOf(PropTypes.shape({\r\n    code: PropTypes.string,\r\n  })).isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({\r\n    username: PropTypes.string,\r\n  })).isRequired,\r\n  userPermissions: PropTypes.shape({}).isRequired,\r\n  setUserPermissions: PropTypes.func.isRequired,\r\n  selectedUser: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }).isRequired,\r\n  setSelectedUser: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SecurityDetailsUserDisplay;\r\n","import SecurityDetailsUserDisplay from './SecurityDetailsUserDisplay';\r\n\r\nexport default SecurityDetailsUserDisplay;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Pivot, PivotItem } from '@fluentui/react';\r\nimport { Container } from 'react-grid-system';\r\nimport SecurityInfoProvider from './components/security-info-provider';\r\nimport SecurityDetailsRoleDisplay from './components/security-details-role-display';\r\nimport SecurityDetailsUserDisplay from './components/security-details-user-display';\r\nimport PageHeader from '../../../shared/page-header';\r\n\r\nconst SecurityDetails = () => {\r\n  const [permissionCodes, setPermissionCodes] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [rolePermissions, setRolePermissions] = useState({});\r\n  const [userPermissions, setUserPermissions] = useState({});\r\n  const [selectedRole, setSelectedRole] = useState(null);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setSelectedRole((prev) => {\r\n      if (prev === null && roles.length > 0) return roles[0];\r\n      return prev;\r\n    });\r\n  }, [roles]);\r\n\r\n  useEffect(() => {\r\n    setSelectedUser((prev) => {\r\n      if (prev === null && users.length > 0) return users[0];\r\n      return prev;\r\n    });\r\n  }, [users]);\r\n\r\n  return (\r\n    <>\r\n      <SecurityInfoProvider\r\n        setLoaded={setLoaded}\r\n        setPermissionCodes={setPermissionCodes}\r\n        setRoles={setRoles}\r\n        setUsers={setUsers}\r\n        setRolePermissions={setRolePermissions}\r\n        setUserPermissions={setUserPermissions}\r\n      />\r\n      <Container lg>\r\n        <PageHeader text=\"Permissions\" />\r\n        {\r\n        loaded\r\n          ? (\r\n            <Pivot\r\n              aria-label=\"User and Roles permissions\"\r\n              styles={{\r\n                root: {\r\n                  display: 'flex',\r\n                  flexFlow: 'row nowrap',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center',\r\n                },\r\n              }}\r\n            >\r\n              <PivotItem headerText=\"Roles\" itemIcon=\"SecurityGroup\">\r\n                <SecurityDetailsRoleDisplay\r\n                  codes={permissionCodes}\r\n                  roles={roles}\r\n                  rolePermissions={rolePermissions}\r\n                  setRolePermissions={setRolePermissions}\r\n                  selectedRole={selectedRole}\r\n                  setSelectedRole={setSelectedRole}\r\n                />\r\n              </PivotItem>\r\n              <PivotItem headerText=\"Users\" itemIcon=\"Contact\">\r\n                <SecurityDetailsUserDisplay\r\n                  codes={permissionCodes}\r\n                  users={users}\r\n                  userPermissions={userPermissions}\r\n                  setUserPermissions={setUserPermissions}\r\n                  selectedUser={selectedUser}\r\n                  setSelectedUser={setSelectedUser}\r\n                />\r\n              </PivotItem>\r\n            </Pivot>\r\n          )\r\n          : null\r\n      }\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SecurityDetails;\r\n","import SettingsRolesPage from './SettingsRoles';\r\n\r\nexport default SettingsRolesPage;\r\n","import React from 'react';\r\nimport SecurityDetails from '../../components/appraisal-details/components/security-details/SecurityDetails';\r\n\r\nconst SettingsRolesPage = () => (<SecurityDetails />);\r\n\r\nexport default SettingsRolesPage;\r\n","import SettingsPage from './SettingsPage';\r\n\r\nexport default SettingsPage;\r\n","import React from 'react';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport SettingsGeneral from '../settings-general';\r\nimport SettingsUsers from '../settings-users';\r\nimport SettingsAppraisalPeriods from '../settings-app-periods';\r\nimport SettingsAppraisalItems from '../settings-app-items';\r\nimport SettingsRolesPage from '../settings-role-permissions';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\n\r\n/*\r\n * On the settings page the navigation will be done via a\r\n */\r\nconst SettingsPage = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <>\r\n      <Container lg fluid>\r\n        <Switch>\r\n          <Route exact path={path}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"general\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <SettingsGeneral />\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/users`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"users\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Users\">\r\n                <SettingsUsers />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/appraisal-periods`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"appraisal-periods\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - appraisal periods\">\r\n                <SettingsAppraisalPeriods />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/appraisal-items`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"appraisal-items\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - appraisal items\">\r\n                <SettingsAppraisalItems />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/permissions`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"permissions\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - Securities\">\r\n                <SettingsRolesPage />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n        </Switch>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst ReportsInfoProvider = ({ setReports }) => {\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const reports = await ReportingService.getReports();\r\n      if (mounted) {\r\n        setReports(reports);\r\n      }\r\n    }\r\n    run();\r\n    return () => { mounted = false; };\r\n  }, [setReports]);\r\n  return null;\r\n};\r\n\r\nReportsInfoProvider.propTypes = {\r\n  setReports: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsInfoProvider;\r\n","import ReportsInfoProvider from './ReportsInfoProvider';\r\n\r\nexport default ReportsInfoProvider;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Panel, PrimaryButton, DefaultButton, PanelType, Stack, TextField, Separator, Label, makeStyles,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport SinglePicker from '../../../shared/single-picker/SinglePicker';\r\nimport Box from '../../../shared/box';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  topMargin: {\r\n    marginTop: '8px',\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n  invisibleInput: {\r\n    background: 'none',\r\n    outline: 'none',\r\n    border: 'none',\r\n    height: 0,\r\n  },\r\n}));\r\n\r\nconst ReportsNewPanel = ({ isOpen, setOpen, addReport }) => {\r\n  const classes = useStyles();\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [template, setTemplate] = useState('');\r\n  const [parameter, setParameter] = useState('');\r\n  const [templates, setTemplates] = useState([]);\r\n  const [parameters, setParameters] = useState([]);\r\n  const [selectedParameters, setSelectedParameters] = useState([]);\r\n  const history = useHistory();\r\n\r\n  const handleChange = (set) => (e) => {\r\n    set(e.target.value);\r\n  };\r\n\r\n  const handleChangeTempalte = (templ) => {\r\n    setTemplate(templ.data.id);\r\n  };\r\n\r\n  const handleChangeParameter = (item) => {\r\n    setParameter(item.data);\r\n  };\r\n\r\n  const handleAddParameter = () => {\r\n    if (parameter !== '') {\r\n      setParameter('');\r\n      setSelectedParameters((prev) => {\r\n        if (selectedParameters.map((p) => p.name).indexOf(parameter) === -1) {\r\n          return prev.concat({\r\n            name: parameter,\r\n            defaultValue: '',\r\n            path: parameter,\r\n          });\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleChangeParameterName = (idx) => (e) => {\r\n    e.persist();\r\n    setSelectedParameters((prev) => {\r\n      const copy = prev.slice();\r\n      copy[idx].name = e.target.value;\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleChangeParameterValue = (idx) => (e) => {\r\n    e.persist();\r\n    setSelectedParameters((prev) => {\r\n      const copy = prev.slice();\r\n      copy[idx].defaultValue = e.target.value;\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.persist();\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('name', name);\r\n    formData.append('description', description);\r\n    formData.append('template', template);\r\n    formData.append('parameters', JSON.stringify(selectedParameters));\r\n    const result = await ReportingService.addReport(formData);\r\n    if (result) {\r\n      history.push('/reporting/reports');\r\n      NotificationService.notifySuccess('Report successfully created');\r\n      setOpen(false);\r\n      addReport(result);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const t = await ReportingService.getTemplates();\r\n      if (mounted) {\r\n        setTemplates(t);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (template !== '') {\r\n        const params = await ReportingService.getTempalteParameters(template);\r\n        if (params.length && mounted) {\r\n          setParameters(params);\r\n        }\r\n      } else {\r\n        setParameters([]);\r\n      }\r\n      setSelectedParameters([]);\r\n      setParameter('');\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [template]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton form=\"new-report-form\" type=\"submit\">Create</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText=\"Create Report\"\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <form onSubmit={handleSubmit} id=\"new-report-form\">\r\n        <Container fluid className={classes.root}>\r\n          <Separator>General</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              <TextField\r\n                label=\"Name\"\r\n                value={name}\r\n                onChange={handleChange(setName)}\r\n                required\r\n              />\r\n              <TextField\r\n                label=\"Description\"\r\n                value={description}\r\n                onChange={handleChange(setDescription)}\r\n                multiline\r\n              />\r\n              <Label>Select template</Label>\r\n              <SinglePicker\r\n                options={templates.map((t) => ({ key: t.id, data: t }))}\r\n                getTextFromItem={(item) => item.data.name}\r\n                onSelect={handleChangeTempalte}\r\n                onRenderItem={() => (\r\n                  <TextField\r\n                    value={template ? templates.find((temp) => temp.id === template)?.name : null}\r\n                    underlined\r\n                    readOnly\r\n                  />\r\n                )}\r\n                maxHeight=\"400px\"\r\n              />\r\n              <input value={template} className={classes.invisibleInput} required />\r\n            </Col>\r\n          </Row>\r\n          <Separator>Parameters</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              <Label>Select parameter</Label>\r\n              <SinglePicker\r\n                options={parameters.map((param) => param.paths.map((path) => ({\r\n                  key: `${param.name}${path}`,\r\n                  data: `${param.name}${path}`,\r\n                }))).flat()}\r\n                getTextFromItem={(item) => item.data}\r\n                onSelect={(item) => handleChangeParameter(item)}\r\n                onRenderItem={() => (\r\n                  <TextField\r\n                    value={parameter}\r\n                    underlined\r\n                    readOnly\r\n                  />\r\n                )}\r\n                maxHeight=\"400px\"\r\n              />\r\n              <DefaultButton\r\n                className={classes.topMargin}\r\n                onClick={handleAddParameter}\r\n              >\r\n                Add Parameter\r\n              </DefaultButton>\r\n            </Col>\r\n          </Row>\r\n          <Separator>Selected Paramaters</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              {\r\n              selectedParameters.map((sp, idx) => (\r\n                <Box className={classes.box}>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    value={sp.name}\r\n                    onChange={handleChangeParameterName(idx)}\r\n                  />\r\n                  <TextField\r\n                    label=\"Default value\"\r\n                    value={sp.defaultValue}\r\n                    onChange={handleChangeParameterValue(idx)}\r\n                  />\r\n                  <TextField\r\n                    label=\"Path\"\r\n                    value={sp.path}\r\n                    readOnly\r\n                  />\r\n                </Box>\r\n              ))\r\n            }\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nReportsNewPanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  addReport: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsNewPanel;\r\n","import ReportsNewPanel from './ReportsNewPanel';\r\n\r\nexport default ReportsNewPanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, makeStyles, Panel, PanelType, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Box from '../../../shared/box';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n}));\r\n\r\nconst ReportsDetailsPanel = ({ id, isOpen, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [details, setDetails] = useState(null);\r\n  const [parameters, setParameters] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (id && isOpen) {\r\n        const reportDetails = await ReportingService.getReport(id);\r\n        if (mounted) {\r\n          setDetails(reportDetails);\r\n          setParameters(reportDetails.parameters.map((p) => ({\r\n            name: p.name,\r\n            value: p.defaultValue,\r\n            path: p.path,\r\n          })));\r\n        }\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id, isOpen]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    isOpen && details\r\n      ? (\r\n        <Panel\r\n          isOpen={isOpen}\r\n          onDismiss={() => setOpen(false)}\r\n          headerText=\"Create Report\"\r\n          type={PanelType.large}\r\n          onRenderFooterContent={onRenderFooter}\r\n          isLightDismiss\r\n        >\r\n          <Container fluid className={classes.root}>\r\n            <Separator>General</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  label=\"Name: \"\r\n                  value={details.name}\r\n                  underlined\r\n                  readOnly\r\n                />\r\n                <TextField\r\n                  label=\"Description: \"\r\n                  value={details.description}\r\n                  multiline\r\n                  underlined\r\n                  readOnly\r\n                  resizable={false}\r\n                />\r\n                <TextField\r\n                  label=\"Template: \"\r\n                  value={details.template.name}\r\n                  underlined\r\n                  readOnly\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator>Parameters</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                {\r\n                  parameters.map((parameter) => (\r\n                    <Box className={classes.box}>\r\n                      <TextField\r\n                        label=\"Name: \"\r\n                        value={parameter.name}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                      <TextField\r\n                        label=\"Path: \"\r\n                        value={parameter.path}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                      <TextField\r\n                        label=\"Default value: \"\r\n                        value={parameter.value}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                    </Box>\r\n                  ))\r\n                }\r\n              </Col>\r\n            </Row>\r\n            <Separator>Aggregation</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  value={JSON.stringify(JSON.parse(details.template.aggregation), null, 4)}\r\n                  multiline\r\n                  underlined\r\n                  readOnly\r\n                  autoAdjustHeight\r\n                  resizable={false}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Panel>\r\n      ) : null\r\n  );\r\n};\r\n\r\nReportsDetailsPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsDetailsPanel;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Box from '../../../shared/box';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport SinglePicker from '../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n}));\r\n\r\nconst ReportsEditPanel = ({\r\n  id, isOpen, setOpen, setReport,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [details, setDetails] = useState(null);\r\n  const [parameters, setParameters] = useState([]);\r\n  const [parametersList, setParametersList] = useState([]);\r\n  const [inputErrorMessages, setInputErrorMessages] = useState({});\r\n  const [newParameter, setNewParameter] = useState({\r\n    name: '',\r\n    path: '',\r\n    defaultValue: '',\r\n  });\r\n\r\n  const handleChangeDetails = (property) => (evt) => {\r\n    const val = evt.target.value;\r\n    setDetails((prev) => ({\r\n      ...prev,\r\n      [property]: val,\r\n    }));\r\n  };\r\n\r\n  const handleChangeParams = (property, param) => (evt) => {\r\n    const { value } = evt.target;\r\n    setParameters((prev) => prev.map(\r\n      (parameter) => {\r\n        if (parameter && parameter.path === param.path) {\r\n          return { ...parameter, [property]: value };\r\n        }\r\n        return parameter;\r\n      },\r\n    ));\r\n  };\r\n\r\n  const deleteParam = (param) => () => {\r\n    setParameters((prev) => prev.filter((p) => p.path !== param.path));\r\n  };\r\n\r\n  const handleChangeNewParam = (property) => (evt) => {\r\n    const { value } = evt.target;\r\n    setNewParameter((prev) => ({\r\n      ...prev,\r\n      [property]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    let error = false;\r\n    if (newParameter.name === '') {\r\n      error = true;\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamName: 'Name is required',\r\n      }));\r\n    } else {\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamName: '',\r\n      }));\r\n    }\r\n    if (newParameter.path === '') {\r\n      error = true;\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamPath: 'Path is required',\r\n      }));\r\n    } else {\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamPath: '',\r\n      }));\r\n    }\r\n    if (error) return;\r\n    setParameters((prev) => {\r\n      const item = prev.find((p) => p.path === newParameter.path);\r\n      if (!item) {\r\n        return prev.concat(newParameter);\r\n      }\r\n      setInputErrorMessages(() => ({\r\n        ...prev,\r\n        newParamPath: 'This parameter is already added.',\r\n      }));\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const result = await ReportingService.updateReport(details.id, {\r\n      description: details.description,\r\n      parameters,\r\n    });\r\n    if (result) {\r\n      setReport(result);\r\n      setOpen(false);\r\n      setDetails(null);\r\n      setParameters([]);\r\n      setNewParameter({});\r\n      NotificationService.notifySuccess('Report saved');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (id && isOpen) {\r\n        const reportDetails = await ReportingService.getReport(id);\r\n        let params = [];\r\n        if (reportDetails?.template?.id) {\r\n          params = await ReportingService.getTempalteParameters(reportDetails.template.id);\r\n        }\r\n        if (mounted) {\r\n          setDetails(reportDetails);\r\n          setParameters(reportDetails.parameters);\r\n          setParametersList(params);\r\n        }\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id, isOpen]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleSave}>Save</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    isOpen && details\r\n      ? (\r\n        <Panel\r\n          isOpen={isOpen}\r\n          onDismiss={() => setOpen(false)}\r\n          headerText=\"Create Report\"\r\n          type={PanelType.large}\r\n          onRenderFooterContent={onRenderFooter}\r\n        >\r\n          <Container fluid className={classes.root}>\r\n            <Separator>General</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  label=\"Name: \"\r\n                  value={details.name}\r\n                  underlined\r\n                  disabled\r\n                />\r\n                <TextField\r\n                  label=\"Description: \"\r\n                  value={details.description}\r\n                  multiline\r\n                  underlined\r\n                  resizable={false}\r\n                  onChange={handleChangeDetails('description')}\r\n                />\r\n                <TextField\r\n                  label=\"Template: \"\r\n                  value={details.template.name}\r\n                  underlined\r\n                  disabled\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator>Parameters</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                {\r\n                  parameters.map((parameter) => (\r\n                    <Box className={classes.box}>\r\n                      <TextField\r\n                        label=\"Name: \"\r\n                        value={parameter.name}\r\n                        underlined\r\n                        onChange={handleChangeParams('name', parameter)}\r\n                      />\r\n                      <TextField\r\n                        label=\"Path: \"\r\n                        value={parameter.path}\r\n                        underlined\r\n                        disabled\r\n                      />\r\n                      <TextField\r\n                        label=\"Default value: \"\r\n                        value={parameter.defaultValue}\r\n                        underlined\r\n                        onChange={handleChangeParams('defaultValue', parameter)}\r\n                      />\r\n                      <ActionButton\r\n                        onClick={deleteParam(parameter)}\r\n                        iconProps={{\r\n                          iconName: 'Delete',\r\n                        }}\r\n                        text=\"Delete\"\r\n                      />\r\n                    </Box>\r\n                  ))\r\n                }\r\n                <Box className={classes.box}>\r\n                  <SinglePicker\r\n                    options={parametersList.map((param) => param.paths.map((path) => ({\r\n                      key: `${param.name}${path}`,\r\n                      data: `${param.name}${path}`,\r\n                    }))).flat()}\r\n                    getTextFromItem={(item) => item.data}\r\n                    onSelect={(item) => setNewParameter((prev) => ({\r\n                      ...prev,\r\n                      path: item.data,\r\n                    }))}\r\n                    onRenderItem={() => null}\r\n                    maxHeight=\"400px\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Name: \"\r\n                    value={newParameter.name || ''}\r\n                    underlined\r\n                    onChange={handleChangeNewParam('name')}\r\n                    required\r\n                    errorMessage={inputErrorMessages.newParamName || ''}\r\n                  />\r\n                  <TextField\r\n                    label=\"Path: \"\r\n                    value={newParameter.path || ''}\r\n                    underlined\r\n                    required\r\n                    errorMessage={inputErrorMessages.newParamPath || ''}\r\n                  />\r\n                  <TextField\r\n                    label=\"Default value: \"\r\n                    value={newParameter.defaultValue || ''}\r\n                    underlined\r\n                    onChange={handleChangeNewParam('defaultValue')}\r\n                  />\r\n                  <ActionButton\r\n                    onClick={handleAdd}\r\n                    iconProps={{\r\n                      iconName: 'Add',\r\n                    }}\r\n                    text=\"Add\"\r\n                  />\r\n                </Box>\r\n              </Col>\r\n            </Row>\r\n            <Separator>Aggregation</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  value={JSON.stringify(JSON.parse(details.template.aggregation), null, 4)}\r\n                  multiline\r\n                  underlined\r\n                  disabled\r\n                  autoAdjustHeight\r\n                  resizable={false}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Panel>\r\n      ) : null\r\n  );\r\n};\r\n\r\nReportsEditPanel.propTypes = {\r\n  id: PropTypes.string,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  setReport: PropTypes.func.isRequired,\r\n};\r\n\r\nReportsEditPanel.defaultProps = {\r\n  id: null,\r\n};\r\n\r\nexport default ReportsEditPanel;\r\n","import ReportsEditPanel from './ReportsEditPanel';\r\n\r\nexport default ReportsEditPanel;\r\n","import Reports from './Reports';\r\n\r\nexport default Reports;\r\n","import React, { useState } from 'react';\r\nimport { Container, Row, Col } from 'react-grid-system';\r\nimport { DetailsListLayoutMode, SelectionMode, Separator } from '@fluentui/react';\r\nimport ReportsInfoProvider from './components/reports-info-provider';\r\nimport PageHeader from '../shared/page-header/PageHeader';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport ReportsNewPanel from './components/reports-new-panel';\r\nimport ReportsDetailsPanel from './components/reports-details-panel/ReportsDetailsPanel';\r\nimport ReportsEditPanel from './components/reports-edit-panel';\r\n\r\nconst ReportsList = () => {\r\n  const [newPanelOpen, setNewPanelOpen] = useState(false);\r\n  const [detailsPanelOpen, setDetailsPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [reports, setReports] = useState([]);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'description',\r\n      name: ' Description',\r\n      fieldName: 'description',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileBug',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'createdby',\r\n      name: ' Created by',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'Contact',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      onRender: (item) => item.createdUser.username,\r\n    },\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  ]);\r\n\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      isSorted: true,\r\n      isSortedDescending: false,\r\n    },\r\n  );\r\n\r\n  return (\r\n    <Container fluid>\r\n      <ReportsInfoProvider setReports={setReports} />\r\n      <PageHeader text=\"Reports\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => setNewPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n                onClick: () => setDetailsPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: reports,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setDetailsPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <ReportsNewPanel\r\n        isOpen={newPanelOpen}\r\n        setOpen={setNewPanelOpen}\r\n        addReport={(report) => setReports((prev) => prev.concat(report))}\r\n      />\r\n      <ReportsDetailsPanel\r\n        id={selectionDetails.count > 0 ? selectionDetails.items[0].id : null}\r\n        isOpen={detailsPanelOpen}\r\n        setOpen={setDetailsPanelOpen}\r\n      />\r\n      <ReportsEditPanel\r\n        id={selectionDetails.count > 0 ? selectionDetails.items[0].id : null}\r\n        isOpen={editPanelOpen}\r\n        setOpen={setEditPanelOpen}\r\n        setReport={\r\n          (report) => setReports((prev) => prev.map((r) => (r.id === report.id ? report : r)))\r\n        }\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ReportsList;\r\n","import ReportsPage from './ReportsPage';\r\n\r\nexport default ReportsPage;\r\n","import React from 'react';\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport Reports from '../../components/reports';\r\n\r\nconst ReportsPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route exact path={path}>\r\n          <Reports />\r\n        </Route>\r\n        <Route exact path={`${path}/new`}>\r\n          <h1>Report</h1>\r\n        </Route>\r\n        <Route exact path={`${path}/:id`}>\r\n          <h1>Report</h1>\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReportsPage;\r\n","const { default: ReportTemplates } = require('./ReportTemplates');\r\n\r\nexport default ReportTemplates;\r\n","import ReportTemplatesPage from './ReportTemplatesPage';\r\n\r\nexport default ReportTemplatesPage;\r\n","import React from 'react';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport ReportTemplates from '../../components/report-templates';\r\n\r\nconst ReportTemplatesPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <Switch>\r\n      <Route exact path={path}>\r\n        <ReportTemplates />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default ReportTemplatesPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Container, Row, Col } from 'react-grid-system';\r\nimport {\r\n  PrimaryButton, Separator, Dropdown, makeStyles, DatePicker,\r\n} from '@fluentui/react';\r\nimport { downloadBlob } from 'download.js';\r\nimport PageHeader from '../shared/page-header';\r\nimport AppraisalService from '../../services/AppraisalService';\r\nimport NotificationService from '../../services/NotificationService';\r\nimport ReportingService from '../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalReport = () => {\r\n  const classes = useStyles();\r\n  const [periods, setPeriods] = useState([]);\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [selectedPeriods, setSelectedPeriods] = useState([]);\r\n\r\n  const handlePeriodsChange = (evt, selection) => {\r\n    if (selection) {\r\n      if (selection.selected) {\r\n        setSelectedPeriods((prev) => prev.concat(selection.key));\r\n      } else {\r\n        setSelectedPeriods((prev) => prev.filter((p) => p !== selection.key));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChangeDate = (setFunc) => (dt) => {\r\n    setFunc(new Date(Date.UTC(dt.getFullYear(), dt.getMonth(), dt.getDate())));\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (dateFrom && dateTo && (dateTo < dateFrom)) {\r\n      return NotificationService.notifySevereWarning(\"'Date to' should be bigger than 'Date from'\");\r\n    }\r\n    // if any of the fields are set, generate the report\r\n    if (dateFrom || dateTo || selectedPeriods.length) {\r\n      const report = await ReportingService.generateAppraisalReport({\r\n        dateFrom,\r\n        dateTo,\r\n        periods: selectedPeriods,\r\n      });\r\n      if (report) {\r\n        return downloadBlob('appraisal.xlsx', report);\r\n      }\r\n      return null;\r\n    }\r\n    // otherwise, notify user\r\n    return NotificationService.notifySevereWarning('At least one field should be set');\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const result = await AppraisalService.getPeriods();\r\n      if (result && mounted) {\r\n        setPeriods(result.map((r) => ({\r\n          key: r.id,\r\n          text: r.name,\r\n          data: r,\r\n        })));\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <PageHeader text=\"Appraisal Report\" />\r\n      <Separator />\r\n      {/* Select periods */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={8} sm={12}>\r\n          <Dropdown\r\n            placeholder=\"Select periods\"\r\n            label=\"Select one or multiple periods\"\r\n            multiSelect\r\n            options={periods}\r\n            onChange={handlePeriodsChange}\r\n            selectedKeys={selectedPeriods}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {/* Select Date range */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <DatePicker\r\n              placeholder=\"Select date from...\"\r\n              aria-label=\"Select date from\"\r\n              value={dateFrom}\r\n              label=\"Date from\"\r\n              onSelectDate={handleChangeDate(setDateFrom)}\r\n            />\r\n          </Row>\r\n        </Col>\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <DatePicker\r\n              placeholder=\"Select date to...\"\r\n              aria-label=\"Select date to\"\r\n              value={dateTo}\r\n              label=\"Date to\"\r\n              onSelectDate={handleChangeDate(setDateTo)}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      {/* Generate button */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <PrimaryButton\r\n              text=\"Generate\"\r\n              type=\"submit\"\r\n              onClick={handleGenerate}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppraisalReport;\r\n","import ReportingPage from './ReportingPage';\r\n\r\nexport default ReportingPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport ReportsPage from '../reporting-reports';\r\nimport ReportingTemplatesPage from '../reporting-templates';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport AppraisalReport from '../../components/appraisal-report/AppraisalReport';\r\n\r\nconst ReportingPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <Container lg>\r\n      <Switch>\r\n        <Route path={`${path}/reports`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORTS\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <ReportsPage />\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/templates`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORT-TEMPLATES\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Reporting Templates\">\r\n              <ReportingTemplatesPage />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/appraisal-report`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORTS\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Appraisal Report\">\r\n              <AppraisalReport />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n      </Switch>\r\n    </Container>\r\n  );\r\n};\r\n\r\nReportingPage.propTypes = {\r\n  ctx: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      username: PropTypes.string,\r\n    }),\r\n  }).isRequired,\r\n};\r\n\r\nexport default ReportingPage;\r\n","import LoginRequired from './LoginRequired';\r\n\r\nexport default LoginRequired;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst LoginRequired = () => {\r\n  const [redirect, setRedirect] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function getUser() {\r\n      // const user = await LoginService.getCurrentUser();\r\n\r\n      if (!global.userLoaded) return;\r\n      // There is no user anymore, probably logged out, so we need to remove it from the state\r\n      if (global.user === null) {\r\n        setRedirect(true);\r\n      }\r\n    }\r\n    getUser();\r\n  }, [global]);\r\n\r\n  return (\r\n    <>\r\n      {redirect\r\n        ? <Redirect to=\"/login\" />\r\n        : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginRequired;\r\n","import LoginPage from './LoginPage';\r\n\r\nexport default LoginPage;\r\n","import React from 'react';\r\n\r\nconst LoginPage = () => (\r\n  <>\r\n    <h1 style={{ textAlign: 'center' }}>Login</h1>\r\n    <a href=\"/auth/login\">Login</a>\r\n  </>\r\n);\r\n\r\nexport default LoginPage;\r\n","import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst useFetch = (url, options = null, initialData = [], dependencies = [], cb = null) => {\r\n  const [data, setData] = useState(initialData);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      setData(initialData);\r\n      const result = await axios.get(url, options);\r\n      if (result.status === 200) {\r\n        setData(cb ? cb(result.data) : result.data);\r\n      }\r\n    }\r\n    if (url) {\r\n      run();\r\n    }\r\n  }, [url, ...dependencies]);\r\n\r\n  return [data, setData];\r\n};\r\n\r\nexport default useFetch;\r\n","import { DateTime } from 'luxon';\r\nimport axios from 'axios';\r\nimport NotificationService from '../NotificationService';\r\n\r\nconst TaskService = {\r\n  baseUrl: '/api/tasks',\r\n  taskPath: (id) => `/api/tasks/${id}`,\r\n  taskStatusPath: (id) => `/api/tasks/${id}/status`,\r\n  tasksCheckConflictsPath: '/api/tasks/check-busy',\r\n\r\n  async getTasks(params = {}) {\r\n    try {\r\n      const response = await axios.get(this.baseUrl, {\r\n        params,\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getBusyTasks({ user }) {\r\n    try {\r\n      const response = await axios.get(this.tasksCheckConflictsPath, {\r\n        params: { user },\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getTask() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async createTask(data) {\r\n    try {\r\n      const response = await axios.post(this.baseUrl, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTask(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskPath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTaskStatus(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskStatusPath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteTask() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  createTaskObject(task) {\r\n    const copy = { ...task };\r\n    const startRaw = DateTime\r\n      .fromISO(task.expectedStartDate).toUTC();\r\n    const endRaw = DateTime\r\n      .fromISO(task.expectedFinishDate).toUTC();\r\n    copy.expectedStartDate = DateTime.fromObject({\r\n      year: startRaw.year,\r\n      month: startRaw.month,\r\n      day: startRaw.day,\r\n      hour: startRaw.hour,\r\n      minute: startRaw.minute,\r\n      second: 0,\r\n      zone: task.zone,\r\n    }).toISO();\r\n    copy.expectedFinishDate = DateTime.fromObject({\r\n      year: endRaw.year,\r\n      month: endRaw.month,\r\n      day: endRaw.day,\r\n      hour: endRaw.hour,\r\n      minute: endRaw.minute,\r\n      second: 0,\r\n      zone: task.zone,\r\n    }).toISO();\r\n    return copy;\r\n  },\r\n};\r\n\r\nexport default TaskService;\r\n","export default {\r\n  getHoursFromText(text) {\r\n    const [hours, minutes, seconds] = text.split(':').map((t) => +t);\r\n    return {\r\n      h: hours,\r\n      m: minutes,\r\n      s: seconds ?? 0,\r\n    };\r\n  },\r\n\r\n  combineDateHours(date, hours) {\r\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate(), hours.h, hours.m, hours.s);\r\n  },\r\n\r\n  makeUTC(date) {\r\n    if (Number.isNaN(+new Date(date)) || date === null) return null;\r\n    return new Date(Date.UTC(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      date.getHours(),\r\n      date.getMinutes(),\r\n      date.getSeconds(),\r\n    ));\r\n  },\r\n\r\n  // Return an array containing all days from the same week as date\r\n  // By default first day is monday\r\n  getWeekFromDate(date, firstDay = 1) {\r\n    const result = [];\r\n    // Get first day of the week, take into account firstDay parameter\r\n    const firstDayUTC = this.makeUTCDateOnly(date);\r\n    let day = firstDayUTC.getDay();\r\n    if (day === 0 && firstDay === 1) day = 7;\r\n    firstDayUTC.setDate(firstDayUTC.getDate() - day + firstDay);\r\n    for (let i = 0; i < 7; i += 1) {\r\n      const dt = new Date(firstDayUTC);\r\n      dt.setDate(dt.getDate() + i);\r\n      result.push(dt);\r\n    }\r\n    return result;\r\n  },\r\n\r\n  makeUTCDateOnly(date) {\r\n    if (Number.isNaN(+new Date(date)) || date === null) return null;\r\n    return new Date(Date.UTC(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      0,\r\n      0,\r\n      0,\r\n    ));\r\n  },\r\n\r\n  getNearestTime(date) {\r\n    return `${(`0${date.getHours()}`).slice(-2)}:${(`0${Math.round(date.getMinutes() / 10) * 10}`).slice(-2)}`;\r\n  },\r\n};\r\n","import React, { useState, createContext, useRef } from 'react';\r\nimport {\r\n  Panel, PanelType,\r\n} from '@fluentui/react';\r\n\r\nconst PanelContext = createContext({\r\n  isPanel: false,\r\n  isOpen: null,\r\n  setOpen: null,\r\n  onRenderFooter: null,\r\n  setOnRenderFooter: null,\r\n});\r\n\r\n/**\r\n * @param {Object} onRenderComponent\r\n * @param {Object} options\r\n * @param {Function} options.onDismiss\r\n * @param {Number} options.type\r\n * @param {String} options.headerText\r\n * @param {Boolean} options.isLightDismiss\r\n * @param {Function} options.onRenderFooterContent\r\n * @param {Boolean} options.isFooterAtBottom\r\n * @param {String} options.id\r\n */\r\nconst usePanel = (Component, options = {}, componentProps = {}) => {\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [onRenderFooter, setOnRenderFooter] = useState(() => options.onRenderFooterContent);\r\n  const componentRef = useRef(null);\r\n  const [ctx] = useState({\r\n    isPanel: true,\r\n    isOpen,\r\n    setOpen,\r\n    onRenderFooter,\r\n    setOnRenderFooter,\r\n  });\r\n\r\n  const render = (\r\n    <PanelContext.Provider value={ctx}>\r\n      <Panel\r\n        id={options.id ?? 'use-panel'}\r\n        componentRef={componentRef}\r\n        isOpen={isOpen}\r\n        onDismiss={(options?.onDismiss && options.onDismiss(isOpen, setOpen))\r\n        ?? (() => setOpen(false))}\r\n        type={options.type ?? PanelType.smallFixedFar}\r\n        headerText={options.headerText ?? 'Panel'}\r\n        isLightDismiss={options.isLightDismiss ?? false}\r\n        onRenderFooterContent={onRenderFooter}\r\n        isFooterAtBottom={options.isFooterAtBottom ?? false}\r\n      >\r\n        {\r\n        isOpen\r\n          // eslint-disable-next-line react/jsx-props-no-spreading\r\n          ? <Component isOpen={isOpen} setOpen={setOpen} {...componentProps} />\r\n          : null\r\n      }\r\n      </Panel>\r\n    </PanelContext.Provider>\r\n  );\r\n\r\n  return {\r\n    isOpen, setOpen, render, componentRef,\r\n  };\r\n};\r\n\r\nexport default usePanel;\r\n\r\nexport {\r\n  PanelContext,\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePicker,\r\n  Checkbox,\r\n  makeStyles,\r\n  Text,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& .ms-BasePicker-text': {\r\n      display: 'flex',\r\n      flexFlow: 'row nowrap',\r\n      borderColor: theme.palette.neutralPrimaryAlt,\r\n    },\r\n    '& .ms-BasePicker-text:hover': {\r\n      borderColor: theme.palette.neutralPrimary,\r\n    },\r\n    '& span[id*=\\'selected-items\\']': {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'elipsis',\r\n    },\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n    '& input::placeholder': {\r\n      color: theme.palette.neutralPrimaryAlt,\r\n    },\r\n  },\r\n  label: {\r\n    padding: '5px 0',\r\n    fontWeight: 600,\r\n  },\r\n  hidden: {\r\n    height: 0,\r\n    width: 0,\r\n    outline: 'none',\r\n    border: 'none',\r\n    background: 'none',\r\n  },\r\n}));\r\n\r\nconst Autocomplete = ({\r\n  options,\r\n  selected,\r\n  onItemSelected,\r\n  label,\r\n  required,\r\n}) => {\r\n  const [calloutWidth, setCalloutWidth] = useState(400);\r\n  const input = useRef(null);\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (input?.current?.root?.current) {\r\n      setCalloutWidth(input.current.root.current.clientWidth);\r\n    }\r\n  }, [input]);\r\n\r\n  const toggleSelect = (item, ev) => {\r\n    if (ev) ev.preventDefault();\r\n    if (selected.indexOf(item) === -1) {\r\n      onItemSelected((prev) => prev.concat(item));\r\n      if (input.current) input.current.input.current.clear();\r\n    } else {\r\n      onItemSelected((prev) => prev.filter((p) => p !== item));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Text variant=\"medium\" block className={classes.label}>\r\n        {label}\r\n      </Text>\r\n      <BasePicker\r\n        className={classes.root}\r\n        componentRef={input}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onRenderItem={(itemProps) => {\r\n          if (selected.length > 1) {\r\n            if (itemProps.index === 0) return `${selected.length} selected`;\r\n            return '';\r\n          }\r\n          return itemProps.item.text;\r\n        }}\r\n        selectedItems={selected}\r\n        onChange={(items) => {\r\n          if (items.indexOf(undefined) === -1) onItemSelected(() => items);\r\n        }}\r\n        inputProps={{\r\n          placeholder: selected?.length ? '' : 'Search...',\r\n        }}\r\n        getTextFromItem={(item) => item.text}\r\n        onItemSelected={(item) => {\r\n          toggleSelect(item);\r\n        }}\r\n        onResolveSuggestions={\r\n        (filter) => options.filter((option) => option.text.indexOf(filter) !== -1)\r\n      }\r\n        onRenderSuggestionsItem={(suggestion) => (\r\n          <div\r\n            style={{\r\n              padding: '5px 10px',\r\n            }}\r\n          >\r\n            <Checkbox\r\n              checked={\r\n                selected.find((s) => s.text === suggestion.text) !== undefined\r\n              }\r\n              onRenderLabel={() => suggestion.text}\r\n            />\r\n          </div>\r\n        )}\r\n        pickerSuggestionsProps={{\r\n          onSuggestionClick: (ev, item) => {\r\n            toggleSelect(item, ev);\r\n          },\r\n        }}\r\n        pickerCalloutProps={{\r\n          target: input?.current?.root || document.body,\r\n          calloutWidth,\r\n        }}\r\n      />\r\n      <input type=\"text\" className={classes.hidden} required={required} value={selected.length ? 'filled' : ''} />\r\n    </>\r\n  );\r\n};\r\n\r\nAutocomplete.propTypes = {\r\n  options: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n  })).isRequired,\r\n  selected: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n  })).isRequired,\r\n  onItemSelected: PropTypes.func.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  required: PropTypes.bool,\r\n};\r\n\r\nAutocomplete.defaultProps = {\r\n  required: false,\r\n};\r\n\r\nexport default Autocomplete;\r\n","import {\r\n  ComboBox,\r\n  Position,\r\n  SpinButton,\r\n  TextField,\r\n  DatePicker,\r\n} from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport TaskService from '../../../../services/tasks/TaskService';\r\nimport UserService from '../../../../services/UserService';\r\nimport Autocomplete from '../../../shared/autocomplete/Autocomplete';\r\nimport constants from '../../../../utils/constants';\r\nimport { useFetch } from '../../../../services/hooks';\r\n\r\nconst AddTask = ({ setOpen, setTasks }) => {\r\n  const [options] = useState(constants.timeOptions);\r\n  const [users] = useFetch(UserService.teamUsersPath);\r\n  const [userOptions, setUserOptions] = useState([]);\r\n  const [values, setValues] = useState({\r\n    title: '',\r\n    description: '',\r\n    remarks: '',\r\n    expectedStartDate: new Date(),\r\n    expectedStartTime: '00:00',\r\n    duration: 60,\r\n    isBackgroundTask: false,\r\n    selectedUsers: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    setUserOptions(users.map((user) => ({\r\n      key: user.id,\r\n      text: user.username,\r\n      data: user,\r\n    })));\r\n  }, [users]);\r\n\r\n  const handleUpdate = (key) => (evt) => {\r\n    setValues((prev) => ({ ...prev, [key]: evt.target.value }));\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.persist();\r\n    evt.preventDefault();\r\n    const dt = values.expectedStartDate;\r\n    const [hr, min] = values.expectedStartTime.split(':');\r\n    const expDate = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(), +hr, +min);\r\n    const result = await TaskService.createTask({\r\n      title: values.title,\r\n      description: values.description,\r\n      remarks: values.remarks,\r\n      expectedStartDate: expDate,\r\n      expectedFinishDate: new Date(expDate.getTime() + values.duration * 60000),\r\n      assignedTo: values.selectedUsers.map((u) => u.data.id),\r\n      isBackgroundTask: values.isBackgroundTask,\r\n    });\r\n    if (result) {\r\n      setTasks((prev) => {\r\n        if (prev.length) {\r\n          return prev.concat(result);\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n    if (setOpen) {\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form id=\"create-task-form\" onSubmit={handleSubmit}>\r\n        <TextField\r\n          required\r\n          label=\"Title\"\r\n          value={values.title}\r\n          onChange={handleUpdate('title')}\r\n        />\r\n        <TextField\r\n          label=\"Description\"\r\n          value={values.description}\r\n          onChange={handleUpdate('description')}\r\n        />\r\n        <TextField\r\n          label=\"Remarks\"\r\n          value={values.remarks}\r\n          multiline\r\n          onChange={handleUpdate('remarks')}\r\n        />\r\n        <DatePicker\r\n          label=\"Start date\"\r\n          value={values.expectedStartDate}\r\n          onSelectDate={(date) => setValues((prev) => ({ ...prev, expectedStartDate: date }))}\r\n        />\r\n        <ComboBox\r\n          label=\"Start time\"\r\n          options={options}\r\n          selectedKey={values.expectedStartTime}\r\n          autoComplete=\"on\"\r\n          onChange={\r\n            (evt, option) => setValues((prev) => ({ ...prev, expectedStartTime: option.text }))\r\n          }\r\n          calloutProps={{\r\n            calloutMaxHeight: 400,\r\n          }}\r\n          useComboBoxAsMenuWidth\r\n        />\r\n        <SpinButton\r\n          label=\"Duration (min)\"\r\n          value={values.duration}\r\n          onChange={(evt) => {\r\n            let val = +evt.target.value;\r\n            if (Number.isNaN(val)) val = 0;\r\n            setValues((prev) => ({ ...prev, duration: val }));\r\n          }}\r\n          onIncrement={(val) => setValues((prev) => ({ ...prev, duration: (+val + 10) }))}\r\n          onDecrement={(val) => {\r\n            if (val > 10) setValues((prev) => ({ ...prev, duration: (+val - 10) }));\r\n          }}\r\n          min={0}\r\n          step={10}\r\n          incrementButtonAriaLabel=\"Increase value by 10\"\r\n          decrementButtonAriaLabel=\"Decrease value by 10\"\r\n          labelPosition={Position.top}\r\n        />\r\n        <Autocomplete\r\n          label=\"Assigned to\"\r\n          options={userOptions}\r\n          selected={values.selectedUsers}\r\n          onItemSelected={(data) => setValues((prev) => ({\r\n            ...prev,\r\n            selectedUsers: data(prev.selectedUsers),\r\n          }))}\r\n          required\r\n        />\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nAddTask.propTypes = {\r\n  setOpen: PropTypes.func,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nAddTask.defaultProps = {\r\n  setOpen: null,\r\n};\r\n\r\nexport default AddTask;\r\n","import AddTask from './AddTask';\r\n\r\nexport default AddTask;\r\n","import { DateTime } from 'luxon';\r\nimport { ActionButton, DatePicker, Stack } from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst CurrentDate = ({ currentDate, setCurrentDate }) => (\r\n  <>\r\n    <Stack horizontal verticalAlign=\"center\" horizontalAlign=\"center\">\r\n      <ActionButton\r\n        onClick={() => setCurrentDate((prev) => {\r\n          const from = DateTime.fromJSDate(prev);\r\n          return DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).minus({ day: 1 }).toJSDate();\r\n        })}\r\n        iconProps={{\r\n          iconName: 'Previous',\r\n        }}\r\n      />\r\n      <DatePicker\r\n        value={currentDate}\r\n        onSelectDate={(date) => {\r\n          const from = DateTime.fromJSDate(date);\r\n          const result = DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).toJSDate();\r\n          return setCurrentDate(result);\r\n        }}\r\n        firstDayOfWeek={1}\r\n      />\r\n      <ActionButton\r\n        onClick={() => setCurrentDate((prev) => {\r\n          const from = DateTime.fromJSDate(prev);\r\n          return DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).plus({ day: 1 }).toJSDate();\r\n        })}\r\n        iconProps={{\r\n          iconName: 'Next',\r\n        }}\r\n      />\r\n    </Stack>\r\n  </>\r\n);\r\n\r\nCurrentDate.propTypes = {\r\n  currentDate: PropTypes.instanceOf(Date).isRequired,\r\n  setCurrentDate: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default CurrentDate;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Facepile, makeStyles, OverflowButtonType, PersonaSize,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: 'inline-block',\r\n  },\r\n  container: {\r\n    textAlign: 'center',\r\n  },\r\n}));\r\n\r\nconst TaskPersonas = ({ task }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.container}>\r\n      <Facepile\r\n        className={classes.root}\r\n        personaSize={PersonaSize.size24}\r\n        maxDisplayablePersonas={1}\r\n        overflowButtonType={OverflowButtonType.descriptive}\r\n        overflowButtonProps={{\r\n          ariaDescription: 'More users',\r\n        }}\r\n        personas={task.assignedTo.map((u) => ({\r\n          personaName: u.username,\r\n        }))}\r\n        // onRenderPersona={(persona) => (\r\n        //   <Persona\r\n        //     size={PersonaSize.size24}\r\n        //     text={persona.personaName}\r\n        //     hidePersonaDetails\r\n        //     imageAlt={persona.personaName}\r\n        //   />\r\n        // )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskPersonas.propTypes = {\r\n  task: PropTypes.shape({\r\n    assignedTo: PropTypes.arrayOf(PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n};\r\n\r\nexport default TaskPersonas;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Collapse } from 'react-collapse';\r\nimport {\r\n  ButtonGrid, DefaultButton, makeStyles, Separator, Text,\r\n} from '@fluentui/react';\r\nimport TaskPersonas from '../task-personas/TaskPersonas';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& table': {\r\n      margin: 'auto',\r\n      borderCollapse: 'unset',\r\n    },\r\n  },\r\n  statusText: {\r\n    textAlign: 'center',\r\n  },\r\n}));\r\n\r\nconst TaskCollapsed = ({\r\n  task, collapsed, setCollapsed, handleStatusChange,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (item) => async () => {\r\n    await handleStatusChange(task, item.status);\r\n    setCollapsed(true);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Collapse isOpened={!collapsed}>\r\n        <Separator />\r\n        <TaskPersonas task={task} />\r\n        <Separator>\r\n          <Text variant=\"smallPlus\">Status</Text>\r\n        </Separator>\r\n        <ButtonGrid\r\n          columnCount={2}\r\n          onRenderItem={(item) => (\r\n            <DefaultButton\r\n              onClick={handleChange(item)}\r\n              disabled={item.disabled}\r\n              style={{\r\n                width: 115,\r\n                margin: 3,\r\n                fontSize: 8,\r\n                height: 18,\r\n              }}\r\n            >\r\n              <Text variant=\"small\">{item.text}</Text>\r\n            </DefaultButton>\r\n          )}\r\n          items={[\r\n            {\r\n              key: 'inprogress',\r\n              text: 'In progress',\r\n              status: 'InProgress',\r\n              disabled: task.status === 'InProgress',\r\n            },\r\n            {\r\n              key: 'paused',\r\n              text: 'Paused',\r\n              status: 'Paused',\r\n              disabled: task.status !== 'InProgress',\r\n            },\r\n            {\r\n              key: 'finished',\r\n              text: 'Finished',\r\n              status: 'Finished',\r\n              disabled: task.status === 'Finished',\r\n            },\r\n            {\r\n              key: 'cancelled',\r\n              text: 'Cancelled',\r\n              status: 'Cancelled',\r\n              disabled: task.status === 'Cancelled',\r\n            },\r\n          ]}\r\n        />\r\n      </Collapse>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskCollapsed.propTypes = {\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  task: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    status: PropTypes.string,\r\n  }).isRequired,\r\n  collapsed: PropTypes.bool.isRequired,\r\n  setCollapsed: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskCollapsed;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport {\r\n  ActionButton, makeStyles, Separator, Text,\r\n} from '@fluentui/react';\r\nimport TaskCollapsed from '../task-collapsed/TaskCollapsed';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: '75px',\r\n    position: 'relative',\r\n    '& .task-new': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #87D7A1',\r\n      borderLeft: '10px solid #87D7A1',\r\n      '& .task-new-status': {\r\n        backgroundColor: '#87D7A1',\r\n      },\r\n    },\r\n    '& .task-inprogress': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #F4C884',\r\n      borderLeft: '10px solid #F4C884',\r\n      '& .task-inprogress-status': {\r\n        backgroundColor: '#F4C884',\r\n      },\r\n    },\r\n    '& .task-finished': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #C4C4C4',\r\n      borderLeft: '10px solid #C4C4C4',\r\n      '& .task-finished-status': {\r\n        backgroundColor: '#C4C4C4',\r\n      },\r\n    },\r\n    '& .task-cancelled': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #FF6B59',\r\n      borderLeft: '10px solid #FF6B59',\r\n      '& .task-cancelled-status': {\r\n        backgroundColor: '#FF6B59',\r\n      },\r\n    },\r\n    '& .task-paused': {\r\n      minHeight: 'inherit',\r\n      border: `1px solid ${theme.palette.neutralLight}`,\r\n      borderLeft: `10px solid ${theme.palette.neutralLight}`,\r\n      '& .task-paused-status': {\r\n        backgroundColor: theme.palette.neutralLight,\r\n      },\r\n    },\r\n  },\r\n  status: {\r\n    alignSelf: 'center',\r\n    display: 'inline',\r\n    minWidth: '80px',\r\n    position: 'absolute',\r\n    textAlign: 'center',\r\n    color: theme.palette.neutralLighterAlt,\r\n    padding: '2px 0',\r\n  },\r\n  collapse: {\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    cursor: 'pointer',\r\n    outline: 'none',\r\n    marginBottom: theme.spacing.s2,\r\n  },\r\n  chevron: {\r\n    height: '100%',\r\n  },\r\n  chevronIcon: {\r\n    color: `${theme.palette.black} !important`,\r\n  },\r\n  rows: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    flexGrow: '1',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    minHeight: 'inherit',\r\n    maxWidth: '75%',\r\n  },\r\n  taskDescription: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'space-between',\r\n    width: '100%',\r\n    margin: '25px 0',\r\n  },\r\n  nowrap: {\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  prewrap: {\r\n    whiteSpace: 'pre-wrap',\r\n  },\r\n  title: {\r\n    paddingLeft: theme.spacing.s1,\r\n  },\r\n  description: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n    paddingLeft: theme.spacing.s1,\r\n  },\r\n  time: {\r\n    paddingRight: theme.spacing.s1,\r\n    lineHeight: '10px',\r\n  },\r\n  column: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n  },\r\n}));\r\n\r\nconst TaskItem = ({ task, setTasks, handleStatusChange }) => {\r\n  const classes = useStyles();\r\n  const [time, setTime] = useState({\r\n    from: '00:00',\r\n    to: '00:00',\r\n  });\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (task) {\r\n      const startDate = new Date(task.expectedStartDate);\r\n      const finishDate = new Date(task.expectedFinishDate);\r\n      const [fromHours, fromMinutes, toHours, toMinutes] = [\r\n        `0${startDate.getHours()}`.slice(-2),\r\n        `0${startDate.getMinutes()}`.slice(-2),\r\n        `0${finishDate.getHours()}`.slice(-2),\r\n        `0${finishDate.getMinutes()}`.slice(-2),\r\n      ];\r\n      setTime(() => ({\r\n        from: `${fromHours}:${fromMinutes}`,\r\n        to: `${toHours}:${toMinutes}`,\r\n      }));\r\n    }\r\n  }, [task]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={clsx(`task-${task.status.toLowerCase()}`, classes.column)}>\r\n        <span className={clsx([`task-${task.status.toLowerCase()}-status`, classes.status])}>\r\n          {task.status}\r\n        </span>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexFlow: 'row nowrap',\r\n          justifyContent: 'space-between',\r\n          minHeight: 'inherit',\r\n          alignItems: 'center',\r\n        }}\r\n        >\r\n          <div className={classes.rows}>\r\n            <div className={classes.taskDescription}>\r\n              <Text variant=\"medium\" className={clsx([classes.title, collapsed && classes.nowrap])}>{task.title}</Text>\r\n              <Text variant=\"smallPlus\" className={clsx([classes.description, collapsed ? classes.nowrap : classes.prewrap])}>{task.description}</Text>\r\n            </div>\r\n          </div>\r\n          <div className={classes.time}>\r\n            <Text variant=\"smallPlus\">{time.from}</Text>\r\n            <Separator styles={{\r\n              root: {\r\n                padding: 0,\r\n              },\r\n            }}\r\n            />\r\n            <Text variant=\"smallPlus\">{time.to}</Text>\r\n          </div>\r\n        </div>\r\n        <TaskCollapsed\r\n          task={task}\r\n          setTasks={setTasks}\r\n          collapsed={collapsed}\r\n          setCollapsed={setCollapsed}\r\n          handleStatusChange={handleStatusChange}\r\n        />\r\n        <div\r\n          tabIndex=\"-1\"\r\n          role=\"button\"\r\n          onKeyDown={(evt) => evt.key === 'Enter' && setCollapsed((prev) => !prev)}\r\n          className={clsx(classes.collapse)}\r\n          onClick={() => setCollapsed((prev) => !prev)}\r\n        >\r\n          <ActionButton\r\n            className={classes.chevron}\r\n            iconProps={{\r\n              iconName: collapsed ? 'ChevronDown' : 'ChevronUp',\r\n              className: classes.chevronIcon,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskItem.propTypes = {\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  task: PropTypes.shape({\r\n    status: PropTypes.string,\r\n    title: PropTypes.string,\r\n    description: PropTypes.string,\r\n    expectedStartDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\r\n    expectedFinishDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\r\n  }).isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskItem;\r\n","import TaskItem from './TaskItem';\r\n\r\nexport default TaskItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  makeStyles,\r\n  Persona, PersonaSize, Separator, Stack, StackItem,\r\n} from '@fluentui/react';\r\nimport TaskItem from '../task-item';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    alignContent: 'center',\r\n    width: '300px',\r\n    minWidth: '300px',\r\n    minHeight: '400px',\r\n    maxHeight: '600px',\r\n    padding: '5px',\r\n    overflow: 'auto',\r\n    backgroundColor: theme.semanticColors.bodyBackground,\r\n    border: `2px solid ${theme.palette.neutralLight}`,\r\n    '& > * + *': {\r\n      marginTop: '2px',\r\n    },\r\n    marginTop: theme.spacing.l1,\r\n  },\r\n}));\r\n\r\nconst TaskContainer = ({\r\n  tasks,\r\n  setTasks,\r\n  handleStatusChange,\r\n  user,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stack horizontalAlign=\"stretch\" verticalAlign=\"stretch\">\r\n        <StackItem align=\"center\">\r\n          <Persona size={PersonaSize.size32} text={user?.username} />\r\n        </StackItem>\r\n        <Separator />\r\n        {\r\n          tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              setTasks={setTasks}\r\n              handleStatusChange={handleStatusChange}\r\n            />\r\n          ))\r\n        }\r\n      </Stack>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskContainer.propTypes = {\r\n  user: PropTypes.shape({\r\n    username: PropTypes.string,\r\n  }),\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  tasks: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nTaskContainer.defaultProps = {\r\n  user: null,\r\n};\r\n\r\nexport default TaskContainer;\r\n","import {\r\n  ComboBox, makeStyles, Stack, Text,\r\n} from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst hourOptions = [\r\n  { key: '00:00', text: '00:00' },\r\n  { key: '01:00', text: '01:00' },\r\n  { key: '02:00', text: '02:00' },\r\n  { key: '03:00', text: '03:00' },\r\n  { key: '04:00', text: '04:00' },\r\n  { key: '05:00', text: '05:00' },\r\n  { key: '06:00', text: '06:00' },\r\n  { key: '07:00', text: '07:00' },\r\n  { key: '08:00', text: '08:00' },\r\n  { key: '09:00', text: '09:00' },\r\n  { key: '10:00', text: '10:00' },\r\n  { key: '11:00', text: '11:00' },\r\n  { key: '12:00', text: '12:00' },\r\n  { key: '13:00', text: '13:00' },\r\n  { key: '14:00', text: '14:00' },\r\n  { key: '15:00', text: '15:00' },\r\n  { key: '16:00', text: '16:00' },\r\n  { key: '17:00', text: '17:00' },\r\n  { key: '18:00', text: '18:00' },\r\n  { key: '19:00', text: '19:00' },\r\n  { key: '20:00', text: '20:00' },\r\n  { key: '21:00', text: '21:00' },\r\n  { key: '22:00', text: '22:00' },\r\n  { key: '23:00', text: '23:00' },\r\n];\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  combo: {\r\n    width: 100,\r\n  },\r\n  space: {\r\n    padding: '0px 10px',\r\n  },\r\n  text: {\r\n    padding: '10px',\r\n  },\r\n}));\r\n\r\nconst WorkingHours = ({ hours, setHours }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (type) => (evt, option) => {\r\n    setHours((prev) => ({\r\n      ...prev,\r\n      [type]: option.key,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Text className={classes.text} variant=\"medium\">Working hours</Text>\r\n        <Stack horizontalAlign=\"center\" horizontal verticalAlign=\"center\">\r\n          <ComboBox\r\n            className={classes.combo}\r\n            options={hourOptions}\r\n            selectedKey={hours.from}\r\n            autoComplete=\"on\"\r\n            useComboBoxAsMenuWidth\r\n            calloutProps={{\r\n              calloutMaxHeight: 500,\r\n            }}\r\n            onChange={handleChange('from')}\r\n          />\r\n          <span className={classes.space}>-</span>\r\n          <ComboBox\r\n            className={classes.combo}\r\n            options={hourOptions}\r\n            selectedKey={hours.to}\r\n            autoComplete=\"on\"\r\n            useComboBoxAsMenuWidth\r\n            calloutProps={{\r\n              calloutMaxHeight: 500,\r\n            }}\r\n            onChange={handleChange('to')}\r\n          />\r\n        </Stack>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\n\r\nWorkingHours.propTypes = {\r\n  hours: PropTypes.shape({\r\n    from: PropTypes.string,\r\n    to: PropTypes.string,\r\n  }).isRequired,\r\n  setHours: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default WorkingHours;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { createContext, useEffect, useState } from 'react';\r\nimport {\r\n  Dialog, DialogFooter, DialogType,\r\n} from '@fluentui/react';\r\nimport constants from '../../utils/constants';\r\n\r\nconst DialogContext = createContext({\r\n  isDialog: false,\r\n  isVisible: false,\r\n  setVisible: null,\r\n  show: null,\r\n  accept: null,\r\n  cancel: null,\r\n  resolve: null,\r\n  setResolve: null,\r\n  dialogFooter: null,\r\n  setDialogFooter: null,\r\n});\r\n\r\n/**\r\n * @param {Object} Component\r\n * @param {Object} options\r\n * @param {Function} options.onDismiss\r\n * @param {Boolean} options.isBlocking\r\n * @param {Number} options.type\r\n * @param {String} options.title\r\n * @param {String} options.subText\r\n * @param {Function} options.dialogFooter\r\n * @param {Object} componentProps\r\n */\r\nconst useDialog = (Component, options = {}, componentProps = {}) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [resolve, setResolve] = useState(null);\r\n  const [dialogFooter, setDialogFooter] = useState(() => options.dialogFooter);\r\n\r\n  useEffect(() => {\r\n    if (resolve && !visible) {\r\n      resolve(constants.dialogAnswers.No);\r\n    }\r\n  }, [resolve]);\r\n\r\n  const show = async () => {\r\n    setVisible(true);\r\n    return new Promise((res) => {\r\n      setResolve(() => (res));\r\n    });\r\n  };\r\n\r\n  const accept = () => {\r\n    if (resolve !== null) resolve(constants.dialogAnswers.Yes);\r\n    setVisible(false);\r\n  };\r\n\r\n  const cancel = () => {\r\n    if (resolve !== null) resolve(constants.dialogAnswers.No);\r\n    setVisible(false);\r\n  };\r\n\r\n  const [ctx] = useState({\r\n    isDialog: true,\r\n    isVisible: visible,\r\n    setVisible,\r\n    show,\r\n    accept,\r\n    cancel,\r\n    resolve,\r\n    setResolve,\r\n    dialogFooter,\r\n    setDialogFooter,\r\n  });\r\n\r\n  const render = (\r\n    visible\r\n      ? (\r\n        <DialogContext.Provider value={ctx}>\r\n          <Dialog\r\n            hidden={!visible}\r\n            onDismiss={options.onDismiss ?? (() => setVisible(false))}\r\n            modalProps={{\r\n              isBlocking: options.isBlocking ?? false,\r\n            }}\r\n            dialogContentProps={{\r\n              type: options.type ?? DialogType.normal,\r\n              title: options.title ?? 'Title',\r\n              subText: options.subText ?? '',\r\n            }}\r\n          >\r\n            <Component accept={accept} cancel={cancel} {...componentProps} />\r\n            {\r\n              dialogFooter\r\n                ? (\r\n                  <DialogFooter>\r\n                    { dialogFooter(accept, cancel) }\r\n                  </DialogFooter>\r\n                )\r\n                : null\r\n            }\r\n          </Dialog>\r\n        </DialogContext.Provider>\r\n      )\r\n      : null\r\n  );\r\n\r\n  return {\r\n    visible, setVisible, render, show,\r\n  };\r\n};\r\n\r\nexport default useDialog;\r\n\r\nexport {\r\n  DialogContext,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, Separator, Text } from '@fluentui/react';\r\nimport { Link as RLink } from 'react-router-dom';\r\nimport TaskService from '../../../../services/tasks/TaskService';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst TaskBusyConflict = ({\r\n  accept, setTasks, conflictTasks = [],\r\n}) => {\r\n  const handleSubmit = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const paused = conflictTasks.map(\r\n        (ctask) => TaskService\r\n          .updateTaskStatus(\r\n            ctask.id,\r\n            { status: constants.tasks.status.Paused },\r\n          ),\r\n      );\r\n      // Update paused tasks\r\n      (await Promise.all(paused)).map(\r\n        (task) => setTasks((prev) => prev.map((t) => (t.id === task.result.id ? task.result : t))),\r\n      );\r\n    } finally {\r\n      accept();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form id=\"task-busy-resolve\" onSubmit={handleSubmit}>\r\n      <Text block variant=\"medium\">Following tasks are still busy:</Text>\r\n      <Separator />\r\n      { conflictTasks.map((ctask, idx) => (\r\n        <RLink to={`/tasks/${ctask.id}`} target=\"_blank\" component={Link}>\r\n          <Text variant=\"medium\">\r\n            {idx + 1}\r\n            .\r\n            {' '}\r\n            {ctask.title}\r\n            {` (${new Date(ctask.actualStartDate).toLocaleString()})`}\r\n          </Text>\r\n        </RLink>\r\n      )) }\r\n      <Separator />\r\n      <Text block variant=\"medium\">If you continue, above tasks will be paused.</Text>\r\n    </form>\r\n  );\r\n};\r\n\r\nTaskBusyConflict.propTypes = {\r\n  accept: PropTypes.func.isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n  currentTask: PropTypes.shape({\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  conflictTasks: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n};\r\n\r\nexport default TaskBusyConflict;\r\n","import { useEffect, useState } from 'react';\r\n\r\nconst useLocalStorageState = (label, initialValue = []) => {\r\n  const [data, setData] = useState(JSON.parse(localStorage.getItem(label)) ?? initialValue);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(label, JSON.stringify(data));\r\n  }, [data]);\r\n\r\n  return [data, setData];\r\n};\r\n\r\nexport default useLocalStorageState;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst ConnectionService = {\r\n  baseUrl: '/stream',\r\n  subscribePath: '/stream/subscribe',\r\n\r\n  async connectSSE() {\r\n    try {\r\n      const es = new EventSource(this.baseUrl);\r\n      return es;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  async subscribe(data) {\r\n    try {\r\n      const response = await axios.post(this.subscribePath, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport default ConnectionService;\r\n","import { useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GlobalContext from '../../../../services/GlobalContext';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst TaskLiveUpdate = ({ setTasks }) => {\r\n  const global = useContext(GlobalContext);\r\n\r\n  const handleMessage = async (evt) => {\r\n    const info = JSON.parse(evt.data);\r\n    if (info) {\r\n      if (info.action === constants.connections.actions.INSERT) {\r\n        // Insert\r\n      } else if (info.action === constants.connections.actions.UPDATE) {\r\n        if (info.initiator !== global.user.id) {\r\n          setTasks((prev) => prev.map((task) => (task.id === info.data.id ? info.data : task)));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (global.connection) {\r\n      global.connection.addEventListener('message', handleMessage);\r\n    }\r\n    return () => {\r\n      if (global.connection) {\r\n        global.connection.removeEventListener('message', handleMessage);\r\n      }\r\n    };\r\n  }, [global.connection]);\r\n\r\n  return null;\r\n};\r\n\r\nTaskLiveUpdate.propTypes = {\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskLiveUpdate;\r\n","import {\r\n  ComboBox,\r\n  CommandBar, DefaultButton, Icon, makeStyles, PrimaryButton, Separator, Stack,\r\n} from '@fluentui/react';\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport { DateTime } from 'luxon';\r\nimport { useFetch } from '../../services/hooks';\r\nimport DU from '../../utils/date';\r\nimport TaskService from '../../services/tasks/TaskService';\r\nimport PageHeader from '../shared/page-header';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddTask from './components/add-task';\r\nimport CurrentDate from './components/current-date/CurrentDate';\r\nimport TaskContainer from './components/task-container/TaskContainer';\r\nimport WorkingHours from './components/working-hours/WorkingHours';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport useDialog from '../ui-hooks/useDialog';\r\nimport constants from '../../utils/constants';\r\nimport TaskBusyConflict from './components/task-busy-conflict/TaskBusyConflict';\r\nimport UserService from '../../services/UserService';\r\nimport useLocalStorageState from '../ui-hooks/useLocalStorage';\r\nimport ConnectionService from '../../services/ConnectionService';\r\nimport TaskLiveUpdate from './components/task-live-update/TaskLiveUpdate';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  searchIcon: {\r\n    color: theme.palette.themePrimary,\r\n    marginLeft: theme.spacing.s1,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n}));\r\n\r\nconst TaskDashboard = () => {\r\n  const classes = useStyles();\r\n  const global = useContext(GlobalContext);\r\n  const [users] = useFetch(UserService.teamUsersPath);\r\n  const [userOptions, setUserOptions] = useState([]);\r\n  const [selectedUsers, setSelectedUsers] = useLocalStorageState('DTSelectedUsers', [global.user.id]);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [hours, setHours] = useLocalStorageState('DTWorkingHours', {\r\n    from: '09:00',\r\n    to: '18:00',\r\n  });\r\n  const options = {\r\n    params: {\r\n      fromDate: DateTime.fromJSDate(currentDate).toUTC().set({\r\n        hour: DU.getHoursFromText(hours.from).h,\r\n        minute: DU.getHoursFromText(hours.from).m,\r\n        second: 0,\r\n      }).toJSDate(),\r\n      toDate: DateTime.fromJSDate(currentDate).toUTC().set({\r\n        hour: DU.getHoursFromText(hours.to).h,\r\n        minute: DU.getHoursFromText(hours.to).m,\r\n        second: 0,\r\n      }).toJSDate(),\r\n      users: selectedUsers,\r\n    },\r\n  };\r\n  const [tasks, setTasks] = useFetch(\r\n    TaskService.baseUrl,\r\n    options,\r\n    [],\r\n    [currentDate, hours, selectedUsers],\r\n    (data) => data.map((task) => TaskService.createTaskObject(task)),\r\n  );\r\n  const newPanel = usePanel(\r\n    AddTask, {\r\n      headerText: 'Create new task',\r\n      onRenderFooterContent: () => (\r\n        <PrimaryButton text=\"Create\" type=\"submit\" form=\"create-task-form\" />\r\n      ),\r\n    }, {\r\n      setTasks,\r\n    },\r\n  );\r\n  const [dialogProps, setDialogProps] = useState({});\r\n  const resolveBusyConflictDialog = useDialog(\r\n    TaskBusyConflict,\r\n    {\r\n      isBlocking: true,\r\n      title: 'Busy task found',\r\n      dialogFooter: (_accept, cancel) => (\r\n        <>\r\n          <DefaultButton onClick={cancel}>Cancel</DefaultButton>\r\n          <PrimaryButton style={{ marginLeft: '5px' }} form=\"task-busy-resolve\" type=\"submit\">Continue</PrimaryButton>\r\n        </>\r\n      ),\r\n    }, dialogProps,\r\n  );\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (global.connectionId) {\r\n        await ConnectionService.subscribe({ to: selectedUsers, connectionId: global.connectionId });\r\n      }\r\n    }\r\n    run();\r\n  }, [selectedUsers, global.connectionId]);\r\n\r\n  /**\r\n   * Update user options\r\n   */\r\n  useEffect(() => {\r\n    setUserOptions(users.map((user) => ({\r\n      key: user.id,\r\n      text: user.username,\r\n      data: user,\r\n    })));\r\n  }, [users]);\r\n\r\n  const handleUserSelect = (ev, option) => {\r\n    if (option.selected) {\r\n      setSelectedUsers((prev) => prev.concat(option.key));\r\n    } else {\r\n      setSelectedUsers((prev) => prev.filter((user) => user !== option.key));\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (task, status) => {\r\n    if (status === constants.tasks.status.InProgress && !task.isBackgroundTask) {\r\n      // If status to be updated is in progress:\r\n      // 1. Check for conflicts first,\r\n      const conflicts = await TaskService.getBusyTasks({ user: global.user.id });\r\n      // if found, show the dialog\r\n      if (conflicts.length > 0) {\r\n        setDialogProps({\r\n          setTasks,\r\n          conflictTasks: conflicts,\r\n        });\r\n        const answer = await resolveBusyConflictDialog.show();\r\n        if (answer === constants.dialogAnswers.No) return;\r\n      }\r\n    }\r\n    const updated = await TaskService.updateTaskStatus(task.id, { status });\r\n    setTasks((ts) => (ts.map((t) => (t.id === task.id ? updated.result : t))));\r\n    // if task was unpaused, update it too\r\n    if (updated.unpaused?.id) {\r\n      setTasks((ts) => (ts.map((t) => (t.id === updated.unpaused.id ? updated.unpaused : t))));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TaskLiveUpdate setTasks={setTasks} />\r\n      <Container lg>\r\n        <PageHeader text=\"Daily tasks\" />\r\n        <Row>\r\n          <Col xs={12}>\r\n            <CurrentDate currentDate={currentDate} setCurrentDate={setCurrentDate} />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <WorkingHours hours={hours} date={currentDate} setHours={setHours} />\r\n          </Col>\r\n        </Row>\r\n        <Separator />\r\n        <Row>\r\n          <Col>\r\n            <CommandBar\r\n              items={[\r\n                {\r\n                  key: 'new',\r\n                  text: 'New',\r\n                  iconProps: {\r\n                    iconName: 'Add',\r\n                  },\r\n                  onClick: () => { newPanel.setOpen(true); },\r\n                },\r\n                {\r\n                  key: 'users',\r\n                  text: 'Users',\r\n                  iconProps: {\r\n                    iconName: 'ProfileSearch',\r\n                  },\r\n                  onRender: () => (\r\n                    <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n                      <Icon className={classes.searchIcon} iconName=\"ProfileSearch\" />\r\n                      <ComboBox\r\n                        autoComplete=\"on\"\r\n                        options={userOptions}\r\n                        multiSelect\r\n                        selectedKey={selectedUsers}\r\n                        openOnKeyboardFocus\r\n                        onChange={handleUserSelect}\r\n                        calloutProps={{\r\n                          calloutMaxHeight: 500,\r\n                        }}\r\n                      />\r\n                    </Stack>\r\n                  ),\r\n                },\r\n              ]}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Separator />\r\n        <Row justify=\"around\">\r\n          {\r\n              selectedUsers.map((selUser) => (\r\n                <TaskContainer\r\n                  key={selUser}\r\n                  tasks={\r\n                    tasks\r\n                      .filter((task) => task\r\n                        .assignedTo\r\n                        .find((user) => user.id === selUser) !== undefined)\r\n                      .sort((t1, t2) => (t1.expectedStartDate < t2.expectedStartDate ? -1 : 1))\r\n                    }\r\n                  user={users.find((u) => u.id === selUser)}\r\n                  setTasks={setTasks}\r\n                  handleStatusChange={handleStatusChange}\r\n                />\r\n              ))\r\n            }\r\n        </Row>\r\n      </Container>\r\n      {newPanel.render}\r\n      {resolveBusyConflictDialog.render}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TaskDashboard;\r\n","import NotificationService from '../services/NotificationService';\r\n\r\n/**\r\n * Wrapper around servise axios request\r\n * Does the call to the backend, checks for successfull return and returns data\r\n * if Failed, notifies the user\r\n * @param {Function} requestFunc\r\n * @returns Object\r\n */\r\nconst serviceRequestWrapper = async (\r\n  requestFunc,\r\n  successStatusCode = 200,\r\n  showNotification = true,\r\n) => {\r\n  try {\r\n    const response = await requestFunc();\r\n    if (response.status === successStatusCode) {\r\n      return response.data;\r\n    }\r\n    throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n  } catch (err) {\r\n    if (showNotification) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n    }\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport default serviceRequestWrapper;\r\n","import axios from 'axios';\r\nimport serviceRequestWrapper from '../../utils/serviceRequestWrapper';\r\n\r\nconst TaskFlowService = {\r\n  baseUrl: '/api/task-flows',\r\n  singleUrl: (id) => `/api/task-flows/${id}`,\r\n\r\n  async getTaskFlow(id) {\r\n    return serviceRequestWrapper(() => axios.get(this.singleUrl(id)));\r\n  },\r\n\r\n  async createTaskFlow(data) {\r\n    return serviceRequestWrapper(() => axios.post(this.baseUrl, data));\r\n  },\r\n\r\n  async updateTaskFlow(id, data) {\r\n    return serviceRequestWrapper(() => axios.put(this.singleUrl(id), data));\r\n  },\r\n};\r\n\r\nexport default TaskFlowService;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Dropdown, Label, PrimaryButton, Stack, SwatchColorPicker, TextField,\r\n} from '@fluentui/react';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TeamService from '../../../../services/TeamService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst AddFlow = ({ setFlows }) => {\r\n  const [teams] = useFetch(TeamService.baseUrl);\r\n  const [data, setData] = useState({\r\n    name: '',\r\n    teams: [],\r\n    color: '',\r\n  });\r\n  const panel = useContext(PanelContext);\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (!data.name) {\r\n      return NotificationService.notifyError('Flow Name is missing');\r\n    } if (data.teams.length === 0) {\r\n      return NotificationService.notifyError('Please choose at least one team');\r\n    } if (!data.color) {\r\n      return NotificationService.notifyError('Color must be provided');\r\n    }\r\n    const createdFlow = await TaskFlowService.createTaskFlow(data);\r\n    if (createdFlow) {\r\n      setFlows((prev) => prev.concat(createdFlow));\r\n    }\r\n    if (panel.isPanel) panel.setOpen(false);\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (() => (\r\n        <Stack horizontal tokens={{ childrenGap: 2 }}>\r\n          <PrimaryButton text=\"Create\" type=\"submit\" form=\"add-flow-form\" />\r\n          <DefaultButton text=\"Close\" onClick={() => panel.setOpen(false)} />\r\n        </Stack>\r\n      )));\r\n    }\r\n  }, [panel]);\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} id=\"add-flow-form\">\r\n      <TextField\r\n        label=\"Name\"\r\n        value={data.name}\r\n        onChange={handleDataChange('name')}\r\n        placeholder=\"Flow name\"\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Flow teams\"\r\n        label=\"Teams\"\r\n        selectedKeys={data.teams}\r\n        multiSelect\r\n        options={teams.map((team) => ({\r\n          key: team.id,\r\n          text: team.name,\r\n        }))}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('teams', ([evt, option]) => {\r\n          if (option.selected) return data.teams.concat(option.key);\r\n          return data.teams.filter((team) => team !== option.key);\r\n        })}\r\n      />\r\n      <Label htmlFor=\"add-flow-color-picker\">Color</Label>\r\n      <SwatchColorPicker\r\n        id=\"add-flow-color-picker\"\r\n        columnCount={6}\r\n        cellHeight={35}\r\n        cellWidth={35}\r\n        cellShape=\"square\"\r\n        colorCells={constants.colors.map((color) => ({\r\n          id: color,\r\n          color,\r\n        }))}\r\n        selectedId={data.color}\r\n        onColorChanged={handleDataChange('color', ([id]) => id)}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nAddFlow.propTypes = {\r\n  setFlows: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AddFlow;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  DefaultButton, Dropdown, Label, PrimaryButton, Stack, SwatchColorPicker, TextField,\r\n} from '@fluentui/react';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport TeamService from '../../../../services/TeamService';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst EditFlow = ({ id, setFlows }) => {\r\n  const [flow, setFlow] = useFetch(TaskFlowService.singleUrl(id), null, null, [], (data) => ({\r\n    name: data.name,\r\n    color: data.color,\r\n    isActive: data.isActive,\r\n    teams: data.teams.map((team) => team.id),\r\n  }));\r\n  const [teams] = useFetch(TeamService.baseUrl);\r\n  const panel = useContext(PanelContext);\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    const result = await TaskFlowService.updateTaskFlow(id, flow);\r\n    if (result) {\r\n      setFlows((prev) => (prev.map((fl) => (fl.id === result.id ? result : fl))));\r\n    }\r\n    if (panel.isPanel) panel.setOpen(false);\r\n  };\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setFlow((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (() => (\r\n        <Stack horizontal tokens={{ childrenGap: 2 }}>\r\n          <PrimaryButton text=\"Update\" type=\"submit\" form=\"edit-flow-form\" />\r\n          <DefaultButton text=\"Close\" onClick={() => panel.setOpen(false)} />\r\n        </Stack>\r\n      )));\r\n    }\r\n  }, [panel]);\r\n\r\n  return flow !== null && (\r\n    <form onSubmit={handleSubmit} id=\"edit-flow-form\">\r\n      <TextField\r\n        label=\"Name\"\r\n        value={flow?.name}\r\n        onChange={handleDataChange('name')}\r\n        placeholder=\"Flow name\"\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Flow teams\"\r\n        label=\"Teams\"\r\n        selectedKeys={flow?.teams}\r\n        multiSelect\r\n        options={teams.map((team) => ({\r\n          key: team.id,\r\n          text: team.name,\r\n        }))}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('teams', ([evt, option]) => {\r\n          if (option.selected) return flow?.teams.concat(option.key);\r\n          return flow?.teams?.filter((team) => team !== option.key);\r\n        })}\r\n      />\r\n      <Label htmlFor=\"edit-flow-color-picker\">Color</Label>\r\n      <SwatchColorPicker\r\n        id=\"edit-flow-color-picker\"\r\n        columnCount={6}\r\n        cellHeight={35}\r\n        cellWidth={35}\r\n        cellShape=\"square\"\r\n        colorCells={constants.colors.map((color) => ({\r\n          id: color,\r\n          color,\r\n        }))}\r\n        selectedId={flow?.color}\r\n        onColorChanged={handleDataChange('color', ([colorId]) => colorId)}\r\n      />\r\n      <Checkbox\r\n        label=\"Active\"\r\n        checked={flow?.isActive}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('isActive', ([ev, checked]) => checked)}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nEditFlow.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  setFlows: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EditFlow;\r\n","import TaskFlows from './TaskFlows';\r\n\r\nexport default TaskFlows;\r\n","import React, { useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, PanelType, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddFlow from './components/add-flow/AddFlow';\r\nimport { useFetch } from '../../services/hooks';\r\nimport TaskFlowService from '../../services/tasks/TaskFlowService';\r\nimport EditFlow from './components/edit-flow/EditFlow';\r\n\r\nconst TaskFlows = () => {\r\n  const [flows, setFlows] = useFetch(TaskFlowService.baseUrl);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n    indices: [],\r\n  });\r\n  const addFlowPanel = usePanel(AddFlow, {\r\n    id: 'add-flow-panel',\r\n    headerText: 'Create new flow',\r\n    isFooterAtBottom: true,\r\n    type: PanelType.smallFixedFar,\r\n    isLightDismiss: false,\r\n    onDismiss: (isOpen, setOpen) => (ev) => {\r\n      const panel = document.getElementById('add-flow-panel');\r\n      if (panel) {\r\n        if (panel.contains(ev.target)) {\r\n          setOpen(false);\r\n        }\r\n      }\r\n    },\r\n  }, { setFlows });\r\n\r\n  const editFlowPanel = usePanel(EditFlow, {\r\n    id: 'edit-flow-panel',\r\n    headerText: 'Update flow',\r\n    isFooterAtBottom: true,\r\n    type: PanelType.smallFixedFar,\r\n    isLightDismiss: false,\r\n  }, { id: selectionDetails.items[0]?.id, setFlows });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'color',\r\n      name: ' Color',\r\n      fieldName: 'color',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: false,\r\n      maxWidth: 50,\r\n      onRender: (item) => (\r\n        <div style={{\r\n          backgroundColor: item.color,\r\n          width: 20,\r\n          height: 20,\r\n        }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'status',\r\n      name: ' Status',\r\n      fieldName: 'isActive',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      onRender: (item) => (item.isActive ? 'Active' : 'Disabled'),\r\n      filterValueAccessor: (item) => (item.isActive ? 'Active' : 'Disabled'),\r\n      minWidth: 100,\r\n      maxWidth: 150,\r\n    },\r\n    {\r\n      key: 'teams',\r\n      name: ' Teams',\r\n      fieldName: 'teams',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      onRender: (item) => item.teams.map((team) => team.name).join(', '),\r\n    },\r\n  ]);\r\n\r\n  return (\r\n    <Container md>\r\n      <Row>\r\n        <Col>\r\n          <PageHeader text=\"Task Flows\" />\r\n        </Col>\r\n      </Row>\r\n      <Separator />\r\n      <Row>\r\n        <Col>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'add',\r\n                text: 'Add',\r\n                iconProps: { iconName: 'Add' },\r\n                onClick: () => addFlowPanel.setOpen(true),\r\n              },\r\n              {\r\n                key: 'edit',\r\n                text: 'Edit',\r\n                iconProps: { iconName: 'Edit' },\r\n                disabled: selectionDetails.items.length === 0,\r\n                onClick: () => editFlowPanel.setOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: flows,\r\n              columns,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => editFlowPanel.setOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              setSelectionDetails,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {addFlowPanel.render}\r\n      {editFlowPanel.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskFlows;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles, Text } from '@fluentui/react';\r\nimport clsx from 'clsx';\r\nimport Chip from '../../../shared/chip/Chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.neutralLighter,\r\n    height: '100%',\r\n    textAlign: 'center',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'center',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.themePrimary,\r\n    },\r\n  },\r\n  selected: {\r\n    backgroundColor: theme.palette.themeDark,\r\n  },\r\n  flowItem: {\r\n    padding: 3,\r\n  },\r\n  noSelect: {\r\n    userSelect: 'none',\r\n  },\r\n}));\r\n\r\nconst PlanningCell = ({\r\n  userFlows, handleClick, handleInvoke, isSelected,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      className={clsx([classes.root, isSelected && classes.selected])}\r\n      onClick={handleClick}\r\n      onKeyDown={(evt) => evt.code === 'Enter' && handleClick()}\r\n      onDoubleClick={handleInvoke}\r\n    >\r\n      {\r\n        !userFlows?.flows || userFlows?.flows?.length === 0\r\n          ? <Text className={classes.noSelect} variant=\"medium\">-</Text>\r\n          : (\r\n            <ul>\r\n              {Array.from(userFlows?.flows)?.map((f) => (\r\n                <li className={classes.flowItem} key={f.id}>\r\n                  <Chip\r\n                    className={classes.noSelect}\r\n                    style={{\r\n                      backgroundColor: f.color ?? 'transparent',\r\n                      padding: 3,\r\n                      whiteSpace: 'pre-wrap',\r\n                    }}\r\n                  >\r\n                    <Text variant=\"medium\">{f.name}</Text>\r\n                  </Chip>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nPlanningCell.propTypes = {\r\n  userFlows: PropTypes.shape({\r\n    flows: PropTypes.arrayOf(PropTypes.shape({})),\r\n  }),\r\n  handleClick: PropTypes.func.isRequired,\r\n  handleInvoke: PropTypes.func.isRequired,\r\n  isSelected: PropTypes.bool.isRequired,\r\n};\r\n\r\nPlanningCell.defaultProps = {\r\n  userFlows: null,\r\n};\r\n\r\nexport default PlanningCell;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container } from 'react-grid-system';\r\nimport {\r\n  DetailsList,\r\n  DetailsListLayoutMode,\r\n  DetailsRow,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  SelectionMode,\r\n  useTheme,\r\n} from '@fluentui/react';\r\nimport PlanningCell from '../planning-cell/PlanningCell';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  row: {\r\n    color: theme.palette.black,\r\n  },\r\n}));\r\n\r\nconst PlanningMatrix = ({\r\n  userFlowMap, dates, users, selectedCell, setSelectedCell, handleInvoke,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const today = new Date().toLocaleDateString();\r\n  const userCol = {\r\n    key: 'username',\r\n    name: 'Username',\r\n    fieldName: 'username',\r\n    maxWidth: 300,\r\n    onRender: (item) => (<Persona size={PersonaSize.size24} text={item.username} />),\r\n    isResizable: true,\r\n  };\r\n\r\n  const isSelected = (date, userId) => Boolean(selectedCell?.date\r\n      && selectedCell.date === date\r\n      && selectedCell?.user\r\n      && selectedCell.user === userId);\r\n\r\n  const handleSelectCell = (date, user) => () => {\r\n    setSelectedCell({\r\n      date, user,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DetailsList\r\n        layoutMode={DetailsListLayoutMode.fixedColumns}\r\n        onRenderRow={(props) => (\r\n          <DetailsRow\r\n            className={classes.row}\r\n            // eslint-disable-next-line react/jsx-props-no-spreading\r\n            {...props}\r\n            styles={{\r\n              root: {\r\n                '&:hover': {\r\n                  backgroundColor: 'transparent',\r\n                },\r\n              },\r\n            }}\r\n          />\r\n        )}\r\n        columns={[userCol].concat(dates.map((date) => ({\r\n          key: date.toLocaleDateString(),\r\n          name: date.toLocaleDateString(),\r\n          minWidth: 100,\r\n          styles: {\r\n            root: {\r\n              backgroundColor: date.toLocaleDateString() === today ? theme.palette.themeLighter : '',\r\n            },\r\n          },\r\n          onRender: (item, idx, col) => (\r\n            <PlanningCell\r\n              // eslint-disable-next-line react/prop-types\r\n              userFlows={userFlowMap.get(item.id)?.get(col.key)}\r\n              handleClick={handleSelectCell(col.key, item.id)}\r\n              handleInvoke={handleInvoke}\r\n              isSelected={isSelected(col.key, item.id)}\r\n            />\r\n          ),\r\n        })))}\r\n        items={users}\r\n        selectionMode={SelectionMode.none}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nPlanningMatrix.propTypes = {\r\n  userFlowMap: PropTypes.instanceOf(Map).isRequired,\r\n  dates: PropTypes.arrayOf(PropTypes.instanceOf(Date)).isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  })).isRequired,\r\n  selectedCell: PropTypes.shape({\r\n    date: PropTypes.string,\r\n    user: PropTypes.string,\r\n  }),\r\n  setSelectedCell: PropTypes.func.isRequired,\r\n  handleInvoke: PropTypes.func.isRequired,\r\n};\r\n\r\nPlanningMatrix.defaultProps = {\r\n  selectedCell: null,\r\n};\r\n\r\nexport default PlanningMatrix;\r\n","import axios from 'axios';\r\nimport serviceRequestWrapper from '../../utils/serviceRequestWrapper';\r\n\r\nconst TaskPlanningService = {\r\n  baseUrl: '/api/task-planning',\r\n  addFlowUrl: (planningId, flowId) => `/api/task-planning/${planningId}/add-flow/${flowId}`,\r\n  removeFlowUrl: (planningId, flowId) => `/api/task-planning/${planningId}/remove-flow/${flowId}`,\r\n\r\n  async createPlanning(date, user, flows) {\r\n    return serviceRequestWrapper(() => axios.post(this.baseUrl, {\r\n      date,\r\n      user,\r\n      flows: flows.map((f) => f.id),\r\n    }));\r\n  },\r\n\r\n  async addFlowToPlanning(planningId, flowId) {\r\n    return serviceRequestWrapper(() => axios.put(this.addFlowUrl(planningId, flowId)));\r\n  },\r\n\r\n  async removeFromFromPlanning(planningId, flowId) {\r\n    return serviceRequestWrapper(() => axios.delete(this.removeFlowUrl(planningId, flowId)));\r\n  },\r\n};\r\n\r\nexport default TaskPlanningService;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePickerListBelow, Checkbox, IconButton, Label, makeStyles, Stack, Text,\r\n} from '@fluentui/react';\r\nimport Chip from '../../../shared/chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {},\r\n  suggestionRoot: {\r\n    padding: theme.spacing.s2,\r\n  },\r\n  suggestionCheck: {\r\n    marginRight: theme.spacing.s2,\r\n    padding: theme.spacing.s2,\r\n    outline: 'none',\r\n  },\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.s1,\r\n  },\r\n  colorBox: {\r\n    width: 20,\r\n    height: 20,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n  },\r\n  item: {\r\n    marginTop: 4,\r\n    '&:first-child': {\r\n      marginTop: 8,\r\n    },\r\n  },\r\n  removeIcon: {\r\n    width: 32,\r\n    height: 32,\r\n  },\r\n}));\r\n\r\nconst FlowPicker = ({\r\n  label, options, onSelect, onRemove, selected, showDeleteIcon, showCheckboxes, ...props\r\n}) => {\r\n  const classes = useStyles();\r\n  const selectedSet = useMemo(() => new Set(selected.map((s) => s.key)), [selected]);\r\n\r\n  const handleCheckboxClick = (item) => (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  const renderSuggestionsItem = (item) => (\r\n    <Stack\r\n      className={classes.suggestionRoot}\r\n      key={item.key}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      {\r\n        showCheckboxes\r\n        && (\r\n        <span\r\n          className={classes.suggestionCheck}\r\n          role=\"button\"\r\n          tabIndex={-1}\r\n          onKeyDown={(evt) => (evt.key === 'Space'\r\n            ? renderSuggestionsItem(item)()\r\n            : null)}\r\n          onClick={handleCheckboxClick(item)}\r\n        >\r\n          <Checkbox\r\n            checked={selectedSet.has(item.key)}\r\n          />\r\n        </span>\r\n        )\r\n      }\r\n      <div\r\n        className={classes.colorBox}\r\n        style={{\r\n          backgroundColor: item?.data?.color ?? 'transparent',\r\n        }}\r\n      />\r\n      <Stack horizontalAlign=\"start\">\r\n        <Text variant=\"mediumPlus\">{item.data.name}</Text>\r\n        <Text className={classes.secondaryText} variant=\"xSmall\">{item.data.teams.map((t) => t.name).join(', ')}</Text>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n\r\n  const renderItem = (details) => (\r\n    <Stack\r\n      key={details.item?.data?.id}\r\n      className={classes.item}\r\n      horizontalAlign=\"center\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <Chip\r\n        style={{\r\n          backgroundColor: details.item?.data?.color ?? 'transparent',\r\n          padding: 3,\r\n          whiteSpace: 'pre-wrap',\r\n          width: '50%',\r\n          marginLeft: showDeleteIcon ? 32 : 0,\r\n        }}\r\n      >\r\n        <Text variant=\"medium\">{details.item?.data?.name}</Text>\r\n      </Chip>\r\n      {\r\n        showDeleteIcon\r\n      && (\r\n      <IconButton\r\n        className={classes.removeIcon}\r\n        iconProps={{\r\n          iconName: 'Delete',\r\n        }}\r\n        onClick={() => onRemove(details.item)}\r\n      />\r\n      )\r\n      }\r\n    </Stack>\r\n  );\r\n\r\n  const handleSelect = (item) => {\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  return (\r\n    <div {...props}>\r\n      { label && (<Label>{label}</Label>) }\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder: 'Select...',\r\n        }}\r\n        className={classes.picker}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n        onResolveSuggestions={(filter) => options\r\n          .filter((o) => o.data.name.toLowerCase().indexOf(filter.toLowerCase()) !== -1)}\r\n        resolveDelay={300}\r\n        onRenderItem={renderItem}\r\n        selectedItems={selected}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onItemSelected={handleSelect}\r\n        pickerCalloutProps={{\r\n          preventDismissOnScroll: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nFlowPicker.propTypes = {\r\n  label: PropTypes.string,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  selected: PropTypes.arrayOf(String).isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n  onRemove: PropTypes.func.isRequired,\r\n  showDeleteIcon: PropTypes.bool,\r\n  showCheckboxes: PropTypes.bool,\r\n  props: PropTypes.shape({\r\n    style: PropTypes.shape({}),\r\n  }),\r\n};\r\n\r\nFlowPicker.defaultProps = {\r\n  label: null,\r\n  props: null,\r\n  showCheckboxes: true,\r\n  showDeleteIcon: false,\r\n};\r\n\r\nexport default FlowPicker;\r\n","import FlowPicker from './FlowPicker';\r\n\r\nexport default FlowPicker;\r\n","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\nimport FlowPicker from '../flow-picker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth: 300,\r\n    minHeight: 200,\r\n  },\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.neutralLight,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.s1,\r\n  },\r\n  item: {\r\n    marginTop: theme.spacing.s1,\r\n  },\r\n  colorBox: {\r\n    width: 20,\r\n    height: 20,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  focusPoint: {\r\n    visibility: 'hidden',\r\n    height: 0,\r\n    width: 0,\r\n    margin: 0,\r\n    padding: 0,\r\n    border: 'none',\r\n  },\r\n  removeIcon: {\r\n    width: 32,\r\n    height: 32,\r\n  },\r\n}));\r\n\r\nconst PlanningFlowsDialog = ({\r\n  planning, options, addFlow, removeFlow, users, user,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const validOptions = useMemo(() => {\r\n    const selected = new Set(planning?.flows?.map((f) => f.id));\r\n    const userTeams = new Set(\r\n      users.find((u) => u.id === user)?.teams?.map((t) => t.id),\r\n    );\r\n    const active = options.filter((o) => o.data.isActive);\r\n    const teamFlows = active.filter(\r\n      (o) => o.data.teams.filter((t) => userTeams.has(t.id)).length > 0,\r\n    );\r\n    return teamFlows.filter((o) => !selected.has(o.data.id));\r\n  }, [options, planning, users, user]);\r\n\r\n  const handleSelect = (item) => {\r\n    addFlow(planning, item.data);\r\n  };\r\n\r\n  const handleRemove = (item) => {\r\n    removeFlow(planning, item.data);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <input className={classes.focusPoint} />\r\n      <FlowPicker\r\n        options={validOptions}\r\n        showCheckboxes={false}\r\n        showDeleteIcon\r\n        onSelect={handleSelect}\r\n        onRemove={handleRemove}\r\n        selected={planning ? planning?.flows?.map((f) => ({ key: f.id, data: f })) : []}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nPlanningFlowsDialog.propTypes = {\r\n  planning: PropTypes.shape({\r\n    flows: PropTypes.arrayOf(PropTypes.shape({})),\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n    }).isRequired,\r\n  }).isRequired,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  addFlow: PropTypes.func.isRequired,\r\n  removeFlow: PropTypes.func.isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  user: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default PlanningFlowsDialog;\r\n","import PlanningFlowsDialog from './PlanningFlowsDialog';\r\n\r\nexport default PlanningFlowsDialog;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Calendar,\r\n  ComboBox,\r\n  CommandBar,\r\n  DateRangeType,\r\n  DialogType,\r\n  Icon,\r\n  makeStyles,\r\n  PrimaryButton,\r\n  Separator,\r\n  Stack,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport PlanningMatrix from './components/planning-matrix/PlanningMatrix';\r\nimport { useFetch } from '../../services/hooks';\r\nimport TeamService from '../../services/TeamService';\r\nimport TaskPlanningService from '../../services/tasks/TaskPlanningService';\r\nimport useLocalStorageState from '../ui-hooks/useLocalStorage';\r\nimport UserService from '../../services/UserService';\r\nimport DateUtils from '../../utils/date';\r\nimport useDialog from '../ui-hooks/useDialog';\r\nimport PlanningFlowsDialog from './components/planning-flows-dialog';\r\nimport TaskFlowService from '../../services/tasks/TaskFlowService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  searchIcon: {\r\n    color: theme.palette.themePrimary,\r\n    marginLeft: theme.spacing.s1,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n}));\r\n\r\nconst TaskPlanning = () => {\r\n  const classes = useStyles();\r\n  const [date, setDate] = useState(new Date());\r\n  const [dates, setDates] = useState(DateUtils.getWeekFromDate(date, 1));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl);\r\n  const [selectedCell, setSelectedCell] = useState(null);\r\n  const [teams] = useFetch(\r\n    TeamService.baseUrl,\r\n    null, [], [],\r\n    (data) => data.map((team) => ({\r\n      key: team.id,\r\n      text: team.name,\r\n      data: team,\r\n    })),\r\n  );\r\n  const [selectedTeam, setSelectedTeam] = useLocalStorageState('TaskPlanningSelectedTeam', null);\r\n  const [users] = useFetch(\r\n    UserService.baseUrl,\r\n    {\r\n      params: {\r\n        teams: [selectedTeam],\r\n      },\r\n    }, [], [selectedTeam],\r\n  );\r\n  const [data, setData] = useFetch(\r\n    TaskPlanningService.baseUrl,\r\n    {\r\n      params: {\r\n        dateFrom: DateUtils.makeUTCDateOnly(dates[0]),\r\n        dateTo: DateUtils.makeUTCDateOnly(dates[dates.length - 1]),\r\n        teams: [selectedTeam],\r\n      },\r\n    },\r\n    [],\r\n    [selectedTeam, dates],\r\n  );\r\n\r\n  const userFlowMap = useMemo(() => {\r\n    const result = new Map();\r\n    // Insert all users in the map\r\n    users.forEach((user) => result.set(user.id, new Map()));\r\n    // For each planning item, assign info to the appropriate user\r\n    data.forEach((item) => {\r\n      if (result.has(item.user?.id)) {\r\n        result.get(item.user.id).set(new Date(item.date).toLocaleDateString(), item);\r\n      }\r\n    });\r\n    return result;\r\n  }, [data, users]);\r\n\r\n  const handleAddFlow = async (planning, flow) => {\r\n    if (!planning) {\r\n      const result = await TaskPlanningService\r\n        .createPlanning(selectedCell.date, selectedCell.user, [flow]);\r\n      setData((prev) => prev.concat(result));\r\n    } else {\r\n      const result = await TaskPlanningService\r\n        .addFlowToPlanning(planning.id, flow.id);\r\n      setData((prev) => prev.map((plan) => (plan.id === result.id ? result : plan)));\r\n    }\r\n  };\r\n\r\n  const handleRemoveFlow = async (planning, flow) => {\r\n    if (planning?.id) {\r\n      const result = await TaskPlanningService.removeFromFromPlanning(planning.id, flow.id);\r\n      setData((prev) => prev.map((plan) => (plan.id === result.id ? result : plan)));\r\n    }\r\n  };\r\n\r\n  const flowsDialog = useDialog(\r\n    PlanningFlowsDialog,\r\n    {\r\n      title: 'Details',\r\n      type: DialogType.largeHeader,\r\n      dialogFooter: () => (\r\n        // eslint-disable-next-line jsx-a11y/tabindex-no-positive\r\n        <PrimaryButton tabIndex={1} onClick={() => flowsDialog.setVisible(false)} text=\"Close\" />\r\n      ),\r\n    }, {\r\n      planning: userFlowMap.get(selectedCell?.user)?.get(selectedCell?.date),\r\n      options: flows.map((f) => ({\r\n        key: f.id,\r\n        data: f,\r\n      })),\r\n      addFlow: handleAddFlow,\r\n      removeFlow: handleRemoveFlow,\r\n      users,\r\n      user: selectedCell?.user,\r\n    },\r\n  );\r\n\r\n  const handleInvoke = () => {\r\n    flowsDialog.setVisible(true);\r\n  };\r\n\r\n  const handleSelectWeek = (selDate, selDates) => {\r\n    setDate(selDate);\r\n    setDates(selDates);\r\n  };\r\n\r\n  return (\r\n    <Container md>\r\n      <Row>\r\n        <Col>\r\n          <PageHeader text=\"Task Planning\" />\r\n        </Col>\r\n      </Row>\r\n      <Separator />\r\n      <CommandBar\r\n        items={[\r\n          {\r\n            key: 'add',\r\n            text: 'Add',\r\n            iconProps: {\r\n              iconName: 'Add',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'copy',\r\n            text: 'Copy',\r\n            iconProps: {\r\n              iconName: 'Copy',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'paste',\r\n            text: 'Paste',\r\n            iconProps: {\r\n              iconName: 'Paste',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'copymult',\r\n            text: 'Copy mult.',\r\n            iconProps: {\r\n              iconName: 'Copy',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'teams',\r\n            text: 'Teams',\r\n            iconProps: {\r\n              iconName: 'Search',\r\n            },\r\n            onRender: () => (\r\n              <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n                <Icon className={classes.searchIcon} iconName=\"ProfileSearch\" />\r\n                <ComboBox\r\n                  placeholder=\"Teams\"\r\n                  autoComplete=\"on\"\r\n                  options={teams}\r\n                  selectedKey={selectedTeam}\r\n                  openOnKeyboardFocus\r\n                  onChange={(evt, option) => setSelectedTeam(option.key)}\r\n                  calloutProps={{\r\n                    calloutMaxHeight: 500,\r\n                  }}\r\n                  useComboBoxAsMenuWidth\r\n                />\r\n              </Stack>\r\n            ),\r\n          },\r\n        ]}\r\n      />\r\n      <Separator />\r\n      <Row>\r\n        <Calendar\r\n          isMonthPickerVisible={false}\r\n          dateRangeType={DateRangeType.Week}\r\n          showWeekNumbers\r\n          showSixWeeksByDefault\r\n          showGoToToday\r\n          value={date}\r\n          onSelectDate={handleSelectWeek}\r\n          firstDayOfWeek={1}\r\n        />\r\n        <Col>\r\n          <PlanningMatrix\r\n            userFlowMap={userFlowMap}\r\n            users={users}\r\n            dates={dates}\r\n            selectedCell={selectedCell}\r\n            setSelectedCell={setSelectedCell}\r\n            handleInvoke={handleInvoke}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {flowsDialog.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskPlanning;\r\n","import axios from 'axios';\r\nimport NotificationService from '../NotificationService';\r\n\r\nconst TaskRuleService = {\r\n  baseUrl: '/api/task-rules',\r\n  taskRulePath: (id) => `/api/task-rules/${id}`,\r\n\r\n  async getTaskRules(params = {}) {\r\n    try {\r\n      const response = await axios.get(this.baseUrl, {\r\n        params,\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getTaskRule() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async createTaskRule(data) {\r\n    try {\r\n      const response = await axios.post(this.baseUrl, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTaskRule(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskRulePath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteTaskRule() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n};\r\n\r\nexport default TaskRuleService;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox, ChoiceGroup, Stack, makeStyles, Dropdown, SpinButton, Position,\r\n} from '@fluentui/react';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst monthlyOptions = [\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Day,\r\n    text: 'Callendar day',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Workday,\r\n    text: 'Workday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Monday,\r\n    text: 'Monday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Tuesday,\r\n    text: 'Tuesday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Wednesday,\r\n    text: 'Wednesday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Thursday,\r\n    text: 'Thursday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Friday,\r\n    text: 'Friday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Saturday,\r\n    text: 'Saturday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Sunday,\r\n    text: 'Sunday',\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  weeklyCheck: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  monthlyCheck: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  monthlyDropdown: {\r\n    marginBottom: theme.spacing.m,\r\n  },\r\n}));\r\n\r\nconst AddRuleType = ({ data, setData }) => {\r\n  const classes = useStyles();\r\n  const options = [\r\n    { key: 'Work', text: 'Workday' },\r\n    { key: 'Calendar', text: 'Calendar day' },\r\n  ];\r\n\r\n  const handleSetWeeklyData = (day) => (evt, checked) => {\r\n    const dt = data.weeklyDays ?? [];\r\n    if (checked) {\r\n      return setData((prev) => ({\r\n        ...prev,\r\n        weeklyDays: dt.concat(day).sort(),\r\n      }));\r\n    }\r\n    return setData((prev) => ({\r\n      ...prev,\r\n      weeklyDays: dt.filter((d) => d !== day).sort(),\r\n    }));\r\n  };\r\n\r\n  const handleSetMonths = (month) => (evt, checked) => {\r\n    const dt = data.monthlyMonths ?? [];\r\n    if (checked) {\r\n      return setData((prev) => ({\r\n        ...prev,\r\n        monthlyMonths: dt.concat(month).sort(),\r\n      }));\r\n    }\r\n    return setData((prev) => ({\r\n      ...prev,\r\n      monthlyMonths: dt.filter((d) => d !== month).sort(),\r\n    }));\r\n  };\r\n\r\n  const isDaySelected = (day) => {\r\n    if (!data.weeklyDays) return false;\r\n    return data.weeklyDays.indexOf(day) !== -1;\r\n  };\r\n\r\n  let render;\r\n\r\n  switch (data.type) {\r\n    case constants.tasks.types.Daily:\r\n      render = (\r\n        <>\r\n          <ChoiceGroup\r\n            label=\"Day type\"\r\n            defaultSelectedKey={data.dailyType}\r\n            options={options}\r\n            onChange={(ev, option) => setData((prev) => ({\r\n              ...prev,\r\n              dailyType: option.key,\r\n            }))}\r\n          />\r\n        </>\r\n      );\r\n      break;\r\n    case constants.tasks.types.Weekly:\r\n      render = (\r\n        <Stack className={classes.weeklyCheck} verticalFill verticalAlign=\"start\">\r\n          <Checkbox onChange={handleSetWeeklyData(1)} checked={isDaySelected(1)} label=\"Monday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(2)} checked={isDaySelected(2)} label=\"Tuesday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(3)} checked={isDaySelected(3)} label=\"Wednesday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(4)} checked={isDaySelected(4)} label=\"Thursday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(5)} checked={isDaySelected(5)} label=\"Friday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(6)} checked={isDaySelected(6)} label=\"Saturday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(7)} checked={isDaySelected(7)} label=\"Sunday\" />\r\n        </Stack>\r\n      );\r\n      break;\r\n    case constants.tasks.types.Monthly:\r\n      render = (\r\n        <Stack verticalAlign=\"start\" verticalFill>\r\n          <SpinButton\r\n            value={data.monthlyOn}\r\n            onChange={(evt, newVal) => {\r\n              if (newVal && !Number.isNaN(+newVal)) {\r\n                setData((prev) => ({\r\n                  ...prev,\r\n                  monthlyOn: +newVal,\r\n                }));\r\n              }\r\n            }}\r\n            min={1}\r\n            max={31}\r\n            label=\"On\"\r\n            incrementButtonAriaLabel=\"Increase value by 1\"\r\n            decrementButtonAriaLabel=\"Decrease value by 1\"\r\n            labelPosition={Position.top}\r\n          />\r\n          <Dropdown\r\n            className={classes.monthlyDropdown}\r\n            options={monthlyOptions}\r\n            placeHolder=\"Select\"\r\n            onChange={(evt, option) => setData((prev) => ({\r\n              ...prev,\r\n              monthlyOnType: option.key,\r\n            }))}\r\n            label=\"Type\"\r\n          />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(0)} label=\"January\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(1)} label=\"February\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(2)} label=\"March\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(3)} label=\"April\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(4)} label=\"May\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(5)} label=\"June\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(6)} label=\"July\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(7)} label=\"August\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(8)} label=\"September\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(9)} label=\"October\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(10)} label=\"November\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(11)} label=\"December\" />\r\n        </Stack>\r\n      );\r\n      break;\r\n    default:\r\n      render = null;\r\n      break;\r\n  }\r\n\r\n  return render;\r\n};\r\n\r\nAddRuleType.propTypes = {\r\n  setData: PropTypes.func.isRequired,\r\n  data: PropTypes.shape({\r\n    type: PropTypes.string,\r\n    dailyType: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default AddRuleType;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePickerListBelow, Checkbox, Label, makeStyles, Persona, PersonaSize, Stack, Text,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {},\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  suggestionRoot: {\r\n    padding: theme.spacing.s2,\r\n  },\r\n  suggestionCheck: {\r\n    marginRight: theme.spacing.s2,\r\n    padding: theme.spacing.s2,\r\n    outline: 'none',\r\n  },\r\n  suggestionText: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  itemRoot: {\r\n    marginTop: 4,\r\n    '&:first-child': {\r\n      marginTop: 8,\r\n    },\r\n  },\r\n}));\r\n\r\nconst PeoplePicker = ({\r\n  label, options, onSelect, onRemove, selected, ...props\r\n}) => {\r\n  const classes = useStyles();\r\n  const selectedSet = useMemo(() => new Set(selected.map((s) => s.key)), [selected]);\r\n\r\n  const handleCheckboxClick = (item) => (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  const renderSuggestionsItem = (item) => (\r\n    <Stack\r\n      key={item.key}\r\n      className={classes.suggestionRoot}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <span\r\n        className={classes.suggestionCheck}\r\n        role=\"button\"\r\n        tabIndex={-1}\r\n        onKeyDown={(evt) => (evt.key === 'Space'\r\n          ? renderSuggestionsItem(item)()\r\n          : null)}\r\n        onClick={handleCheckboxClick(item)}\r\n      >\r\n        <Checkbox\r\n          checked={selectedSet.has(item.key)}\r\n        />\r\n      </span>\r\n      <Text className={classes.suggestionText} variant=\"mediumPlus\">{item.data.username}</Text>\r\n    </Stack>\r\n  );\r\n\r\n  const renderItem = (details) => (\r\n    <Stack\r\n      className={classes.itemRoot}\r\n      key={details.item.id}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <Persona text={details.item.data.username} size={PersonaSize.size24} />\r\n    </Stack>\r\n  );\r\n\r\n  const handleSelect = (item) => {\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  return (\r\n    <div {...props}>\r\n      { label && (<Label>{label}</Label>) }\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder: 'Select...',\r\n        }}\r\n        className={classes.picker}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n        onResolveSuggestions={(filter) => options\r\n          .filter((o) => o.data.username.toLowerCase().indexOf(filter.toLowerCase()) !== -1)}\r\n        resolveDelay={300}\r\n        onRenderItem={renderItem}\r\n        selectedItems={selected}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onItemSelected={handleSelect}\r\n        pickerCalloutProps={{\r\n          preventDismissOnScroll: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nPeoplePicker.propTypes = {\r\n  label: PropTypes.string,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  selected: PropTypes.arrayOf(String).isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n  onRemove: PropTypes.func.isRequired,\r\n  props: PropTypes.shape({\r\n    style: PropTypes.shape({}),\r\n  }),\r\n};\r\n\r\nPeoplePicker.defaultProps = {\r\n  label: null,\r\n  props: null,\r\n};\r\n\r\nexport default PeoplePicker;\r\n","import React, { useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  ComboBox,\r\n  Dropdown,\r\n  makeStyles,\r\n  Position,\r\n  SpinButton,\r\n  TextField,\r\n  DatePicker,\r\n  Separator,\r\n} from '@fluentui/react';\r\nimport { DateTime } from 'luxon';\r\nimport constants from '../../../../utils/constants';\r\nimport UserService from '../../../../services/UserService';\r\nimport AddRuleType from '../add-rule-type/AddRuleType';\r\nimport TaskRuleService from '../../../../services/tasks/TaskRuleService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport DateUtils from '../../../../utils/date';\r\nimport PeoplePicker from '../../../shared/people-picker/PeoplePicker';\r\nimport FlowPicker from '../../../task-planning/components/flow-picker';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\n\r\nconst { tasks } = constants;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    '& > * + *': {\r\n      paddingTop: theme.spacing.s1,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AddRule = ({ setRules, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [users] = useFetch(UserService.teamUsersPath,\r\n    null, [], [],\r\n    (dt) => dt.map((user) => ({\r\n      key: user.id,\r\n      data: user,\r\n    })));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl,\r\n    null, [], [],\r\n    (dt) => dt.map((flow) => ({\r\n      key: flow.id,\r\n      data: flow,\r\n    })));\r\n  const [data, setData] = useState({\r\n    title: '',\r\n    description: '',\r\n    type: tasks.types.Daily,\r\n    dailyType: tasks.DayTypes.Workday,\r\n    isBackgroundTask: false,\r\n    isSharedTask: false,\r\n    taskStartTime: new Date(),\r\n    validFrom: new Date(),\r\n    taskDuration: 60,\r\n    users: [],\r\n    flows: [],\r\n    zone: DateTime.local().zoneName,\r\n  });\r\n  const typeOptions = useRef(Object.keys(tasks.types).map((t) => ({\r\n    key: t,\r\n    text: t,\r\n  })));\r\n  const timeOptions = useRef(constants.timeOptions);\r\n\r\n  const setValue = (field) => (evt) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: evt.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleTypeChange = (evt, item) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      type: item.key,\r\n    }));\r\n  };\r\n\r\n  const handleSelectDate = (field) => (date) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)),\r\n    }));\r\n  };\r\n\r\n  const handleSelectTime = (evt, option) => {\r\n    const [hour, minute] = option.text.split(':').map((e) => +e);\r\n    if (hour !== undefined && minute !== undefined) {\r\n      setData((prev) => ({\r\n        ...prev,\r\n        taskStartTime: DateTime.local().set({\r\n          hour,\r\n          minute,\r\n          second: 0,\r\n        }).toJSDate(),\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (data.validFrom && data.validTo && data.validTo < data.validFrom) {\r\n      await NotificationService.notifyError(\"'Valid From' cannot be bigger than 'Valid To'\");\r\n      return;\r\n    }\r\n    // Send weeklyDays as an Array of dates instead of numbers\r\n    if (data.weeklyDays && data.weeklyDays.length) {\r\n      data.weeklyDays = data.weeklyDays.map((day) => {\r\n        const date = DateTime.local().toUTC().set({\r\n          weekday: day,\r\n        });\r\n        return date;\r\n      });\r\n    }\r\n    if (data.monthlyMonths && data.monthlyMonths.length) {\r\n      data.monthlyMonths = data.monthlyMonths.map((month) => {\r\n        const date = new Date(2020, 1, 1);\r\n        date.setMonth(month);\r\n        date.setHours(data.taskStartTime.getHours());\r\n        date.setMinutes(data.taskStartTime.getMinutes());\r\n        return date;\r\n      });\r\n    }\r\n    const exp = DateTime.fromJSDate(data.taskStartTime);\r\n    const utcExpected = DateTime.utc(exp.year, exp.month, exp.day, exp.hour, exp.minute, 0);\r\n    const result = await TaskRuleService.createTaskRule({\r\n      ...data,\r\n      taskStartTime: utcExpected.toJSDate(),\r\n      users: data.users.map((u) => u.id),\r\n      flows: data.flows.map((f) => f.id),\r\n    });\r\n    setRules((prev) => [...prev, result]);\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <form className={classes.form} id=\"add-task-rule-form\" onSubmit={handleSubmit}>\r\n      <TextField\r\n        required\r\n        label=\"Title\"\r\n        value={data.title}\r\n        onChange={setValue('title')}\r\n        name=\"task-rule-title\"\r\n      />\r\n      <TextField\r\n        label=\"Description\"\r\n        multiline\r\n        name=\"task-rule-description\"\r\n        onChange={setValue('description')}\r\n        value={data.description}\r\n      />\r\n      <Dropdown\r\n        label=\"Type\"\r\n        selectedKey={data.type}\r\n        onChange={handleTypeChange}\r\n        options={typeOptions.current}\r\n        name=\"task-rule-type\"\r\n      />\r\n      <AddRuleType data={data} setData={setData} />\r\n      <ComboBox\r\n        label=\"Start time\"\r\n        options={timeOptions.current}\r\n        selectedKey={DateUtils.getNearestTime(data.taskStartTime ?? new Date())}\r\n        autoComplete=\"on\"\r\n        onChange={handleSelectTime}\r\n        calloutProps={{\r\n          calloutMaxHeight: 400,\r\n        }}\r\n        useComboBoxAsMenuWidth\r\n      />\r\n      <SpinButton\r\n        label=\"Duration (min)\"\r\n        value={data.taskDuration}\r\n        onChange={(evt) => {\r\n          let val = +evt.target.value;\r\n          if (Number.isNaN(val)) val = 0;\r\n          setData((prev) => ({ ...prev, taskDuration: val }));\r\n        }}\r\n        onIncrement={(val) => setData((prev) => ({ ...prev, taskDuration: (+val + 10) }))}\r\n        onDecrement={(val) => {\r\n          if (val > 10) setData((prev) => ({ ...prev, taskDuration: (+val - 10) }));\r\n        }}\r\n        min={0}\r\n        step={10}\r\n        incrementButtonAriaLabel=\"Increase value by 10\"\r\n        decrementButtonAriaLabel=\"Decrease value by 10\"\r\n        labelPosition={Position.top}\r\n      />\r\n      <DatePicker\r\n        required\r\n        label=\"Valid From\"\r\n        value={data.validFrom}\r\n        onSelectDate={handleSelectDate('validFrom')}\r\n      />\r\n      <DatePicker\r\n        label=\"Valid To\"\r\n        value={data.validTo}\r\n        onSelectDate={handleSelectDate('validTo')}\r\n      />\r\n      <Checkbox\r\n        className={classes.checkbox}\r\n        label=\"Background\"\r\n        value={data.isBackgroundTask}\r\n        onChange={(ev, checked) => setData((prev) => ({\r\n          ...prev,\r\n          isBackgroundTask: checked,\r\n        }))}\r\n      />\r\n      <Checkbox\r\n        className={classes.checkbox}\r\n        label=\"Shared\"\r\n        value={data.isSharedTask}\r\n        onChange={(ev, checked) => setData((prev) => ({\r\n          ...prev,\r\n          isSharedTask: checked,\r\n        }))}\r\n      />\r\n      <PeoplePicker\r\n        label=\"Assigned to (Users)\"\r\n        options={users}\r\n        onSelect={(u) => setData((prev) => ({\r\n          ...prev,\r\n          users: prev.users.concat(u.data),\r\n        }))}\r\n        onRemove={(u) => setData((prev) => ({\r\n          ...prev,\r\n          users: prev.users.filter((user) => user.id !== u.data.id),\r\n        }))}\r\n        selected={data.users?.map((u) => ({ key: u.id, data: u }))}\r\n      />\r\n      <Separator />\r\n      <FlowPicker\r\n        label=\"Assigned to (Flows)\"\r\n        options={flows}\r\n        onSelect={(f) => setData((prev) => ({\r\n          ...prev,\r\n          flows: prev.flows?.concat(f.data),\r\n        }))}\r\n        onRemove={(u) => setData((prev) => ({\r\n          ...prev,\r\n          flows: prev.flows?.filter((flow) => flow.id !== u.data.id),\r\n        }))}\r\n        selected={data.flows?.map((f) => ({ key: f.id, data: f }))}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nAddRule.propTypes = {\r\n  setRules: PropTypes.func.isRequired,\r\n  setOpen: PropTypes.func,\r\n};\r\n\r\nAddRule.defaultProps = {\r\n  setOpen: null,\r\n};\r\n\r\nexport default AddRule;\r\n","import React, {\r\n  useCallback, useContext, useEffect, useState,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  ComboBox,\r\n  DefaultButton,\r\n  Icon,\r\n  Label,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  Position,\r\n  PrimaryButton,\r\n  Separator,\r\n  SpinButton,\r\n  Stack,\r\n  StackItem,\r\n  Text,\r\n  TextField,\r\n  DatePicker,\r\n} from '@fluentui/react';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TaskRuleService from '../../../../services/tasks/TaskRuleService';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport constants from '../../../../utils/constants';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport DateUtils from '../../../../utils/date';\r\nimport PeoplePicker from '../../../shared/people-picker/PeoplePicker';\r\nimport UserService from '../../../../services/UserService';\r\nimport GlobalContext from '../../../../services/GlobalContext';\r\nimport FlowPicker from '../../../task-planning/components/flow-picker';\r\nimport Chip from '../../../shared/chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  description: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n    '& textarea': {\r\n      color: 'inherit',\r\n    },\r\n  },\r\n  typeIcon: {\r\n    fontSize: 50,\r\n    height: 50,\r\n    width: 50,\r\n  },\r\n  typeDetails: {\r\n    width: '50%',\r\n    borderTop: `1px solid ${theme.palette.themeSecondary}`,\r\n    borderBottom: `1px solid ${theme.palette.themeSecondary}`,\r\n    marginTop: `${theme.spacing.s2} !important`,\r\n    paddingTop: theme.spacing.m,\r\n    paddingBottom: theme.spacing.m,\r\n  },\r\n  paddingLeft: {\r\n    paddingLeft: theme.spacing.s2,\r\n  },\r\n  userColumn: {\r\n    width: '50%',\r\n  },\r\n  separator: {\r\n    margin: `${theme.spacing.m} 0`,\r\n    '& div[role=\\'separator\\']': {\r\n      backgroundColor: theme.palette.themePrimary,\r\n      padding: '3px',\r\n      borderRadius: '5px',\r\n      minWidth: 60,\r\n    },\r\n  },\r\n  weekDay: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    color: theme.palette.black,\r\n    padding: '5px 10px',\r\n    marginRight: theme.spacing.s2,\r\n  },\r\n  month: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    color: theme.palette.black,\r\n    padding: '5px 10px',\r\n    marginRight: theme.spacing.s2,\r\n    marginTop: theme.spacing.s2,\r\n  },\r\n}));\r\n\r\nconst weekDays = [null, 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\nconst months = [\r\n  null,\r\n  'January', 'February', 'March', 'April',\r\n  'May', 'June', 'July', 'August',\r\n  'September', 'October', 'November', 'December',\r\n];\r\n\r\nconst getOrdinalSuffix = (number) => {\r\n  switch (number) {\r\n    case 1:\r\n      return 'st';\r\n    case 2:\r\n      return 'nd';\r\n    case 3:\r\n      return 'rd';\r\n    default:\r\n      return 'th';\r\n  }\r\n};\r\n\r\nconst RuleTypeDetails = ({ rule }) => {\r\n  const classes = useStyles();\r\n\r\n  const getTypeIcon = (type) => {\r\n    switch (type) {\r\n      case constants.tasks.types.Daily:\r\n        return 'CalendarDay';\r\n      case constants.tasks.types.Weekly:\r\n        return 'CalendarWorkWeek';\r\n      case constants.tasks.types.Monthly:\r\n        return 'Calendar';\r\n      default:\r\n        return 'Unknown';\r\n    }\r\n  };\r\n\r\n  const getRenderDetails = (ruleDetails) => {\r\n    switch (ruleDetails.type) {\r\n      case constants.tasks.types.Daily:\r\n        return (\r\n          <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label>Day type: </Label>\r\n            <Text block className={classes.paddingLeft} variant=\"medium\">\r\n              {rule.dailyType}\r\n            </Text>\r\n          </Stack>\r\n        );\r\n      case constants.tasks.types.Weekly:\r\n        return (\r\n          <Stack horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label style={{ display: 'block' }}>Days: </Label>\r\n            <Stack horizontal horizontalAlign=\"center\">\r\n              {\r\n                rule.weeklyDays.map((day) => (\r\n                  <Chip className={classes.weekDay}>\r\n                    <Text variant=\"medium\">{weekDays[new Date(day).getDay()]}</Text>\r\n                  </Chip>\r\n                ))\r\n              }\r\n            </Stack>\r\n          </Stack>\r\n        );\r\n      case constants.tasks.types.Monthly:\r\n        return (\r\n          <Stack horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label>Occurs on: </Label>\r\n            <Text variant=\"medium\">\r\n              {`${rule.monthlyOn}${getOrdinalSuffix(rule.monthlyOn)} ${rule.monthlyOnType} of the month`}\r\n            </Text>\r\n            <Label>Months:</Label>\r\n            <Stack\r\n              horizontal\r\n              horizontalAlign=\"center\"\r\n              wrap\r\n              tokens={{\r\n                childrenGap: 4,\r\n              }}\r\n            >\r\n              {\r\n                rule.monthlyMonths.map((month) => (\r\n                  <Chip className={classes.month}>\r\n                    <Text variant=\"medium\">{months[month]}</Text>\r\n                  </Chip>\r\n                ))\r\n              }\r\n            </Stack>\r\n          </Stack>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Separator className={classes.separator}>Type</Separator>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Icon className={classes.typeIcon} iconName={getTypeIcon(rule.type)} />\r\n        <Text variant=\"medium\">{rule.type}</Text>\r\n        <StackItem className={classes.typeDetails}>\r\n          {getRenderDetails(rule)}\r\n        </StackItem>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\n\r\nRuleTypeDetails.propTypes = {\r\n  rule: PropTypes.shape({\r\n    type: PropTypes.string,\r\n    dailyType: PropTypes.string,\r\n    weeklyDays: PropTypes.arrayOf(PropTypes.number),\r\n    monthlyOn: PropTypes.number,\r\n    monthlyOnType: PropTypes.string,\r\n    monthlyMonths: PropTypes.arrayOf(PropTypes.number),\r\n  }).isRequired,\r\n};\r\n\r\nconst RuleDetails = ({\r\n  id, editing, setEditing, setRules,\r\n}) => {\r\n  const classes = useStyles();\r\n  const global = useContext(GlobalContext);\r\n  const [rule] = useFetch(id && TaskRuleService.taskRulePath(id), null, null);\r\n  const panel = useContext(PanelContext);\r\n  const [data, setData] = useState({});\r\n  const [users] = useFetch(UserService.baseUrl,\r\n    {\r\n      params: {\r\n        teams: global.user.teams.map((t) => t.id),\r\n      },\r\n    },\r\n    [], [],\r\n    (dt) => dt.map((u) => ({\r\n      key: u.id,\r\n      data: u,\r\n    })));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl,\r\n    null, [], [],\r\n    (flowsData) => flowsData.map((flow) => ({\r\n      key: flow.id,\r\n      data: flow,\r\n    })));\r\n\r\n  const handleUpdate = useCallback(async () => {\r\n    const update = { ...data };\r\n    // If we changed users, map them to their id's\r\n    if (data.users) {\r\n      update.users = data.users.map((u) => u.id);\r\n    }\r\n    // If we changed flows, map them to the ids\r\n    if (data.flows) {\r\n      update.flows = data.flows.map((f) => f.id);\r\n    }\r\n    const result = await TaskRuleService.updateTaskRule(rule.id, update);\r\n    setRules((prev) => prev.map((r) => (r.id === result.id ? result : r)));\r\n    panel.setOpen(false);\r\n    setEditing(false);\r\n  }, [rule, data]);\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  const renderFooter = useCallback(() => (\r\n    <>\r\n      {\r\n        editing\r\n          ? (<PrimaryButton onClick={handleUpdate}>Save</PrimaryButton>)\r\n          : (<PrimaryButton onClick={() => setEditing(true)}>Edit</PrimaryButton>)\r\n      }\r\n      <DefaultButton\r\n        style={{ marginLeft: '8px' }}\r\n        onClick={() => {\r\n          setEditing(false);\r\n          panel.setOpen(false);\r\n        }}\r\n      >\r\n        Close\r\n      </DefaultButton>\r\n    </>\r\n  ), [panel, editing, handleUpdate]);\r\n\r\n  /**\r\n   * In case it's opened in a panel\r\n   */\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (renderFooter));\r\n    }\r\n  }, [panel, renderFooter]);\r\n\r\n  return rule && (\r\n    <Stack className={classes.root} verticalAlign=\"start\">\r\n      <Separator className={classes.separator}>General</Separator>\r\n      <TextField\r\n        borderless={!editing}\r\n        label=\"Title\"\r\n        readOnly={!editing}\r\n        value={data.title ?? rule.title}\r\n        onChange={handleDataChange('title')}\r\n      />\r\n      <TextField\r\n        autoAdjustHeight\r\n        borderless={!editing}\r\n        className={classes.description}\r\n        label=\"Description\"\r\n        multiline\r\n        readOnly={!editing}\r\n        resizable={false}\r\n        value={data.description ?? rule.description ?? '-'}\r\n        onChange={handleDataChange('description')}\r\n      />\r\n      <ComboBox\r\n        label=\"Start time\"\r\n        options={constants.timeOptions}\r\n        selectedKey={DateUtils.getNearestTime(\r\n          data.taskStartTime\r\n            ? new Date(data.taskStartTime)\r\n            : new Date(rule.taskStartTime),\r\n        )}\r\n        autoComplete=\"on\"\r\n        disabled={!editing}\r\n        onChange={handleDataChange('taskStartTime', (args) => {\r\n          const time = DateUtils.getHoursFromText(args[1].text);\r\n          const result = new Date();\r\n          result.setHours(time.h);\r\n          result.setMinutes(time.m);\r\n          return result;\r\n        })}\r\n        calloutProps={{\r\n          calloutMaxHeight: 400,\r\n        }}\r\n        useComboBoxAsMenuWidth\r\n      />\r\n      {\r\n        editing\r\n          ? (\r\n            <SpinButton\r\n              label=\"Duration\"\r\n              labelPosition={Position.top}\r\n              value={data.taskDuration ?? rule.taskDuration}\r\n              onChange={handleDataChange('taskDuration', (args) => (Number.isNaN(+args[0].target.value) ? 0 : +args[0].target.value))}\r\n              onIncrement={(val) => setData((prev) => ({ ...prev, taskDuration: (+val + 10) }))}\r\n              onDecrement={(val) => {\r\n                if (val > 10) setData((prev) => ({ ...prev, taskDuration: (+val - 10) }));\r\n              }}\r\n              type=\"number\"\r\n              min={0}\r\n              max={1440}\r\n              step={10}\r\n            />\r\n          )\r\n          : (\r\n            <TextField\r\n              borderless={!editing}\r\n              label=\"Duration\"\r\n              readOnly={!editing}\r\n              value={data.taskDuration ?? rule.taskDuration}\r\n              onChange={handleDataChange('taskDuration')}\r\n              min=\"1\"\r\n              max=\"1440\"\r\n              type=\"number\"\r\n            />\r\n          )\r\n      }\r\n      <DatePicker\r\n        borderless={!editing}\r\n        value={data.validFrom ?? new Date(rule.validFrom)}\r\n        disabled={!editing}\r\n        label=\"Valid from\"\r\n        onSelectDate={handleDataChange('validFrom', (args) => DateUtils.makeUTC(args[0]))}\r\n      />\r\n      <DatePicker\r\n        borderless={!editing}\r\n        value={data.validTo ?? (rule.validTo && new Date(rule.validTo))}\r\n        disabled={!editing}\r\n        onSelectDate={handleDataChange('validTo', (args) => DateUtils.makeUTC(args[0]))}\r\n        label=\"Valid to\"\r\n        allowTextInput\r\n      />\r\n      <RuleTypeDetails rule={rule} />\r\n      <Separator className={classes.separator}>Assigned</Separator>\r\n      <Stack horizontal horizontalAlign=\"stretch\" verticalAlign=\"stretch\">\r\n        <StackItem className={classes.userColumn} grow={1}>\r\n          <Stack horizontalAlign=\"center\">\r\n            <Label>Users</Label>\r\n            {\r\n              editing\r\n                ? (\r\n                  <PeoplePicker\r\n                    style={{\r\n                      width: '90%',\r\n                    }}\r\n                    options={users}\r\n                    onSelect={(item) => setData((prev) => {\r\n                      if (prev.users) {\r\n                        return ({\r\n                          ...prev,\r\n                          users: prev.users.concat(item.data),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        users: rule.users.concat(item.data),\r\n                      });\r\n                    })}\r\n                    onRemove={(item) => setData((prev) => {\r\n                      if (prev.users) {\r\n                        return ({\r\n                          ...prev,\r\n                          users: prev.users.filter((u) => u.id !== item.data.id),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        users: rule.users.filter((u) => u.id !== item.data.id),\r\n                      });\r\n                    })}\r\n                    selected={\r\n                      data.users\r\n                        ? data.users.map((u) => ({ key: u.id, data: u }))\r\n                        : rule.users.map((u) => ({ key: u.id, data: u }))\r\n                    }\r\n                  />\r\n                )\r\n                : (\r\n                  rule.users?.map((user) => (\r\n                    <StackItem align=\"start\" key={user.id}>\r\n                      <Persona text={user.username} size={PersonaSize.size24} />\r\n                    </StackItem>\r\n                  ))\r\n                )\r\n            }\r\n          </Stack>\r\n        </StackItem>\r\n        <Separator vertical />\r\n        <StackItem className={classes.userColumn} grow={1}>\r\n          <Stack horizontalAlign=\"center\">\r\n            <Label>Flows</Label>\r\n            {\r\n              editing\r\n                ? (\r\n                  <FlowPicker\r\n                    style={{ width: '90%' }}\r\n                    options={flows}\r\n                    showCheckboxes\r\n                    showDeleteIcon={false}\r\n                    onSelect={(item) => setData((prev) => {\r\n                      if (prev.flows) {\r\n                        return ({\r\n                          ...prev,\r\n                          flows: prev.flows.concat(item.data),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        flows: rule.flows.concat(item.data),\r\n                      });\r\n                    })}\r\n                    onRemove={(item) => setData((prev) => {\r\n                      if (prev.flows) {\r\n                        return ({\r\n                          ...prev,\r\n                          flows: prev.flows.filter((u) => u.id !== item.data.id),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        flows: rule.flows.filter((u) => u.id !== item.data.id),\r\n                      });\r\n                    })}\r\n                    selected={\r\n                      data.flows\r\n                        ? data.flows.map((u) => ({ key: u.id, data: u }))\r\n                        : rule.flows.map((u) => ({ key: u.id, data: u }))\r\n                    }\r\n                  />\r\n                )\r\n                : (\r\n                  rule.flows.map((f) => (\r\n                    <Chip\r\n                      style={{\r\n                        backgroundColor: f.color ?? 'transparent',\r\n                        padding: 3,\r\n                        whiteSpace: 'pre-wrap',\r\n                        width: '50%',\r\n                        marginLeft: 32,\r\n                        marginTop: 4,\r\n                      }}\r\n                    >\r\n                      <Text variant=\"medium\">{f.name}</Text>\r\n                    </Chip>\r\n                  ))\r\n                )\r\n            }\r\n          </Stack>\r\n        </StackItem>\r\n      </Stack>\r\n      <Separator className={classes.separator}>Flags</Separator>\r\n      <Checkbox\r\n        checked={data.isBackgroundTask ?? rule.isBackgroundTask}\r\n        label=\"Background\"\r\n        disabled={!editing}\r\n        onChange={handleDataChange('isBackgroundTask', (args) => args[0].target.checked)}\r\n      />\r\n      <Checkbox\r\n        checked={rule.isSharedTask}\r\n        label=\"Shared\"\r\n        disabled\r\n      />\r\n      <Separator className={classes.separator}>Created</Separator>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Text variant=\"medium\">{rule.createdUser?.username}</Text>\r\n        <Text variant=\"medium\">{new Date(rule.createdDate).toLocaleString()}</Text>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nRuleDetails.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  editing: PropTypes.bool.isRequired,\r\n  setEditing: PropTypes.func.isRequired,\r\n  setRules: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default RuleDetails;\r\n","import TaskRules from './TaskRules';\r\n\r\nexport default TaskRules;\r\n","import React, { useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, PanelType, PrimaryButton, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport TaskRuleService from '../../services/tasks/TaskRuleService';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddRule from './components/add-rule/AddRule';\r\nimport { useFetch } from '../../services/hooks';\r\nimport RuleDetails from './components/rule-details/RuleDetails';\r\n\r\nconst TaskRules = () => {\r\n  // TODO: later add options to retrieve only tasks of active teams\r\n  const [rules, setRules] = useFetch(TaskRuleService.baseUrl);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n  const newPanel = usePanel(\r\n    AddRule, {\r\n      headerText: 'Create new rule',\r\n      onRenderFooterContent: () => (\r\n        <PrimaryButton text=\"Create\" type=\"submit\" form=\"add-task-rule-form\" />\r\n      ),\r\n    }, {\r\n      setRules,\r\n    },\r\n  );\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const detailsPanel = usePanel(\r\n    RuleDetails, {\r\n      headerText: 'Rule Details',\r\n      isLightDismiss: !editing,\r\n      type: PanelType.medium,\r\n      isFooterAtBottom: true,\r\n      onDismiss: (_isOpen, setOpen) => () => {\r\n        setEditing(false);\r\n        setOpen(false);\r\n      },\r\n    }, {\r\n      id: selectionDetails.items.length > 0 ? selectionDetails.items[0].id : null,\r\n      editing,\r\n      setEditing,\r\n      setRules,\r\n    },\r\n  );\r\n\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'createdDate',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n    },\r\n  );\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'title',\r\n      name: ' Title',\r\n      fieldName: 'title',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'type',\r\n      name: ' Type',\r\n      fieldName: 'type',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: '',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'users',\r\n      name: ' Users',\r\n      fieldName: 'users',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 300,\r\n      maxWidth: 400,\r\n      onRender: (item) => item.users.map((u) => u.username).join(', '),\r\n      sort: (a, b) => (\r\n        a.users[0]?.username?.toLowerCase() < b.users[0]?.username?.toLowerCase()\r\n          ? -1\r\n          : 1\r\n      ),\r\n      filterValueAccessor: (item) => item.users.map((u) => u.username).join(' '),\r\n    },\r\n    {\r\n      key: 'createdDate',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{new Date(item.createdDate).toLocaleString()}</div>),\r\n    },\r\n  ]);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <PageHeader text=\"Rules\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => { newPanel.setOpen(true); },\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: rules,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => detailsPanel.setOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {newPanel.render}\r\n      {detailsPanel.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskRules;\r\n","import Tasks from './Tasks';\r\n\r\nexport default Tasks;\r\n","import React from 'react';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport TaskDashboard from '../../components/task-dashboard/TaskDashboard';\r\nimport TaskFlows from '../../components/task-flows';\r\nimport TaskPlanning from '../../components/task-planning/TaskPlanning';\r\nimport TaskRules from '../../components/task-rules';\r\nimport constants from '../../utils/constants';\r\n\r\nconst Tasks = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Switch>\r\n        <Route exact path={`${path}`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK.code}\r\n            grant={constants.securities.TASK.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task Dashboard\">\r\n              <TaskDashboard />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/planning`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_PLANNING.code}\r\n            grant={constants.securities.TASK_PLANNING.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Planning\">\r\n              <TaskPlanning />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/task-rules`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_RULE.code}\r\n            grant={constants.securities.TASK_RULE.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task Rules\">\r\n              <TaskRules />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/task-flows`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_FLOW.code}\r\n            grant={constants.securities.TASK_FLOW.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Flows\">\r\n              <TaskFlows />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route exact path={`${path}/:id`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK.code}\r\n            grant={constants.securities.TASK.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task\">\r\n              <div>Task</div>\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n      </Switch>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tasks;\r\n","import { useContext, useEffect } from 'react';\r\nimport ConnectionService from '../../../services/ConnectionService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst ConnectionManager = () => {\r\n  const global = useContext(GlobalContext);\r\n  // ConnectionService.connectSSE();\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (global.user) {\r\n        const con = await ConnectionService.connectSSE();\r\n        con.addEventListener('init', (evt) => {\r\n          global.setContext((prev) => ({\r\n            ...prev,\r\n            connectionId: JSON.parse(evt.data)[0],\r\n            connection: con,\r\n          }));\r\n        });\r\n      }\r\n    }\r\n    run();\r\n  }, [global.user]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ConnectionManager;\r\n","import {\n  KeytipLayer, KeyCodes, ThemeProvider,\n} from '@fluentui/react';\nimport DocumentTitle from 'react-document-title';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport React, { useState, useEffect, useContext, Suspense } from 'react';\nimport GlobalContext from '../../services/GlobalContext';\nimport AuthorizationService from '../../services/AuthorizationService';\nimport UserInfoProvider from '../shared/user-info-provider';\nimport UserSecuritiesProvider from '../shared/user-securities-provider';\nimport Navigation from '../navigation/Navigation';\nimport AppraisalsPage from '../../routes/appraisals';\nimport SettingsPage from '../../routes/settings';\nimport ReportingPage from '../../routes/reporting';\nimport LoginRequired from '../shared/login-required';\nimport LoginPage from '../../routes/login';\nimport { selectTheme } from '../../themes';\nimport NotificationContainer from '../notification/NotificationContainer';\nimport Tasks from '../../routes/tasks';\nimport ConnectionManager from '../shared/connection-manager/ConnectionManager';\n\nconst HomePage = React.lazy(() => import('../../routes/home'));\n\nconst App = () => {\n  const [context, setContext] = useState({\n    user: null,\n    Authorize: AuthorizationService.Authorize,\n    setContext: null,\n    userPreferences: {\n      theme: selectTheme(),\n    },\n  });\n  const initContext = useContext(GlobalContext);\n\n  const { userPreferences } = context;\n  const { theme } = userPreferences;\n\n  useEffect(() => {\n    setContext((prev) => ({\n      ...initContext,\n      ...prev,\n      setContext,\n    }));\n  }, [initContext]);\n\n  return (\n    <GlobalContext.Provider value={context}>\n      <ThemeProvider applyTo=\"body\" theme={theme}>\n        <ConnectionManager />\n        <NotificationContainer timeout={10000} />\n        <Router>\n          <UserInfoProvider ctx={context} setCtx={setContext} />\n          <UserSecuritiesProvider />\n          <Navigation />\n          <LoginRequired />\n          <KeytipLayer\n            keytipStartSequences={[{\n              key: 'a',\n              modifierKeys: [KeyCodes.alt],\n            }]}\n          />\n          {/* The page switch */}\n          <Switch>\n            <div style={{ marginTop: '40px' }}>\n              <Route path=\"/appraisals\">\n                <DocumentTitle title=\"Appraisals\">\n                  <AppraisalsPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/audits\">\n                <DocumentTitle title=\"Audits\">\n                  <h1>IN PROGRESS</h1>\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/reporting\">\n                <DocumentTitle title=\"Reporting\">\n                  <ReportingPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/settings\">\n                <DocumentTitle title=\"Settings\">\n                  <SettingsPage />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/tasks\">\n                <DocumentTitle title=\"Tasks\">\n                  <Tasks />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/login\">\n                <DocumentTitle title=\"Sign in\">\n                  <LoginPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route exact path=\"/\">\n                <Suspense fallback={<div>Loading...</div>}>\n                  <HomePage ctx={context} setCtx={setContext} />\n                </Suspense>\n              </Route>\n            </div>\n          </Switch>\n        </Router>\n      </ThemeProvider>\n    </GlobalContext.Provider>\n  );\n};\n\nexport default App;\n","import App from './App';\n\nexport default App;\n","/* eslint-disable react/jsx-filename-extension */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { initializeIcons } from '@uifabric/icons';\nimport App from './components/app';\nimport './styles/reset.css';\n\ninitializeIcons();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import Accordion from './Accordion';\r\n\r\nexport default Accordion;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, Text, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport { downloadBlob } from 'download.js';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Accordion from '../../../shared/accordion';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst CreateTemplatePanel = ({ isOpen, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [aggregation, setAggregation] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [file, setFile] = useState(null);\r\n  const [sample, setSample] = useState('');\r\n  const [openAcordion, setOpenAccordion] = useState({\r\n    aggregation: true,\r\n    sample: false,\r\n  });\r\n\r\n  const handleChange = (set) => (evt) => {\r\n    if (evt && evt.target) {\r\n      if (set) set(evt.target.value);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (evt) => {\r\n    if (evt && evt.target) {\r\n      const filelist = evt.target.files;\r\n      if (filelist.length > 0) {\r\n        setFile(filelist[0]);\r\n      } else {\r\n        setFile(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', aggregation);\r\n    formData.append('name', name);\r\n    formData.append('template', file);\r\n\r\n    const result = await ReportingService.generateTemplate(formData);\r\n    await downloadBlob(file.name, result);\r\n  };\r\n\r\n  const handleSample = async () => {\r\n    const result = await ReportingService.getSample(aggregation);\r\n    if (result && result.data) {\r\n      setSample(JSON.stringify(result.data, null, 4));\r\n      setOpenAccordion({\r\n        aggregation: false,\r\n        sample: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', aggregation);\r\n    formData.append('name', name);\r\n    formData.append('template', file);\r\n\r\n    await ReportingService.createTemplate(formData);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton type=\"submit\" form=\"new-template-form\">Create</PrimaryButton>\r\n      <DefaultButton onClick={handleSample}>Sample</DefaultButton>\r\n      <DefaultButton onClick={handleGenerate}>Generate</DefaultButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText=\"Create template\"\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <form id=\"new-template-form\" onSubmit={handleSubmit}>\r\n        <Container\r\n          fluid\r\n          className={classes.root}\r\n        >\r\n          <Separator>Aggregation</Separator>\r\n          <Row justify=\"center\">\r\n            <Text variant=\"mediumPlus\">\r\n              Create a valid MongoDB aggregation.\r\n              Test and verify if it returns valid info below.\r\n              For more info, refer to MongoDB\r\n              {' '}\r\n              <a href=\"https://docs.mongodb.com/manual/aggregation/\" target=\"_blank\" rel=\"noopener noreferrer\">documentation</a>\r\n              .\r\n            </Text>\r\n          </Row>\r\n          <Accordion\r\n            items={[\r\n              {\r\n                key: 'aggregation',\r\n                text: 'Aggregation',\r\n                isOpen: openAcordion.aggregation,\r\n                render: () => (\r\n                  <Row>\r\n                    <Col xs={12}>\r\n                      <TextField\r\n                        multiline\r\n                        value={aggregation}\r\n                        onChange={handleChange(setAggregation)}\r\n                        autoAdjustHeight\r\n                        required\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                ),\r\n              },\r\n              {\r\n                key: 'sample',\r\n                text: 'Sample Data',\r\n                isOpen: openAcordion.sample,\r\n                render: () => (\r\n                  <Row>\r\n                    <Col xs={12}>\r\n                      <TextField\r\n                        multiline\r\n                        readOnly\r\n                        value={sample}\r\n                        autoAdjustHeight\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                ),\r\n              },\r\n            ]}\r\n            onRenderItem={(item) => item.render()}\r\n            onToggle={(evt, item, open) => setOpenAccordion((prev) => ({\r\n              ...prev,\r\n              [item.key]: open,\r\n            }))}\r\n          />\r\n          <Separator>Template</Separator>\r\n          <Row justify=\"center\">\r\n            <Text variant=\"mediumPlus\">\r\n              Specify your template name, then attach your template file.\r\n              { ' ' }\r\n              (Ex: All user info, or Items per user).\r\n            </Text>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={12}>\r\n              <TextField\r\n                label=\"Template name\"\r\n                value={name}\r\n                onChange={handleChange(setName)}\r\n                required\r\n              />\r\n              <TextField\r\n                styles={{\r\n                  fieldGroup: {\r\n                    padding: '8px',\r\n                    height: 'auto',\r\n                  },\r\n                }}\r\n                onChange={handleFileUpload}\r\n                type=\"file\"\r\n                label=\"Template file\"\r\n                required\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nCreateTemplatePanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default CreateTemplatePanel;\r\n","import CreateTemplatePanel from './CreateTemplatePanel';\r\n\r\nexport default CreateTemplatePanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst TemplateDetailsPanel = ({\r\n  id, isOpen, setOpen, setEdit,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [template, setTemplate] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await ReportingService.getTemplate(id);\r\n      if (mounted) {\r\n        setTemplate(data);\r\n      }\r\n    }\r\n    if (id) run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id]);\r\n\r\n  const handleDownload = () => {\r\n    ReportingService.downloadTemplate(id, template.filename || 'template');\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setEdit(true);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleEdit}>Edit</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText={`Details - ${template ? template.name : ''}`}\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n      isLightDismiss\r\n    >\r\n      <Container\r\n        fluid\r\n        className={classes.root}\r\n      >\r\n        <Separator>General</Separator>\r\n        {\r\n          template\r\n          && (\r\n            <>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField label=\"Name: \" value={template && template.name} readOnly underlined />\r\n                  <TextField label=\"Created by: \" value={template && template.createdUser && template.createdUser.username} readOnly underlined />\r\n                  <TextField label=\"Created on: \" value={template && new Date(template.createdDate).toLocaleString()} readOnly underlined />\r\n                  {\r\n              template.modifiedUser\r\n              && (\r\n              <>\r\n                <TextField label=\"Modified by: \" value={template.modifiedUser.username} readOnly underlined />\r\n                <TextField label=\"Modified on: \" value={template.modifiedDate && new Date(template.modifiedDate).toLocaleString()} readOnly underlined />\r\n              </>\r\n              )\r\n            }\r\n                </Col>\r\n              </Row>\r\n              <Separator>Details</Separator>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField label=\"Filename: \" value={template.filename} readOnly underlined />\r\n                </Col>\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <ActionButton\r\n                    iconProps={{\r\n                      iconName: 'DownloadDocument',\r\n                    }}\r\n                    text=\"Download template\"\r\n                    onClick={handleDownload}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={6}>\r\n                  <TextField\r\n                    readOnly\r\n                    multiline\r\n                    autoAdjustHeight\r\n                    value={template.aggregation || ''}\r\n                    label=\"Aggregation\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )\r\n        }\r\n      </Container>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nTemplateDetailsPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  setEdit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TemplateDetailsPanel;\r\n","import TemplateDetailsPanel from './TemplateDetailsPanel';\r\n\r\nexport default TemplateDetailsPanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, Icon, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst TemplateEditPanel = ({\r\n  id, isOpen, updateTemplates, setOpen,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [template, setTemplate] = useState({});\r\n  const [update, setUpdate] = useState({});\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await ReportingService.getTemplate(id);\r\n      if (mounted) {\r\n        setTemplate(data);\r\n        setUpdate({\r\n          name: data.name,\r\n          filename: data.filename,\r\n          aggregation: data.aggregation,\r\n        });\r\n      }\r\n    }\r\n    if (id) {\r\n      run();\r\n    }\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id]);\r\n\r\n  const handleUpdate = (field) => (evt) => {\r\n    if (evt && evt.target) {\r\n      setUpdate((prev) => ({\r\n        ...prev,\r\n        [field]: evt.target.value,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (evt) => {\r\n    if (evt && evt.target) {\r\n      const filelist = evt.target.files;\r\n      if (filelist.length > 0) {\r\n        setFile(filelist[0]);\r\n        setUpdate((prev) => ({\r\n          ...prev,\r\n          filename: filelist[0].name,\r\n        }));\r\n      } else {\r\n        setFile(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    ReportingService.downloadTemplate(id, template.filename || 'template');\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', update.aggregation);\r\n    formData.append('name', update.name);\r\n    formData.append('filename', update.filename);\r\n    if (file) formData.append('template', file);\r\n    const updateResult = await ReportingService.updateTemplate(template.id, formData);\r\n    setTemplate(updateResult);\r\n    updateTemplates(updateResult);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderLabel = (labelId, controlId, iconName) => (options) => (\r\n    <label\r\n      style={{\r\n        lineHeight: '2em',\r\n        fontWeight: 600,\r\n      }}\r\n      htmlFor={controlId}\r\n      id={labelId}\r\n    >\r\n      <Icon iconName={iconName} />\r\n      { ' ' }\r\n      {options.label}\r\n    </label>\r\n  );\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleSave}>Update</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText={`Edit - ${template ? template.name : ''}`}\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <Container\r\n        fluid\r\n        className={classes.root}\r\n      >\r\n        <Separator>General</Separator>\r\n        {\r\n          template\r\n          && (\r\n            <>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    label=\"Name: \"\r\n                    value={update && update.name}\r\n                    onChange={handleUpdate('name')}\r\n                    underlined\r\n                  />\r\n                  <TextField label=\"Created by: \" value={template && template.createdUser && template.createdUser.username} readOnly underlined tabIndex={-1} />\r\n                  <TextField label=\"Created on: \" value={template && new Date(template.createdDate).toLocaleString()} readOnly underlined tabIndex={-1} />\r\n                  {\r\n              template.modifiedUser\r\n              && (\r\n              <>\r\n                <TextField label=\"Modified by: \" value={template.modifiedUser.username} readOnly underlined tabIndex={-1} />\r\n                <TextField label=\"Modified on: \" value={template.modifiedDate && new Date(template.modifiedDate).toLocaleString()} readOnly underlined tabIndex={-1} />\r\n              </>\r\n              )\r\n            }\r\n                </Col>\r\n              </Row>\r\n              <Separator>Details</Separator>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    label=\"Filename: \"\r\n                    value={update.filename}\r\n                    onChange={handleUpdate('filename')}\r\n                    underlined\r\n                  />\r\n                </Col>\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <ActionButton\r\n                    iconProps={{\r\n                      iconName: 'DownloadDocument',\r\n                    }}\r\n                    text=\"Download template\"\r\n                    onClick={handleDownload}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    styles={{\r\n                      fieldGroup: {\r\n                        padding: '8px',\r\n                        height: 'auto',\r\n                      },\r\n                    }}\r\n                    onChange={handleFileUpload}\r\n                    type=\"file\"\r\n                    label=\"Template file\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={6}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    multiline\r\n                    autoAdjustHeight\r\n                    value={update.aggregation || ''}\r\n                    onChange={handleUpdate('aggregation')}\r\n                    label=\"Aggregation\"\r\n                    aria-labelledby=\"label-aggregation-edit\"\r\n                    id=\"aggregation-edit\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )\r\n        }\r\n      </Container>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nTemplateEditPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  updateTemplates: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TemplateEditPanel;\r\n","import {\r\n  DetailsListLayoutMode, Icon, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../services/ReportingService';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport PageHeader from '../shared/page-header/PageHeader';\r\nimport CreateTemplatePanel from './components/create-panel';\r\nimport TemplateDetailsPanel from './components/details-panel';\r\nimport TemplateEditPanel from './components/edit-panel/TemplateEditPanel';\r\n\r\nconst ItemType = ({ item }) => {\r\n  if (item.filename) {\r\n    let iconName;\r\n    const tokens = item.filename.split('.');\r\n    const ext = tokens[tokens.length - 1];\r\n    switch (ext) {\r\n      case 'xlsx':\r\n        iconName = 'ExcelLogo';\r\n        break;\r\n      case 'docx':\r\n        iconName = 'WordLogo';\r\n        break;\r\n      default:\r\n        iconName = 'FileBug';\r\n        break;\r\n    }\r\n\r\n    return (\r\n      <div style={{ textAlign: 'center' }}>\r\n        <Icon styles={{ root: { fontSize: '1.3em' } }} iconName={iconName} />\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst ReportTemplates = () => {\r\n  const [templates, setTemplates] = useState([]);\r\n  const [createPanelOpen, setCreatePanelOpen] = useState(false);\r\n  const [detailsPanelOpen, setDetailsPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n  const [columns] = useState([\r\n    {\r\n      key: 'type',\r\n      name: ' Type',\r\n      fieldName: 'name',\r\n      iconName: 'ToDoLogoBottom',\r\n      minWidth: 70,\r\n      maxWidth: 70,\r\n      onRender: (item) => <ItemType item={item} />,\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'filename',\r\n      name: ' Filename',\r\n      fieldName: 'filename',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'FileBug',\r\n      minWidth: 100,\r\n      maxWidth: 200,\r\n    },\r\n    {\r\n      key: 'createdby',\r\n      name: ' Created by',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'Contact',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      onRender: (item) => item.createdUser.username,\r\n    },\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  ]);\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  );\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const result = await ReportingService.getTemplates();\r\n      if (mounted) {\r\n        setTemplates(result);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <PageHeader text=\"Templates\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => setCreatePanelOpen(true),\r\n              },\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n                onClick: () => setDetailsPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: templates,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setDetailsPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <CreateTemplatePanel\r\n        isOpen={createPanelOpen}\r\n        setOpen={setCreatePanelOpen}\r\n      />\r\n      <TemplateDetailsPanel\r\n        isOpen={detailsPanelOpen}\r\n        setOpen={setDetailsPanelOpen}\r\n        id={selectionDetails.items.length > 0\r\n          ? selectionDetails.items[0].id\r\n          : ''}\r\n        setEdit={setEditPanelOpen}\r\n      />\r\n      <TemplateEditPanel\r\n        isOpen={editPanelOpen}\r\n        setOpen={setEditPanelOpen}\r\n        updateTemplates={(template) => setTemplates(\r\n          (prev) => prev.map((t) => (t.id === template.id ? template : t)),\r\n        )}\r\n        id={selectionDetails.items.length > 0\r\n          ? selectionDetails.items[0].id\r\n          : ''}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nItemType.propTypes = {\r\n  item: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ReportTemplates;\r\n","import axios from 'axios';\nimport { downloadBlob } from 'download.js';\nimport NotificationService from './NotificationService';\n\nconst ReportingService = {\n  /**\n   * Templates\n   */\n  templatesPath: '/api/reporting/templates',\n  templatePath: (id) => `/api/reporting/templates/${id}`,\n  templateDownloadPath: (id) => `/api/reporting/templates/${id}/download`,\n  templateParametersPath: (id) => `/api/reporting/templates/${id}/parameters`,\n  generateTemplatePath: '/api/reporting/templates/generate',\n  templateSamplePath: '/api/reporting/templates/sample',\n\n  async getTemplates() {\n    try {\n      const response = await axios.get(this.templatesPath);\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getTemplate(id) {\n    try {\n      const response = await axios.get(this.templatePath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async createTemplate(formdata) {\n    try {\n      const response = await axios.post(this.templatesPath, formdata, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      if (response.status === 200) {\n        NotificationService\n          .notifySuccess('Tempalte successfully created');\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async updateTemplate(id, update) {\n    try {\n      const response = await axios.put(this.templatePath(id), update, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async downloadTemplate(id, filename) {\n    try {\n      const response = await axios.post(this.templateDownloadPath(id), null, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        await downloadBlob(filename, response.data);\n      }\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async getTempalteParameters(id) {\n    try {\n      const response = await axios.get(this.templateParametersPath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async generateTemplate(formdata) {\n    try {\n      const response = await axios.post(this.generateTemplatePath, formdata, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        NotificationService\n          .notifySuccess('Tempalte successfully generated');\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getSample(aggregation) {\n    try {\n      const response = await axios.post(this.templateSamplePath, { aggregation });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  /**\n   * Reports\n   */\n  appraisalReportPath: '/api/reporting/reports/appraisal-report',\n  reportPath: (id) => `/api/reporting/reports/${id}`,\n  postReportGeneratePath: (id) => `/api/reporting/reports/${id}/generate`,\n  reportsPath: '/api/reporting/reports',\n\n  async generateAppraisalReport(params) {\n    try {\n      const response = await axios.post(this.appraisalReportPath, params, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        return response.data;\n      } if (response.status === 204) {\n        NotificationService\n          .notifyError('No data available for this filter');\n        return null;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      if (err.response && err.response.status === 400) {\n        NotificationService.notifyError('Invalid filters provided');\n      } else {\n        NotificationService\n          .notifyError(err.message);\n      }\n      return null;\n    }\n  },\n\n  async getReports() {\n    try {\n      const response = await axios.get(this.reportsPath);\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getReport(id) {\n    try {\n      const response = await axios.get(this.reportPath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async addReport(formData) {\n    try {\n      const result = await axios.post(this.reportsPath, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      return result.data;\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async updateReport(id, update) {\n    try {\n      const result = await axios.put(this.reportPath(id), update);\n      return result.data;\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async generateReport(id, params) {\n    try {\n      const response = await axios.post(this.postReportGeneratePath(id), params, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n};\n\nexport default ReportingService;\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\nimport {\r\n  and, perform, validate,\r\n} from './validators';\r\n\r\nfunction Item(item) {\r\n  this.id = item.id ? item.id : 0;\r\n  this.type = item.type;\r\n  this.status = item.status ? item.status : 'Active';\r\n  this.content = item.content ? item.content : '';\r\n  this.periodId = item.periodId;\r\n  this.organizationId = item.organizationId ? item.organizationId : null;\r\n  this.user = item.user;\r\n  this.modifiedUser = item.modifiedUser ? item.modifiedUser : null;\r\n  this.modifiedDate = item.modifiedDate ? item.modifiedDate : null;\r\n  this.createdUser = item.createdUser ? item.createdUser : item.user;\r\n  this.createdDate = item.createdDate ? item.createdDate : new Date();\r\n}\r\n\r\nconst AppraisalService = {\r\n  getPeriodsPath: '/api/periods',\r\n  addPeriodsPath: '/api/periods',\r\n  periodPath: (periodId) => `/api/periods/${periodId}`,\r\n  periodFinishPath: (periodId) => `/api/periods/${periodId}/finish`,\r\n  getItemsPath: (id) => `/api/periods/${id}`,\r\n  getUserItemsPath: (id, userId) => `/api/periods/${id}/users/${userId}`,\r\n  toggleLockPeriodPath: (id, userId) => `/api/periods/${id}/users/${userId}/toggle-lock`,\r\n  getItemPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  getOrphansPath: '/api/appraisal-items',\r\n  addItemPath: '/api/appraisal-items',\r\n  updateItemPath: (id) => `/api/appraisal-items/${id}`,\r\n  deleteItemPath: (id) => `/api/appraisal-items/${id}`,\r\n  addItemToPeriodPath: (periodId) => `/api/periods/${periodId}/items`,\r\n  addUserItemPath: (periodId, userId) => `/api/periods/${periodId}/users/${userId}/items`,\r\n  updateItemInPeriodPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  updateUserItemPath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}`,\r\n  deleteItemFromPeriodPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  deleteUserItemPath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}`,\r\n  updateItemTypePath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}/change-type`,\r\n  updateUserItemTypePath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}/change-type`,\r\n\r\n  async getPeriods() {\r\n    try {\r\n      const response = await axios.get(this.getPeriodsPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getItems(periodId) {\r\n    try {\r\n      const response = await axios.get(this.getItemsPath(periodId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getOrphans(type = null) {\r\n    try {\r\n      const response = await axios.get(this.getOrphansPath, {\r\n        params: {\r\n          type,\r\n        },\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserItems(periodId, userId) {\r\n    try {\r\n      const response = await axios.get(this.getUserItemsPath(periodId, userId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getItem(periodId, itemId) {\r\n    try {\r\n      const response = await axios.get(this.getItemPath(periodId, itemId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addItem(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(this.addItemToPeriodPath(periodId), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addOrphan(item) {\r\n    try {\r\n      const response = await axios.post(this.addItemPath, item);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addUserItem(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(this.addUserItemPath(periodId, userId), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItemInPeriod(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n        validate.isTruthy(item.periodId),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(this.updateItemInPeriodPath(periodId, item.id), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItem(item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(this.updateItemPath(item.id), item);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUserItem(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(\r\n        this.updateUserItemPath(periodId, userId, item.id), { ...item },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItemType(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(\r\n        this.updateItemTypePath(periodId, item.id), { type: item.type },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUserItemType(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(\r\n        this.updateUserItemTypePath(periodId, userId, item.id), { type: item.type },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteItemFromPeriod(periodId, itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteItemFromPeriodPath(periodId, itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteItem(itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteItemPath(itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteUserItem(periodId, userId, itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteUserItemPath(periodId, userId, itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addPeriod(body) {\r\n    try {\r\n      const response = await axios.post(this.addPeriodsPath, body);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updatePeriod(periodId, body) {\r\n    try {\r\n      const response = await axios.put(this.periodPath(periodId), body);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async finishPeriod(periodId) {\r\n    try {\r\n      const response = await axios.post(this.periodFinishPath(periodId), null, {\r\n        timeout: 200000,\r\n      });\r\n      if (response.status === 200) {\r\n        return true;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param {String} periodId\r\n   * @param {String} userId\r\n   * @returns {any} the updated period\r\n   */\r\n  async toggleLockPeriod(periodId, userId) {\r\n    try {\r\n      if (!userId) throw new Error('User is unknown');\r\n      const response = await axios.post(this.toggleLockPeriodPath(periodId, userId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  blankItem(periodId, user, type, status = 'Active') {\r\n    return new Item({\r\n      type,\r\n      status,\r\n      periodId,\r\n      user: user ? user.id : null,\r\n    });\r\n  },\r\n\r\n  /*\r\n   * Given the items, minimum amount and their type:\r\n   * this function should return back the adjusted items collection:\r\n   * 1. if number of items < min => add blank items to fullfil the list\r\n   * 2. if number of items > min and blank items > 1 => remove blank items until\r\n   * blank items = 1 or number of items = min\r\n   */\r\n  normalizeSet(periodId, user, items, min, type) {\r\n    const copy = items.slice().filter((i) => i.user !== null);\r\n    if (!user) {\r\n      return copy;\r\n    } if (type === 'Feedback' && items.length > 0) {\r\n      return copy;\r\n    }\r\n    // array of empty indexes ex: [1, 4, 5]\r\n    const empty = copy.map((i, idx) => idx).filter((i) => copy[i].content === '');\r\n    if (empty.length === 0) {\r\n      copy.push(this.blankItem(periodId, user, type));\r\n    }\r\n    let dif = min - copy.length;\r\n    while (dif > 0) {\r\n      copy.push(this.blankItem(periodId, user, type));\r\n      dif -= 1;\r\n    }\r\n    return copy;\r\n  },\r\n\r\n  async addItemToSet(periodId, item) {\r\n    try {\r\n      const result = await this.addItem(periodId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: null,\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async addUserItemToSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.addUserItem(periodId, userId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: null,\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async deleteItemFromSet(periodId, item) {\r\n    try {\r\n      const result = await this.deleteItemFromPeriod(periodId, item.id);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async deleteUserItemFromSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.deleteUserItem(periodId, userId, item.id);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateItemInSet(periodId, item) {\r\n    try {\r\n      const result = await this.updateItemInPeriod(periodId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateUserItemInSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.updateUserItem(periodId, userId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n};\r\n\r\nexport default AppraisalService;\r\n","import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","/**\r\n * A Table with Command Panel ad a Search box.\r\n * Standartized to be used univarsally on any lists.\r\n */\r\nimport React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Container, Row, Col,\r\n} from 'react-grid-system';\r\nimport {\r\n  CommandBar, SearchBox, Separator, Stack,\r\n} from '@fluentui/react';\r\nimport Table from '../table';\r\n\r\nconst CommandTable = ({ commandItems, tableProps }) => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <Stack horizontalAlign=\"stretch\">\r\n            <Row align=\"start\">\r\n              <Col xs={12} sm={9}>\r\n                <CommandBar items={commandItems} />\r\n              </Col>\r\n              <Col xs={12} sm={3}>\r\n                <SearchBox\r\n                  placeholder=\"Search\"\r\n                  value={searchValue}\r\n                  onChange={(e) => setSearchValue(e && e.target ? e.target.value : '')}\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator />\r\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\r\n            <Table {...tableProps} searchValue={searchValue} />\r\n          </Stack>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nCommandTable.propTypes = {\r\n  commandItems: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    iconProps: PropTypes.shape({\r\n      iconName: PropTypes.string,\r\n    }),\r\n    onClick: PropTypes.func,\r\n  })),\r\n  tableProps: PropTypes.shape({\r\n    columns: PropTypes.arrayOf(PropTypes.shape({\r\n      key: PropTypes.string,\r\n      name: PropTypes.string,\r\n      fieldName: PropTypes.string,\r\n      minWidth: PropTypes.number,\r\n      maxWidth: PropTypes.number,\r\n      isSortable: PropTypes.bool,\r\n      isFilterable: PropTypes.bool,\r\n      isResizable: PropTypes.bool,\r\n      sort: PropTypes.func,\r\n      onRender: PropTypes.func,\r\n    })).isRequired,\r\n    items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n    searchValue: PropTypes.string,\r\n    sortedCol: PropTypes.shape({\r\n      key: PropTypes.string,\r\n      name: PropTypes.string,\r\n      fieldName: PropTypes.string,\r\n      minWidth: PropTypes.number,\r\n      maxWidth: PropTypes.number,\r\n      isSortable: PropTypes.bool,\r\n      isFilterable: PropTypes.bool,\r\n      isResizable: PropTypes.bool,\r\n      sort: PropTypes.func,\r\n      onRender: PropTypes.func,\r\n      isSorted: PropTypes.bool,\r\n      isSortedDescending: PropTypes.bool,\r\n    }),\r\n    setSelectionDetails: PropTypes.func,\r\n  }).isRequired,\r\n};\r\n\r\nCommandTable.defaultProps = {\r\n  commandItems: null,\r\n};\r\n\r\nexport default CommandTable;\r\n","import EventEmitter from 'eventemitter3';\r\n\r\nconst eventEmitter = new EventEmitter();\r\n\r\nconst Emitter = {\r\n  on: (event, fn) => eventEmitter.on(event, fn),\r\n  once: (event, fn) => eventEmitter.once(event, fn),\r\n  off: (event, fn) => eventEmitter.off(event, fn),\r\n  emit: (event, payload) => eventEmitter.emit(event, payload),\r\n};\r\n\r\nObject.freeze(Emitter);\r\n\r\nexport default Emitter;\r\n","import Emitter from './Emitter';\r\n\r\nexport default Emitter;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Stack, Text } from '@fluentui/react';\n\nconst styles = {\n  root: {\n    marginTop: '16px',\n    marginBottom: '16px',\n    align: 'center',\n  },\n};\n\nconst PageHeader = ({ text }) => (\n  <Stack horizontal horizontalAlign=\"center\">\n    <Text variant=\"xLarge\" styles={styles}>{text}</Text>\n  </Stack>\n);\n\nPageHeader.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default PageHeader;\n","import React, {\r\n  useEffect,\r\n  useState,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Icon, Text, concatStyleSets, makeStyles,\r\n} from '@fluentui/react';\r\nimport { Collapse } from 'react-collapse';\r\nimport clsx from 'clsx';\r\nimport './styles.css';\r\n\r\nconst defstyles = (theme, compact = false) => ({\r\n  root: {\r\n    boxShadow: theme.effects.elevation4,\r\n    width: '100%',\r\n    border: `1px solid ${theme.palette.themeLight}`,\r\n  },\r\n  container: {\r\n    outline: 'none',\r\n    borderTop: `1px solid ${theme.palette.themeLight}`,\r\n    '&:first-child': {\r\n      borderTop: 'none',\r\n    },\r\n    '& > div:first-child': {\r\n      outline: 'none',\r\n    },\r\n  },\r\n  header: {\r\n    cursor: 'pointer',\r\n    padding: `${compact ? '8px' : '16px'}`,\r\n  },\r\n  headerIcon: {\r\n    fontSize: '0.7em',\r\n    transition: '.2s transform',\r\n  },\r\n  headerIconOpen: {\r\n    transform: 'rotate(90deg)',\r\n    transformOrigin: 'center',\r\n  },\r\n  itemContent: {\r\n    padding: `${compact ? '8px' : '16px'}`,\r\n  },\r\n});\r\n\r\n/**\r\n * DEFAULT RENDER FUNCTIONS\r\n */\r\n\r\nconst defaultRenderHeaderFold = (item, isOpen, classes) => (\r\n  <span style={{\r\n    paddingRight: '8px',\r\n  }}\r\n  >\r\n    <Icon\r\n      className={clsx({\r\n        [classes.headerIcon]: true,\r\n        [classes.headerIconOpen]: isOpen,\r\n      })}\r\n      iconName=\"ChevronRightMed\"\r\n    />\r\n  </span>\r\n);\r\n\r\nconst defaultRenderHeaderText = (item) => <Text variant=\"medium\">{item.text}</Text>;\r\n\r\nconst defaultRenderItemContent = (item) => (\r\n  <p>\r\n    {item.text}\r\n  </p>\r\n);\r\n\r\n/*\r\n      Header has:\r\n       ____________________________\r\n      | (Fold button)             |\r\n      | >    Header text          |\r\n      |___________________________|\r\n*/\r\nconst defaultRenderHeader = (item, headerProps, classProps) => {\r\n  const classes = classProps;\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      flexFlow: 'row nowrap',\r\n      alignItems: 'center',\r\n    }}\r\n    >\r\n      {headerProps.onRenderHeaderFold(item, headerProps.isOpen, classes)}\r\n      {headerProps.onRenderHeaderText(item, headerProps.isOpen, classes)}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AccordionItemContainer = ({\r\n  item, headerProps, onRenderItem, isOpen, onToggle, classes,\r\n}) => (\r\n  <div\r\n    className={classes.container}\r\n  >\r\n    <div\r\n      role=\"menuitem\"\r\n      tabIndex={0}\r\n      onClick={(evt) => onToggle(evt, item, !isOpen)}\r\n      onKeyPress={(evt) => onToggle(evt, item, !isOpen)}\r\n      className={classes.header}\r\n    >\r\n      {headerProps.onRenderHeader(item, { ...headerProps, isOpen }, classes)}\r\n    </div>\r\n    <Collapse isOpened={isOpen}>\r\n      <div className={classes.itemContent}>\r\n        {onRenderItem(item)}\r\n      </div>\r\n    </Collapse>\r\n  </div>\r\n);\r\n\r\n/**\r\n * Accordion Component\r\n * onRenderHeader - renders the whole header\r\n * onRenderHeaderFold - custom render for the fold item\r\n * onRenderHeaderText - customer render for the header text content\r\n */\r\nconst Accordion = ({\r\n  items,\r\n  getKey,\r\n  headerProps,\r\n  onRenderItem,\r\n  exclusive,\r\n  styles,\r\n  compact,\r\n  onToggle,\r\n}) => {\r\n  // Concatenate user provided styles with default styles if needed\r\n  const classes = makeStyles((theme) => concatStyleSets(defstyles(theme, compact), styles))();\r\n  const [open, setOpen] = useState(() => {\r\n    const result = {};\r\n    items.forEach((item) => {\r\n      const key = getKey(item);\r\n      result[key] = Boolean(item.isOpen) || false;\r\n    });\r\n    return result;\r\n  });\r\n  const defHeaderProps = {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n    ...headerProps,\r\n  };\r\n\r\n  const handleSetOpen = (item) => {\r\n    if (!exclusive) {\r\n      return (evt, i, val) => setOpen((prev) => ({\r\n        ...prev,\r\n        [getKey(item)]: val,\r\n      }));\r\n    }\r\n    return (evt, i, val) => setOpen((prev) => {\r\n      const copy = { ...prev };\r\n      const itemKey = getKey(item);\r\n      Object.keys(copy).forEach((key) => {\r\n        copy[key] = (key === itemKey ? val : false);\r\n      });\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setOpen(() => {\r\n      const result = {};\r\n      items.forEach((item) => {\r\n        const key = getKey(item);\r\n        result[key] = Boolean(item.isOpen) || false;\r\n      });\r\n      return result;\r\n    });\r\n  }, [items, getKey]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {\r\n        items.map((item) => (\r\n          <AccordionItemContainer\r\n            item={item}\r\n            headerProps={defHeaderProps}\r\n            onRenderItem={onRenderItem}\r\n            isOpen={Boolean(open[getKey(item)])}\r\n            setOpen={handleSetOpen(item)}\r\n            getKey={getKey}\r\n            classes={classes}\r\n            key={getKey(item)}\r\n            onToggle={onToggle || handleSetOpen(item)}\r\n          />\r\n        ))\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nAccordion.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n    header: PropTypes.string,\r\n    isOpen: PropTypes.bool,\r\n  })).isRequired,\r\n  getKey: PropTypes.func,\r\n  onRenderItem: PropTypes.func,\r\n  exclusive: PropTypes.bool,\r\n  headerProps: PropTypes.shape({\r\n    onRenderHeader: PropTypes.func,\r\n    onRenderHeaderFold: PropTypes.func,\r\n    onRenderHeaderText: PropTypes.func,\r\n  }),\r\n  styles: PropTypes.shape({\r\n    root: PropTypes.shape({}),\r\n    container: PropTypes.shape({}),\r\n    header: PropTypes.shape({}),\r\n    headerIcon: PropTypes.shape({}),\r\n    headerIconOpen: PropTypes.shape({}),\r\n    itemContent: PropTypes.shape({}),\r\n  }),\r\n  compact: PropTypes.bool,\r\n  onToggle: PropTypes.func,\r\n};\r\n\r\nAccordion.defaultProps = {\r\n  getKey: (item) => item.key,\r\n  onRenderItem: defaultRenderItemContent,\r\n  exclusive: false,\r\n  headerProps: {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n  },\r\n  styles: {},\r\n  compact: false,\r\n  onToggle: null,\r\n};\r\n\r\nAccordionItemContainer.propTypes = {\r\n  item: PropTypes.shape({}).isRequired,\r\n  onRenderItem: PropTypes.func.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  headerProps: PropTypes.shape({\r\n    onRenderHeader: PropTypes.func,\r\n    onRenderHeaderFold: PropTypes.func,\r\n    onRenderHeaderText: PropTypes.func,\r\n  }),\r\n  classes: PropTypes.shape({\r\n    root: PropTypes.string,\r\n    container: PropTypes.string,\r\n    header: PropTypes.string,\r\n    headerIcon: PropTypes.string,\r\n    headerIconOpen: PropTypes.string,\r\n    itemContent: PropTypes.string,\r\n  }).isRequired,\r\n  onToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nAccordionItemContainer.defaultProps = {\r\n  headerProps: {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n  },\r\n};\r\n\r\nexport default Accordion;\r\n"],"sourceRoot":""}