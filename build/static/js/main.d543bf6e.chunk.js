(this["webpackJsonpadmintools-front"]=this["webpackJsonpadmintools-front"]||[]).push([[0],{109:function(e,t,n){"use strict";var r=n(1),a=n(5),s=n(62),c=n(4),i=n(0),o=n(286),u=n(284),l=n(285),d=n(80);n(231);t.a=function(e){var t=e.timeout,n=void 0===t?5e3:t,p=Object(i.useState)([]),j=Object(c.a)(p,2),f=j[0],b=j[1],m=function(e){return function(){b((function(t){var n=t.find((function(t){return t.id===e}));return n?(n.timer&&clearTimeout(n.timer),t.filter((function(t){return t.id!==e}))):t}))}};return Object(i.useEffect)((function(){return d.a.on("notification-add",(function(e){var t=Object(l.a)();b((function(r){return[].concat(Object(s.a)(r),[Object(a.a)(Object(a.a)({},e),{},{onRender:e.onRender.bind({},m(t)),id:t,timer:setTimeout((function(){return b((function(e){return e.filter((function(e){return e.id!==t}))}))}),n)})])}))})),function(){d.a.off("notification-add")}}),[n]),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(o.a,{children:f.map((function(e){return Object(r.jsx)(u.a,{timeout:400,classNames:"notification",children:Object(r.jsx)("div",{className:"item-wrapper",children:e.onRender()})},e.id)}))})})}},11:function(e,t,n){"use strict";var r=n(1),a=(n(0),n(123)),s=n(80),c={notify:function(e,t,n){s.a.emit("notification-add",{onRender:function(s){return Object(r.jsx)(a.a,{text:e,type:t,actions:n,onDismiss:s})}})},notifyError:function(e){this.notify(e,"error")},notifySuccess:function(e){this.notify(e,"success")},notifyInfo:function(e){this.notify(e,"info")},notifySevereWarning:function(e){this.notify(e,"severeWarning")}};t.a=c},12:function(e,t,n){"use strict";var r={dialogAnswers:{Yes:1,No:0,Cancel:2,Ok:3},timeOptions:function(){for(var e=[],t=0;t<24;t+=1)for(var n=0;n<60;n+=10){var r="".concat("0".concat(t).slice(-2),":").concat("0".concat(n).slice(-2));e.push({key:r,text:r})}return e}(),connections:{actions:{INSERT:"INSERT",UPDATE:"UPDATE",DELETE:"DELETE"}},tasks:{status:{New:"New",InProgress:"InProgress",Paused:"Paused",Finished:"Finished",Cancelled:"Cancelled"},types:{Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly"},DayTypes:{Workday:"Work",Calendar:"Calendar"},MonthlyOnType:{Day:"Day",Workday:"Workday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sunday:"Sunday"}},colors:["#FFB900","#FF8C00","#E74856","#E81123","#0078D7","#0063B1","#0099BC","#2D7D9A","#EA005E","#C30052","#8E8CD8","#6B69D6","#00B7C3","#038387","#7A7574","#5D5A58","#68768A","#515C6B","#B146C2","#881798","#00CC6A","#10893E","#498205","#107C10"],securities:{REPORTS:{code:"REPORTS",description:"Access to view, generate, create and edit reports",grants:{read:"read",create:"create",update:"update",delete:"delete"}},APPRAISAL_DETAILS:{code:"APPRAISAL DETAILS",description:"Access to see, add, edit, delete Appraisal details for user himself",grants:{read:"read",create:"create",update:"update",delete:"delete",createFinished:"create-finished",updateFinished:"update-finished",deleteFinished:"delete-finished"}},APPRAISAL_DETAILS_OTHER:{code:"APPRAISAL DETAILS - OTHER USERS",description:"Access to see, add, edit, delete Appraisal details for other users within the team",grants:{read:"read",create:"create",update:"update",delete:"delete",createFinished:"create-finished",updateFinished:"update-finished",deleteFinished:"delete-finished",toggleLock:"toggle-lock"}},APPRAISAL_PERIODS:{code:"APPRAISAL PERIODS",description:"Access to see, add, edit, finish Appraisal Periods",grants:{read:"read",create:"create",update:"update",delete:"delete",finish:"finish"}},SETTINGS:{code:"SETTINGS",description:"Access to various settings. Be careful about following: users - will allow users to modify other users; permissions - will allow users to alter permissions",grants:{read:"read",general:"general",users:"users",appraisalItems:"appraisal-items",appraisalPeriods:"appraisal-periods",permissions:"permissions"}},AUDITS:{code:"AUDITS",description:"Access to request, execute, update, delete audits.",grants:{read:"read",create:"create",update:"update",delete:"delete"}},REPORT_TEMPLATES:{code:"REPORT-TEMPLATES",description:"Access to create and edit report templates",grants:{read:"read",create:"create",update:"update",delete:"delete"}},TASK:{code:"TASK",description:"Access to read, update, create or delete tasks",grants:{read:"read",create:"create",update:"update",delete:"delete"}},TASK_RULE:{code:"TASK-RULE",description:"Access to read, update, create or delete task rules",grants:{read:"read",create:"create",update:"update",delete:"delete"}},TASK_FLOW:{code:"TASK-FLOW",description:"Access to read, update, create or delete task flows",grants:{read:"read",create:"create",update:"update",delete:"delete"}},TASK_PLANNING:{code:"TASK-PLANNING",description:"Access to read, update, create or delete task planning items",grants:{read:"read",create:"create",update:"update",delete:"delete"}}}};t.a=r},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(109),a=n(1),s=(n(0),n(20)),c=n(384),i=n(192),o=function(e){var t,n=e.type,r=e.text,o=e.actions,u=e.onDismiss;switch(n){case"success":t=s.a.success;break;case"warning":t=s.a.warning;break;case"error":t=s.a.error;break;case"info":t=s.a.info;break;case"blocked":t=s.a.blocked;break;case"severeWarning":t=s.a.severeWarning;break;default:t=s.a.info}return Object(a.jsx)(c.a,{messageBarType:t,actions:o||null,onDismiss:u,children:Object(a.jsx)(i.a,{variant:"medium",children:r})})};r.a},124:function(e,t,n){"use strict";var r=n(1),a=n(5),s=n(4),c=n(68),i=n(0),o=n(355),u=n(365),l=function(e){var t=e.columns,n=e.items,l=e.searchValue,d=e.sortedCol,p=e.setSelectionDetails,j=Object(c.a)(e,["columns","items","searchValue","sortedCol","setSelectionDetails"]),f=Object(i.useState)(null),b=Object(s.a)(f,2),m=b[0],h=b[1],O=Object(i.useState)(t),x=Object(s.a)(O,2),g=x[0],v=x[1],y=Object(i.useState)([]),k=Object(s.a)(y,2),w=k[0],S=k[1],C=new o.a({onSelectionChanged:function(){p({count:C.getSelectedCount(),items:C.getSelection()})}}),T=function(e,t){if(t.isSortable){var n=t,r=g.map((function(e){var r=e;if(r.key===t.key){if(n=r,r.isSorted)return r.isSortedDescending=!r.isSortedDescending,r;r.isSorted=!0,r.isSortedDescending=!0}else r.isSorted=!1,r.isSortedDescending=!1;return r}));v(r),h(n)}},A=Object(i.useCallback)((function(e){if(!l)return e;var t=new RegExp(l,"i");return e.filter((function(e){for(var n=g.filter((function(e){return e.isFilterable})),r=0;r<n.length;r+=1){var a=n[r],s=e[a.fieldName];if(a.filterValueAccessor&&(s=a.filterValueAccessor(e)),t.test(s))return!0}return!1}))}),[g,l]);return Object(i.useEffect)((function(){var e,t=n.slice();return m&&t.sort((e=m).sort?function(t,n){return e.isSortedDescending?e.sort(t,n):e.sort(n,t)}:function(t,n){return e.isSortedDescending?t[e.fieldName]>n[e.fieldName]?-1:1:t[e.fieldName]<n[e.fieldName]?-1:1}),S(l?A(t):t)}),[n,l,A,m]),Object(i.useEffect)((function(){d&&(v((function(e){return e.map((function(e){return e.key===d.key?Object(a.a)(Object(a.a)({},e),{},{isSorted:d.isSorted,isSortedDescending:d.isSortedDescending}):e}))})),h(d))}),[d]),Object(r.jsx)(u.a,Object(a.a)(Object(a.a)({},j),{},{selection:C,columns:g.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{onColumnClick:T})})),items:w,selectionPreservedOnEmptyClick:!0}))};l.defaultProps={searchValue:"",sortedCol:null,setSelectionDetails:function(){}};var d=l;t.a=d},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return k}));var r=n(5),a=n(3),s=n.n(a),c=n(6),i={and:function(e){return Object(c.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==e.length){t.next=3;break}throw new Error("No validations provided");case 3:return t.next=5,Promise.all(e.map((function(e){return e()})));case 5:if(!(n=t.sent).every((function(e){return e.result}))){t.next=8;break}return t.abrupt("return",n[0]);case 8:return t.abrupt("return",n.find((function(e){return!1===e.result})));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{result:!1,message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},andSync:function(e){return function(){try{var t,n=e.length;if(0===n)throw new Error("No validations provided");for(var r=0;r<n&&(t=e[r]()).result;r+=1);return t}catch(a){return{result:!1,message:"error"}}}},or:function(e){return Object(c.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==e.length){t.next=3;break}throw new Error("No validations provided");case 3:return t.next=5,Promise.all(e.map((function(e){return e()})));case 5:if(!(n=t.sent).some((function(e){return e.result}))){t.next=8;break}return t.abrupt("return",n.find((function(e){return e.result})));case 8:return t.abrupt("return",n[n.length-1]);case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{result:!1,message:"error"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))},orSync:function(e){return function(){try{var t,n=e.length;if(0===n)throw new Error("No validations provided");for(var r=0;r<n&&!(t=e[r]()).result;r+=1);return t}catch(a){return{result:!1,message:"error"}}}},not:function(e){return Object(c.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:return(n=t.sent).result=!n.result,n.message="Not - ".concat(n.message),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{result:!1,message:"error"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))},notSync:function(e){return function(){try{var t=e();return t.result=!t.result,t}catch(n){return{result:!1,message:"error"}}}},perform:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,t();case 3:if((r=e.sent).result){e.next=12;break}if(!n){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r);case 10:e.next=13;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),performSync:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e();if(n.result)return n;if(t)throw new Error(n.message);return n}},o={userExists:function(e){return Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{result:Boolean(e),message:"User doesn't exist."});case 1:case"end":return t.stop()}}),t)})))},userAuthorized:function(e,t,n){return Object(c.a)(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{result:e.Authorize(t,n),message:"Access denied. Code: ".concat(t,", Grant: ").concat(n)});case 1:case"end":return r.stop()}}),r)})))}},u={isTruthy:function(e){return function(){return{result:Boolean(e),message:"".concat(e," is not true")}}}},l=n(12),d=i.and,p=i.or,j=i.not,f=i.perform,b=l.a.securities.APPRAISAL_DETAILS,m=l.a.securities.APPRAISAL_DETAILS_OTHER,h=function(e,t){return Object(c.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{result:Boolean(e.status===t),message:"Period '".concat(e.name,"' status is not valid. Expected (").concat(t,")")});case 1:case"end":return n.stop()}}),n)})))},O={periodExists:function(e){return Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{result:Boolean(e),message:"Period doesn't exist."});case 1:case"end":return t.stop()}}),t)})))},itemExists:function(e){return Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{result:Boolean(e),message:"Item doesn't exist."});case 1:case"end":return t.stop()}}),t)})))},periodStatus:h,periodLocked:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(c.a)(s.a.mark((function r(){var a,c;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=e.users)){r.next=5;break}if(!(c=a.find((function(e){return e._id===t})))){r.next=5;break}return r.abrupt("return",{result:Boolean(c.locked),message:n||"Period is not locked"});case 5:return r.abrupt("return",{result:!1,message:n||"Period is not locked"});case 6:case"end":return r.stop()}}),r)})))},itemStatus:function(e,t){return Object(c.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{result:Boolean(e.status===t),message:"Item '".concat(e.content,"' status is not valid. Expected '").concat(t,"'.")});case 1:case"end":return n.stop()}}),n)})))},itemType:function(e,t){return Object(c.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{result:Boolean(e.type===t),message:"Item '".concat(e.content,"' type is not valid. Expected '").concat(t,"'.")});case 1:case"end":return n.stop()}}),n)})))},itemSameUser:function(e,t){return Object(c.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{result:Boolean(String(e.user)===String(t.id)),message:"Item '".concat(e.content,"'s user is not the same as '").concat(t.username,"'")});case 1:case"end":return n.stop()}}),n)})))},itemRelated:function(e){return Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{result:Boolean(e.relatedItemId),message:"Item is related."});case 1:case"end":return t.stop()}}),t)})))},itemContentNotNull:function(e){return Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{result:Boolean(e.content.trim().length>0),message:"Item content is empty"});case 1:case"end":return t.stop()}}),t)})))},canInsert:function(e,t,n){return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=f(p([d([h(t,"Active"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.create)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.create)])])]),d([h(t,"Finished"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.createFinished)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.createFinished)])])])]),!1),r.abrupt("return",a);case 2:case"end":return r.stop()}}),r)})))},canUpdate:function(e,t,n){return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=f(p([d([h(t,"Active"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.update)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.update)])])]),d([h(t,"Finished"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.updateFinished)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.updateFinished)])])])]),!1),r.abrupt("return",a);case 2:case"end":return r.stop()}}),r)})))},canDelete:function(e,t,n){return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(p([d([h(t,"Active"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.delete)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.delete)])])]),d([h(t,"Finished"),p([d([j(u.isTruthy(n)),o.userAuthorized(e,b.code,b.grants.deleteFinished)]),d([u.isTruthy(n),o.userAuthorized(e,m.code,m.grants.deleteFinished)])])])]),!1);case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),r)})))}},x=i.and,g=i.or,v=i.not,y=i.perform,k=Object(r.a)(Object(r.a)(Object(r.a)({},O),o),u)},231:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),s=n.n(a),c=n(74),i=n.n(c),o=n(179),u=n(5),l=n(4),d=n(376),p=n(369),j=n(33),f=n(34),b=n.n(f),m=n(45),h=n(39),O=n(123),x=n(80),g=s.a.createContext({user:null,connection:null,connectionId:null,Authorize:function(e,t,n){return!1},setContext:function(){return null},userPreferences:{theme:null},notify:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;x.a.emit("notification-add",{onRender:function(a){return Object(r.jsx)(O.a,{text:e,type:t,actions:n,onDismiss:a})}})}}),v=n(3),y=n.n(v),k=n(6),w=n(13),S=n.n(w),C=n(11),T={getRolesPath:"/api/security/roles",getCurrentUserSecuritiesPath:"/api/security/permissions/me",getUserSecuritiesPath:function(e){return"/api/security/permissions/user/".concat(e)},getOrganizationUsersSecuritiesPath:"/api/security/permissions/organization",getRolesSecuritiesPath:"/api/security/permissions/role",getPermissionCodesPath:"/api/security/permissions/code",addPermissionPath:"/api/security/permissions",updatePermissionPath:function(e){return"/api/security/permissions/".concat(e)},deletePermissionPath:function(e){return"/api/security/permissions/".concat(e)},getRoles:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getRolesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getSecurities:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getCurrentUserSecuritiesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getUserSecurities:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.get(t.getUserSecuritiesPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:return n.abrupt("return",null);case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},getOrganizationUsersSecurities:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getOrganizationUsersSecuritiesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getRolesSecurities:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getRolesSecuritiesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getPermissionCodes:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getPermissionCodesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},addPermission:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post(t.addPermissionPath,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:return n.abrupt("return",null);case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updatePermission:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.updatePermissionPath(e),t);case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:return r.abrupt("return",null);case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response.data&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deletePermission:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.delete(t.deletePermissionPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:return n.abrupt("return",null);case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},Authorize:function(e,t){try{if(this.security){var n=this.security.map((function(e){return e.code})).indexOf(e);if(-1!==n)return-1!==this.security[n].grants.indexOf(t)}return!1}catch(r){return C.a.notifyError(r.response.data&&r.response.data.error||r.message),!1}}},A=n(181),P={currentUserPath:"/api/me",getCurrentUser:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.currentUserPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 9:return t.prev=9,t.t0=t.catch(0),C.a.notify("Not logged in. ".concat(t.t0.response.data&&t.t0.response.data.error||t.t0.message),"error",Object(r.jsx)(A.a,{as:"a",href:"/auth/login",children:"Log in"})),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},D=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useContext)(g);return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setContext){e.next=2;break}return e.abrupt("return",r(!1));case 2:if(s.user||n){e.next=9;break}return r(!0),e.next=6,P.getCurrentUser();case 6:return(t=e.sent)&&(a=t.displayName||t.username||"Unknown",t.avatar=a.split(/[. ,_-]/).map((function(e){return e[0]})).join("").slice(0,2).toUpperCase()),e.abrupt("return",s.setContext(Object(u.a)(Object(u.a)({},s),{},{user:t,userLoaded:!0})));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,s]),null},N=function(){var e=Object(a.useContext)(g);return Object(a.useEffect)((function(){function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.security||null===e.user){t.next=5;break}return t.next=3,T.getSecurities();case 3:(n=t.sent)&&e.setContext((function(e){return Object(u.a)(Object(u.a)({},e),{},{security:n})}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user,e.security,e.setContext]),null},R=n(273),I=n(149),E=n(120),F=n(392),U=n(192),z=n(100),L=n(353),W=n(381),M=n(193),H=n(387),B=n(10),G=n(371),V=n(287),q=n(177),K={root:{padding:"3px"}},Y=n(373),Q=n(148),J=n(372),Z=n(8),X=Object(Z.t)({palette:{themePrimary:"#0078d7",themeLighterAlt:"#f3f9fd",themeLighter:"#d1e7f8",themeLight:"#aad2f3",themeTertiary:"#5ca8e7",themeSecondary:"#1a84db",themeDarkAlt:"#006ac1",themeDark:"#005aa3",themeDarker:"#004278",neutralLighterAlt:"#faf9f8",neutralLighter:"#f3f2f1",neutralLight:"#edebe9",neutralQuaternaryAlt:"#e1dfdd",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c6c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#ffffff",accent:"#ffffff"},type:"light"}),_=Object(Z.t)({palette:{themePrimary:"#0078d7",themeLighterAlt:"#000509",themeLighter:"#001322",themeLight:"#002340",themeTertiary:"#004781",themeSecondary:"#0068bc",themeDarkAlt:"#1682da",themeDark:"#3693e0",themeDarker:"#66aee8",neutralLighterAlt:"#212121",neutralLighter:"#2a2a2a",neutralLight:"#393939",neutralQuaternaryAlt:"#424242",neutralQuaternary:"#494949",neutralTertiaryAlt:"#686868",neutralTertiary:"#c8c8c8",neutralSecondary:"#d0d0d0",neutralPrimaryAlt:"#dadada",neutralPrimary:"#ffffff",neutralDark:"#f4f4f4",black:"#f8f8f8",white:"#171717",accent:"#ffffff"},type:"dark",isInverted:!0}),$=Object(Z.t)({palette:{themePrimary:"#268bd2",themeLighterAlt:"#f5fafd",themeLighter:"#d7eaf8",themeLight:"#b6d9f1",themeTertiary:"#74b5e3",themeSecondary:"#3c96d7",themeDarkAlt:"#227cbc",themeDark:"#1d699f",themeDarker:"#154d75",neutralLighterAlt:"#f6efdd",neutralLighter:"#f2ebd9",neutralLight:"#e8e2d1",neutralQuaternaryAlt:"#d8d2c2",neutralQuaternary:"#cec9b9",neutralTertiaryAlt:"#c6c1b2",neutralTertiary:"#585959",neutralSecondary:"#363737",neutralPrimaryAlt:"#2e2f2f",neutralPrimary:"#000000",neutralDark:"#151515",black:"#0b0b0b",white:"#fdf6e3",accent:"#ffffff"}}),ee=Object(Z.t)({palette:{themePrimary:"#ffffff",themeLighterAlt:"#767676",themeLighter:"#a6a6a6",themeLight:"#c8c8c8",themeTertiary:"#d0d0d0",themeSecondary:"#dadada",themeDarkAlt:"#eaeaea",themeDark:"#f4f4f4",themeDarker:"#f8f8f8",neutralLighterAlt:"#333839",neutralLighter:"#3a4041",neutralLight:"#464d4e",neutralQuaternaryAlt:"#4e5456",neutralQuaternary:"#545b5d",neutralTertiaryAlt:"#6f7679",neutralTertiary:"#f3f3f3",neutralSecondary:"#f5f5f5",neutralPrimaryAlt:"#f7f7f7",neutralPrimary:"#ededed",neutralDark:"#fbfbfb",black:"#fdfdfd",white:"#2b2f30",accent:"#000000"}}),te=function(e){switch(e||localStorage.getItem("theme")){case"light":return X;case"dark":return _;case"warm":return $;case"blackwhite":return ee;default:return X}},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAGuElEQVR4nO2aS2waVxSG/3uHVzAm2CBiaCDGE0VJ5RAFlKSLLKo+sqgqxYq6qdRuskj2aStVaqS2UleVsLKLFGXVl6pKUYmyidR20V3VGKM4XkQ4ECeyDZiABwwGLGZuF85MwU8eA0Me34o59zJzzj/3ee4QbMLv9w8YDIb3GGM8AP3m8hcRQsg6gDhj7M9IJLLWUFb/OxAIfE4I+QrA/p562DsEAN9FIpFJAAz4XwAaDAZ/AvCxVp71mF8ikcgnABgBgEAg8AUh5Hu51Gg0wmq1guM4zTxUE1EUUSgUUK1W682fRSKRSeL3+wf0ev0injd7h8MBj8cDSqkmznYLSZLw9OlTZLNZ2SQAeIMaDIZ38Tx4o9H4UgYPAJRSeL1eGI1G2WRjjL1DGWNHZIvValWCZ4whm83WK9a0rV+hlMJqtSrXhJAjOkKIhTEGANDr/5/1crkc5ufn5YoYHh5u2tbP1MdICLG+fG29RXQ7FdjtdhCyMUvKb7VZ24vEjgIA2wfUrO1F4XUXqL9YXV1VmvPLwtDQUP3Ut4UtAqyurnbdqV7y7NkzjI+P71hOAcR7507/oZuamvo5EAgwl8v1o9bOqA2lFENDQ7vWUTr8pUuXWNc96gOSySSWlpYAAISQb1/5WeC1AKdPnz4SDAYTs7OzqFQqWvvTc2itVvsIgK9arUIQBK396TmUUmqQL+Rd4avEKz8G7LoZapVarQZBEFAulwEAZrMZNputr3OLqgmQyWSwsLAASZIa7BzH4eDBg3A4HGo9SlVUESCVSmFxcXHbMlEU8eTJE4iiiAMHDqjxOFXpeAyoVCrKymo3FhcX+3Ka7ViATCbT1OzBGEMmk+n0carTsQClUqkrdXtFxwJsHvTUqtsrOhbAYDDsXek5u2VmtKJjAWw2W1fq9oqOp0G73Y5MJoO1tbVd65nN5razxysrKxAEAevr69DpdLBYLHA4HKossDpuAYQQ8Dy/a/M2mUzgeb7lhKsoipibm0MikUAul0OxWIQgCHA4HDh+/DhMJlOn7quzEDIYDDh27BjS6TSy2SzW19cVu91ux8jISMsHrnLwm2cOi8WCy5cvg1KKEydO4Pbt23u2vt1QbSnMcRzcbjfcbjdEUQQhpO1T5p2CBzYWXoVCATabDYODg5iYmEA4HG5bhK7sBjmO60rwwMaG69q1aygUCgA2WsSFCxdgsVjael5fbYf3Cl4mmUwiFAopIpjNZkxMTLQlQt8I0GzwMqlUCqFQCPl8HkD7IlBJktblC62OxVoNXiaVSmFycrJtERhjVc7j8aQZYx8YjcZht9sNnU7VHMmetBu8TLFYxIMHDxAIBGAymaDX68HzPBKJhDIb1WMwGJDP5yGKYlwUxa80PRjpNPh6RkZGcOXKFezfv/GJ49raGsLhMIrF4rb1b9y4QQANxwA1gwfaHxM0EUDt4GXS6TRCoZCS3pdFGBwc3PE/uwogiiIEQUA2m0WhUFBlOyuKImKxWNdyA+l0GpOTkw0inD9/vuHrsHp2FGBpaQkzMzOIx+OYn5/H3NwclpeXO9qAyMF3snRthlZE2CIAYwyJRALJZLLhjY+NjeHq1au4ePEiRkdHW3aqV8HLbO4O+/bt21aEBgHk4FdWVrbc0Ol0glIKQgjOnTsHn8/XtDNyn+9V8DLLy8vbilA/JijtORAIfPP48eMdzweTySQOHToEp9MJAOB5Htlsds/zxF6/+c2USqUt64TR0VGk0+lfHz16lJUFoMPDw19v9+ZlGGOYnp6Gx+NR8vs8zyOfzyOXy237H62DlymVSpiZmcHJkydhMpnAGMOdO3feXFhY+IEDgGAw+GWlUnl3rxtJkoRoNNoggs/n21aEfgleplQqIRqNolwuIxwOI5fL+Vwu12/cmTNnrJIk/Q6gqYylLEJ9d/D5fBAEQekOer0e4+PjOHr0KGKxGGq1WtcCa4VyuYxYLKYslgDc51wu14cAPm3lRpIkYXp6ukGEsbExOJ1OOBwOnD17FjzPw+v1QhAE5WPqfoMQ8i8FwLfz51qthuvXr2N2dlaxeTwe+P1+ZfnJGNvxzLAfIIToOLfb/T6At9u5gSRJiEQi0Ov18Hq9DYukXC6Hmzdv4uHDh2r5qzqEkL873vuKoohbt27h7t27OHz4MAYGBpDJZBCPx/vyJGgzqm3+S6US7t+/r9btekbfpMS04rUAWjugNZQxVt272ssJY6xKCSFTWjuiFZIk/Uunpqb+IIT8pLUzvYYx9mM0Gv1LyQqfOnXqPUmS3gLQ3hnTi0ORUvrPvXv3/gSA/wDZmkXYs+fHBwAAAABJRU5ErkJggg==",re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAGu0lEQVR4nO2abWxb1RnHf+f6Ok5qJ2vjhHSbApRkWdrSteNl6iakVbRAK00QUAu0aXmXVrFPg060o0iZOq0tIKSxrYwPBAZpGdCVVAjWqcmksSHWNFIJrDRp4kqEQtuQtInr2HHse88+uHbsxHZs3xtfB/r7ZD/38TnP87/n3UcwmS1dTmyOVSiyBintU57PTsYRigeHr42mG/zxD8TERynY2rMF5JPAt/IcYH6QYhghf8uu+udASIgK0CQVxrpbgPVWxpc3BPvYWb8RhIwIsLX7VyCfjj6vcdtZWeNkXonNshjN5EJAo90zimcoNGEUPM7Ohc8JtnQ5UYu+4FKzf+TGufzx9iocqkhR3OwkGJY8evAszZ0jEYMUw5T4vqtgd6zkUvK17qKvZfIADlWw5475XFN+aVwXci5B580KyLqo06raObHkdQktx7y0HPMiJVnZChWHKlhV64w31alIXNFvVS419mTfR142vfklAEJA47KyjG2FzLdLJ3JEUqZYF0phoKZ60LisDCEi8+T6pWVZ2WYTKQVI1pwztc0mLneB+C8ffBZg97+GrIrFdBQhuGORi7qKopQ+CQK09Y3S1jc644Hlkxc7LtC3pSblcwUhPXmMp+BQcSzcS6BHPrGi/DWrgzEbZ5Hg3h+kH6BVmoQOtOzaJb92AmTCN34WuCwA207U8cSJUzXPeOgdHLc6nryjoLMWwYJT50Ps/99Fq+PJOwqC2CohGC7w/ewM8I0fA1JuhnJhyBektfNzjp+OHDtdWz2XhuurKXelXopajWkC7Dl8kq1/PcbFsVCC/ZclnTy9/jp+vvJ7ZlVlKqZ0gd3vHOcXr3RMSR7AGwixufkIz777qRlVmY5hAU58McL2tz6a1m/bG8foOeM1Wp3pGBbgz+29hLXpZ4+wJnmxvddodaZjWIAOz2DGvkey8M0XhgUYDYYz9vWNZe6bLwwLsKDSNb1TzNc5vVOeMSxAww3VGfvedeOVRqszHcPrgE03XcPvD3XT1X8hrd8Pry5nw08WZF2+lPB2Zz9/6+inf8jPPGcRNy+ezyMranEVG1/GGC5BtQkOPr6CW3e1czLFNFf/nTJaH/spqi27/xxH/CHWPf8+hz85k2B/p9vH9rYLvLqxlruWVeYcO5i0ELqqwsnRHWvY3rCEK93OBPtTdy6hY8eaBHsmjPhD3La7fUryKCq4axm1z2Pt6+fY23HOUOymLYXLSuzsWLeUHeuW4hsLIwQ4HbkVH03+SF+SaVPqoIfAZkcqKpsOfIUENv6oKqe6ZmQ36CpWZyZ5iAgwcBK0yLJbCpX7Dgzyyodnc6qvoLbD0yYfJRSAgZ44EWw8dHAoJxEKRoCMk48SGpsqQuv5rEVQkMQOAq26GZJ18lEmi6AoPNR6npfTiFCUOBMFFRT2I6Snxm1n7bWl2UdvkJyTj5JEhIfTiLB2SSk1bjsI6UGT+2NySJn/Cy6Gk4/HXgxXfB9skTtAQtd5qaGcB388P6m7EEKAhWOAqclDpCWcy7wlRLFEANOTjxLOXoS0XWDEH+L97nMM+YJUu53cVFeJw27s8uSwf5xbd7Zz9NQM3kNQi6EqsTs03+nmgeUTi6VoF0gqgKZLfnPgY55991MC41rsR+65ZTz2s8X8ek3q/9vTkZfko0wWQWo0N1TEREgpQEjTufcP/+HA0f7EAh0uuKIeBNxWrXHo0cVZxZPX5KNMHhilxksNbh5cPj/5IBjSdO55/t9TkwdQHTG5/vG5jdUvHM84jhF/iNW7/5nf5CHpYunh1iGaP5zYYMVawHhYk0nffLxrZS2UTNykX3OVznubF6WNwZI3P5lJ3UHRw+hfnqin5e6eSAtoalIa//RBmuQBJAz2QWAkZvn7ZwqrX0h93l8QycOU2UFHgB7eA9EW0PjqNqT4XUaFCQEVk1uC5L3NCxPcCib5eNQicFZEXuL4KGhykY3GljIkbwOOjAsKDEPRnMggA/SNCI70DrDh+kqEgO6zfq575hN6vTYIeimYW9S6BsGLsZaATelS0eUtCLLbBEgdBj1QURNrCYf6FUq3d1FRDKf9NnRRCq5SCPnh4oDZqZiD1KsUFJnbpB4VIW5M8EsH/QEHuogehkgY9yf/fUEgVAUp5uT8e6nDV33gPRv5HI82DgN9EPQZDHJmMeFMUMLwafCeAUdp5NBSC0b6WoF0/XSYd0FC1yKD4yyjYI7ErOKyAFYHYDUKQgatDsIyhAwq6KLT6jisQ+lQeH3TYQQtVoeSf8Rr7N3YPnFIvuEvq0AsB5H5jYdZifSB/C/77m8D+D8TYN/y0fprNgAAAABJRU5ErkJggg==",ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAG80lEQVR4nO2aW2wcVxnHf2f2lvWuvWuT+hKStEmonVSkqEGQEpTSNOWhKOpDSzAOLZeqBaGK8gCF0AoUlIuqQoMAlYciaBLHoagNlQgtCOISgps6F6cQqdhRYkdO6vttL/beZmcOD/Z6vba33st4Z5Pm9zbfnJnzff855zu3Eczm0UMutPj9SLEGgW3O/esSGUORnZTEj/PSt0Iz74gZhQQNv/8+QjwLeArsYaHwIeQemh7bD0JCQoBduxQurTyMpMFU9wrHEY584xEQ0grAxRXfQySDX13p5L61FZSXWE3z0EjGQnHe6hilazCcMO2g4UAbf2C/mOrzPUw1+8c2L+OXDXU4bIppDi8GUVXnO00dHHi7L2Hy4VY/qiDVrUwFv6ay5IYMHsBhU/j1V9ay6hZnwuRlwnafgi5qE5at6yqmg9el5EhrP0da+5GSrGzFisOmsHVdRdKgi1orSHciF1aVJUe9V04P8PXfvQeAENCwsTpjWzFT47EnL4ReduO19SxJm+YbNlYjBAghqP9UVVa264m0AszXnDO1XU/c7AIzL05d9vOzv3Wb5YvhKAIe/MQt3F5dkrZMigDN7aM0t48uumOF5Lcne+jYuyntfQWUzgL6U3RYqe1u4uJK+fQDtzaa7YzRlDgsC45M08vh2ER3kc/jjGH3n7vYfezK1JX86Yd+FLgpAPUHa9nxclfdM6e4PBBa+IkbDAWL/kWQq64MhTl6ftBsfwqOAvr08iim6mb6Ygof+hxg6KbfaFjjrx1hLg6pAKyttPNAnZNyZ/HqbJgAL58Nsrt5jPFY6nTix3bBTz5fztc+WWpUVYZiiAC/OhVgz/Gxee8FY5Kn3xhlPCZ58jNlRlRnKHm3zUvDKs+95Vuw3N5mH5dH4vlWZzh5C3CgLUhcX3gWHdclh9qC+VZnOHkLcL4nmnHZtizKFoq8BQjFMi87ESu+9VbeAqwszzyPrvQW31Fb3gJ8oc65cKEptq1LvzVlFnl/ku13unjpdID3BtQPLLe+2s5DH89eACnhzY4Qx9pD9ATieJYobL5tCY9scOOy5z/BylsAqyJorK9ie9MAnSPzi/Cxj9g4VF+JVRHz3k9HIKrz+KvDnOgKp9hHJjQGgnG2rXOxYbkjZ9/BoInQcq+Fvz9Rw4tv+/njhXF6/Nq0vf5ON09u8uC2Zx98/eHBOSNHqUPhqU2lWARcGYmiSsnGFUty9t2wrFRqF+zc4mXnFi8TMR0BlOTYRNMFDxBRJcGIjtepUOpQ6BmLcRpyFmFRVikuu7IowQOoumTfvwL4I5NLd7ddoW9M5fS1SE71FdUybaHgE/QGNPb8MylCiV3kLELRCJBp8An6gpMi+GaI0O/LXgQFlOm5nN2kP0OyDT5BX1Bj7wwRnLaFRbBZZ8QoRFRBU14DOldXOnl4Q2Uu/udFrsEnyFaEhzdUsrrSCdCJFK+ZejCSb/AzqSm18OyWMrxLJr9wWJVUe21pRwe761YBJuYAI4OHyZawL8vuACYJYHTwCXoTIoRniXA1vQgf2AUCUZ3W7iijYY1lZVY2rnDgsGY3o5uNP6LzpcODvNu7eHsDy0otPHNvGV5nsjvUeG18ekZ3SHSBeQXQdMnPT/p58Z0AETWpyx2VNp76rIeH1rtycqwQwSdYSIS0OUDV4PGjw7xw0p8S/O1Lrfzwc2W4rJKDZwNZO1TI4GGyO+w9kdod+nwqZ2flhBQBVA2eODrIG+1zzwir3BYsYvKnqJpShUPnMhchENX5clPhgk/QN48IvbNywrQAqgbf/NMQb3aE574JaL0a5UJ/crlb7VZobFtYBH9EZ3uj8QkvU/qCGvtOpI4O7/tU6na31EFCgF1S+fbrQ/N++QRxHfa3BHi3NylClUuh6Xx6EQrd7NMxe3SwKuCL6L+BqSRY/oOTP5KCfZm8zKrAdzeVcdey5G+1w2HJjrtST36KJfiZLHUp3HObg//0qXSNxrFIeYelYldrmYxrrwMZba3oEs69H2N1hZUqtwWAEpug9WqE9dUOhID+cY2DZ4J4nPC/wThakRw6h1RJ+1CcsamWoAvxX4v97q9uE/BoNi/SJZy5liqCyyZ4pztM27Uow+Mqyz0WVpVb8UV0ukaL70QIQCDPKEjW5PKwqkt+0RJMSYxVbgvLPZbpzUpdSq76NGO8XQwEVkUImfNetapL9rcE+EtHGFVLnUiOhHReaAlOH5UXK3nvCcZ1eOVCiGMdYWqXWim1KwyGdC4NqWjFdxA0B8M2RSdiMmWIvF4omi0xs7gpgNkOmI0idFE8U7UCI3QRVXT0c2Y7YhY6nFH8z9/7D+Cw2c4UHEGj//l7mqd3hDw7/32/kPrdQuI206/FRgrGpVBa/c9tPg7wfy9OQ3nZbcB7AAAAAElFTkSuQmCC",se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAG3ElEQVR4nO2bXUxTZxjH/+97TmmlIpZqWkAvHILORYeYGTaVidTO4QWZH/PK3UyTSeYu3JYMp5mLhCxLZoJbFgOLyTSYjBkxURP5UtLFaNisiNkM0BaISMeNYlLoqW3Puws4R+qotD2Hnvrxu+p5znPe93n+vN/nQPAUdvtuo8j7bYySPMqY7un7zyOMsceEULeBCm0XLlwYn3qPTP1tK9/5BQj7GkBmckNMGqMEqG69dPYYAAYAHAAcOXKE8sYFDSA4AMCgZYSzjAGA/bVlr+d7eu82AZMtwFa+80sQ9r3klZNtweo3V2Lu3LkaxakuPp8Pt27fwbB3RLYxQj5vv/j7MWK37zaKOv99TDb7998rw/5PPoZO90J0f5lgMIjjP/+Cy61XJNPoHBrIpUwnlGEy+Zxs6wuZPADodDp8VrkH2VaLZJo/HtZvogysQLIUFa6Sk2eMof2qA+1XHWCMxWVLVXQ6HYoKVz4xUFLAg2AuJuM2mZ4M/lc6/sB3P/w4cUEIyjZuiNmWymRlmeTfBGwe1TCWlICPdmPTxg0AISAgKH13XVy254moApBpmnOstueJV11g6sXf//Tgt7PntYpFdQiheKf4LSzKzY7qEyGAs6sbzq7uWQ8smVy63IJf63+Kep8SkbiTGE/Kwa9b+0bDtT/vsA93fHBa62DUxmDQo7Tk2TOTvB1mqb6MU4lTZxpx+szvExcE3770s8ArAcrKdxXYtu7wfLTnU9wf9modT9KhlIR3AFji/XcEjms3tI4n6VBGkCZdBINBLWPRhJd+DIi6GUqEsbExdHV1YXh4GACQk5ODwsJCGI1GNatRFdUE6OjoQFNTEwRBiLA3NjZi+/btKCkpUasqVVFFgObmZpw7d27ae4IgoKGhAYIgwG63q1GdqigeA7xeL86fn3kH2dTUhJGRkRn9ko1iARwOB0RRnNFPFEU4HA6l1amOYgEGBgZi9u3v71daneooFiAQCMyKb7JQLMCCBQti9jWbzUqrUx3FAhQWFsbsW1RUpLQ61VE8DRYXF6O9vR1DQ0PP9Fu8eDHWrl0bd/mMMXR1dcHpdOLBgwdIT0/H8uXLsX79euj1+kTDllHcAiilqKyshMViiepjtVpRWVkJSuOrzu/3o7a2FidOnEBnZydcLhe6u7tRV1eHXbt24fr160rDV2cvYDabcfDgQZSXlyMrKyvCvnXrVlRVVUXYY0FK/u7duxH2UCgEj8eDoaEhHDhwAB0dHYpiV20pbDAYUFFRgYqKCnm0T7SJSslPN21yHAee5xEMBhEMBlFVVYWamhqUlpYmVNes7Ab1ev2sJA9MvIkqKCiQ32JLIrS1tSVUX0pth2dKXsJgMESIEAqFcOjQoYRESBkBYk1eQi0RKGF4LF1o9WVIvMlLJCKCjn8y7DEgQEXGnQWYOyfbgpJ1xYlloIBEk5eIV4QN695GTrYFAHNTsLOavhhRmvxUBEFAb2+vfK7J8zyqq6ths9mm9SeEEEDDMUDN5IHExwRNBFA7eYloIrS2tkZ95pldwO/3o6+vDz6fD1lZWVi6dCl4XtnaaXx8HLW1tXGdI8RLLN1B6gLTCiCKIi5evIiWlpaIdwUcx8Fms2Hbtm0JBZaM5CVmEiGqAOFwGPX19bh161ZEgWNjY+jp6QFjDHa7HTU1NXEFlMzkJQKBAHp6eiJEOHr0KDZv3iwLENGeoyUPTCgqNZKWlhYAiFkEv9+P48ePJzV5YGJJvmzZMlmEUCiEw4cPR3zQKbeAUCjEoiUPTOzL3W43Hj16JNu2bNmC6urqZwahxV/+aZ7uDjqdDitWrFh+8uTJHvlz+b6+vm+cTmfUQgghMJlMGB8fl3d7LpcL/f39UefaVEgemGj6mZmZGB0dhSiKIITAarWucDqdpzgAyM/P/8rr9ZbNVNB0Ing8HgwMDKCsLPLxVElegud5mEwmcByH3NxcpKWlLVm9enUjt3///nnhcLgJQEz71+lEcLvdGBwcRGlpKQghuHfvHvbt24fe3l5kZGTEfRI0W3Ach4yMjKl7ntu8IAibCSEZ8RRECEFeXl7EmNDc3IzOzk6YzWYMDg7K/S09PR0LFy5UMw/VoJRaKCEkL5GHJREyM598Yf7w4UO4XK6ItcOcOXOURzpLMMZ4CiA90QIkESwWy/+aeVpaGvLz81P+324UnwkSQrBo0SJYrVb4fD6Ew2Ho9XoYjUZMrjVSGtUORXmex/z589UqLmmkxvCsIa8E0DoAraGMsdR7Z50kGGMBSin9S+tAtIJS2sndvHnTs2bNmqUAVmkdUJI5XVdXd0yeqPfu3WujlBaLopjaKxeFUEp9oijeqK+vbwOA/wBI/iG1u8B8OgAAAABJRU5ErkJggg==",ce=function(){var e=Object(a.useContext)(g),t=Object(a.useState)(e.userPreferences.theme.type),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)([{key:"light",text:"Light",imageSrc:re,selectedImageSrc:re,imageSize:{width:64,height:64}},{key:"warm",text:"Warm",imageSrc:ae,selectedImageSrc:ae,imageSize:{width:64,height:64}},{key:"dark",text:"Dark",imageSrc:ne,selectedImageSrc:ne,imageSize:{width:64,height:64}},{key:"blackwhite",text:"Dark Black&White",imageSrc:se,selectedImageSrc:se,imageSize:{width:64,height:64}}]),o=Object(l.a)(i,1)[0];return Object(r.jsxs)(M.a,{verticalAlign:"start",tokens:{childrenGap:16},children:[Object(r.jsx)(U.a,{variant:"large",children:"Select color theme:"}),Object(r.jsx)(J.a,{options:o,selectedKey:s,onChange:function(t,n){n&&n.key&&(c(n.key),localStorage.setItem("theme",n.key),e.setContext((function(t){return Object(u.a)(Object(u.a)({},t),{},{userPreferences:Object(u.a)(Object(u.a)({},e.userPreferences),{},{theme:te(n.key)})})})))}})]})},ie=function(e){var t=e.isOpen,n=e.setOpen;return Object(r.jsx)(Y.a,{isOpen:t,onDismiss:function(){return n(!1)},isBlocking:!1,styles:{scrollableContent:{minWidth:300,minHeight:300,height:300}},children:Object(r.jsxs)(M.a,{style:{height:"100%",padding:"16px"},horizontalAlign:"space-evenly",verticalAlign:"center",children:[Object(r.jsx)(Q.a,{grow:1,children:Object(r.jsx)(ce,{})}),Object(r.jsx)(Q.a,{align:"center",children:Object(r.jsx)(A.a,{onClick:function(){return n(!1)},children:"Close"})})]})})},oe=Object(I.a)((function(e){return{root:{height:"40px",width:"200px",display:"flex",flexFlow:"column nowrap",justifyContent:"center"},link:{color:e.palette.accent,textAlign:"center",display:"block",paddingRight:"16px"},fluidLink:{color:e.palette.accent},usernameText:{overflow:"hidden",paddingRight:"8px",textDecoration:"none",color:e.palette.accent},callout:{minWidth:"200px",minHeight:"100px",padding:"16px"}}})),ue=function(){var e=oe(),t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(a.useContext)(g),j=Object(L.a)({keytipProps:{styles:K,content:"I",keySequences:["i"],onExecute:function(e){return e.click()}}}),f=p.user?p.user.displayName||p.user.username:"Unknown",b=function(){return c((function(e){return!e}))};return Object(r.jsx)("div",{className:e.root,children:p.user?Object(r.jsxs)(W.a,{ref:j,onClick:b,style:{textDecoration:"none"},id:"persona",children:[Object(r.jsxs)(M.a,{verticalAlign:"center",wrap:!1,horizontal:!0,children:[Object(r.jsx)(U.a,{className:e.usernameText,children:p.user.username}),Object(r.jsx)(H.a,{size:B.c.size32,text:f,hidePersonaDetails:!0,className:e.fluidLink,styles:{root:{marginRight:"18px"}}})]}),s&&Object(r.jsxs)(G.a,{role:"alertdialog",gapSpace:0,target:"#persona",setInitialFocus:!0,isBeakVisible:!1,onDismiss:b,children:[Object(r.jsxs)(M.a,{className:e.callout,children:[Object(r.jsxs)(M.a,{horizontalAlign:"space-between",horizontal:!0,children:[Object(r.jsx)(U.a,{variant:"medium",children:"Admin Tools"}),Object(r.jsx)(W.a,{href:"/auth/logout",children:Object(r.jsx)(U.a,{variant:"medium",children:"Sign Out"})})]}),Object(r.jsx)(V.a,{}),Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"space-evenly",wrap:!0,children:[Object(r.jsx)(H.a,{size:B.c.size56}),Object(r.jsx)(U.a,{variant:"mediumPlus",children:p.user.username})]}),Object(r.jsx)(V.a,{}),Object(r.jsx)(q.a,{onClick:function(){return d(!0)},iconProps:{iconName:"Brush"},children:"Chgange Layout"}),Object(r.jsx)(V.a,{})]}),Object(r.jsx)(ie,{isOpen:u,setOpen:d})]})]}):Object(r.jsx)("div",{children:p.userLoaded?Object(r.jsx)(W.a,{className:e.link,href:"/auth/login",children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"Login"})}):null})})},le=Object(I.a)((function(e){return{root:{position:"relative",backgroundColor:e.palette.themeDark,height:"40px",width:"100vw",display:"flex",flexFlow:"row nowrap",justifyContent:"space-between"},flex:{height:"40px",display:"flex",flexFlow:"row nowrap",justifyContent:"start"},icon:{height:"40px",color:e.palette.accent},text:{width:"150px",alignSelf:"center",textAlign:"center",color:e.palette.accent}}})),de=function(e){var t=e.toggleDrawer,n=Object(E.a)(),a=le();return Object(r.jsxs)("div",{className:a.root,children:[Object(r.jsxs)("div",{className:a.flex,children:[Object(r.jsx)(F.a,{keytipProps:{styles:K,content:"M",keySequences:["m"],onExecute:t,hasMenu:!0},className:a.icon,iconProps:{iconName:"GlobalNavButton"},title:"Global Nav",ariaLabel:"Global Navigation",onClick:t}),Object(r.jsxs)(U.a,{className:a.text,variant:"large",block:!0,nowrap:!0,children:[Object(r.jsx)(z.a,{iconName:"Glasses",styles:{root:{fontSize:"25px",padding:n.spacing.s2}}}),"Admin Tools"]})]}),Object(r.jsx)(ue,{})]})},pe=n(388),je=n(46),fe=n(389),be=n(12),me=Object(R.a)(),he=function(){return{root:{},icon:{height:"40px",width:"100%",borderBottom:"1px solid",position:"absolute",top:0,left:0},nav:{marginTop:"40px"}}},Oe=function(e){var t=e.isOpen,n=e.toggleDrawer,s=me(he),c=Object(a.useContext)(g),i=Object(h.g)(),o=function(e,t){e.preventDefault(),i.push(t.url),n()},u=Object(a.useState)([{links:[{name:"Home",url:"/",icon:"Home",keyTipContent:"1",keyTipSequence:["m","1"],hasMenu:!1,onClick:o},{name:"Appraisals",url:"/appraisals",code:be.a.securities.APPRAISAL_PERIODS.code,grant:"read",icon:"Feedback",keyTipContent:"2",keyTipSequence:["m","2"],hasMenu:!1,onClick:o},{name:"Audits",url:"/audits",code:be.a.securities.AUDITS.code,grant:"read",icon:"ComplianceAudit",keyTipContent:"3",keyTipSequence:["m","3"],hasMenu:!1,onClick:o},{name:"Reporting",code:be.a.securities.REPORTS.code,grant:"read",keyTipContent:"4",keyTipSequence:["m","4"],hasMenu:!0,links:[{name:"Appraisal report",url:"/reporting/appraisal-report",code:be.a.securities.REPORTS.code,grant:"read",icon:"AutoFillTemplate",keyTipContent:"1",keyTipSequence:["m","4","1"],hasMenu:!1,onClick:o},{name:"Custom reports",url:"/reporting/reports",code:be.a.securities.REPORTS.code,grant:"read",icon:"ReportDocument",keyTipContent:"2",keyTipSequence:["m","4","2"],hasMenu:!1,onClick:o},{name:"Templates",url:"/reporting/templates",code:be.a.securities.REPORT_TEMPLATES.code,grant:"read",icon:"FileTemplate",keyTipContent:"3",keyTipSequence:["m","4","3"],hasMenu:!1,onClick:o}]},{name:"Tasks",code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,keyTipContent:"5",keyTipSequence:["m","5"],hasMenu:!0,links:[{name:"Dashboard",url:"/tasks",code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,icon:"ViewDashboard",keyTipContent:"1",keyTipSequence:["m","5","1"],hasMenu:!1,onClick:o},{name:"Planning",url:"/tasks/planning",code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,icon:"PlanView",keyTipContent:"2",keyTipSequence:["m","5","2"],hasMenu:!1,onClick:o},{name:"Rules",url:"/tasks/task-rules",code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,icon:"AustralianRules",keyTipContent:"3",keyTipSequence:["m","5","3"],hasMenu:!1,onClick:o},{name:"Flows",url:"/tasks/task-flows",code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,icon:"Flow",keyTipContent:"4",keyTipSequence:["m","5","4"],hasMenu:!1,onClick:o}]},{name:"Settings",code:be.a.securities.SETTINGS.code,grant:"read",keyTipContent:"6",keyTipSequence:["m","6"],hasMenu:!0,links:[{name:"General",url:"/settings",code:be.a.securities.SETTINGS.code,grant:"read",icon:"Settings",keyTipContent:"1",keyTipSequence:["m","6","1"],hasMenu:!1,onClick:o},{name:"Users",url:"/settings/users",code:be.a.securities.SETTINGS.code,grant:"users",icon:"UserFollowed",keyTipContent:"2",keyTipSequence:["m","6","2"],hasMenu:!1,onClick:o},{name:"Permissions",url:"/settings/permissions",code:be.a.securities.SETTINGS.code,grant:"permissions",icon:"Permissions",keyTipContent:"3",keyTipSequence:["m","6","3"],hasMenu:!1,onClick:o}]}]}]),d=Object(l.a)(u,1)[0],p=function e(t){var n=[];return t.forEach((function(t){t.code&&t.grant?c.Authorize(t.code,t.grant)&&(t.links&&(t.links=e(t.links)),n.push(t)):n.push(t)})),n},j=Object(a.useState)([]),f=Object(l.a)(j,2),b=f[0],m=f[1];return Object(a.useEffect)((function(){m([{links:p(d[0].links)}])}),[c.security,c.user,c.Authorize]),Object(r.jsxs)(pe.a,{isOpen:t,hasCloseButton:!1,type:je.a.smallFixedNear,isLightDismiss:!0,onDismiss:n,children:[Object(r.jsx)(q.a,{className:s.icon,onClick:n,children:Object(r.jsx)(z.a,{iconName:"GlobalNavButton",style:{marginLeft:5}})}),Object(r.jsx)(fe.a,{className:s.nav,ariaLabel:"Global navigation",selectedKey:"",groups:b,onRenderLink:function(e){return Object(r.jsx)(q.a,{keytipProps:e.keyTipContent&&{styles:K,content:e.keyTipContent,onExecute:function(t){return e.links&&e.isExpanded||t.click()},keySequences:e.keyTipSequence,hasMenu:e.hasMenu||!1},children:e.name})}})]})},xe=Object(R.a)(),ge={root:{position:"fixed",zIndex:1002,left:0,top:0}};function ve(){var e=xe(ge),t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1];return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(de,{toggleDrawer:function(){return c(!0)}}),Object(r.jsx)(Oe,{isOpen:s,toggleDrawer:function(){return c((function(e){return!e}))}})]})}var ye=n(283),ke=n(288),we=n(390),Se=n(37),Ce=n(7),Te=n(76),Ae=n(124),Pe=n(32),De=n(68),Ne=function(e){var t=e.code,n=e.grant,s=e.to,c=e.failureNotification,i=Object(De.a)(e,["code","grant","to","failureNotification"]),o=Object(a.useContext)(g),u=Object(a.useState)(!1),d=Object(l.a)(u,2),p=d[0],j=d[1],f=Object(a.useState)(!1),b=Object(l.a)(f,2),m=b[0],O=b[1],x=Object(a.useState)(!1),v=Object(l.a)(x,2),y=v[0],k=v[1];Object(a.useEffect)((function(){var e=o.Authorize(t,n);j(e),o.security&&(O(!e),!c||e||y||(C.a.notify(c.content),k(!0)))}),[o,t,n,c,y]);var w=null;return p&&(w=i.children),m&&(w=Object(r.jsx)(h.a,{to:s||"/"})),w},Re=function(e){var t=e.periodId,n=e.setPeriodDetails;return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.getItems(t);case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]),null},Ie={baseUrl:"/api/users",teamUsersPath:"/api/users/team-users",updateUsersPath:function(e){return"/api/users/".concat(e)},getUserPath:function(e){return"/api/users/user/".concat(e)},getUserOrganizationsPath:"/api/users/organizations",getUserTeamMembersPath:"/api/users/team-members",getSettingsUsersPath:"/api/settings/users",putSettingsUsersPath:function(e){return"/api/settings/users/".concat(e)},normalizeUser:function(e){var t=e;return t.role&&t.role.id&&(t.role=t.role.id),t.organization&&t.organization.id&&(t.organization=t.organization.id),t.organizations=t.organizations.map((function(e){return e.id||e})),t},getSettingsUsers:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getSettingsUsersPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getUser:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.get(t.getUserPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateUser:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.updateUsersPath(e),n.normalizeUser(t));case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText,"\n"));case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response.data&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateSettingsUser:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.putSettingsUsersPath(e),n.normalizeUser(t));case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText,"\n"));case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response.data&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},getUserOrganizations:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getUserOrganizationsPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getUserTeamMembers:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.getUserTeamMembersPath);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},Ee=n(367),Fe=Object(I.a)((function(e){return{item:{textAlign:"center",padding:e.spacing.m,color:e.palette.neutralSecondary,marginTop:e.spacing.s2,"& > *":{padding:e.spacing.s2,border:"1px solid ".concat(e.palette.themeSecondary)}},suggestion:{padding:e.spacing.m},root:{"& input":{backgroundColor:e.palette.white,color:e.palette.neutralTertiary,"& ::placeholder":{color:e.palette.neutralTertiary}}}}})),Ue=function(e){return e.text},ze=function(e){var t=e.options,n=e.getTextFromItem,s=e.selected,c=e.onSelect,i=e.onRenderItem,o=e.onRenderSuggestionsItem,u=e.placeholder,d=void 0===u?"Select or search a value in the list...":u,p=e.className,j=e.styles,f=e.maxHeight,b=Fe(),m=Object(Ce.useScreenClass)(),h=Object(a.useState)([]),O=Object(l.a)(h,2),x=O[0],g=O[1],v=Object(a.useState)(200),y=Object(l.a)(v,2),k=y[0],w=y[1],S=Object(a.useRef)(),C=n||Ue,T=i||function(e,t){return function(n){return Object(r.jsx)("div",{className:t.item,children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:e(n)})},n.key)}}(C,b),A=o||function(e,t){return function(n){return Object(r.jsx)("div",{className:t.suggestion,children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:e(n)})})}}(C,b);return Object(a.useEffect)((function(){S.current&&w(S.current.clientWidth)}),[S,m]),Object(r.jsx)("div",{ref:S,className:"".concat(b.root," ").concat(p),children:Object(r.jsx)(Ee.b,{inputProps:{placeholder:d},pickerCalloutProps:{styles:{root:{width:k}}},pickerSuggestionsProps:{styles:{suggestionsContainer:{maxHeight:f}}},styles:j,selectedItems:s?[s]:x,onItemSelected:function(e){c&&c(e),g([e])},onEmptyResolveSuggestions:function(){return t},onResolveSuggestions:function(e,n){return""===e?n:t.filter((function(t){return-1!==C(t).toLowerCase().indexOf(e.toLowerCase())}))},onRenderItem:function(e){var t=e.item;return T(t)},getTextFromItem:C,onRenderSuggestionsItem:A})})};ze.defaultProps={getTextFromItem:Ue,selected:null,onSelect:null,onRenderItem:null,onRenderSuggestionsItem:null,placeholder:"Select or search a value in the list...",className:"",styles:null,maxHeight:"600px"};var Le=ze,We=function(e){var t=e.onUserSelect,n=Object(a.useState)([]),s=Object(l.a)(n,2),c=s[0],i=s[1];Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie.getUserTeamMembers();case 2:n=t.sent,e&&i(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[]);return Object(r.jsx)(Le,{placeholder:"Select or search for a user",options:c.map((function(e){return{key:e.id,data:e}})),getTextFromItem:function(e){return e.data.username},onSelect:function(e){t&&t(e.data)},onRenderItem:function(){return null}})},Me=function(e){var t=e.defaultValue,n=Object(h.h)().id,s=Object(h.g)(),c=Object(a.useState)(t||null),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(a.useCallback)((function(e){return e?s.push("/appraisals/".concat(n,"/user/").concat(e.id)):u(e)}),[s,n]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(We,{value:o,onUserSelect:function(e){return d(e)},defaultValue:t})})};Me.defaultProps={defaultValue:null};var He=Me,Be=function(e){var t=e.code,n=e.grant,r=e.onReject,s=Object(De.a)(e,["code","grant","onReject"]),c=Object(a.useContext)(g),i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(a.useEffect)((function(){d(c.Authorize(t,n))}),[c,t,n]),u?s.children:r?r():null},Ge=n(16),Ve=n(41),qe=Object(I.a)((function(){return{chip:{borderRadius:"16px",textAlign:"center",verticalAlign:"middle"}}})),Ke=function(e){var t=e.style,n=e.children,a=e.className,s=qe();return Object(r.jsx)("div",{className:"".concat(a," ").concat(s.chip),style:t,children:n})};Ke.defaultProps={className:"",style:{}};var Ye=Ke,Qe=Ye,Je=n(377),Ze=Object(I.a)((function(e){return{calloutPrefix:{boxShadow:e.effects.elevation64}}})),Xe=function(e){var t=e.children,n=e.id,s=Ze(),c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(q.a,{id:"prefix-".concat(n),tabIndex:-1,iconProps:{iconName:"Info"},onClick:function(){return u((function(e){return!e}))}}),o?Object(r.jsx)(G.a,{className:s.calloutPrefix,target:"#prefix-".concat(n),setInitialFocus:!0,onDismiss:function(){return u(!1)},role:"alertdialog",children:Object(r.jsxs)(M.a,{horizontalAlign:"start",tokens:{childrenGap:4},style:{padding:"20px"},children:[t,Object(r.jsx)(A.a,{onClick:function(){return u(!1)},children:"Close"})]})}):null]})},_e=function(e){var t=e.menuProps;return Object(r.jsx)(q.a,{tabIndex:-1,iconProps:{iconName:"MoreVertical"},menuProps:t})},$e=function(e){var t=e.item,n=e.idx,s=e.changeHandler,c=e.blurHandler,i=e.removeHandler,o=e.changeTypeHandler,d=e.canInsert,p=e.canUpdate,j=e.canDelete,f=Object(Ce.useScreenClass)(),b=80;"sm"===f||"xl"===f?b=50:"xs"!==f&&"md"!==f||(b=25);var m=Object(a.useState)(Object(u.a)({},t)),O=Object(l.a)(m,2),x=O[0],g=O[1],v=Object(a.useState)(!1),w=Object(l.a)(v,2),S=w[0],C=w[1],T=Object(a.useState)(t.content.length>b),A=Object(l.a)(T,2),P=A[0],D=A[1],N=Object(h.h)().userId,R=Object(a.useState)({isRelated:!1,isDeletable:!1,isFinished:!1,inputEditable:!0}),I=Object(l.a)(R,2),E=I[0],F=I[1];Object(a.useEffect)((function(){var e=!0;function n(){return(n=Object(k.a)(y.a.mark((function n(){var r,a,s,c,i,o,u,f,b,m;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[Object(Ge.d)(Ge.e.itemRelated(t),!1),Object(Ge.d)(Ge.e.itemStatus(t,"Finished"),!1),Object(Ge.d)(Object(Ge.a)([Object(Ge.b)(Ge.e.itemRelated(t)),Object(Ge.c)([Object(Ge.b)(Ge.e.isTruthy(N)),Ge.e.isTruthy(N)])]),!1)],n.next=3,Promise.all(r);case 3:a=n.sent,s=Object(l.a)(a,3),c=s[0],i=s[1],o=s[2],u=c.result,f=i.result,b=(d||p)&&o.result,m=j&&!u,e&&F({isRelated:u,isDeletable:m,isFinished:f,inputEditable:b});case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return g(Object(u.a)({},t)),function(){n.apply(this,arguments)}(),function(){e=!1}}),[t,d,p,j,N]);var z=function(){var e=Object(k.a)(y.a.mark((function e(t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),r=S,C(!1),e.next=5,c(x,n,r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){if("Feedback"!==t.type){var r=e.target.value.length>b;P!==r&&D(r)}g(Object(u.a)(Object(u.a)({},t),{},{content:e.target.value})),s(Object(u.a)(Object(u.a)({},x),{},{content:e.target.value}),n,!S),C(!0)},W=function(e){return Object(k.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0===t.id){n.next=3;break}return n.next=3,o(t.id,e);case 3:case"end":return n.stop()}}),n)})))},H=function(){var e=Object(k.a)(y.a.mark((function e(r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.persist(),g(Object(u.a)(Object(u.a)({},t),{},{content:""})),e.next=4,i(x,n);case 4:C(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B={shouldFocusOnMount:!0,shouldFocusOnContainer:!0,items:[]};-1!==t.type.indexOf("Planned")&&B.items.push({key:"moveAchieved",text:"Move to Achieved",iconProps:{iconName:"ChevronLeftSmall"},onClick:W(t.type.replace("Planned","Achieved"))}),-1!==t.type.indexOf("Achieved")&&B.items.push({key:"movePlanned",text:"Move to Planned",iconProps:{iconName:"ChevronRightSmall"},onClick:W(t.type.replace("Achieved","Planned"))}),B.items.push({key:"delete",text:"Delete",iconProps:{iconName:"Delete"},disabled:!E.isDeletable,onClick:H});var G=Object(r.jsxs)(M.a,{horizontalAlign:"start",tokens:{childrenGap:"3"},children:[E.isRelated?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M.a.Item,{children:Object(r.jsx)(U.a,{variant:"medium",children:"This item was added automatically from previous appraisals"})}),Object(r.jsx)(M.a.Item,{align:"stretch",children:Object(r.jsx)(V.a,{})})]}):null,Object(r.jsxs)(U.a,{variant:"medium",children:[Object(r.jsx)("strong",{children:"Created user:"})," ",t.createdUser&&t.createdUser.username]}),Object(r.jsxs)(U.a,{variant:"medium",children:[Object(r.jsx)("strong",{children:"Created date:"})," ",t.createdDate&&new Date(t.createdDate).toLocaleString()]}),Object(r.jsx)(M.a.Item,{align:"stretch",children:Object(r.jsx)(V.a,{})}),t.modifiedUser?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(M.a.Item,{children:Object(r.jsxs)(U.a,{variant:"medium",children:[Object(r.jsx)("strong",{children:"Modified user:"})," ",t.modifiedUser&&t.modifiedUser.username]})})}):null,t.modifiedUser?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M.a.Item,{children:Object(r.jsxs)(U.a,{variant:"medium",children:[Object(r.jsx)("strong",{children:"Modified date:"})," ",t.modifiedDate&&new Date(t.modifiedDate).toLocaleString()]})}),Object(r.jsx)(M.a.Item,{align:"stretch",children:Object(r.jsx)(V.a,{})})]}):null]});return"Feedback"!==t.type?Object(r.jsx)(Je.a,{id:"app-item-".concat(t.type.toLowerCase(),"-").concat(n),value:x.content,resizable:!0,multiline:P,styles:{prefix:{backgroundColor:"transparent",padding:"0"},suffix:{backgroundColor:"transparent",padding:"0"},field:{padding:"0"}},onRenderPrefix:function(){return 0!==t.id?Object(r.jsx)(Xe,{id:"".concat(t.type,"-").concat(n),children:G}):null},onRenderSuffix:function(){return 0!==t.id?Object(r.jsx)(_e,{menuProps:B}):null},autoAdjustHeight:!0,autoComplete:"off",onChange:L,onBlur:z,readOnly:!E.inputEditable,iconProps:E.isRelated?{iconName:"History",style:{position:"relative",alignSelf:"center",bottom:0,right:0,paddingRight:0,marginLeft:"8px"}}:null}):Object(r.jsx)(Je.a,{id:"app-item-".concat(t.type.toLowerCase(),"-").concat(n),value:x.content,multiline:!0,autoAdjustHeight:!0,autoComplete:"off",onChange:L,onBlur:z,disabled:!E.inputEditable})},et=Object(I.a)((function(e){return{box:{padding:e.spacing.l2}}})),tt=function(e){var t=e.children,n=e.style,a=e.className,s=et();return Object(r.jsx)("div",{style:n,className:"".concat(s.box," ").concat(a),children:t})};tt.defaultProps={style:{},className:""};var nt=tt,rt=Object(I.a)((function(e){return{stack:{"& > * + *":{paddingTop:e.spacing.s1}}}})),at=function(e){var t=e.context,n=e.items,s=e.setItems,c=e.details,i=e.type,o=e.setOtherItems,d={Achieved:"Achieved",Planned:"Planned",Training_Planned:"Planned",Training_Achieved:"Achieved",SWOT_S:"Strengths",SWOT_W:"Weaknesses",SWOT_O:"Opportunities",SWOT_T:"Threats",Feedback:"Remarks / Other feedback"},p=c.id,j=rt(),f={Achieved:5,Planned:5,Training_Planned:3,Training_Achieved:3,SWOT_S:5,SWOT_W:5,SWOT_O:5,SWOT_T:5,Feedback:1}[i]||0,b=Object(a.useState)({canInsert:!1,canUpdate:!1,canDelete:!1}),m=Object(l.a)(b,2),O=m[0],x=m[1],g=Object(h.h)().userId,v=t.user;Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var n,r,a,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=6;break}return e.next=3,Ge.e.periodLocked(c,v.id)();case 3:e.t0=e.sent.result,e.next=7;break;case 6:e.t0=!1;case 7:return n=e.t0,e.next=10,Ge.e.periodStatus(c,"Finished")();case 10:if(e.sent.result&&(n=!1),n){e.next=23;break}return e.next=15,Object(Ge.d)(Ge.e.canInsert(t,c,g),!1);case 15:return r=e.sent.result,e.next=18,Object(Ge.d)(Ge.e.canUpdate(t,c,g),!1);case 18:return a=e.sent.result,e.next=21,Object(Ge.d)(Ge.e.canDelete(t,c,g),!1);case 21:s=e.sent.result,x((function(e){return Object(u.a)(Object(u.a)({},e),{},{canInsert:r,canUpdate:a,canDelete:s})}));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s(Pe.a.normalizeSet(p,t.user,n,f,i)),function(){e.apply(this,arguments)}()}),[]);var w=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return",Pe.a.addItemToSet(t,n));case 2:return e.abrupt("return",Pe.a.addUserItemToSet(t,g,n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[g]),S=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return",Pe.a.updateItemInSet(t,n));case 2:return e.abrupt("return",Pe.a.updateUserItemInSet(t,g,n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[g]),C=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return",Pe.a.deleteItemFromSet(t,n));case 2:return e.abrupt("return",Pe.a.deleteUserItemFromSet(t,g,n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[g]),T=Object(a.useCallback)((function(e,t,n){n&&s((function(n){var r=n.slice();return r[t].content=e.content,Pe.a.normalizeSet(p,v,r,f,i)}))}),[v,p,i,f,s]),A=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,r){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t||!o){e.next=8;break}if(!(a=n.find((function(e){return e.id===t})))){e.next=8;break}return a.type=r,e.next=6,S(p,a);case 6:(c=e.sent).error||(s((function(e){return Pe.a.normalizeSet(p,v,e.filter((function(e){return e.id!==c.value.id})),f,r)})),o((function(e){return Pe.a.normalizeSet(p,v,e.filter((function(e){return""!==e.content})).concat(c.value),f,r)})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,o,f,n,p,s,S]),P=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Number.isNaN(r)||!(r<n.length)){e.next=9;break}if(0===t.id){e.next=8;break}return e.next=5,C(p,n[r]);case 5:if(null===(a=e.sent).error){e.next=8;break}throw a.error;case 8:s((function(e){var n=e.filter((function(e){return e.id!==t.id}));return Pe.a.normalizeSet(p,v,n,f,i)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s((function(e){var n=e.slice();return n[r]=t,Pe.a.normalizeSet(p,v,n,f,i)}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[v,n,p,i,f,C,s]),D=Object(a.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(t,r,a){var c,o,u,l,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<n.length&&t.type===i)){e.next=22;break}if(c=0===t.id&&t.content,o=0!==t.id&&""===t.content,!c){e.next=10;break}return e.next=6,w(p,t);case 6:u=e.sent,s((function(e){var n=e.slice();return u.error?(n[r]=t,n[r].content=""):n[r]=u.value,Pe.a.normalizeSet(p,v,n,f,i)})),e.next=22;break;case 10:if(!o){e.next=17;break}return e.next=13,C(p,t);case 13:l=e.sent,s((function(e){var n=e.slice();return l.error?l.value&&(n[r]=l.value):n=n.filter((function(e){return e.id!==t.id})),Pe.a.normalizeSet(p,v,n,f,i)})),e.next=22;break;case 17:if(c||o||!a||""===t.content){e.next=22;break}return e.next=20,S(p,t);case 20:d=e.sent,s((function(e){var n;return d.error?(n=e.slice(),d.value&&(n[r]=d.value)):n=e.map((function(e){return e.id===t.id?d.value:e})),Pe.a.normalizeSet(p,v,n,f,i)}));case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[v,n,p,i,f,w,C,S,s]);return Object(r.jsx)(nt,{children:Object(r.jsxs)(M.a,{verticalAlign:"center",className:j.stack,children:[Object(r.jsx)(M.a.Item,{align:"center",children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:d[i]})}),n.map((function(e,t){var n=0===e.id?t:e.id;return Object(r.jsx)(M.a.Item,{className:j.listItem,children:Object(r.jsx)($e,{item:e,idx:t,label:d[i],changeHandler:T,blurHandler:D,removeHandler:P,changeTypeHandler:A,canInsert:O.canInsert,canUpdate:O.canUpdate,canDelete:O.canDelete})},n)}))]})})};at.defaultProps={setOtherItems:null};var st=at,ct=Object(I.a)((function(e){return{chipContent:{backgroundColor:e.palette.neutralQuaternary,padding:"7px",display:"inline-flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center"},lockedChip:{backgroundColor:e.palette.themePrimary,padding:"7px",display:"inline-flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center",color:"#fff"},lockIcon:{marginRight:e.spacing.s1},container:{"& > * + *":{marginTop:e.spacing.m}}}})),it=function(e){var t=e.context,n=e.periodDetails,s=ct(),c=Object(a.useState)(n.items.filter((function(e){return"Achieved"===e.type}))),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(a.useState)(n.items.filter((function(e){return"Planned"===e.type}))),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)(n.items.filter((function(e){return"Training_Planned"===e.type}))),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)(n.items.filter((function(e){return"Training_Achieved"===e.type}))),g=Object(l.a)(x,2),v=g[0],w=g[1],S=Object(a.useState)(n.items.filter((function(e){return"SWOT_S"===e.type}))),C=Object(l.a)(S,2),T=C[0],A=C[1],P=Object(a.useState)(n.items.filter((function(e){return"SWOT_W"===e.type}))),D=Object(l.a)(P,2),N=D[0],R=D[1],I=Object(a.useState)(n.items.filter((function(e){return"SWOT_O"===e.type}))),E=Object(l.a)(I,2),F=E[0],L=E[1],W=Object(a.useState)(n.items.filter((function(e){return"SWOT_T"===e.type}))),M=Object(l.a)(W,2),G=M[0],q=M[1],K=Object(a.useState)(n.items.filter((function(e){return"Feedback"===e.type}))),Y=Object(l.a)(K,2),Q=Y[0],J=Y[1],Z=Object(a.useState)(!1),X=Object(l.a)(Z,2),_=X[0],$=X[1],ee=t.user;return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ge.e.periodLocked(n,ee.id)();case 2:r=t.sent.result,e&&$(r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[n,ee.id]),Object(r.jsxs)(Ce.Container,{md:!0,className:s.container,children:[Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(Ve.a,{text:"Details '".concat(n.name?n.name:"","'")})})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(Ce.Col,{xs:12,md:6,lg:4,children:Object(r.jsx)(Be,{code:"APPRAISAL DETAILS - OTHER USERS",grant:"read",children:Object(r.jsx)(He,{})})})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)("div",{children:ee?Object(r.jsx)(Qe,{className:s.chipContent,children:Object(r.jsx)(H.a,{size:B.c.size24,text:ee.username})}):null})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)("div",{children:_?Object(r.jsxs)(Qe,{className:s.lockedChip,children:[Object(r.jsx)(z.a,{className:s.lockIcon,iconName:"LockSolid"}),Object(r.jsx)(U.a,{variant:"smallPlus",children:"Locked"})]}):null})}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"Objectives"})}),Object(r.jsxs)(Ce.Row,{children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:o,setItems:u,type:"Achieved",setOtherItems:f})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:j,setItems:f,type:"Planned",setOtherItems:u})})]}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"Trainings"})}),Object(r.jsxs)(Ce.Row,{children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:v,setItems:w,type:"Training_Achieved",setOtherItems:O})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:h,setItems:O,type:"Training_Planned",setOtherItems:w})})]}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"SWOT"})}),Object(r.jsxs)(Ce.Row,{nogutter:!0,children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:T,setItems:A,type:"SWOT_S"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:N,setItems:R,type:"SWOT_W"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:F,setItems:L,type:"SWOT_O"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:G,setItems:q,type:"SWOT_T"})})]}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(st,{context:t,details:n,items:Q,setItems:J,type:"Feedback"})})}),Object(r.jsx)("div",{style:{padding:"20px"}})]})},ot=function(e){var t=e.periodId,n=e.userId,r=e.setUserDetails,s=e.setPeriodDetails;return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.getUser(n);case 2:return a=e.sent,r(a),e.next=6,Pe.a.getUserItems(t,n);case 6:c=e.sent,s(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n,s,r]),null},ut=n(360),lt=Object(I.a)((function(e){return{chipContent:{backgroundColor:e.palette.neutralQuaternary,padding:"7px",display:"inline-flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center"},lockedChip:{backgroundColor:e.palette.themePrimary,padding:"7px",display:"inline-flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center",color:"#fff"},lockIcon:{marginRight:e.spacing.s1},container:{"& > * + *":{marginTop:e.spacing.m}}}})),dt=function(e){var t=e.context,n=e.periodDetails,s=e.userDetails,c=e.handleLockButton,i=lt(),o=Object(a.useState)(n.items.filter((function(e){return"Achieved"===e.type}))),u=Object(l.a)(o,2),d=u[0],p=u[1],j=Object(a.useState)(n.items.filter((function(e){return"Planned"===e.type}))),f=Object(l.a)(j,2),b=f[0],m=f[1],h=Object(a.useState)(n.items.filter((function(e){return"Training_Planned"===e.type}))),O=Object(l.a)(h,2),x=O[0],g=O[1],v=Object(a.useState)(n.items.filter((function(e){return"Training_Achieved"===e.type}))),w=Object(l.a)(v,2),S=w[0],C=w[1],T=Object(a.useState)(n.items.filter((function(e){return"SWOT_S"===e.type}))),A=Object(l.a)(T,2),P=A[0],D=A[1],N=Object(a.useState)(n.items.filter((function(e){return"SWOT_W"===e.type}))),R=Object(l.a)(N,2),I=R[0],E=R[1],F=Object(a.useState)(n.items.filter((function(e){return"SWOT_O"===e.type}))),L=Object(l.a)(F,2),W=L[0],M=L[1],G=Object(a.useState)(n.items.filter((function(e){return"SWOT_T"===e.type}))),q=Object(l.a)(G,2),K=q[0],Y=q[1],Q=Object(a.useState)(n.items.filter((function(e){return"Feedback"===e.type}))),J=Object(l.a)(Q,2),Z=J[0],X=J[1],_=Object(a.useState)(!1),$=Object(l.a)(_,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),re=Object(l.a)(ne,2),ae=re[0],se=re[1];return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ge.e.periodLocked(n,s.id)();case 2:return r=t.sent.result,t.next=5,Ge.e.periodStatus(n,"Finished")();case 5:a=t.sent.result,e&&(te(r),se(a));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[n,s.id]),Object(r.jsxs)(Ce.Container,{md:!0,className:i.container,children:[Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(Ve.a,{text:"Details '".concat(n.name?n.name:"","'")})})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(Ce.Col,{xs:12,md:6,lg:4,children:Object(r.jsx)(Be,{code:"APPRAISAL DETAILS - OTHER USERS",grant:"read",children:Object(r.jsx)(He,{})})})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)("div",{children:s?Object(r.jsx)(Qe,{className:i.chipContent,children:Object(r.jsx)(H.a,{size:B.c.size24,text:s.username})}):null})}),Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)("div",{children:ee?Object(r.jsxs)(Qe,{className:i.lockedChip,children:[Object(r.jsx)(z.a,{className:i.lockIcon,iconName:"LockSolid"}),Object(r.jsx)(U.a,{variant:"smallPlus",children:"Locked"})]}):null})}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"Objectives"})}),Object(r.jsxs)(Ce.Row,{children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:d,setItems:p,type:"Achieved",setOtherItems:m})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:b,setItems:m,type:"Planned",setOtherItems:p})})]}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"Trainings"})}),Object(r.jsxs)(Ce.Row,{children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:S,setItems:C,type:"Training_Achieved",setOtherItems:g})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:x,setItems:g,type:"Training_Planned",setOtherItems:C})})]}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"mediumPlus",children:"SWOT"})}),Object(r.jsxs)(Ce.Row,{nogutter:!0,children:[Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:P,setItems:D,type:"SWOT_S"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:I,setItems:E,type:"SWOT_W"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:W,setItems:M,type:"SWOT_O"})}),Object(r.jsx)(Ce.Col,{xs:12,md:6,children:Object(r.jsx)(st,{context:t,details:n,items:K,setItems:Y,type:"SWOT_T"})})]}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(st,{context:t,details:n,items:Z,setItems:X,type:"Feedback"})})}),Object(r.jsxs)(Be,{code:be.a.securities.APPRAISAL_DETAILS_OTHER.code,grant:be.a.securities.APPRAISAL_DETAILS_OTHER.grants.toggleLock,children:[ae?null:Object(r.jsx)(Ce.Row,{align:"center",justify:"center",children:Object(r.jsx)(ut.a,{primary:!0,iconProps:{iconName:ee?"Unlock":"Lock"},onClick:c,text:ee?"Unlock":"Lock"})}),Object(r.jsx)("div",{style:{padding:"20px"}})]})]})},pt=function(e){var t=e.context,n=Object(a.useState)(null),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(null),d=Object(l.a)(o,2),p=d[0],j=d[1],f=Object(h.h)().id,m=Object(h.h)().userId;Object(a.useEffect)((function(){i(null),j(null)}),[m]);var O,x=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=5;break}return e.next=3,Pe.a.toggleLockPeriod(c.id,m);case 3:t=e.sent,i((function(e){return e?Object(u.a)(Object(u.a)({},e),{},{users:t.users.slice()}):e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O=m?Object(r.jsx)(r.Fragment,{children:null===c||null===p?Object(r.jsx)(ot,{periodId:f,userId:m,setUserDetails:j,setPeriodDetails:i}):Object(r.jsx)(dt,{context:t,periodDetails:c,userDetails:p,handleLockButton:x})}):Object(r.jsx)(r.Fragment,{children:null===c?Object(r.jsx)(Re,{periodId:f,setPeriodDetails:i}):Object(r.jsx)(it,{context:t,periodDetails:c})}),Object(r.jsx)(b.a,{title:c?c.name:"App",children:O})},jt=function(){var e=Object(a.useContext)(g);return Object(r.jsx)(Ce.Container,{md:!0,children:Object(r.jsx)(Ne,{code:be.a.securities.APPRAISAL_DETAILS.code,grant:be.a.securities.APPRAISAL_DETAILS.grants.read,to:"/appraisals",failureNotification:{type:"info",header:"No access",content:"You have no access to this page. Please contact your administrator"},children:Object(r.jsx)(pt,{context:e})})})},ft=function(e){var t=e.isOpen,n=e.setOpen,s=e.handleCreate,c=Object(a.useState)(""),i=Object(l.a)(c,2),o=i[0],u=i[1];return Object(r.jsx)(pe.a,{isOpen:t,onDismiss:function(){return n(!1)},type:je.a.smallFixedFar,headerText:"Create period",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(o).finally((function(){u(""),n(!1)}))},children:Object(r.jsxs)(M.a,{verticalAlign:"start",children:[Object(r.jsx)(M.a.Item,{tokens:{margin:"10px 0"},children:Object(r.jsx)(Je.a,{label:"Name",value:o,autoFocus:!0,onChange:function(e){var t=e.target.value;u(t)}})}),Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"space-evenly",children:[Object(r.jsx)(ut.a,{type:"submit",children:"Create"}),Object(r.jsx)(A.a,{onClick:function(){return n(!1)},children:"Cancel"})]})]})})})},bt=function(e){var t=e.item,n=e.isOpen,s=e.setOpen,c=e.handleEdit,i=Object(a.useState)(t?t.name:""),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(a.useEffect)((function(){d(t?t.name:"")}),[t]),Object(r.jsx)(pe.a,{isOpen:n,onDismiss:function(){return s(!1)},type:je.a.smallFixedFar,headerText:"Edit period",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault(),c(t.id,u).finally((function(){d(""),s(!1)}))},children:Object(r.jsxs)(M.a,{verticalAlign:"start",children:[Object(r.jsx)(M.a.Item,{tokens:{margin:"10px 0"},children:Object(r.jsx)(Je.a,{label:"Name",value:u,autoFocus:!0,onChange:function(e){var t=e.target.value;d(t)}})}),Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"space-evenly",children:[Object(r.jsx)(ut.a,{type:"submit",children:"Update"}),Object(r.jsx)(A.a,{onClick:function(){return s(!1)},children:"Cancel"})]})]})})})};bt.defaultProps={item:null};var mt=bt,ht=n(31),Ot=be.a.securities,xt=Ot.APPRAISAL_PERIODS,gt=Ot.REPORTS,vt=function(){var e=Object(E.a)(),t=Object(h.g)(),n=Object(Ce.useScreenClass)(),s=Object(a.useState)([]),c=Object(l.a)(s,2),i=c[0],o=c[1],d=Object(a.useState)([]),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)(!0),m=Object(l.a)(b,2),O=m[0],x=m[1],v=Object(a.useState)(!1),w=Object(l.a)(v,2),S=w[0],T=w[1],A=Object(a.useState)(!1),P=Object(l.a)(A,2),D=P[0],N=P[1],R=Object(a.useState)(""),I=Object(l.a)(R,2),F=I[0],z=I[1],L=Object(a.useContext)(g),W=Object(h.i)().path,H=Object(a.useState)({count:0,items:[]}),B=Object(l.a)(H,2),G=B[0],q=B[1],K=Object(a.useState)([{key:"status",name:"Status",fieldName:"status",minWidth:70,maxWidth:70,isSortable:!0,isFilterable:!0,sort:function(e,t){return e.status>t.status?-1:1},onRender:function(t){return Object(r.jsx)(Qe,{style:{backgroundColor:"Finished"===t.status?e.palette.blue:e.palette.green,padding:"3px"},children:Object(r.jsx)(U.a,{variant:"xSmall",style:{color:"#fff"},children:t.status})})}},{key:"name",name:"Name",fieldName:"name",data:"string",isResizable:!0,isSortable:!0,isFilterable:!0,minWidth:100,maxWidth:350},{key:"createdUser",name:"Created by",fieldName:"createdUser",isPadded:!0,isResizable:!0,isSortable:!0,isFilterable:!0,filterValueAccessor:function(e){return e.createdUser.username},sort:function(e,t){return e.createdUser.username<t.createdUser.username?-1:1},data:"string",minWidth:200,maxWidth:300,onRender:function(e){return Object(r.jsx)("div",{children:e.createdUser.username})}},{key:"createdDate",name:"Created on",fieldName:"createdDate",isResizable:!0,isPadded:!0,isSortable:!0,data:"date",minWidth:200,maxWidth:300,onRender:function(e){return Object(r.jsx)("div",{children:new Date(e.createdDate).toLocaleString()})}}]),Y=Object(l.a)(K,1)[0],Q=Object(a.useState)(null),J=Object(l.a)(Q,2),Z=J[0],X=J[1];Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.getPeriods();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){X(Object(u.a)(Object(u.a)({},Y[3]),{},{isSorted:!0,isSortedDescending:!0}))}),[Y]),Object(a.useEffect)((function(){f(O?i:i.filter((function(e){return"Finished"!==e.status})))}),[O,i]);var _=function(e){t.push("".concat(W,"/").concat(e.id))},$=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G.count){e.next=6;break}return t=G.items[0],e.next=4,Pe.a.finishPeriod(t.id);case 4:e.sent&&(o((function(e){return e.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},t),{},{status:"Finished"}):e}))})),C.a.notifySuccess("Period '".concat(t.name,"' finished")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(L.user&&L.user.id&&L.user.organization&&L.user.organization.id)){e.next=6;break}return e.next=3,Pe.a.addPeriod({name:t,status:"Active",organizationId:L.user.organization.id,createdUser:L.user.id});case 3:n=e.sent,o((function(e){return e.slice().concat(n)})),C.a.notifySuccess("Period '".concat(t,"' created"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(L.user&&L.user.id&&L.user.organization&&L.user.organization.id&&L.Authorize(xt.code,xt.grants.update))){e.next=5;break}return e.next=3,Pe.a.updatePeriod(t,{name:n});case 3:r=e.sent,o((function(e){return e.map((function(e){return e.id===r.id?r:e}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht.a.generateAppraisalReport({periods:[t]});case 3:(n=e.sent)&&(Object(Te.downloadBlob)("appraisal.xlsx",n),C.a.notifySuccess("Report generated")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),C.a.notifyError("Cannot generate report -",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(h.d,{children:[Object(r.jsx)(h.b,{exact:!0,path:W,children:Object(r.jsxs)(Ce.Container,{md:!0,children:[Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(Ve.a,{text:"Appraisals"})})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsxs)(M.a,{horizontalAlign:"stretch",children:[Object(r.jsxs)(Ce.Row,{align:"start",children:[Object(r.jsx)(Ce.Col,{xs:12,sm:6,children:Object(r.jsx)(ye.a,{items:[{key:"openItem",text:"Open",disabled:0===G.count||!L.Authorize(xt.code,xt.grants.read),iconProps:{iconName:"OpenFile"},onClick:function(){return _(G.count&&G.items[0])}},{key:"newItem",text:"New",disabled:!L.Authorize(xt.code,xt.grants.create),iconProps:{iconName:"Add"},onClick:function(){return T(!0)}},{key:"editItem",text:"Edit",disabled:0===G.count||!L.Authorize(xt.code,xt.grants.update),iconProps:{iconName:"Edit"},onClick:function(){return N(!0)}},{key:"finishItem",text:"Finish",disabled:0===G.count||G.count&&"Finished"===G.items[0].status||!L.Authorize(xt.code,xt.grants.finish),iconProps:{iconName:"SaveAndClose"},onClick:$},{key:"generateReport",text:"Appraisal report",disabled:0===G.count||!L.Authorize(gt.code,gt.grants.read),iconProps:{iconName:"MobileReport"},onClick:function(){return ne(G.count?G.items[0].id:null)}}]})}),Object(r.jsx)(Ce.Col,{xs:12,sm:6,children:Object(r.jsx)(M.a,{horizontalAlign:"xs"===n?"start":"end",horizontal:!0,children:Object(r.jsxs)(M.a,{verticalAlign:"center",horizontalAlign:"start",children:[Object(r.jsx)(ke.a,{placeholder:"Search",styles:{root:{minWidth:250}},value:F,onChange:function(e){return z(e&&e.target?e.target.value:"")}}),Object(r.jsx)(we.a,{label:"Show closed",checked:O,onChange:function(){return x((function(e){return!e}))},styles:{root:{paddingTop:e.spacing.s1}}})]})})})]}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ae.a,{items:j,columns:Y,selectionMode:Se.b.single,onItemInvoked:_,searchValue:F,sortedCol:Z,setSelectionDetails:q}),Object(r.jsx)(ft,{isOpen:S,setOpen:T,handleCreate:ee}),Object(r.jsx)(mt,{item:G.count?G.items[0]:null,isOpen:D,setOpen:N,handleEdit:te})]})})})]})}),Object(r.jsx)(h.b,{exact:!0,path:"".concat(W,"/:id/user/:userId"),children:Object(r.jsx)(jt,{ctx:L,setCtx:L.setContext})}),Object(r.jsx)(h.b,{path:"".concat(W,"/:id"),children:Object(r.jsx)(jt,{ctx:L,setCtx:L.setContext})})]})})},yt=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("h1",{children:"Settings general"})})},kt=n(29),wt={baseUrl:"/api/teams",validate:function(e){if(!e)throw new Error("Team name missing");return!0},getTeams:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get(e.baseUrl);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),C.a.notifyError(t.t0.response.data&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},addTeam:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.validate(e),n.next=4,S.a.post(t.baseUrl,{team:e});case 4:if(200!==(r=n.sent).status){n.next=7;break}return n.abrupt("return",r.data);case 7:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 10:throw n.prev=10,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}},St=n(67),Ct=n(391),Tt=function(e){var t,n=e.isOpen,s=e.user,c=e.setOpen,i=e.handleEdit,o=e.teams,d=e.organizations,p=e.roles,j=Object(a.useState)([]),f=Object(l.a)(j,2),b=f[0],m=f[1],h=Object(a.useState)(null),O=Object(l.a)(h,2),x=O[0],g=O[1],v=Object(a.useState)([]),y=Object(l.a)(v,2),k=y[0],w=y[1],S=Object(a.useState)(null),C=Object(l.a)(S,2),T=C[0],P=C[1],D=function(e){return function(t,n){n.selected?function(e,t){t((function(t){return t.concat(e)}))}(n.data,e):function(e,t){t((function(t){return t.filter((function(t){return t.id!==e.id}))}))}(n.data,e)}};return Object(a.useEffect)((function(){s&&(m(s.teams),g(s.team),w(s.organizations),s.role&&P(s.role))}),[s]),Object(a.useEffect)((function(){(null===x||void 0===x?void 0:x.id)&&!b.find((function(e){return e.id===(null===x||void 0===x?void 0:x.id)}))&&g(null)}),[b]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(pe.a,{isOpen:n,onDismiss:function(){return c(!1)},type:je.a.smallFixedFar,headerText:"Edit user",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault(),i(Object(u.a)(Object(u.a)({},s),{},{teams:b,team:x,organizations:k,role:T})).finally((function(){c(!1)}))},children:Object(r.jsxs)(M.a,{verticalAlign:"start",children:[Object(r.jsxs)(M.a.Item,{tokens:{margin:"10px 0"},children:[Object(r.jsx)(Ct.a,{label:"Teams",multiSelect:!0,id:"user-edit-select-team",useComboBoxAsMenuWidth:!0,selectedKey:b.map((function(e){return e.id})),onChange:D(m),options:o.map((function(e){return{key:e.id,text:e.name,data:e}}))}),Object(r.jsx)(Ct.a,{label:"Primary team",id:"user-edit-select-primary-team",useComboBoxAsMenuWidth:!0,selectedKey:null===x||void 0===x?void 0:x.id,onChange:function(e,t){return g(t.data)},options:b.map((function(e){return{key:e.id,text:e.name,data:e}}))}),Object(r.jsx)(Ct.a,{label:"Organizations",multiSelect:!0,id:"user-edit-select-organizations",useComboBoxAsMenuWidth:!0,selectedKey:k.map((function(e){return e.id})),onChange:D(w),options:d.map((function(e){return{key:e.id,text:e.name,data:e}}))}),Object(r.jsx)(Ct.a,{label:"Role",id:"user-edit-select-role",useComboBoxAsMenuWidth:!0,selectedKey:T&&T.id,onChange:(t=P,function(e,n){t(n.data)}),options:p.map((function(e){return{key:e.id,text:e.name,data:e}}))})]}),Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"space-evenly",children:[Object(r.jsx)(ut.a,{type:"submit",children:"Update"}),Object(r.jsx)(A.a,{onClick:function(){return c(!1)},children:"Cancel"})]})]})})})})};Tt.defaultProps={user:null,teams:[],organizations:[],roles:[]};var At=Tt,Pt=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),o=i[0],d=i[1],p=Object(a.useState)([]),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)(!1),h=Object(l.a)(m,2),O=h[0],x=h[1],v=Object(a.useContext)(g),w=Object(a.useState)({count:0,items:[],indices:[]}),S=Object(l.a)(w,2),C=S[0],A=S[1],P=Object(a.useState)([{key:"username",name:" Username",fieldName:"username",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"UserOptional",minWidth:100,maxWidth:300},{key:"teams",name:" Teams",fieldName:"teams",onRender:function(e){return e.teams.map((function(e){return e.name})).join(", ")},isSortable:!0,isFilterable:!0,isResizable:!0,sort:function(e,t){return e.teams[0].name>t.teams[0].name?-1:1},filterValueAccessor:function(e){return e.teams.map((function(e){return e.name})).join(",")},iconName:"Teamwork",minWidth:100,maxWidth:500},{key:"organizations",name:" Organizations",fieldName:"organizations",onRender:function(e){return e.organizations.map((function(e){return e.name})).join(", ")},isSortable:!0,isFilterable:!0,isResizable:!0,sort:function(e,t){var n,r;return(null===(n=e.organizations[0])||void 0===n?void 0:n.name)>(null===(r=t.organizations[0])||void 0===r?void 0:r.name)?-1:1},filterValueAccessor:function(e){return e.organizations.map((function(e){return e.name})).join(",")},iconName:"Org",minWidth:50,maxWidth:200},{key:"role",name:" Role",onRender:function(e){var t;return e.role&&(null===(t=e.role)||void 0===t?void 0:t.name)},isSortable:!0,isFilterable:!0,isResizable:!0,sort:function(e,t){var n,r;return(null===(n=e.role)||void 0===n?void 0:n.name)>(null===(r=t.role)||void 0===r?void 0:r.name)?-1:1},filterValueAccessor:function(e){var t;return e.role&&(null===(t=e.role)||void 0===t?void 0:t.name)},iconName:"Signin",isPadded:!0}]),D=Object(l.a)(P,1)[0],N=Object(a.useState)({key:"role",name:" Role",onRender:function(e){var t;return e.role&&(null===(t=e.role)||void 0===t?void 0:t.name)},isSortable:!0,isFilterable:!0,isResizable:!0,sort:function(e,t){var n,r;return(null===(n=e.role)||void 0===n?void 0:n.name)>(null===(r=t.role)||void 0===r?void 0:r.name)?-1:1},filterValueAccessor:function(e){var t;return e.role&&(null===(t=e.role)||void 0===t?void 0:t.name)},iconName:"Signin",isPadded:!0,isSorted:!0,isSortedDescending:!1}),R=Object(l.a)(N,1)[0],I=function(){var e=Object(k.a)(y.a.mark((function e(t){var r,a,c,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.findIndex((function(e){return e.id===t.id})),a=n.slice(),-1===r){e.next=10;break}return i=t.organization||null,!t.organization&&t.organizations.length?i=t.organizations[0].id:0===t.organizations.length&&(i=null),e.next=7,Ie.updateSettingsUser(t.id,Object(u.a)(Object(u.a)({},t),{},{teams:t.teams.map((function(e){return e.id})),team:(null===(c=t.team)||void 0===c?void 0:c.id)||null,organizations:t.organizations.map((function(e){return e.id})),organization:i}));case 7:(o=e.sent)&&(a[r]=o),s(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t,n,r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ie.getSettingsUsers(),wt.getTeams(),T.getRoles()]);case 2:t=e.sent,n=Object(l.a)(t,3),r=n[0],a=n[1],c=n[2],s((function(){return r})),d((function(){return a})),b((function(){return c}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.jsxs)(Ce.Container,{fluid:!0,children:[Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(Ve.a,{text:"Users Settings"})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{align:"start",children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(St.a,{commandItems:[{key:"details",text:"Details",disabled:!0,iconProps:{iconName:"ProfileSearch"}},{key:"editItem",text:"Edit",disabled:0===C.count,iconProps:{iconName:"Edit"},onClick:function(){return x(!0)}}],tableProps:{items:n,columns:D,selectionMode:Se.b.single,onItemInvoked:function(){return x(!0)},layoutMode:kt.e.justified,sortedCol:R,setSelectionDetails:A}})})}),Object(r.jsx)(At,{isOpen:O,handleEdit:I,setOpen:x,user:C.count?C.items[0]:null,teams:o,organizations:v.user.organizations,roles:f})]})},Dt=function(){return Object(r.jsx)("h1",{children:"AppraisalPeriods Settings"})},Nt=function(){return Object(r.jsx)("h1",{children:"AppraisalItems Settings"})},Rt=n(374),It=n(363),Et=n(22),Ft=function(e){var t=e.setLoaded,n=e.setPermissionCodes,r=e.setRoles,s=e.setUsers,c=e.setRolePermissions,i=e.setUserPermissions;return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var a,o,l,d,p,j,f;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getPermissionCodes();case 2:return a=e.sent,n(a.sort((function(e,t){return e.code<t.code?-1:1}))),e.next=6,T.getRoles();case 6:return o=e.sent,r(o.sort((function(e,t){return e.name<t.name?-1:1}))),e.next=10,Ie.getSettingsUsers();case 10:return l=e.sent,s(l.sort((function(e,t){return e.username<t.username?-1:1}))),e.next=14,T.getRolesSecurities();case 14:return d=e.sent,p={},d.forEach((function(e){p[e.reference.name]=Object(u.a)(Object(u.a)({},p[e.reference.name]),{},Object(Et.a)({},e.code.code,e))})),c(p),e.next=20,T.getOrganizationUsersSecurities();case 20:j=e.sent,f={},j.forEach((function(e){f[e.reference.username]=Object(u.a)(Object(u.a)({},f[e.reference.username]),{},Object(Et.a)({},e.code.code,e))})),i(f),t(!0);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,r,s,c,i]),null},Ut=n(62),zt=n(87),Lt=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:e.spacing.m}},autocomplete:{marginTop:e.spacing.l2},secondaryText:{color:e.palette.neutralTertiary},searchBox:{alignSelf:"center",marginLeft:e.spacing.m,minWidth:200}}})),Wt=function(e){var t=e.codes,n=e.roles,s=e.rolePermissions,c=e.setRolePermissions,i=e.selectedRole,o=e.setSelectedRole,d=Lt(),p=Object(a.useState)([]),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)(""),h=Object(l.a)(m,2),O=h[0],x=h[1],g=function(e,t,n){b(n?function(e){return[].concat(Object(Ut.a)(e),[t.code])}:function(e){return e.filter((function(e){return e!==t.code}))})},v=function(e){e&&e.target&&x(e.target.value)},w=function(e,t,n){c((function(r){return Object(u.a)(Object(u.a)({},r),{},Object(Et.a)({},e.name,Object(u.a)(Object(u.a)({},r[e.name]),{},Object(Et.a)({},t.code,n))))}))},S=function(){var e=Object(k.a)(y.a.mark((function e(t,n,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.addPermission({grants:[r],code:n.id,permissionType:"Role",reference:t.id});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.updatePermission(t.id,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.deletePermission(t.id);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e,t,n){return function(){var r=Object(k.a)(y.a.mark((function r(a){var c,i,o,l,d;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.persist(),s[e.name]&&s[e.name][t.code]){r.next=8;break}return r.next=4,S(e,t,n);case 4:(c=r.sent)&&w(e,t,c),r.next=28;break;case 8:if(!a.target.checked){r.next=16;break}return i=[].concat(Object(Ut.a)(s[e.name][t.code].grants),[n]),r.next=12,C(Object(u.a)(Object(u.a)({},s[e.name][t.code]),{},{grants:i}));case 12:(o=r.sent)&&w(e,t,o),r.next=28;break;case 16:if(a.target.checked){r.next=28;break}if(0!==(l=s[e.name][t.code].grants.filter((function(e){return e!==n}))).length){r.next=24;break}return r.next=21,A(s[e.name][t.code]);case 21:w(e,t,null),r.next=28;break;case 24:return r.next=26,C(Object(u.a)(Object(u.a)({},s[e.name][t.code]),{},{grants:l}));case 26:(d=r.sent)&&w(e,t,d);case 28:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},D=function(e,t,n){var r=s[e.name]&&s[e.name][t.code];return!!r&&-1!==r.grants.indexOf(n)};return Object(r.jsxs)(Ce.Container,{fluid:!0,className:d.root,children:[Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(Ce.Col,{xs:12,md:4,children:Object(r.jsx)(Le,{className:d.autocomplete,options:n.map((function(e){return{key:e.id,data:e}})),getTextFromItem:function(e){return e.data.name},selected:{key:i.id,data:i},onSelect:function(e){return o(e.data)}})})}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(ye.a,{items:[{key:"expandAll",text:"".concat(f.length===t.length?"Collapse":"Expand"," All"),iconProps:{iconName:"".concat(f.length===t.length?"ChevronFold10":"ChevronUnfold10")},onClick:function(){f.length===t.length?b([]):b(t.map((function(e){return e.code})))},buttonStyles:{root:{minWidth:"120px"}}},{key:"search",onRender:function(){return Object(r.jsx)(ke.a,{className:d.searchBox,value:O,onChange:v,onClear:function(){return x("")}})}}],styles:{root:{paddingLeft:0}}})})}),Object(r.jsx)(Ce.Row,{children:function(){if(i){var e=t.filter((function(e){return-1!==e.code.toLowerCase().indexOf(O.toLowerCase())}));return Object(r.jsx)(zt.a,{items:e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{text:e.code,isOpen:-1!==f.indexOf(e.code)})})),getKey:function(e){return e.id},headerProps:{onRenderHeaderText:function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{variant:"mediumPlus",block:!0,children:e.code}),Object(r.jsx)(U.a,{variant:"medium",className:d.secondaryText,children:e.description})]})}},onRenderItem:function(e){return Object(r.jsx)(M.a,{verticalAlign:"start",tokens:{childrenGap:3},children:e.grants.map((function(t){return Object(r.jsx)(we.a,{label:t,checked:D(i,e,t),onChange:P(i,e,t)},"".concat(e.id,"-").concat(t))}))})},onToggle:g})}return null}()})]})},Mt=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:e.spacing.m}},autocomplete:{marginTop:e.spacing.l2},secondaryText:{color:e.palette.neutralTertiary},searchBox:{alignSelf:"center",marginLeft:e.spacing.m,minWidth:200}}})),Ht=function(e){var t=e.codes,n=e.users,s=e.userPermissions,c=e.setUserPermissions,i=e.selectedUser,o=e.setSelectedUser,d=Mt(),p=Object(a.useState)([]),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)(""),h=Object(l.a)(m,2),O=h[0],x=h[1],g=function(e,t,n){b(n?function(e){return[].concat(Object(Ut.a)(e),[t.code])}:function(e){return e.filter((function(e){return e!==t.code}))})},v=function(e){e&&e.target&&x(e.target.value)},w=function(e,t,n){c((function(r){return Object(u.a)(Object(u.a)({},r),{},Object(Et.a)({},e.username,Object(u.a)(Object(u.a)({},r[e.username]),{},Object(Et.a)({},t.code,n))))}))},S=function(){var e=Object(k.a)(y.a.mark((function e(t,n,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.addPermission({grants:[r],code:n.id,permissionType:"User",reference:t.id});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.updatePermission(t.id,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.deletePermission(t.id);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e,t,n){return function(){var r=Object(k.a)(y.a.mark((function r(a){var c,i,o,l,d;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.persist(),s[e.username]&&s[e.username][t.code]){r.next=8;break}return r.next=4,S(e,t,n);case 4:(c=r.sent)&&w(e,t,c),r.next=28;break;case 8:if(!a.target.checked){r.next=16;break}return i=[].concat(Object(Ut.a)(s[e.username][t.code].grants),[n]),r.next=12,C(Object(u.a)(Object(u.a)({},s[e.username][t.code]),{},{grants:i}));case 12:(o=r.sent)&&w(e,t,o),r.next=28;break;case 16:if(a.target.checked){r.next=28;break}if(0!==(l=s[e.username][t.code].grants.filter((function(e){return e!==n}))).length){r.next=24;break}return r.next=21,A(s[e.username][t.code]);case 21:w(e,t,null),r.next=28;break;case 24:return r.next=26,C(Object(u.a)(Object(u.a)({},s[e.username][t.code]),{},{grants:l}));case 26:(d=r.sent)&&w(e,t,d);case 28:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},D=function(e,t,n){var r=s[e.username]&&s[e.username][t.code];return!!r&&-1!==r.grants.indexOf(n)};return Object(r.jsxs)(Ce.Container,{fluid:!0,className:d.root,children:[Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(Ce.Col,{xs:12,md:4,children:Object(r.jsx)(Le,{className:d.autocomplete,options:n.map((function(e){return{key:e.id,data:e}})),getTextFromItem:function(e){return e.data.username},selected:{key:i.id,data:i},onSelect:function(e){return o(e.data)}})})}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(ye.a,{items:[{key:"expandAll",text:"".concat(f.length===t.length?"Collapse":"Expand"," All"),iconProps:{iconName:"".concat(f.length===t.length?"ChevronFold10":"ChevronUnfold10")},onClick:function(){f.length===t.length?b([]):b(t.map((function(e){return e.code})))},buttonStyles:{root:{minWidth:"120px"}}},{key:"search",onRender:function(){return Object(r.jsx)(ke.a,{className:d.searchBox,value:O,onChange:v,onClear:function(){return x("")}})}}],styles:{root:{paddingLeft:0}}})})}),Object(r.jsx)(Ce.Row,{children:function(){if(i){var e=t.filter((function(e){return-1!==e.code.toLowerCase().indexOf(O.toLowerCase())}));return Object(r.jsx)(zt.a,{items:e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{text:e.code,isOpen:-1!==f.indexOf(e.code)})})),getKey:function(e){return e.id},headerProps:{onRenderHeaderText:function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(U.a,{variant:"mediumPlus",block:!0,children:e.code}),Object(r.jsx)(U.a,{variant:"medium",className:d.secondaryText,children:e.description})]})}},onRenderItem:function(e){return Object(r.jsxs)(M.a,{verticalAlign:"start",tokens:{childrenGap:3},children:[Object(r.jsx)(we.a,{label:"overrule",checked:D(i,e,"overrule"),onChange:P(i,e,"overrule")}),e.grants.map((function(t){return Object(r.jsx)(we.a,{label:t,checked:D(i,e,t),onChange:P(i,e,t)})}))]})},onToggle:g})}return null}()})]})},Bt=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(a.useState)([]),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)({}),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)({}),g=Object(l.a)(x,2),v=g[0],y=g[1],k=Object(a.useState)(null),w=Object(l.a)(k,2),S=w[0],C=w[1],T=Object(a.useState)(null),A=Object(l.a)(T,2),P=A[0],D=A[1],N=Object(a.useState)(!1),R=Object(l.a)(N,2),I=R[0],E=R[1];return Object(a.useEffect)((function(){C((function(e){return null===e&&o.length>0?o[0]:e}))}),[o]),Object(a.useEffect)((function(){D((function(e){return null===e&&j.length>0?j[0]:e}))}),[j]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ft,{setLoaded:E,setPermissionCodes:s,setRoles:u,setUsers:f,setRolePermissions:O,setUserPermissions:y}),Object(r.jsxs)(Ce.Container,{lg:!0,children:[Object(r.jsx)(Ve.a,{text:"Permissions"}),I?Object(r.jsxs)(Rt.a,{"aria-label":"User and Roles permissions",styles:{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center"}},children:[Object(r.jsx)(It.a,{headerText:"Roles",itemIcon:"SecurityGroup",children:Object(r.jsx)(Wt,{codes:n,roles:o,rolePermissions:h,setRolePermissions:O,selectedRole:S,setSelectedRole:C})}),Object(r.jsx)(It.a,{headerText:"Users",itemIcon:"Contact",children:Object(r.jsx)(Ht,{codes:n,users:j,userPermissions:v,setUserPermissions:y,selectedUser:P,setSelectedUser:D})})]}):null]})]})},Gt=function(){return Object(r.jsx)(Bt,{})},Vt=function(){var e=Object(h.i)().path;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Ce.Container,{lg:!0,fluid:!0,children:Object(r.jsxs)(h.d,{children:[Object(r.jsx)(h.b,{exact:!0,path:e,children:Object(r.jsx)(Ne,{code:"SETTINGS",grant:"general",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(yt,{})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/users"),children:Object(r.jsx)(Ne,{code:"SETTINGS",grant:"users",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Users",children:Object(r.jsx)(Pt,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/appraisal-periods"),children:Object(r.jsx)(Ne,{code:"SETTINGS",grant:"appraisal-periods",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Settings - appraisal periods",children:Object(r.jsx)(Dt,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/appraisal-items"),children:Object(r.jsx)(Ne,{code:"SETTINGS",grant:"appraisal-items",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Settings - appraisal items",children:Object(r.jsx)(Nt,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/permissions"),children:Object(r.jsx)(Ne,{code:"SETTINGS",grant:"permissions",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Settings - Securities",children:Object(r.jsx)(Gt,{})})})})]})})})},qt=n(38),Kt=n.n(qt),Yt=function(e){var t=e.setReports;return Object(a.useEffect)((function(){var e=!0;function n(){return(n=Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ht.a.getReports();case 2:r=n.sent,e&&t(r);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e=!1}}),[t]),null};Yt.propTypes={setReports:Kt.a.func.isRequired};var Qt=Yt,Jt=n(86),Zt=n(385),Xt=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:"16px"}},topMargin:{marginTop:"8px"},box:{border:"1px solid ".concat(e.palette.themeSecondary),"&:not(:first-of-type)":{borderTop:"none"}},invisibleInput:{background:"none",outline:"none",border:"none",height:0}}})),_t=function(e){var t=e.isOpen,n=e.setOpen,s=e.addReport,c=Xt(),i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(a.useState)(""),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)(""),O=Object(l.a)(m,2),x=O[0],g=O[1],v=Object(a.useState)(""),w=Object(l.a)(v,2),S=w[0],T=w[1],P=Object(a.useState)([]),D=Object(l.a)(P,2),N=D[0],R=D[1],I=Object(a.useState)([]),E=Object(l.a)(I,2),F=E[0],U=E[1],z=Object(a.useState)([]),L=Object(l.a)(z,2),W=L[0],H=L[1],B=Object(h.g)(),G=function(e){return function(t){e(t.target.value)}},q=function(e){return function(t){t.persist(),H((function(n){var r=n.slice();return r[e].name=t.target.value,r}))}},K=function(e){return function(t){t.persist(),H((function(n){var r=n.slice();return r[e].defaultValue=t.target.value,r}))}},Y=function(){var e=Object(k.a)(y.a.mark((function e(t){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),t.preventDefault(),(r=new FormData).append("name",u),r.append("description",f),r.append("template",x),r.append("parameters",JSON.stringify(W)),e.next=9,ht.a.addReport(r);case 9:(a=e.sent)&&(B.push("/reporting/reports"),C.a.notifySuccess("Report successfully created"),n(!1),s(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht.a.getTemplates();case 2:n=t.sent,e&&R(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[]),Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===x){t.next=7;break}return t.next=3,ht.a.getTempalteParameters(x);case 3:(n=t.sent).length&&e&&U(n),t.next=8;break;case 7:U([]);case 8:H([]),T("");case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[x]);return Object(r.jsx)(pe.a,{isOpen:t,onDismiss:function(){return n(!1)},headerText:"Create Report",type:je.a.large,onRenderFooterContent:function(){return Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:[Object(r.jsx)(ut.a,{form:"new-report-form",type:"submit",children:"Create"}),Object(r.jsx)(A.a,{onClick:function(){return n(!1)},children:"Close"})]})},children:Object(r.jsx)("form",{onSubmit:Y,id:"new-report-form",children:Object(r.jsxs)(Ce.Container,{fluid:!0,className:c.root,children:[Object(r.jsx)(V.a,{children:"General"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsxs)(Ce.Col,{xs:12,sm:8,md:6,children:[Object(r.jsx)(Je.a,{label:"Name",value:u,onChange:G(d),required:!0}),Object(r.jsx)(Je.a,{label:"Description",value:f,onChange:G(b),multiline:!0}),Object(r.jsx)(Zt.a,{children:"Select template"}),Object(r.jsx)(Le,{options:N.map((function(e){return{key:e.id,data:e}})),getTextFromItem:function(e){return e.data.name},onSelect:function(e){g(e.data.id)},onRenderItem:function(){var e;return Object(r.jsx)(Je.a,{value:x?null===(e=N.find((function(e){return e.id===x})))||void 0===e?void 0:e.name:null,underlined:!0,readOnly:!0})},maxHeight:"400px"}),Object(r.jsx)("input",{value:x,className:c.invisibleInput,required:!0})]})}),Object(r.jsx)(V.a,{children:"Parameters"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsxs)(Ce.Col,{xs:12,sm:8,md:6,children:[Object(r.jsx)(Zt.a,{children:"Select parameter"}),Object(r.jsx)(Le,{options:F.map((function(e){return e.paths.map((function(t){return{key:"".concat(e.name).concat(t),data:"".concat(e.name).concat(t)}}))})).flat(),getTextFromItem:function(e){return e.data},onSelect:function(e){return function(e){T(e.data)}(e)},onRenderItem:function(){return Object(r.jsx)(Je.a,{value:S,underlined:!0,readOnly:!0})},maxHeight:"400px"}),Object(r.jsx)(A.a,{className:c.topMargin,onClick:function(){""!==S&&(T(""),H((function(e){return-1===W.map((function(e){return e.name})).indexOf(S)?e.concat({name:S,defaultValue:"",path:S}):e})))},children:"Add Parameter"})]})}),Object(r.jsx)(V.a,{children:"Selected Paramaters"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsx)(Ce.Col,{xs:12,sm:8,md:6,children:W.map((function(e,t){return Object(r.jsxs)(nt,{className:c.box,children:[Object(r.jsx)(Je.a,{label:"Name",value:e.name,onChange:q(t)}),Object(r.jsx)(Je.a,{label:"Default value",value:e.defaultValue,onChange:K(t)}),Object(r.jsx)(Je.a,{label:"Path",value:e.path,readOnly:!0})]})}))})})]})})})},$t=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:"16px"}},box:{border:"1px solid ".concat(e.palette.themeSecondary),"&:not(:first-of-type)":{borderTop:"none"}}}})),en=function(e){var t=e.id,n=e.isOpen,s=e.setOpen,c=$t(),i=Object(a.useState)(null),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(a.useState)([]),j=Object(l.a)(p,2),f=j[0],b=j[1];Object(a.useEffect)((function(){var e=!0;function r(){return(r=Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!n){r.next=5;break}return r.next=3,ht.a.getReport(t);case 3:a=r.sent,e&&(d(a),b(a.parameters.map((function(e){return{name:e.name,value:e.defaultValue,path:e.path}}))));case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!1}}),[t,n]);return n&&u?Object(r.jsx)(pe.a,{isOpen:n,onDismiss:function(){return s(!1)},headerText:"Create Report",type:je.a.large,onRenderFooterContent:function(){return Object(r.jsx)(M.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:Object(r.jsx)(A.a,{onClick:function(){return s(!1)},children:"Close"})})},isLightDismiss:!0,children:Object(r.jsxs)(Ce.Container,{fluid:!0,className:c.root,children:[Object(r.jsx)(V.a,{children:"General"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsxs)(Ce.Col,{xs:12,sm:8,md:6,children:[Object(r.jsx)(Je.a,{label:"Name: ",value:u.name,underlined:!0,readOnly:!0}),Object(r.jsx)(Je.a,{label:"Description: ",value:u.description,multiline:!0,underlined:!0,readOnly:!0,resizable:!1}),Object(r.jsx)(Je.a,{label:"Template: ",value:u.template.name,underlined:!0,readOnly:!0})]})}),Object(r.jsx)(V.a,{children:"Parameters"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsx)(Ce.Col,{xs:12,sm:8,md:6,children:f.map((function(e){return Object(r.jsxs)(nt,{className:c.box,children:[Object(r.jsx)(Je.a,{label:"Name: ",value:e.name,underlined:!0,readOnly:!0}),Object(r.jsx)(Je.a,{label:"Path: ",value:e.path,underlined:!0,readOnly:!0}),Object(r.jsx)(Je.a,{label:"Default value: ",value:e.value,underlined:!0,readOnly:!0})]})}))})}),Object(r.jsx)(V.a,{children:"Aggregation"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsx)(Ce.Col,{xs:12,sm:8,md:6,children:Object(r.jsx)(Je.a,{value:JSON.stringify(JSON.parse(u.template.aggregation),null,4),multiline:!0,underlined:!0,readOnly:!0,autoAdjustHeight:!0,resizable:!1})})})]})}):null},tn=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:"16px"}},box:{border:"1px solid ".concat(e.palette.themeSecondary),"&:not(:first-of-type)":{borderTop:"none"}}}})),nn=function(e){var t=e.id,n=e.isOpen,s=e.setOpen,c=e.setReport,i=tn(),o=Object(a.useState)(null),d=Object(l.a)(o,2),p=d[0],j=d[1],f=Object(a.useState)([]),b=Object(l.a)(f,2),m=b[0],h=b[1],O=Object(a.useState)([]),x=Object(l.a)(O,2),g=x[0],v=x[1],w=Object(a.useState)({}),S=Object(l.a)(w,2),T=S[0],P=S[1],D=Object(a.useState)({name:"",path:"",defaultValue:""}),N=Object(l.a)(D,2),R=N[0],I=N[1],E=function(e,t){return function(n){var r=n.target.value;h((function(n){return n.map((function(n){return n&&n.path===t.path?Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,r)):n}))}))}},F=function(e){return function(t){var n=t.target.value;I((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(Et.a)({},e,n))}))}},U=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.a.updateReport(p.id,{description:p.description,parameters:m});case 2:(t=e.sent)&&(c(t),s(!1),j(null),h([]),I({}),C.a.notifySuccess("Report saved"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=!0;function r(){return(r=Object(k.a)(y.a.mark((function r(){var a,s,c;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!n){r.next=10;break}return r.next=3,ht.a.getReport(t);case 3:if(s=r.sent,c=[],!(null===s||void 0===s||null===(a=s.template)||void 0===a?void 0:a.id)){r.next=9;break}return r.next=8,ht.a.getTempalteParameters(s.template.id);case 8:c=r.sent;case 9:e&&(j(s),h(s.parameters),v(c));case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!1}}),[t,n]);var z;return n&&p?Object(r.jsx)(pe.a,{isOpen:n,onDismiss:function(){return s(!1)},headerText:"Create Report",type:je.a.large,onRenderFooterContent:function(){return Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:[Object(r.jsx)(ut.a,{onClick:U,children:"Save"}),Object(r.jsx)(A.a,{onClick:function(){return s(!1)},children:"Close"})]})},children:Object(r.jsxs)(Ce.Container,{fluid:!0,className:i.root,children:[Object(r.jsx)(V.a,{children:"General"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsxs)(Ce.Col,{xs:12,sm:8,md:6,children:[Object(r.jsx)(Je.a,{label:"Name: ",value:p.name,underlined:!0,disabled:!0}),Object(r.jsx)(Je.a,{label:"Description: ",value:p.description,multiline:!0,underlined:!0,resizable:!1,onChange:(z="description",function(e){var t=e.target.value;j((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(Et.a)({},z,t))}))})}),Object(r.jsx)(Je.a,{label:"Template: ",value:p.template.name,underlined:!0,disabled:!0})]})}),Object(r.jsx)(V.a,{children:"Parameters"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsxs)(Ce.Col,{xs:12,sm:8,md:6,children:[m.map((function(e){return Object(r.jsxs)(nt,{className:i.box,children:[Object(r.jsx)(Je.a,{label:"Name: ",value:e.name,underlined:!0,onChange:E("name",e)}),Object(r.jsx)(Je.a,{label:"Path: ",value:e.path,underlined:!0,disabled:!0}),Object(r.jsx)(Je.a,{label:"Default value: ",value:e.defaultValue,underlined:!0,onChange:E("defaultValue",e)}),Object(r.jsx)(q.a,{onClick:(t=e,function(){h((function(e){return e.filter((function(e){return e.path!==t.path}))}))}),iconProps:{iconName:"Delete"},text:"Delete"})]});var t})),Object(r.jsxs)(nt,{className:i.box,children:[Object(r.jsx)(Le,{options:g.map((function(e){return e.paths.map((function(t){return{key:"".concat(e.name).concat(t),data:"".concat(e.name).concat(t)}}))})).flat(),getTextFromItem:function(e){return e.data},onSelect:function(e){return I((function(t){return Object(u.a)(Object(u.a)({},t),{},{path:e.data})}))},onRenderItem:function(){return null},maxHeight:"400px"}),Object(r.jsx)(Je.a,{label:"Name: ",value:R.name||"",underlined:!0,onChange:F("name"),required:!0,errorMessage:T.newParamName||""}),Object(r.jsx)(Je.a,{label:"Path: ",value:R.path||"",underlined:!0,required:!0,errorMessage:T.newParamPath||""}),Object(r.jsx)(Je.a,{label:"Default value: ",value:R.defaultValue||"",underlined:!0,onChange:F("defaultValue")}),Object(r.jsx)(q.a,{onClick:function(){var e=!1;""===R.name?(e=!0,P((function(e){return Object(u.a)(Object(u.a)({},e),{},{newParamName:"Name is required"})}))):P((function(e){return Object(u.a)(Object(u.a)({},e),{},{newParamName:""})})),""===R.path?(e=!0,P((function(e){return Object(u.a)(Object(u.a)({},e),{},{newParamPath:"Path is required"})}))):P((function(e){return Object(u.a)(Object(u.a)({},e),{},{newParamPath:""})})),e||h((function(e){return e.find((function(e){return e.path===R.path}))?(P((function(){return Object(u.a)(Object(u.a)({},e),{},{newParamPath:"This parameter is already added."})})),e):e.concat(R)}))},iconProps:{iconName:"Add"},text:"Add"})]})]})}),Object(r.jsx)(V.a,{children:"Aggregation"}),Object(r.jsx)(Ce.Row,{justify:"start",children:Object(r.jsx)(Ce.Col,{xs:12,sm:8,md:6,children:Object(r.jsx)(Je.a,{value:JSON.stringify(JSON.parse(p.template.aggregation),null,4),multiline:!0,underlined:!0,disabled:!0,autoAdjustHeight:!0,resizable:!1})})})]})}):null};nn.defaultProps={id:null};var rn=nn,an=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(a.useState)(!1),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)([]),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)({count:0,items:[]}),g=Object(l.a)(x,2),v=g[0],y=g[1],k=Object(a.useState)([{key:"name",name:" Name",fieldName:"name",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"FileTemplate",minWidth:100,maxWidth:300},{key:"description",name:" Description",fieldName:"description",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"FileBug",minWidth:200,maxWidth:300},{key:"createdby",name:" Created by",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"Contact",minWidth:100,maxWidth:300,sort:function(e,t){return e.createdUser.username<t.createdUser.username?-1:1},onRender:function(e){return e.createdUser.username}},{key:"createdon",name:" Created on",fieldName:"createdDate",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"DateTime",minWidth:200,maxWidth:300,onRender:function(e){return new Date(e.createdDate).toLocaleString()}}]),w=Object(l.a)(k,1)[0],S=Object(a.useState)({key:"name",name:" Name",fieldName:"name",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"FileTemplate",minWidth:100,maxWidth:300,isSorted:!0,isSortedDescending:!1}),C=Object(l.a)(S,1)[0];return Object(r.jsxs)(Ce.Container,{fluid:!0,children:[Object(r.jsx)(Qt,{setReports:O}),Object(r.jsx)(Jt.a,{text:"Reports"}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(St.a,{commandItems:[{key:"createItem",text:"Create",iconProps:{iconName:"BoxAdditionSolid"},onClick:function(){return s(!0)}},{key:"details",text:"Details",disabled:0===v.count,iconProps:{iconName:"ProfileSearch"},onClick:function(){return u(!0)}},{key:"editItem",text:"Edit",disabled:0===v.count,iconProps:{iconName:"Edit"},onClick:function(){return f(!0)}}],tableProps:{items:h,columns:w,setSelectionDetails:y,selectionMode:Se.b.single,onItemInvoked:function(){return u(!0)},layoutMode:kt.e.justified,sortedCol:C}})})}),Object(r.jsx)(_t,{isOpen:n,setOpen:s,addReport:function(e){return O((function(t){return t.concat(e)}))}}),Object(r.jsx)(en,{id:v.count>0?v.items[0].id:null,isOpen:o,setOpen:u}),Object(r.jsx)(rn,{id:v.count>0?v.items[0].id:null,isOpen:j,setOpen:f,setReport:function(e){return O((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))}})]})},sn=function(){var e=Object(h.i)().path;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(h.d,{children:[Object(r.jsx)(h.b,{exact:!0,path:e,children:Object(r.jsx)(an,{})}),Object(r.jsx)(h.b,{exact:!0,path:"".concat(e,"/new"),children:Object(r.jsx)("h1",{children:"Report"})}),Object(r.jsx)(h.b,{exact:!0,path:"".concat(e,"/:id"),children:Object(r.jsx)("h1",{children:"Report"})})]})})},cn=n(270).default,on=function(){var e=Object(h.i)().path;return Object(r.jsx)(h.d,{children:Object(r.jsx)(h.b,{exact:!0,path:e,children:Object(r.jsx)(cn,{})})})},un=n(378),ln=n(383),dn=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:e.spacing.m}}}})),pn=function(){var e=dn(),t=Object(a.useState)([]),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(null),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(a.useState)(null),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)([]),h=Object(l.a)(m,2),O=h[0],x=h[1],g=function(e){return function(t){e(new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())))}},v=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u&&f&&f<u)){e.next=2;break}return e.abrupt("return",C.a.notifySevereWarning("'Date to' should be bigger than 'Date from'"));case 2:if(!(u||f||O.length)){e.next=9;break}return e.next=5,ht.a.generateAppraisalReport({dateFrom:u,dateTo:f,periods:O});case 5:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",Object(Te.downloadBlob)("appraisal.xlsx",t));case 8:return e.abrupt("return",null);case 9:return e.abrupt("return",C.a.notifySevereWarning("At least one field should be set"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe.a.getPeriods();case 2:(n=t.sent)&&e&&c(n.map((function(e){return{key:e.id,text:e.name,data:e}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[]),Object(r.jsxs)(Ce.Container,{fluid:!0,className:e.root,children:[Object(r.jsx)(Ve.a,{text:"Appraisal Report"}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{align:"center",justify:"center",children:Object(r.jsx)(Ce.Col,{md:8,sm:12,children:Object(r.jsx)(un.a,{placeholder:"Select periods",label:"Select one or multiple periods",multiSelect:!0,options:s,onChange:function(e,t){t&&(t.selected?x((function(e){return e.concat(t.key)})):x((function(e){return e.filter((function(e){return e!==t.key}))})))},selectedKeys:O})})}),Object(r.jsxs)(Ce.Row,{align:"center",justify:"center",children:[Object(r.jsx)(Ce.Col,{md:4,sm:12,children:Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(ln.a,{placeholder:"Select date from...","aria-label":"Select date from",value:u,label:"Date from",onSelectDate:g(d)})})}),Object(r.jsx)(Ce.Col,{md:4,sm:12,children:Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(ln.a,{placeholder:"Select date to...","aria-label":"Select date to",value:f,label:"Date to",onSelectDate:g(b)})})})]}),Object(r.jsx)(Ce.Row,{align:"center",justify:"center",children:Object(r.jsx)(Ce.Col,{md:4,sm:12,children:Object(r.jsx)(Ce.Row,{justify:"center",children:Object(r.jsx)(ut.a,{text:"Generate",type:"submit",onClick:v})})})})]})},jn=function(){var e=Object(h.i)().path;return Object(r.jsx)(Ce.Container,{lg:!0,children:Object(r.jsxs)(h.d,{children:[Object(r.jsx)(h.b,{path:"".concat(e,"/reports"),children:Object(r.jsx)(Ne,{code:"REPORTS",grant:"read",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(sn,{})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/templates"),children:Object(r.jsx)(Ne,{code:"REPORT-TEMPLATES",grant:"read",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Reporting Templates",children:Object(r.jsx)(on,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/appraisal-report"),children:Object(r.jsx)(Ne,{code:"REPORTS",grant:"read",to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Appraisal Report",children:Object(r.jsx)(pn,{})})})})]})})},fn=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useContext)(g);return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.userLoaded){e.next=2;break}return e.abrupt("return");case 2:null===c.user&&s(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(r.jsx)(r.Fragment,{children:n?Object(r.jsx)(h.a,{to:"/login"}):null})},bn=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{style:{textAlign:"center"},children:"Login"}),Object(r.jsx)("a",{href:"/auth/login",children:"Login"})]})},mn=n(109),hn=n(27),On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=Object(a.useState)(n),i=Object(l.a)(c,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){function r(){return(r=Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u(n),r.next=3,S.a.get(e,t);case 3:200===(a=r.sent).status&&u(s?s(a.data):a.data);case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}e&&function(){r.apply(this,arguments)}()}),[e].concat(Object(Ut.a)(r))),[o,u]},xn={baseUrl:"/api/tasks",taskPath:function(e){return"/api/tasks/".concat(e)},taskStatusPath:function(e){return"/api/tasks/".concat(e,"/status")},tasksCheckConflictsPath:"/api/tasks/check-busy",getTasks:function(){var e=arguments,t=this;return Object(k.a)(y.a.mark((function n(){var r,a;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{},n.prev=1,n.next=4,S.a.get(t.baseUrl,{params:r});case 4:if(200!==(a=n.sent).status){n.next=7;break}return n.abrupt("return",a.data);case 7:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 10:throw n.prev=10,n.t0=n.catch(1),C.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getBusyTasks:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r,a;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.user,n.prev=1,n.next=4,S.a.get(t.tasksCheckConflictsPath,{params:{user:r}});case 4:if(200!==(a=n.sent).status){n.next=7;break}return n.abrupt("return",a.data);case 7:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 10:throw n.prev=10,n.t0=n.catch(1),C.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getTask:function(){return Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=7;break;case 3:throw e.prev=3,e.t0=e.catch(0),C.a.notifyError(e.t0.response&&e.t0.response.data.error||e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,null,[[0,3]])})))()},createTask:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post(t.baseUrl,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.data," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateTask:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.taskPath(e),t);case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateTaskStatus:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.taskStatusPath(e),t);case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deleteTask:function(){return Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=7;break;case 3:throw e.prev=3,e.t0=e.catch(0),C.a.notifyError(e.t0.response&&e.t0.response.data.error||e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,null,[[0,3]])})))()},createTaskObject:function(e){var t=Object(u.a)({},e),n=hn.DateTime.fromISO(e.expectedStartDate).toUTC(),r=hn.DateTime.fromISO(e.expectedFinishDate).toUTC();return t.expectedStartDate=hn.DateTime.fromObject({year:n.year,month:n.month,day:n.day,hour:n.hour,minute:n.minute,second:0,zone:e.zone}).toISO(),t.expectedFinishDate=hn.DateTime.fromObject({year:r.year,month:r.month,day:r.day,hour:r.hour,minute:r.minute,second:0,zone:e.zone}).toISO(),t}},gn={getHoursFromText:function(e){var t=e.split(":").map((function(e){return+e})),n=Object(l.a)(t,3),r=n[0],a=n[1],s=n[2];return{h:r,m:a,s:null!==s&&void 0!==s?s:0}},combineDateHours:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.h,t.m,t.s)},makeUTC:function(e){return Number.isNaN(+new Date(e))||null===e?null:new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},getWeekFromDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=this.makeUTCDateOnly(e),a=r.getDay();0===a&&1===t&&(a=7),r.setDate(r.getDate()-a+t);for(var s=0;s<7;s+=1){var c=new Date(r);c.setDate(c.getDate()+s),n.push(c)}return n},makeUTCDateOnly:function(e){return Number.isNaN(+new Date(e))||null===e?null:new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0))},getNearestTime:function(e){return"".concat("0".concat(e.getHours()).slice(-2),":").concat("0".concat(10*Math.round(e.getMinutes()/10)).slice(-2))}},vn=Object(a.createContext)({isPanel:!1,isOpen:null,setOpen:null,onRenderFooter:null,setOnRenderFooter:null}),yn=function(e){var t,n,s,c,i,o,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},j=Object(a.useState)(!1),f=Object(l.a)(j,2),b=f[0],m=f[1],h=Object(a.useState)((function(){return d.onRenderFooterContent})),O=Object(l.a)(h,2),x=O[0],g=O[1],v=Object(a.useRef)(null),y=Object(a.useState)({isPanel:!0,isOpen:b,setOpen:m,onRenderFooter:x,setOnRenderFooter:g}),k=Object(l.a)(y,1),w=k[0],S=Object(r.jsx)(vn.Provider,{value:w,children:Object(r.jsx)(pe.a,{id:null!==(t=d.id)&&void 0!==t?t:"use-panel",componentRef:v,isOpen:b,onDismiss:null!==(n=(null===d||void 0===d?void 0:d.onDismiss)&&d.onDismiss(b,m))&&void 0!==n?n:function(){return m(!1)},type:null!==(s=d.type)&&void 0!==s?s:je.a.smallFixedFar,headerText:null!==(c=d.headerText)&&void 0!==c?c:"Panel",isLightDismiss:null!==(i=d.isLightDismiss)&&void 0!==i&&i,onRenderFooterContent:x,isFooterAtBottom:null!==(o=d.isFooterAtBottom)&&void 0!==o&&o,children:b?Object(r.jsx)(e,Object(u.a)({isOpen:b,setOpen:m},p)):null})});return{isOpen:b,setOpen:m,render:S,componentRef:v}},kn=n(379),wn=n(18),Sn=Object(I.a)((function(e){return{root:{"& .ms-BasePicker-text":{display:"flex",flexFlow:"row nowrap",borderColor:e.palette.neutralPrimaryAlt},"& .ms-BasePicker-text:hover":{borderColor:e.palette.neutralPrimary},"& span[id*='selected-items']":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"elipsis"},"& input":{backgroundColor:e.palette.white,color:e.palette.neutralPrimary},"& input::placeholder":{color:e.palette.neutralPrimaryAlt}},label:{padding:"5px 0",fontWeight:600},hidden:{height:0,width:0,outline:"none",border:"none",background:"none"}}})),Cn=function(e){var t,n=e.options,s=e.selected,c=e.onItemSelected,i=e.label,o=e.required,u=Object(a.useState)(400),d=Object(l.a)(u,2),p=d[0],j=d[1],f=Object(a.useRef)(null),b=Sn();Object(a.useEffect)((function(){var e,t;(null===f||void 0===f||null===(e=f.current)||void 0===e||null===(t=e.root)||void 0===t?void 0:t.current)&&j(f.current.root.current.clientWidth)}),[f]);var m=function(e,t){t&&t.preventDefault(),-1===s.indexOf(e)?(c((function(t){return t.concat(e)})),f.current&&f.current.input.current.clear()):c((function(t){return t.filter((function(t){return t!==e}))}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U.a,{variant:"medium",block:!0,className:b.label,children:i}),Object(r.jsx)(Ee.a,{className:b.root,componentRef:f,onEmptyResolveSuggestions:function(){return n},onRenderItem:function(e){return s.length>1?0===e.index?"".concat(s.length," selected"):"":e.item.text},selectedItems:s,onChange:function(e){-1===e.indexOf(void 0)&&c((function(){return e}))},inputProps:{placeholder:(null===s||void 0===s?void 0:s.length)?"":"Search..."},getTextFromItem:function(e){return e.text},onItemSelected:function(e){m(e)},onResolveSuggestions:function(e){return n.filter((function(t){return-1!==t.text.indexOf(e)}))},onRenderSuggestionsItem:function(e){return Object(r.jsx)("div",{style:{padding:"5px 10px"},children:Object(r.jsx)(we.a,{checked:void 0!==s.find((function(t){return t.text===e.text})),onRenderLabel:function(){return e.text}})})},pickerSuggestionsProps:{onSuggestionClick:function(e,t){m(t,e)}},pickerCalloutProps:{target:(null===f||void 0===f||null===(t=f.current)||void 0===t?void 0:t.root)||document.body,calloutWidth:p}}),Object(r.jsx)("input",{type:"text",className:b.hidden,required:o,value:s.length?"filled":""})]})};Cn.defaultProps={required:!1};var Tn=Cn,An=function(e){var t=e.setOpen,n=e.setTasks,s=Object(a.useState)(be.a.timeOptions),c=Object(l.a)(s,1)[0],i=On(Ie.teamUsersPath),o=Object(l.a)(i,1)[0],d=Object(a.useState)([]),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)({title:"",description:"",remarks:"",expectedStartDate:new Date,expectedStartTime:"00:00",duration:60,isBackgroundTask:!1,selectedUsers:[]}),m=Object(l.a)(b,2),h=m[0],O=m[1];Object(a.useEffect)((function(){f(o.map((function(e){return{key:e.id,text:e.username,data:e}})))}),[o]);var x=function(e){return function(t){O((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,t.target.value))}))}},g=function(){var e=Object(k.a)(y.a.mark((function e(r){var a,s,c,i,o,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.persist(),r.preventDefault(),a=hn.DateTime.fromJSDate(h.expectedStartDate),s=h.expectedStartTime.split(":"),c=Object(l.a)(s,2),i=c[0],o=c[1],u=hn.DateTime.utc(a.year,a.month,a.day,+i,+o,0,0),e.next=7,xn.createTask({title:h.title,description:h.description,remarks:h.remarks,expectedStartDate:u.toJSDate(),expectedFinishDate:u.plus({minute:h.duration}).toJSDate(),assignedTo:h.selectedUsers.map((function(e){return e.data.id})),isBackgroundTask:h.isBackgroundTask,zone:hn.DateTime.local().zoneName});case 7:(d=e.sent)&&n((function(e){return e.length?e.concat(xn.createTaskObject(d)):e})),t&&t(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{id:"create-task-form",onSubmit:g,children:[Object(r.jsx)(Je.a,{required:!0,label:"Title",value:h.title,onChange:x("title")}),Object(r.jsx)(Je.a,{label:"Description",value:h.description,onChange:x("description")}),Object(r.jsx)(Je.a,{label:"Remarks",value:h.remarks,multiline:!0,onChange:x("remarks")}),Object(r.jsx)(ln.a,{label:"Start date",value:h.expectedStartDate,onSelectDate:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{expectedStartDate:e})}))}}),Object(r.jsx)(Ct.a,{label:"Start time",options:c,selectedKey:h.expectedStartTime,autoComplete:"on",onChange:function(e,t){return O((function(e){return Object(u.a)(Object(u.a)({},e),{},{expectedStartTime:t.text})}))},calloutProps:{calloutMaxHeight:400},useComboBoxAsMenuWidth:!0}),Object(r.jsx)(kn.a,{label:"Duration (min)",value:h.duration,onChange:function(e){var t=+e.target.value;Number.isNaN(t)&&(t=0),O((function(e){return Object(u.a)(Object(u.a)({},e),{},{duration:t})}))},onIncrement:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{duration:+e+10})}))},onDecrement:function(e){e>10&&O((function(t){return Object(u.a)(Object(u.a)({},t),{},{duration:+e-10})}))},min:0,step:10,incrementButtonAriaLabel:"Increase value by 10",decrementButtonAriaLabel:"Decrease value by 10",labelPosition:wn.a.top}),Object(r.jsx)(Tn,{label:"Assigned to",options:j,selected:h.selectedUsers,onItemSelected:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{selectedUsers:e(t.selectedUsers)})}))},required:!0})]})})};An.defaultProps={setOpen:null};var Pn=An,Dn=function(e){var t=e.currentDate,n=e.setCurrentDate;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(M.a,{horizontal:!0,verticalAlign:"center",horizontalAlign:"center",children:[Object(r.jsx)(q.a,{onClick:function(){return n((function(e){var t=hn.DateTime.fromJSDate(e);return hn.DateTime.fromObject({year:t.year,month:t.month,day:t.day,hour:0,minute:0,second:0,millisecond:0,zone:"utc"}).minus({day:1}).toJSDate()}))},iconProps:{iconName:"Previous"}}),Object(r.jsx)(ln.a,{value:t,onSelectDate:function(e){var t=hn.DateTime.fromJSDate(e),r=hn.DateTime.fromObject({year:t.year,month:t.month,day:t.day,hour:0,minute:0,second:0,millisecond:0,zone:"utc"}).toJSDate();return n(r)},firstDayOfWeek:1}),Object(r.jsx)(q.a,{onClick:function(){return n((function(e){var t=hn.DateTime.fromJSDate(e);return hn.DateTime.fromObject({year:t.year,month:t.month,day:t.day,hour:0,minute:0,second:0,millisecond:0,zone:"utc"}).plus({day:1}).toJSDate()}))},iconProps:{iconName:"Next"}})]})})},Nn=n(71),Rn=n(119),In=n(183),En=n(380),Fn=n(127),Un=Object(I.a)((function(){return{root:{display:"inline-block"},container:{textAlign:"center"}}})),zn=function(e){var t=e.task,n=Un();return Object(r.jsx)("div",{className:n.container,children:Object(r.jsx)(En.a,{className:n.root,personaSize:B.c.size24,maxDisplayablePersonas:1,overflowButtonType:Fn.a.descriptive,overflowButtonProps:{ariaDescription:"More users"},personas:t.assignedTo.map((function(e){return{personaName:e.username}}))})})},Ln=Object(I.a)((function(){return{root:{"& table":{margin:"auto",borderCollapse:"unset"}},statusText:{textAlign:"center"}}})),Wn=function(e){var t=e.task,n=e.collapsed,a=e.setCollapsed,s=e.handleStatusChange,c=Ln(),i=function(e){return Object(k.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(t,e.status);case 2:a(!0);case 3:case"end":return n.stop()}}),n)})))};return Object(r.jsx)("div",{className:c.root,children:Object(r.jsxs)(Rn.Collapse,{isOpened:!n,children:[Object(r.jsx)(V.a,{}),Object(r.jsx)(zn,{task:t}),Object(r.jsx)(V.a,{children:Object(r.jsx)(U.a,{variant:"smallPlus",children:"Status"})}),Object(r.jsx)(In.a,{columnCount:2,onRenderItem:function(e){return Object(r.jsx)(A.a,{onClick:i(e),disabled:e.disabled,style:{width:115,margin:3,fontSize:8,height:18},children:Object(r.jsx)(U.a,{variant:"small",children:e.text})})},items:[{key:"inprogress",text:"In progress",status:"InProgress",disabled:"InProgress"===t.status},{key:"paused",text:"Paused",status:"Paused",disabled:"InProgress"!==t.status},{key:"finished",text:"Finished",status:"Finished",disabled:"Finished"===t.status},{key:"cancelled",text:"Cancelled",status:"Cancelled",disabled:"Cancelled"===t.status}]})]})})},Mn=Object(I.a)((function(e){return{root:{minHeight:"75px",position:"relative","& .task-new":{minHeight:"inherit",border:"1px solid #87D7A1",borderLeft:"10px solid #87D7A1","& .task-new-status":{backgroundColor:"#87D7A1"}},"& .task-inprogress":{minHeight:"inherit",border:"1px solid #F4C884",borderLeft:"10px solid #F4C884","& .task-inprogress-status":{backgroundColor:"#F4C884"}},"& .task-finished":{minHeight:"inherit",border:"1px solid #C4C4C4",borderLeft:"10px solid #C4C4C4","& .task-finished-status":{backgroundColor:"#C4C4C4"}},"& .task-cancelled":{minHeight:"inherit",border:"1px solid #FF6B59",borderLeft:"10px solid #FF6B59","& .task-cancelled-status":{backgroundColor:"#FF6B59"}},"& .task-paused":{minHeight:"inherit",border:"1px solid ".concat(e.palette.neutralLight),borderLeft:"10px solid ".concat(e.palette.neutralLight),"& .task-paused-status":{backgroundColor:e.palette.neutralLight}}},status:{alignSelf:"center",display:"inline",minWidth:"80px",position:"absolute",textAlign:"center",color:e.palette.neutralLighterAlt,padding:"2px 0"},collapse:{width:"100%",textAlign:"center",cursor:"pointer",outline:"none",marginBottom:e.spacing.s2},chevron:{height:"100%"},chevronIcon:{color:"".concat(e.palette.black," !important")},rows:{display:"flex",flexFlow:"column nowrap",flexGrow:"1",alignItems:"center",justifyContent:"center",minHeight:"inherit",maxWidth:"75%"},taskDescription:{display:"flex",flexFlow:"column nowrap",justifyContent:"space-between",width:"100%",margin:"25px 0"},nowrap:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},prewrap:{whiteSpace:"pre-wrap"},title:{paddingLeft:e.spacing.s1},description:{color:e.palette.neutralSecondaryAlt,paddingLeft:e.spacing.s1},time:{paddingRight:e.spacing.s1,lineHeight:"10px"},column:{display:"flex",flexFlow:"column nowrap"}}})),Hn=function(e){var t=e.task,n=e.setTasks,s=e.handleStatusChange,c=Mn(),i=Object(a.useState)({from:"00:00",to:"00:00"}),o=Object(l.a)(i,2),u=o[0],d=o[1],p=Object(a.useState)(!0),j=Object(l.a)(p,2),f=j[0],b=j[1];return Object(a.useEffect)((function(){if(t){var e=new Date(t.expectedStartDate),n=new Date(t.expectedFinishDate),r=["0".concat(e.getHours()).slice(-2),"0".concat(e.getMinutes()).slice(-2),"0".concat(n.getHours()).slice(-2),"0".concat(n.getMinutes()).slice(-2)],a=r[0],s=r[1],c=r[2],i=r[3];d((function(){return{from:"".concat(a,":").concat(s),to:"".concat(c,":").concat(i)}}))}}),[t]),Object(r.jsx)("div",{className:c.root,children:Object(r.jsxs)("div",{className:Object(Nn.a)("task-".concat(t.status.toLowerCase()),c.column),children:[Object(r.jsx)("span",{className:Object(Nn.a)(["task-".concat(t.status.toLowerCase(),"-status"),c.status]),children:t.status}),Object(r.jsxs)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",minHeight:"inherit",alignItems:"center"},children:[Object(r.jsx)("div",{className:c.rows,children:Object(r.jsxs)("div",{className:c.taskDescription,children:[Object(r.jsx)(U.a,{variant:"medium",className:Object(Nn.a)([c.title,f&&c.nowrap]),children:t.title}),Object(r.jsx)(U.a,{variant:"smallPlus",className:Object(Nn.a)([c.description,f?c.nowrap:c.prewrap]),children:t.description})]})}),Object(r.jsxs)("div",{className:c.time,children:[Object(r.jsx)(U.a,{variant:"smallPlus",children:u.from}),Object(r.jsx)(V.a,{styles:{root:{padding:0}}}),Object(r.jsx)(U.a,{variant:"smallPlus",children:u.to})]})]}),Object(r.jsx)(Wn,{task:t,setTasks:n,collapsed:f,setCollapsed:b,handleStatusChange:s}),Object(r.jsx)("div",{tabIndex:"-1",role:"button",onKeyDown:function(e){return"Enter"===e.key&&b((function(e){return!e}))},className:Object(Nn.a)(c.collapse),onClick:function(){return b((function(e){return!e}))},children:Object(r.jsx)(q.a,{className:c.chevron,iconProps:{iconName:f?"ChevronDown":"ChevronUp",className:c.chevronIcon}})})]})})},Bn=Object(I.a)((function(e){return{root:{display:"flex",flexFlow:"column nowrap",alignContent:"center",width:"300px",minWidth:"300px",minHeight:"400px",maxHeight:"600px",padding:"5px",overflow:"auto",backgroundColor:e.semanticColors.bodyBackground,border:"2px solid ".concat(e.palette.neutralLight),"& > * + *":{marginTop:"2px"},marginTop:e.spacing.l1}}})),Gn=function(e){var t=e.tasks,n=e.setTasks,a=e.handleStatusChange,s=e.user,c=Bn();return Object(r.jsx)("div",{className:c.root,children:Object(r.jsxs)(M.a,{horizontalAlign:"stretch",verticalAlign:"stretch",children:[Object(r.jsx)(Q.a,{align:"center",children:Object(r.jsx)(H.a,{size:B.c.size32,text:null===s||void 0===s?void 0:s.username})}),Object(r.jsx)(V.a,{}),t.map((function(e){return Object(r.jsx)(Hn,{task:e,setTasks:n,handleStatusChange:a},e.id)}))]})})};Gn.defaultProps={user:null};var Vn=Gn,qn=[{key:"00:00",text:"00:00"},{key:"01:00",text:"01:00"},{key:"02:00",text:"02:00"},{key:"03:00",text:"03:00"},{key:"04:00",text:"04:00"},{key:"05:00",text:"05:00"},{key:"06:00",text:"06:00"},{key:"07:00",text:"07:00"},{key:"08:00",text:"08:00"},{key:"09:00",text:"09:00"},{key:"10:00",text:"10:00"},{key:"11:00",text:"11:00"},{key:"12:00",text:"12:00"},{key:"13:00",text:"13:00"},{key:"14:00",text:"14:00"},{key:"15:00",text:"15:00"},{key:"16:00",text:"16:00"},{key:"17:00",text:"17:00"},{key:"18:00",text:"18:00"},{key:"19:00",text:"19:00"},{key:"20:00",text:"20:00"},{key:"21:00",text:"21:00"},{key:"22:00",text:"22:00"},{key:"23:00",text:"23:00"}],Kn=Object(I.a)((function(){return{combo:{width:100},space:{padding:"0px 10px"},text:{padding:"10px"}}})),Yn=function(e){var t=e.hours,n=e.setHours,a=Kn(),s=function(e){return function(t,r){n((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(Et.a)({},e,r.key))}))}};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(M.a,{horizontalAlign:"center",children:[Object(r.jsx)(U.a,{className:a.text,variant:"medium",children:"Working hours"}),Object(r.jsxs)(M.a,{horizontalAlign:"center",horizontal:!0,verticalAlign:"center",children:[Object(r.jsx)(Ct.a,{className:a.combo,options:qn,selectedKey:t.from,autoComplete:"on",useComboBoxAsMenuWidth:!0,calloutProps:{calloutMaxHeight:500},onChange:s("from")}),Object(r.jsx)("span",{className:a.space,children:"-"}),Object(r.jsx)(Ct.a,{className:a.combo,options:qn,selectedKey:t.to,autoComplete:"on",useComboBoxAsMenuWidth:!0,calloutProps:{calloutMaxHeight:500},onChange:s("to")})]})]})})},Qn=n(375),Jn=n(81),Zn=n(184),Xn=Object(a.createContext)({isDialog:!1,isVisible:!1,setVisible:null,show:null,accept:null,cancel:null,resolve:null,setResolve:null,dialogFooter:null,setDialogFooter:null}),_n=function(e){var t,n,s,c,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=Object(a.useState)(!1),j=Object(l.a)(p,2),f=j[0],b=j[1],m=Object(a.useState)(null),h=Object(l.a)(m,2),O=h[0],x=h[1],g=Object(a.useState)((function(){return o.dialogFooter})),v=Object(l.a)(g,2),w=v[0],S=v[1];Object(a.useEffect)((function(){O&&!f&&O(be.a.dialogAnswers.No)}),[O]);var C=function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.abrupt("return",new Promise((function(e){x((function(){return e}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){null!==O&&O(be.a.dialogAnswers.Yes),b(!1)},A=function(){null!==O&&O(be.a.dialogAnswers.No),b(!1)},P=Object(a.useState)({isDialog:!0,isVisible:f,setVisible:b,show:C,accept:T,cancel:A,resolve:O,setResolve:x,dialogFooter:w,setDialogFooter:S}),D=Object(l.a)(P,1),N=D[0],R=f?Object(r.jsx)(Xn.Provider,{value:N,children:Object(r.jsxs)(Qn.a,{hidden:!f,onDismiss:null!==(t=o.onDismiss)&&void 0!==t?t:function(){return b(!1)},modalProps:{isBlocking:null!==(n=o.isBlocking)&&void 0!==n&&n},dialogContentProps:{type:null!==(s=o.type)&&void 0!==s?s:Jn.a.normal,title:null!==(c=o.title)&&void 0!==c?c:"Title",subText:null!==(i=o.subText)&&void 0!==i?i:""},children:[Object(r.jsx)(e,Object(u.a)({accept:T,cancel:A},d)),w?Object(r.jsx)(Zn.a,{children:w(T,A)}):null]})}):null;return{visible:f,setVisible:b,render:R,show:C}},$n=function(e){var t=e.accept,n=e.setTasks,a=e.conflictTasks,s=void 0===a?[]:a,c=function(){var e=Object(k.a)(y.a.mark((function e(r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),a=s.map((function(e){return xn.updateTaskStatus(e.id,{status:be.a.tasks.status.Paused})})),e.next=5,Promise.all(a);case 5:e.sent.map((function(e){return n((function(t){return t.map((function(t){return t.id===e.result.id?e.result:t}))}))}));case 6:return e.prev=6,t(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{id:"task-busy-resolve",onSubmit:c,children:[Object(r.jsx)(U.a,{block:!0,variant:"medium",children:"Following tasks are still busy:"}),Object(r.jsx)(V.a,{}),s.map((function(e,t){return Object(r.jsx)(m.b,{to:"/tasks/".concat(e.id),target:"_blank",component:W.a,children:Object(r.jsxs)(U.a,{variant:"medium",children:[t+1,"."," ",e.title," (".concat(new Date(e.actualStartDate).toLocaleString(),")")]})})})),Object(r.jsx)(V.a,{}),Object(r.jsx)(U.a,{block:!0,variant:"medium",children:"If you continue, above tasks will be paused."})]})},er=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(a.useState)(null!==(t=JSON.parse(localStorage.getItem(e)))&&void 0!==t?t:n),s=Object(l.a)(r,2),c=s[0],i=s[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(c))}),[c]),[c,i]},tr={baseUrl:"/stream",subscribePath:"/stream/subscribe",connectSSE:function(){var e=this;return Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new EventSource(e.baseUrl),t.abrupt("return",n);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},subscribe:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post(t.subscribePath,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response.data&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()}},nr=function(e){var t=e.setTasks,n=Object(a.useContext)(g),r=function(){var e=Object(k.a)(y.a.mark((function e(r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=JSON.parse(r.data))&&(a.action===be.a.connections.actions.INSERT||a.action===be.a.connections.actions.UPDATE&&a.initiator!==n.user.id&&t((function(e){return e.map((function(e){return e.id===a.data.id?a.data:e}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return n.connection&&n.connection.addEventListener("message",r),function(){n.connection&&n.connection.removeEventListener("message",r)}}),[n.connection]),null};nr.propTypes={setTasks:Kt.a.func.isRequired};var rr=nr,ar=Object(I.a)((function(e){return{searchIcon:{color:e.palette.themePrimary,marginLeft:e.spacing.s1,marginRight:e.spacing.s1}}})),sr=function(){var e=ar(),t=Object(a.useContext)(g),n=On(Ie.teamUsersPath),s=Object(l.a)(n,1)[0],c=Object(a.useState)([]),i=Object(l.a)(c,2),o=i[0],u=i[1],d=er("DTSelectedUsers",[t.user.id]),p=Object(l.a)(d,2),j=p[0],f=p[1],b=Object(a.useState)(new Date),m=Object(l.a)(b,2),h=m[0],O=m[1],x=er("DTWorkingHours",{from:"09:00",to:"18:00"}),v=Object(l.a)(x,2),w=v[0],S=v[1],C={params:{fromDate:hn.DateTime.fromJSDate(h).toUTC().set({hour:gn.getHoursFromText(w.from).h,minute:gn.getHoursFromText(w.from).m,second:0,millisecond:0}).toJSDate(),toDate:hn.DateTime.fromJSDate(h).toUTC().set({hour:gn.getHoursFromText(w.to).h,minute:gn.getHoursFromText(w.to).m,second:0,millisecond:0}).toJSDate(),users:j}},T=On(xn.baseUrl,C,[],[h,w,j],(function(e){return e.map((function(e){return xn.createTaskObject(e)}))})),P=Object(l.a)(T,2),D=P[0],N=P[1],R=yn(Pn,{headerText:"Create new task",onRenderFooterContent:function(){return Object(r.jsx)(ut.a,{text:"Create",type:"submit",form:"create-task-form"})}},{setTasks:N}),I=Object(a.useState)({}),E=Object(l.a)(I,2),F=E[0],U=E[1],L=_n($n,{isBlocking:!0,title:"Busy task found",dialogFooter:function(e,t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(A.a,{onClick:t,children:"Cancel"}),Object(r.jsx)(ut.a,{style:{marginLeft:"5px"},form:"task-busy-resolve",type:"submit",children:"Continue"})]})}},F);Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.connectionId){e.next=3;break}return e.next=3,tr.subscribe({to:j,connectionId:t.connectionId});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j,t.connectionId]),Object(a.useEffect)((function(){u(s.map((function(e){return{key:e.id,text:e.username,data:e}})))}),[s]);var W=function(e,t){t.selected?f((function(e){return e.concat(t.key)})):f((function(e){return e.filter((function(e){return e!==t.key}))}))},H=function(){var e=Object(k.a)(y.a.mark((function e(n,r){var a,s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==be.a.tasks.status.InProgress||n.isBackgroundTask){e.next=11;break}return e.next=3,xn.getBusyTasks({user:t.user.id});case 3:if(!((s=e.sent).length>0)){e.next=11;break}return U({setTasks:N,conflictTasks:s}),e.next=8,L.show();case 8:if(e.sent!==be.a.dialogAnswers.No){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,xn.updateTaskStatus(n.id,{status:r});case 13:c=e.sent,N((function(e){return e.map((function(e){return e.id===n.id?xn.createTaskObject(c.result):e}))})),(null===(a=c.unpaused)||void 0===a?void 0:a.id)&&N((function(e){return e.map((function(e){return e.id===c.unpaused.id?xn.createTaskObject(c.unpaused):e}))}));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(rr,{setTasks:N}),Object(r.jsxs)(Ce.Container,{lg:!0,children:[Object(r.jsx)(Ve.a,{text:"Daily tasks"}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(Dn,{currentDate:h,setCurrentDate:O})})}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(Yn,{hours:w,date:h,setHours:S})})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(ye.a,{items:[{key:"new",text:"New",iconProps:{iconName:"Add"},onClick:function(){R.setOpen(!0)}},{key:"users",text:"Users",iconProps:{iconName:"ProfileSearch"},onRender:function(){return Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(z.a,{className:e.searchIcon,iconName:"ProfileSearch"}),Object(r.jsx)(Ct.a,{autoComplete:"on",options:o,multiSelect:!0,selectedKey:j,openOnKeyboardFocus:!0,onChange:W,calloutProps:{calloutMaxHeight:500}})]})}}]})})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{justify:"around",children:j.map((function(e){return Object(r.jsx)(Vn,{tasks:D.filter((function(t){return void 0!==t.assignedTo.find((function(t){return t.id===e}))})).sort((function(e,t){return e.expectedStartDate<t.expectedStartDate?-1:1})),user:s.find((function(t){return t.id===e})),setTasks:N,handleStatusChange:H},e)}))})]}),R.render,L.render]})},cr=n(366),ir=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,a,s=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:200,r=!(s.length>2&&void 0!==s[2])||s[2],e.prev=2,e.next=5,t();case 5:if((a=e.sent).status!==n){e.next=8;break}return e.abrupt("return",a.data);case 8:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 11:throw e.prev=11,e.t0=e.catch(2),r&&C.a.notifyError(e.t0.response.data&&e.t0.response.data.error||e.t0.message),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),or={baseUrl:"/api/task-flows",singleUrl:function(e){return"/api/task-flows/".concat(e)},getTaskFlow:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ir((function(){return S.a.get(t.singleUrl(e))})));case 1:case"end":return n.stop()}}),n)})))()},createTaskFlow:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ir((function(){return S.a.post(t.baseUrl,e)})));case 1:case"end":return n.stop()}}),n)})))()},updateTaskFlow:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ir((function(){return S.a.put(n.singleUrl(e),t)})));case 1:case"end":return r.stop()}}),r)})))()}},ur=function(e){var t=e.setFlows,n=On(wt.baseUrl),s=Object(l.a)(n,1)[0],c=Object(a.useState)({name:"",teams:[],color:""}),i=Object(l.a)(c,2),o=i[0],d=i[1],p=Object(a.useContext)(vn),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e[0].target.value};return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];d((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,t(r)))}))}},f=function(){var e=Object(k.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o.name){e.next=3;break}return e.abrupt("return",C.a.notifyError("Flow Name is missing"));case 3:if(0!==o.teams.length){e.next=5;break}return e.abrupt("return",C.a.notifyError("Please choose at least one team"));case 5:if(o.color){e.next=7;break}return e.abrupt("return",C.a.notifyError("Color must be provided"));case 7:return e.next=9,or.createTaskFlow(o);case 9:return(r=e.sent)&&t((function(e){return e.concat(r)})),p.isPanel&&p.setOpen(!1),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p.isPanel&&p.setOnRenderFooter((function(){return function(){return Object(r.jsxs)(M.a,{horizontal:!0,tokens:{childrenGap:2},children:[Object(r.jsx)(ut.a,{text:"Create",type:"submit",form:"add-flow-form"}),Object(r.jsx)(A.a,{text:"Close",onClick:function(){return p.setOpen(!1)}})]})}}))}),[p]),Object(r.jsxs)("form",{onSubmit:f,id:"add-flow-form",children:[Object(r.jsx)(Je.a,{label:"Name",value:o.name,onChange:j("name"),placeholder:"Flow name"}),Object(r.jsx)(un.a,{placeholder:"Flow teams",label:"Teams",selectedKeys:o.teams,multiSelect:!0,options:s.map((function(e){return{key:e.id,text:e.name}})),onChange:j("teams",(function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);return n.selected?o.teams.concat(n.key):o.teams.filter((function(e){return e!==n.key}))}))}),Object(r.jsx)(Zt.a,{htmlFor:"add-flow-color-picker",children:"Color"}),Object(r.jsx)(cr.a,{id:"add-flow-color-picker",columnCount:6,cellHeight:35,cellWidth:35,cellShape:"square",colorCells:be.a.colors.map((function(e){return{id:e,color:e}})),selectedId:o.color,onColorChanged:j("color",(function(e){return Object(l.a)(e,1)[0]}))})]})},lr=function(e){var t=e.id,n=e.setFlows,s=On(or.singleUrl(t),null,null,[],(function(e){return{name:e.name,color:e.color,isActive:e.isActive,teams:e.teams.map((function(e){return e.id}))}})),c=Object(l.a)(s,2),i=c[0],o=c[1],d=On(wt.baseUrl),p=Object(l.a)(d,1)[0],j=Object(a.useContext)(vn),f=function(){var e=Object(k.a)(y.a.mark((function e(r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,or.updateTaskFlow(t,i);case 3:(a=e.sent)&&n((function(e){return e.map((function(e){return e.id===a.id?a:e}))})),j.isPanel&&j.setOpen(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e[0].target.value};return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];o((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,t(r)))}))}};return Object(a.useEffect)((function(){j.isPanel&&j.setOnRenderFooter((function(){return function(){return Object(r.jsxs)(M.a,{horizontal:!0,tokens:{childrenGap:2},children:[Object(r.jsx)(ut.a,{text:"Update",type:"submit",form:"edit-flow-form"}),Object(r.jsx)(A.a,{text:"Close",onClick:function(){return j.setOpen(!1)}})]})}}))}),[j]),null!==i&&Object(r.jsxs)("form",{onSubmit:f,id:"edit-flow-form",children:[Object(r.jsx)(Je.a,{label:"Name",value:null===i||void 0===i?void 0:i.name,onChange:b("name"),placeholder:"Flow name"}),Object(r.jsx)(un.a,{placeholder:"Flow teams",label:"Teams",selectedKeys:null===i||void 0===i?void 0:i.teams,multiSelect:!0,options:p.map((function(e){return{key:e.id,text:e.name}})),onChange:b("teams",(function(e){var t,n=Object(l.a)(e,2),r=(n[0],n[1]);return r.selected?null===i||void 0===i?void 0:i.teams.concat(r.key):null===i||void 0===i||null===(t=i.teams)||void 0===t?void 0:t.filter((function(e){return e!==r.key}))}))}),Object(r.jsx)(Zt.a,{htmlFor:"edit-flow-color-picker",children:"Color"}),Object(r.jsx)(cr.a,{id:"edit-flow-color-picker",columnCount:6,cellHeight:35,cellWidth:35,cellShape:"square",colorCells:be.a.colors.map((function(e){return{id:e,color:e}})),selectedId:null===i||void 0===i?void 0:i.color,onColorChanged:b("color",(function(e){return Object(l.a)(e,1)[0]}))}),Object(r.jsx)(we.a,{label:"Active",checked:null===i||void 0===i?void 0:i.isActive,onChange:b("isActive",(function(e){var t=Object(l.a)(e,2);t[0];return t[1]}))})]})},dr=function(){var e,t=On(or.baseUrl),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)({count:0,items:[],indices:[]}),o=Object(l.a)(i,2),u=o[0],d=o[1],p=yn(ur,{id:"add-flow-panel",headerText:"Create new flow",isFooterAtBottom:!0,type:je.a.smallFixedFar,isLightDismiss:!1,onDismiss:function(e,t){return function(e){var n=document.getElementById("add-flow-panel");n&&n.contains(e.target)&&t(!1)}}},{setFlows:c}),j=yn(lr,{id:"edit-flow-panel",headerText:"Update flow",isFooterAtBottom:!0,type:je.a.smallFixedFar,isLightDismiss:!1},{id:null===(e=u.items[0])||void 0===e?void 0:e.id,setFlows:c}),f=Object(a.useState)([{key:"color",name:" Color",fieldName:"color",isSortable:!0,isFilterable:!0,isResizable:!1,maxWidth:50,onRender:function(e){return Object(r.jsx)("div",{style:{backgroundColor:e.color,width:20,height:20}})}},{key:"name",name:" Name",fieldName:"name",isSortable:!0,isFilterable:!0,isResizable:!0,minWidth:100,maxWidth:300},{key:"status",name:" Status",fieldName:"isActive",isSortable:!0,isFilterable:!0,isResizable:!0,onRender:function(e){return e.isActive?"Active":"Disabled"},filterValueAccessor:function(e){return e.isActive?"Active":"Disabled"},minWidth:100,maxWidth:150},{key:"teams",name:" Teams",fieldName:"teams",isSortable:!0,isFilterable:!0,isResizable:!0,minWidth:100,maxWidth:300,onRender:function(e){return e.teams.map((function(e){return e.name})).join(", ")}}]),b=Object(l.a)(f,1)[0];return Object(r.jsxs)(Ce.Container,{md:!0,children:[Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(Ve.a,{text:"Task Flows"})})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(St.a,{commandItems:[{key:"add",text:"Add",iconProps:{iconName:"Add"},onClick:function(){return p.setOpen(!0)}},{key:"edit",text:"Edit",iconProps:{iconName:"Edit"},disabled:0===u.items.length,onClick:function(){return j.setOpen(!0)}}],tableProps:{items:s,columns:b,selectionMode:Se.b.single,onItemInvoked:function(){return j.setOpen(!0)},layoutMode:kt.e.justified,setSelectionDetails:d}})})}),p.render,j.render]})},pr=n(364),jr=n(40),fr=n(365),br=n(182),mr=Object(I.a)((function(e){return{root:{backgroundColor:e.palette.neutralLighter,height:"100%",textAlign:"center",display:"flex",flexFlow:"column nowrap",justifyContent:"center",cursor:"pointer","&:hover":{backgroundColor:e.palette.themePrimary}},selected:{backgroundColor:e.palette.themeDark},flowItem:{padding:3},noSelect:{userSelect:"none"}}})),hr=function(e){var t,n,a=e.userFlows,s=e.handleClick,c=e.handleInvoke,i=e.isSelected,o=mr();return Object(r.jsx)("div",{role:"button",tabIndex:0,className:Object(Nn.a)([o.root,i&&o.selected]),onClick:s,onKeyDown:function(e){return"Enter"===e.code&&s()},onDoubleClick:c,children:(null===a||void 0===a?void 0:a.flows)&&0!==(null===a||void 0===a||null===(t=a.flows)||void 0===t?void 0:t.length)?Object(r.jsx)("ul",{children:null===(n=Array.from(null===a||void 0===a?void 0:a.flows))||void 0===n?void 0:n.map((function(e){var t;return Object(r.jsx)("li",{className:o.flowItem,children:Object(r.jsx)(Ye,{className:o.noSelect,style:{backgroundColor:null!==(t=e.color)&&void 0!==t?t:"transparent",padding:3,whiteSpace:"pre-wrap"},children:Object(r.jsx)(U.a,{variant:"medium",children:e.name})})},e.id)}))}):Object(r.jsx)(U.a,{className:o.noSelect,variant:"medium",children:"-"})})};hr.defaultProps={userFlows:null};var Or=hr,xr=Object(I.a)((function(e){return{row:{color:e.palette.black}}})),gr=function(e){var t=e.userFlowMap,n=e.dates,a=e.users,s=e.selectedCell,c=e.setSelectedCell,i=e.handleInvoke,o=xr(),l=Object(E.a)(),d=hn.DateTime.now().toISODate(),p={key:"username",name:"Username",fieldName:"username",maxWidth:300,onRender:function(e){return Object(r.jsx)(H.a,{size:B.c.size24,text:e.username})},isResizable:!0},j=function(e,t){return Boolean((null===s||void 0===s?void 0:s.date)&&s.date===e&&(null===s||void 0===s?void 0:s.user)&&s.user===t)},f=function(e,t){return function(){c({date:e,user:t})}};return Object(r.jsx)(Ce.Container,{fluid:!0,children:Object(r.jsx)(fr.a,{layoutMode:kt.e.fixedColumns,onRenderRow:function(e){return Object(r.jsx)(br.a,Object(u.a)(Object(u.a)({className:o.row},e),{},{styles:{root:{"&:hover":{backgroundColor:"transparent"}}}}))},columns:[p].concat(n.map((function(e){return{key:hn.DateTime.fromJSDate(e).toISODate(),name:hn.DateTime.fromJSDate(e).toISODate(),minWidth:100,styles:{root:{border:"1px solid ".concat(hn.DateTime.fromJSDate(e).toISODate()===d?l.palette.themePrimary:"transparent")}},onRender:function(e,n,a){var s;return Object(r.jsx)(Or,{userFlows:null===(s=t.get(e.id))||void 0===s?void 0:s.get(a.key),handleClick:f(a.key,e.id),handleInvoke:i,isSelected:j(a.key,e.id)})}}}))),items:a,selectionMode:Se.b.none})})};gr.defaultProps={selectedCell:null};var vr=gr,yr={baseUrl:"/api/task-planning",addFlowUrl:function(e,t){return"/api/task-planning/".concat(e,"/add-flow/").concat(t)},removeFlowUrl:function(e,t){return"/api/task-planning/".concat(e,"/remove-flow/").concat(t)},createPlanning:function(e,t,n){var r=this;return Object(k.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",ir((function(){return S.a.post(r.baseUrl,{date:e,user:t,flows:n.map((function(e){return e.id}))})})));case 1:case"end":return a.stop()}}),a)})))()},addFlowToPlanning:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ir((function(){return S.a.put(n.addFlowUrl(e,t))})));case 1:case"end":return r.stop()}}),r)})))()},removeFromFromPlanning:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ir((function(){return S.a.delete(n.removeFlowUrl(e,t))})));case 1:case"end":return r.stop()}}),r)})))()}},kr=Object(I.a)((function(e){return{root:{},suggestionRoot:{padding:e.spacing.s2},suggestionCheck:{marginRight:e.spacing.s2,padding:e.spacing.s2,outline:"none"},picker:{"& input":{backgroundColor:e.palette.white,color:e.palette.neutralPrimary}},suggestion:{padding:e.spacing.s1},colorBox:{width:20,height:20,marginRight:e.spacing.s1},secondaryText:{color:e.palette.neutralSecondaryAlt},item:{marginTop:4,"&:first-child":{marginTop:8}},removeIcon:{width:32,height:32}}})),wr=function(e){var t=e.label,n=e.options,s=e.onSelect,c=e.onRemove,i=e.selected,o=e.showDeleteIcon,l=e.showCheckboxes,d=Object(De.a)(e,["label","options","onSelect","onRemove","selected","showDeleteIcon","showCheckboxes"]),p=kr(),j=Object(a.useMemo)((function(){return new Set(i.map((function(e){return e.key})))}),[i]),f=function(e){return function(t){return t.preventDefault(),t.stopPropagation(),j.has(e.key)?c(e):s(e)}};return Object(r.jsxs)("div",Object(u.a)(Object(u.a)({},d),{},{children:[t&&Object(r.jsx)(Zt.a,{children:t}),Object(r.jsx)(Ee.b,{inputProps:{placeholder:"Select..."},className:p.picker,onRenderSuggestionsItem:function e(t){var n,a;return Object(r.jsxs)(M.a,{className:p.suggestionRoot,horizontalAlign:"start",verticalAlign:"center",horizontal:!0,children:[l&&Object(r.jsx)("span",{className:p.suggestionCheck,role:"button",tabIndex:-1,onKeyDown:function(n){return"Space"===n.key?e(t)():null},onClick:f(t),children:Object(r.jsx)(we.a,{checked:j.has(t.key)})}),Object(r.jsx)("div",{className:p.colorBox,style:{backgroundColor:null!==(n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.color)&&void 0!==n?n:"transparent"}}),Object(r.jsxs)(M.a,{horizontalAlign:"start",children:[Object(r.jsx)(U.a,{variant:"mediumPlus",children:t.data.name}),Object(r.jsx)(U.a,{className:p.secondaryText,variant:"xSmall",children:t.data.teams.map((function(e){return e.name})).join(", ")})]})]},t.key)},onResolveSuggestions:function(e){return n.filter((function(t){return-1!==t.data.name.toLowerCase().indexOf(e.toLowerCase())}))},resolveDelay:300,onRenderItem:function(e){var t,n,a,s,i,u,l;return Object(r.jsxs)(M.a,{className:p.item,horizontalAlign:"center",verticalAlign:"center",horizontal:!0,children:[Object(r.jsx)(Qe,{style:{backgroundColor:null!==(a=null===(s=e.item)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.color)&&void 0!==a?a:"transparent",padding:3,whiteSpace:"pre-wrap",width:"50%",marginLeft:o?32:0},children:Object(r.jsx)(U.a,{variant:"medium",children:null===(u=e.item)||void 0===u||null===(l=u.data)||void 0===l?void 0:l.name})}),o&&Object(r.jsx)(F.a,{className:p.removeIcon,iconProps:{iconName:"Delete"},onClick:function(){return c(e.item)}})]},null===(t=e.item)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.id)},selectedItems:i,onEmptyResolveSuggestions:function(){return n},onItemSelected:function(e){return j.has(e.key)?c(e):s(e)},pickerCalloutProps:{preventDismissOnScroll:!0}})]}))};wr.defaultProps={label:null,props:null,showCheckboxes:!0,showDeleteIcon:!1};var Sr=wr,Cr=Object(I.a)((function(e){return{root:{minWidth:300,minHeight:200},picker:{"& input":{backgroundColor:e.palette.neutralLight,color:e.palette.neutralPrimary}},secondaryText:{color:e.palette.neutralSecondaryAlt},suggestion:{padding:e.spacing.s1},item:{marginTop:e.spacing.s1},colorBox:{width:20,height:20,marginRight:e.spacing.s1},focusPoint:{visibility:"hidden",height:0,width:0,margin:0,padding:0,border:"none"},removeIcon:{width:32,height:32}}})),Tr=function(e){var t,n=e.planning,s=e.options,c=e.addFlow,i=e.removeFlow,o=e.users,u=e.user,l=Cr(),d=Object(a.useMemo)((function(){var e,t,r,a=new Set(null===n||void 0===n||null===(e=n.flows)||void 0===e?void 0:e.map((function(e){return e.id}))),c=new Set(null===(t=o.find((function(e){return e.id===u})))||void 0===t||null===(r=t.teams)||void 0===r?void 0:r.map((function(e){return e.id})));return s.filter((function(e){return e.data.isActive})).filter((function(e){return e.data.teams.filter((function(e){return c.has(e.id)})).length>0})).filter((function(e){return!a.has(e.data.id)}))}),[s,n,o,u]);return Object(r.jsxs)("div",{className:l.root,children:[Object(r.jsx)("input",{className:l.focusPoint}),Object(r.jsx)(Sr,{options:d,showCheckboxes:!1,showDeleteIcon:!0,onSelect:function(e){c(n,e.data)},onRemove:function(e){i(n,e.data)},selected:n?null===n||void 0===n||null===(t=n.flows)||void 0===t?void 0:t.map((function(e){return{key:e.id,data:e}})):[]})]})},Ar=Object(I.a)((function(e){return{searchIcon:{color:e.palette.themePrimary,marginLeft:e.spacing.s1,marginRight:e.spacing.s1}}})),Pr=function(){var e,t=Ar(),n=Object(a.useState)(new Date),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(gn.getWeekFromDate(c,1)),u=Object(l.a)(o,2),d=u[0],p=u[1],j=On(or.baseUrl),f=Object(l.a)(j,1)[0],b=Object(a.useState)(null),m=Object(l.a)(b,2),h=m[0],O=m[1],x=On(wt.baseUrl,null,[],[],(function(e){return e.map((function(e){return{key:e.id,text:e.name,data:e}}))})),g=Object(l.a)(x,1)[0],v=er("TaskPlanningSelectedTeam",null),w=Object(l.a)(v,2),S=w[0],C=w[1],T=On(Ie.baseUrl,{params:{teams:[S]}},[],[S]),A=Object(l.a)(T,1)[0],P=On(yr.baseUrl,{params:{dateFrom:gn.makeUTCDateOnly(d[0]),dateTo:gn.makeUTCDateOnly(d[d.length-1]),teams:[S]}},[],[S,d]),D=Object(l.a)(P,2),N=D[0],R=D[1],I=Object(a.useMemo)((function(){var e=new Map;return A.forEach((function(t){return e.set(t.id,new Map)})),N.forEach((function(t){var n;e.has(null===(n=t.user)||void 0===n?void 0:n.id)&&e.get(t.user.id).set(hn.DateTime.fromISO(t.date).toUTC().toISODate(),t)})),e}),[N,A]),E=function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return e.next=3,yr.createPlanning(h.date,h.user,[n]);case 3:r=e.sent,R((function(e){return e.concat(r)})),e.next=11;break;case 7:return e.next=9,yr.addFlowToPlanning(t.id,n.id);case 9:a=e.sent,R((function(e){return e.map((function(e){return e.id===a.id?a:e}))}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.id)){e.next=5;break}return e.next=3,yr.removeFromFromPlanning(t.id,n.id);case 3:r=e.sent,R((function(e){return e.map((function(e){return e.id===r.id?r:e}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=_n(Tr,{title:"Details",type:Jn.a.largeHeader,dialogFooter:function(){return Object(r.jsx)(ut.a,{tabIndex:1,onClick:function(){return U.setVisible(!1)},text:"Close"})}},{planning:null===(e=I.get(null===h||void 0===h?void 0:h.user))||void 0===e?void 0:e.get(null===h||void 0===h?void 0:h.date),options:f.map((function(e){return{key:e.id,data:e}})),addFlow:E,removeFlow:F,users:A,user:null===h||void 0===h?void 0:h.user});return Object(r.jsxs)(Ce.Container,{md:!0,children:[Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(Ve.a,{text:"Task Planning"})})}),Object(r.jsx)(V.a,{}),Object(r.jsx)(ye.a,{items:[{key:"add",text:"Add",iconProps:{iconName:"Add"},disabled:null===h},{key:"copy",text:"Copy",iconProps:{iconName:"Copy"},disabled:null===h},{key:"paste",text:"Paste",iconProps:{iconName:"Paste"},disabled:null===h},{key:"copymult",text:"Copy mult.",iconProps:{iconName:"Copy"},disabled:null===h},{key:"teams",text:"Teams",iconProps:{iconName:"Search"},onRender:function(){return Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(z.a,{className:t.searchIcon,iconName:"ProfileSearch"}),Object(r.jsx)(Ct.a,{placeholder:"Teams",autoComplete:"on",options:g,selectedKey:S,openOnKeyboardFocus:!0,onChange:function(e,t){return C(t.key)},calloutProps:{calloutMaxHeight:500},useComboBoxAsMenuWidth:!0})]})}}]}),Object(r.jsx)(V.a,{}),Object(r.jsxs)(Ce.Row,{children:[Object(r.jsx)(pr.a,{isMonthPickerVisible:!1,dateRangeType:jr.b.Week,showWeekNumbers:!0,showSixWeeksByDefault:!0,showGoToToday:!0,value:c,onSelectDate:function(e,t){i(e),p(t)},firstDayOfWeek:1}),Object(r.jsx)(Ce.Col,{children:Object(r.jsx)(vr,{userFlowMap:I,users:A,dates:d,selectedCell:h,setSelectedCell:O,handleInvoke:function(){U.setVisible(!0)}})})]}),U.render]})},Dr={baseUrl:"/api/task-rules",taskRulePath:function(e){return"/api/task-rules/".concat(e)},getTaskRules:function(){var e=arguments,t=this;return Object(k.a)(y.a.mark((function n(){var r,a;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{},n.prev=1,n.next=4,S.a.get(t.baseUrl,{params:r});case 4:if(200!==(a=n.sent).status){n.next=7;break}return n.abrupt("return",a.data);case 7:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 10:throw n.prev=10,n.t0=n.catch(1),C.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getTaskRule:function(){return Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=7;break;case 3:throw e.prev=3,e.t0=e.catch(0),C.a.notifyError(e.t0.response&&e.t0.response.data.error||e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,null,[[0,3]])})))()},createTaskRule:function(e){var t=this;return Object(k.a)(y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post(t.baseUrl,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.data," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),C.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateTaskRule:function(e,t){var n=this;return Object(k.a)(y.a.mark((function r(){var a;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.put(n.taskRulePath(e),t);case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.data," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),C.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deleteTaskRule:function(){return Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=7;break;case 3:throw e.prev=3,e.t0=e.catch(0),C.a.notifyError(e.t0.response&&e.t0.response.data.error||e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,null,[[0,3]])})))()}},Nr=[{key:be.a.tasks.MonthlyOnType.Day,text:"Callendar day"},{key:be.a.tasks.MonthlyOnType.Workday,text:"Workday"},{key:be.a.tasks.MonthlyOnType.Monday,text:"Monday"},{key:be.a.tasks.MonthlyOnType.Tuesday,text:"Tuesday"},{key:be.a.tasks.MonthlyOnType.Wednesday,text:"Wednesday"},{key:be.a.tasks.MonthlyOnType.Thursday,text:"Thursday"},{key:be.a.tasks.MonthlyOnType.Friday,text:"Friday"},{key:be.a.tasks.MonthlyOnType.Saturday,text:"Saturday"},{key:be.a.tasks.MonthlyOnType.Sunday,text:"Sunday"}],Rr=Object(I.a)((function(e){return{weeklyCheck:{"& > * + *":{marginTop:"".concat(e.spacing.s2," !important")}},monthlyCheck:{"& > * + *":{marginTop:"".concat(e.spacing.s2," !important")}},monthlyDropdown:{marginBottom:e.spacing.m}}})),Ir=function(e){var t,n=e.data,a=e.setData,s=Rr(),c=function(e){return function(t,r){var s,c=null!==(s=n.weeklyDays)&&void 0!==s?s:[];return a(r?function(t){return Object(u.a)(Object(u.a)({},t),{},{weeklyDays:c.concat(e).sort()})}:function(t){return Object(u.a)(Object(u.a)({},t),{},{weeklyDays:c.filter((function(t){return t!==e})).sort()})})}},i=function(e){return function(t,r){var s,c=null!==(s=n.monthlyMonths)&&void 0!==s?s:[];return a(r?function(t){return Object(u.a)(Object(u.a)({},t),{},{monthlyMonths:c.concat(e).sort()})}:function(t){return Object(u.a)(Object(u.a)({},t),{},{monthlyMonths:c.filter((function(t){return t!==e})).sort()})})}},o=function(e){return!!n.weeklyDays&&-1!==n.weeklyDays.indexOf(e)};switch(n.type){case be.a.tasks.types.Daily:t=Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(J.a,{label:"Day type",defaultSelectedKey:n.dailyType,options:[{key:"Work",text:"Workday"},{key:"Calendar",text:"Calendar day"}],onChange:function(e,t){return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{dailyType:t.key})}))}})});break;case be.a.tasks.types.Weekly:t=Object(r.jsxs)(M.a,{className:s.weeklyCheck,verticalFill:!0,verticalAlign:"start",children:[Object(r.jsx)(we.a,{onChange:c(1),checked:o(1),label:"Monday"}),Object(r.jsx)(we.a,{onChange:c(2),checked:o(2),label:"Tuesday"}),Object(r.jsx)(we.a,{onChange:c(3),checked:o(3),label:"Wednesday"}),Object(r.jsx)(we.a,{onChange:c(4),checked:o(4),label:"Thursday"}),Object(r.jsx)(we.a,{onChange:c(5),checked:o(5),label:"Friday"}),Object(r.jsx)(we.a,{onChange:c(6),checked:o(6),label:"Saturday"}),Object(r.jsx)(we.a,{onChange:c(7),checked:o(7),label:"Sunday"})]});break;case be.a.tasks.types.Monthly:t=Object(r.jsxs)(M.a,{verticalAlign:"start",verticalFill:!0,children:[Object(r.jsx)(kn.a,{value:n.monthlyOn,onChange:function(e,t){t&&!Number.isNaN(+t)&&a((function(e){return Object(u.a)(Object(u.a)({},e),{},{monthlyOn:+t})}))},min:1,max:31,label:"On",incrementButtonAriaLabel:"Increase value by 1",decrementButtonAriaLabel:"Decrease value by 1",labelPosition:wn.a.top}),Object(r.jsx)(un.a,{className:s.monthlyDropdown,options:Nr,placeHolder:"Select",onChange:function(e,t){return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{monthlyOnType:t.key})}))},label:"Type"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(0),label:"January"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(1),label:"February"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(2),label:"March"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(3),label:"April"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(4),label:"May"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(5),label:"June"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(6),label:"July"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(7),label:"August"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(8),label:"September"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(9),label:"October"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(10),label:"November"}),Object(r.jsx)(we.a,{className:s.monthlyCheck,onChange:i(11),label:"December"})]});break;default:t=null}return t},Er=Object(I.a)((function(e){return{root:{},picker:{"& input":{backgroundColor:e.palette.white,color:e.palette.neutralPrimary}},suggestionRoot:{padding:e.spacing.s2},suggestionCheck:{marginRight:e.spacing.s2,padding:e.spacing.s2,outline:"none"},suggestionText:{textTransform:"capitalize"},itemRoot:{marginTop:4,"&:first-child":{marginTop:8}}}})),Fr=function(e){var t=e.label,n=e.options,s=e.onSelect,c=e.onRemove,i=e.selected,o=Object(De.a)(e,["label","options","onSelect","onRemove","selected"]),l=Er(),d=Object(a.useMemo)((function(){return new Set(i.map((function(e){return e.key})))}),[i]),p=function(e){return function(t){return t.preventDefault(),t.stopPropagation(),d.has(e.key)?c(e):s(e)}};return Object(r.jsxs)("div",Object(u.a)(Object(u.a)({},o),{},{children:[t&&Object(r.jsx)(Zt.a,{children:t}),Object(r.jsx)(Ee.b,{inputProps:{placeholder:"Select..."},className:l.picker,onRenderSuggestionsItem:function e(t){return Object(r.jsxs)(M.a,{className:l.suggestionRoot,horizontalAlign:"start",verticalAlign:"center",horizontal:!0,children:[Object(r.jsx)("span",{className:l.suggestionCheck,role:"button",tabIndex:-1,onKeyDown:function(n){return"Space"===n.key?e(t)():null},onClick:p(t),children:Object(r.jsx)(we.a,{checked:d.has(t.key)})}),Object(r.jsx)(U.a,{className:l.suggestionText,variant:"mediumPlus",children:t.data.username})]},t.key)},onResolveSuggestions:function(e){return n.filter((function(t){return-1!==t.data.username.toLowerCase().indexOf(e.toLowerCase())}))},resolveDelay:300,onRenderItem:function(e){return Object(r.jsx)(M.a,{className:l.itemRoot,horizontalAlign:"start",verticalAlign:"center",horizontal:!0,children:Object(r.jsx)(H.a,{text:e.item.data.username,size:B.c.size24})},e.item.id)},selectedItems:i,onEmptyResolveSuggestions:function(){return n},onItemSelected:function(e){return d.has(e.key)?c(e):s(e)},pickerCalloutProps:{preventDismissOnScroll:!0}})]}))};Fr.defaultProps={label:null,props:null};var Ur=Fr,zr=be.a.tasks,Lr=Object(I.a)((function(e){return{form:{"& > * + *":{paddingTop:e.spacing.s1}}}})),Wr=function(e){var t,n,s,c=e.setRules,i=e.setOpen,o=Lr(),d=On(Ie.teamUsersPath,null,[],[],(function(e){return e.map((function(e){return{key:e.id,data:e}}))})),p=Object(l.a)(d,1)[0],j=On(or.baseUrl,null,[],[],(function(e){return e.map((function(e){return{key:e.id,data:e}}))})),f=Object(l.a)(j,1)[0],b=Object(a.useState)({title:"",description:"",type:zr.types.Daily,dailyType:zr.DayTypes.Workday,isBackgroundTask:!1,isSharedTask:!1,taskStartTime:new Date,validFrom:new Date,taskDuration:60,users:[],flows:[],zone:hn.DateTime.local().zoneName}),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useRef)(Object.keys(zr.types).map((function(e){return{key:e,text:e}}))),g=Object(a.useRef)(be.a.timeOptions),v=function(e){return function(t){O((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,t.target.value))}))}},w=function(e){return function(t){O((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0))))}))}},S=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(h.validFrom&&h.validTo&&h.validTo<h.validFrom)){e.next=5;break}return e.next=4,C.a.notifyError("'Valid From' cannot be bigger than 'Valid To'");case 4:return e.abrupt("return");case 5:return h.weeklyDays&&h.weeklyDays.length&&(h.weeklyDays=h.weeklyDays.map((function(e){return hn.DateTime.local().toUTC().set({weekday:e})}))),h.monthlyMonths&&h.monthlyMonths.length&&(h.monthlyMonths=h.monthlyMonths.map((function(e){var t=new Date(2020,1,1);return t.setMonth(e),t.setHours(h.taskStartTime.getHours()),t.setMinutes(h.taskStartTime.getMinutes()),t}))),n=hn.DateTime.fromJSDate(h.taskStartTime),r=hn.DateTime.utc(n.year,n.month,n.day,n.hour,n.minute,0),e.next=11,Dr.createTaskRule(Object(u.a)(Object(u.a)({},h),{},{taskStartTime:r.toJSDate(),users:h.users.map((function(e){return e.id})),flows:h.flows.map((function(e){return e.id}))}));case 11:a=e.sent,c((function(e){return[].concat(Object(Ut.a)(e),[a])})),i(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:o.form,id:"add-task-rule-form",onSubmit:S,children:[Object(r.jsx)(Je.a,{required:!0,label:"Title",value:h.title,onChange:v("title"),name:"task-rule-title"}),Object(r.jsx)(Je.a,{label:"Description",multiline:!0,name:"task-rule-description",onChange:v("description"),value:h.description}),Object(r.jsx)(un.a,{label:"Type",selectedKey:h.type,onChange:function(e,t){O((function(e){return Object(u.a)(Object(u.a)({},e),{},{type:t.key})}))},options:x.current,name:"task-rule-type"}),Object(r.jsx)(Ir,{data:h,setData:O}),Object(r.jsx)(Ct.a,{label:"Start time",options:g.current,selectedKey:gn.getNearestTime(null!==(t=h.taskStartTime)&&void 0!==t?t:new Date),autoComplete:"on",onChange:function(e,t){var n=t.text.split(":").map((function(e){return+e})),r=Object(l.a)(n,2),a=r[0],s=r[1];void 0!==a&&void 0!==s&&O((function(e){return Object(u.a)(Object(u.a)({},e),{},{taskStartTime:hn.DateTime.local().set({hour:a,minute:s,second:0}).toJSDate()})}))},calloutProps:{calloutMaxHeight:400},useComboBoxAsMenuWidth:!0}),Object(r.jsx)(kn.a,{label:"Duration (min)",value:h.taskDuration,onChange:function(e){var t=+e.target.value;Number.isNaN(t)&&(t=0),O((function(e){return Object(u.a)(Object(u.a)({},e),{},{taskDuration:t})}))},onIncrement:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{taskDuration:+e+10})}))},onDecrement:function(e){e>10&&O((function(t){return Object(u.a)(Object(u.a)({},t),{},{taskDuration:+e-10})}))},min:0,step:10,incrementButtonAriaLabel:"Increase value by 10",decrementButtonAriaLabel:"Decrease value by 10",labelPosition:wn.a.top}),Object(r.jsx)(ln.a,{required:!0,label:"Valid From",value:h.validFrom,onSelectDate:w("validFrom")}),Object(r.jsx)(ln.a,{label:"Valid To",value:h.validTo,onSelectDate:w("validTo")}),Object(r.jsx)(we.a,{className:o.checkbox,label:"Background",value:h.isBackgroundTask,onChange:function(e,t){return O((function(e){return Object(u.a)(Object(u.a)({},e),{},{isBackgroundTask:t})}))}}),Object(r.jsx)(we.a,{className:o.checkbox,label:"Shared",value:h.isSharedTask,onChange:function(e,t){return O((function(e){return Object(u.a)(Object(u.a)({},e),{},{isSharedTask:t})}))}}),Object(r.jsx)(Ur,{label:"Assigned to (Users)",options:p,onSelect:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{users:t.users.concat(e.data)})}))},onRemove:function(e){return O((function(t){return Object(u.a)(Object(u.a)({},t),{},{users:t.users.filter((function(t){return t.id!==e.data.id}))})}))},selected:null===(n=h.users)||void 0===n?void 0:n.map((function(e){return{key:e.id,data:e}}))}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Sr,{label:"Assigned to (Flows)",options:f,onSelect:function(e){return O((function(t){var n;return Object(u.a)(Object(u.a)({},t),{},{flows:null===(n=t.flows)||void 0===n?void 0:n.concat(e.data)})}))},onRemove:function(e){return O((function(t){var n;return Object(u.a)(Object(u.a)({},t),{},{flows:null===(n=t.flows)||void 0===n?void 0:n.filter((function(t){return t.id!==e.data.id}))})}))},selected:null===(s=h.flows)||void 0===s?void 0:s.map((function(e){return{key:e.id,data:e}}))})]})};Wr.defaultProps={setOpen:null};var Mr=Wr,Hr=Object(I.a)((function(e){return{root:{"& > * + *":{marginTop:"".concat(e.spacing.s2," !important")}},description:{color:e.palette.neutralSecondaryAlt,"& textarea":{color:"inherit"}},typeIcon:{fontSize:50,height:50,width:50},typeDetails:{width:"50%",borderTop:"1px solid ".concat(e.palette.themeSecondary),borderBottom:"1px solid ".concat(e.palette.themeSecondary),marginTop:"".concat(e.spacing.s2," !important"),paddingTop:e.spacing.m,paddingBottom:e.spacing.m},paddingLeft:{paddingLeft:e.spacing.s2},userColumn:{width:"50%"},separator:{margin:"".concat(e.spacing.m," 0"),"& div[role='separator']":{backgroundColor:e.palette.themePrimary,padding:"3px",borderRadius:"5px",minWidth:60}},weekDay:{backgroundColor:e.palette.themePrimary,color:e.palette.black,padding:"5px 10px",marginRight:e.spacing.s2},month:{backgroundColor:e.palette.themePrimary,color:e.palette.black,padding:"5px 10px",marginRight:e.spacing.s2,marginTop:e.spacing.s2}}})),Br=[null,"Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Gr=[null,"January","February","March","April","May","June","July","August","September","October","November","December"],Vr=function(e){switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},qr=function(e){var t=e.rule,n=Hr();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(V.a,{className:n.separator,children:"Type"}),Object(r.jsxs)(M.a,{horizontalAlign:"center",children:[Object(r.jsx)(z.a,{className:n.typeIcon,iconName:function(e){switch(e){case be.a.tasks.types.Daily:return"CalendarDay";case be.a.tasks.types.Weekly:return"CalendarWorkWeek";case be.a.tasks.types.Monthly:return"Calendar";default:return"Unknown"}}(t.type)}),Object(r.jsx)(U.a,{variant:"medium",children:t.type}),Object(r.jsx)(Q.a,{className:n.typeDetails,children:function(e){switch(e.type){case be.a.tasks.types.Daily:return Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(Zt.a,{children:"Day type: "}),Object(r.jsx)(U.a,{block:!0,className:n.paddingLeft,variant:"medium",children:t.dailyType})]});case be.a.tasks.types.Weekly:return Object(r.jsxs)(M.a,{horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(Zt.a,{style:{display:"block"},children:"Days: "}),Object(r.jsx)(M.a,{horizontal:!0,horizontalAlign:"center",children:t.weeklyDays.map((function(e){return Object(r.jsx)(Qe,{className:n.weekDay,children:Object(r.jsx)(U.a,{variant:"medium",children:Br[new Date(e).getDay()]})})}))})]});case be.a.tasks.types.Monthly:return Object(r.jsxs)(M.a,{horizontalAlign:"center",verticalAlign:"center",children:[Object(r.jsx)(Zt.a,{children:"Occurs on: "}),Object(r.jsx)(U.a,{variant:"medium",children:"".concat(t.monthlyOn).concat(Vr(t.monthlyOn)," ").concat(t.monthlyOnType," of the month")}),Object(r.jsx)(Zt.a,{children:"Months:"}),Object(r.jsx)(M.a,{horizontal:!0,horizontalAlign:"center",wrap:!0,tokens:{childrenGap:4},children:t.monthlyMonths.map((function(e){return Object(r.jsx)(Qe,{className:n.month,children:Object(r.jsx)(U.a,{variant:"medium",children:Gr[e]})})}))})]});default:return null}}(t)})]})]})},Kr=function(e){var t,n,s,c,i,o,d,p,j,f,b=e.id,m=e.editing,h=e.setEditing,O=e.setRules,x=Hr(),v=Object(a.useContext)(g),w=On(b&&Dr.taskRulePath(b),null,null),S=Object(l.a)(w,1)[0],C=Object(a.useContext)(vn),T=Object(a.useState)({}),P=Object(l.a)(T,2),D=P[0],N=P[1],R=On(Ie.baseUrl,{params:{teams:v.user.teams.map((function(e){return e.id}))}},[],[],(function(e){return e.map((function(e){return{key:e.id,data:e}}))})),I=Object(l.a)(R,1)[0],E=On(or.baseUrl,null,[],[],(function(e){return e.map((function(e){return{key:e.id,data:e}}))})),F=Object(l.a)(E,1)[0],z=Object(a.useCallback)(Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)({},D),D.users&&(t.users=D.users.map((function(e){return e.id}))),D.flows&&(t.flows=D.flows.map((function(e){return e.id}))),e.next=5,Dr.updateTaskRule(S.id,t);case 5:n=e.sent,O((function(e){return e.map((function(e){return e.id===n.id?n:e}))})),C.setOpen(!1),h(!1);case 9:case"end":return e.stop()}}),e)}))),[S,D]),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e[0].target.value};return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];N((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(Et.a)({},e,t(r)))}))}},W=Object(a.useCallback)((function(){return Object(r.jsxs)(r.Fragment,{children:[m?Object(r.jsx)(ut.a,{onClick:z,children:"Save"}):Object(r.jsx)(ut.a,{onClick:function(){return h(!0)},children:"Edit"}),Object(r.jsx)(A.a,{style:{marginLeft:"8px"},onClick:function(){h(!1),C.setOpen(!1)},children:"Close"})]})}),[C,m,z]);return Object(a.useEffect)((function(){C.isPanel&&C.setOnRenderFooter((function(){return W}))}),[C,W]),S&&Object(r.jsxs)(M.a,{className:x.root,verticalAlign:"start",children:[Object(r.jsx)(V.a,{className:x.separator,children:"General"}),Object(r.jsx)(Je.a,{borderless:!m,label:"Title",readOnly:!m,value:null!==(t=D.title)&&void 0!==t?t:S.title,onChange:L("title")}),Object(r.jsx)(Je.a,{autoAdjustHeight:!0,borderless:!m,className:x.description,label:"Description",multiline:!0,readOnly:!m,resizable:!1,value:null!==(n=null!==(s=D.description)&&void 0!==s?s:S.description)&&void 0!==n?n:"-",onChange:L("description")}),Object(r.jsx)(Ct.a,{label:"Start time",options:be.a.timeOptions,selectedKey:gn.getNearestTime(D.taskStartTime?new Date(D.taskStartTime):new Date(S.taskStartTime)),autoComplete:"on",disabled:!m,onChange:L("taskStartTime",(function(e){var t=gn.getHoursFromText(e[1].text),n=new Date;return n.setHours(t.h),n.setMinutes(t.m),n})),calloutProps:{calloutMaxHeight:400},useComboBoxAsMenuWidth:!0}),m?Object(r.jsx)(kn.a,{label:"Duration",labelPosition:wn.a.top,value:null!==(c=D.taskDuration)&&void 0!==c?c:S.taskDuration,onChange:L("taskDuration",(function(e){return Number.isNaN(+e[0].target.value)?0:+e[0].target.value})),onIncrement:function(e){return N((function(t){return Object(u.a)(Object(u.a)({},t),{},{taskDuration:+e+10})}))},onDecrement:function(e){e>10&&N((function(t){return Object(u.a)(Object(u.a)({},t),{},{taskDuration:+e-10})}))},type:"number",min:0,max:1440,step:10}):Object(r.jsx)(Je.a,{borderless:!m,label:"Duration",readOnly:!m,value:null!==(i=D.taskDuration)&&void 0!==i?i:S.taskDuration,onChange:L("taskDuration"),min:"1",max:"1440",type:"number"}),Object(r.jsx)(ln.a,{borderless:!m,value:null!==(o=D.validFrom)&&void 0!==o?o:new Date(S.validFrom),disabled:!m,label:"Valid from",onSelectDate:L("validFrom",(function(e){return gn.makeUTC(e[0])}))}),Object(r.jsx)(ln.a,{borderless:!m,value:null!==(d=D.validTo)&&void 0!==d?d:S.validTo&&new Date(S.validTo),disabled:!m,onSelectDate:L("validTo",(function(e){return gn.makeUTC(e[0])})),label:"Valid to",allowTextInput:!0}),Object(r.jsx)(qr,{rule:S}),Object(r.jsx)(V.a,{className:x.separator,children:"Assigned"}),Object(r.jsxs)(M.a,{horizontal:!0,horizontalAlign:"stretch",verticalAlign:"stretch",children:[Object(r.jsx)(Q.a,{className:x.userColumn,grow:1,children:Object(r.jsxs)(M.a,{horizontalAlign:"center",children:[Object(r.jsx)(Zt.a,{children:"Users"}),m?Object(r.jsx)(Ur,{style:{width:"90%"},options:I,onSelect:function(e){return N((function(t){return t.users?Object(u.a)(Object(u.a)({},t),{},{users:t.users.concat(e.data)}):Object(u.a)(Object(u.a)({},t),{},{users:S.users.concat(e.data)})}))},onRemove:function(e){return N((function(t){return t.users?Object(u.a)(Object(u.a)({},t),{},{users:t.users.filter((function(t){return t.id!==e.data.id}))}):Object(u.a)(Object(u.a)({},t),{},{users:S.users.filter((function(t){return t.id!==e.data.id}))})}))},selected:D.users?D.users.map((function(e){return{key:e.id,data:e}})):S.users.map((function(e){return{key:e.id,data:e}}))}):null===(p=S.users)||void 0===p?void 0:p.map((function(e){return Object(r.jsx)(Q.a,{align:"start",children:Object(r.jsx)(H.a,{text:e.username,size:B.c.size24})},e.id)}))]})}),Object(r.jsx)(V.a,{vertical:!0}),Object(r.jsx)(Q.a,{className:x.userColumn,grow:1,children:Object(r.jsxs)(M.a,{horizontalAlign:"center",children:[Object(r.jsx)(Zt.a,{children:"Flows"}),m?Object(r.jsx)(Sr,{style:{width:"90%"},options:F,showCheckboxes:!0,showDeleteIcon:!1,onSelect:function(e){return N((function(t){return t.flows?Object(u.a)(Object(u.a)({},t),{},{flows:t.flows.concat(e.data)}):Object(u.a)(Object(u.a)({},t),{},{flows:S.flows.concat(e.data)})}))},onRemove:function(e){return N((function(t){return t.flows?Object(u.a)(Object(u.a)({},t),{},{flows:t.flows.filter((function(t){return t.id!==e.data.id}))}):Object(u.a)(Object(u.a)({},t),{},{flows:S.flows.filter((function(t){return t.id!==e.data.id}))})}))},selected:D.flows?D.flows.map((function(e){return{key:e.id,data:e}})):S.flows.map((function(e){return{key:e.id,data:e}}))}):S.flows.map((function(e){var t;return Object(r.jsx)(Qe,{style:{backgroundColor:null!==(t=e.color)&&void 0!==t?t:"transparent",padding:3,whiteSpace:"pre-wrap",width:"50%",marginLeft:32,marginTop:4},children:Object(r.jsx)(U.a,{variant:"medium",children:e.name})})}))]})})]}),Object(r.jsx)(V.a,{className:x.separator,children:"Flags"}),Object(r.jsx)(we.a,{checked:null!==(j=D.isBackgroundTask)&&void 0!==j?j:S.isBackgroundTask,label:"Background",disabled:!m,onChange:L("isBackgroundTask",(function(e){return e[0].target.checked}))}),Object(r.jsx)(we.a,{checked:S.isSharedTask,label:"Shared",disabled:!0}),Object(r.jsx)(V.a,{className:x.separator,children:"Created"}),Object(r.jsxs)(M.a,{horizontalAlign:"center",children:[Object(r.jsx)(U.a,{variant:"medium",children:null===(f=S.createdUser)||void 0===f?void 0:f.username}),Object(r.jsx)(U.a,{variant:"medium",children:new Date(S.createdDate).toLocaleString()})]})]})},Yr=function(){var e=On(Dr.baseUrl),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({count:0,items:[]}),i=Object(l.a)(c,2),o=i[0],u=i[1],d=yn(Mr,{headerText:"Create new rule",onRenderFooterContent:function(){return Object(r.jsx)(ut.a,{text:"Create",type:"submit",form:"add-task-rule-form"})}},{setRules:s}),p=Object(a.useState)(!1),j=Object(l.a)(p,2),f=j[0],b=j[1],m=yn(Kr,{headerText:"Rule Details",isLightDismiss:!f,type:je.a.medium,isFooterAtBottom:!0,onDismiss:function(e,t){return function(){b(!1),t(!1)}}},{id:o.items.length>0?o.items[0].id:null,editing:f,setEditing:b,setRules:s}),h=Object(a.useState)({key:"createdDate",name:" Created on",fieldName:"createdDate",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"People",minWidth:100,maxWidth:300,isSorted:!0,isSortedDescending:!0}),O=Object(l.a)(h,1)[0],x=Object(a.useState)([{key:"title",name:" Title",fieldName:"title",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"FileTemplate",minWidth:100,maxWidth:300},{key:"type",name:" Type",fieldName:"type",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"",minWidth:100,maxWidth:300},{key:"users",name:" Users",fieldName:"users",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"People",minWidth:300,maxWidth:400,onRender:function(e){return e.users.map((function(e){return e.username})).join(", ")},sort:function(e,t){var n,r,a,s;return(null===(n=e.users[0])||void 0===n||null===(r=n.username)||void 0===r?void 0:r.toLowerCase())<(null===(a=t.users[0])||void 0===a||null===(s=a.username)||void 0===s?void 0:s.toLowerCase())?-1:1},filterValueAccessor:function(e){return e.users.map((function(e){return e.username})).join(" ")}},{key:"createdDate",name:" Created on",fieldName:"createdDate",isSortable:!0,isFilterable:!0,isResizable:!0,iconName:"People",minWidth:100,maxWidth:300,onRender:function(e){return Object(r.jsx)("div",{children:new Date(e.createdDate).toLocaleString()})}}]),g=Object(l.a)(x,1)[0];return Object(r.jsxs)(Ce.Container,{fluid:!0,children:[Object(r.jsx)(Ve.a,{text:"Rules"}),Object(r.jsx)(V.a,{}),Object(r.jsx)(Ce.Row,{children:Object(r.jsx)(Ce.Col,{xs:12,children:Object(r.jsx)(St.a,{commandItems:[{key:"createItem",text:"Create",iconProps:{iconName:"BoxAdditionSolid"},onClick:function(){d.setOpen(!0)}}],tableProps:{items:n,columns:g,setSelectionDetails:u,selectionMode:Se.b.single,onItemInvoked:function(){return m.setOpen(!0)},layoutMode:kt.e.justified,sortedCol:O}})})}),d.render,m.render]})},Qr=function(){var e=Object(h.i)().path;return Object(r.jsx)(Ce.Container,{fluid:!0,children:Object(r.jsxs)(h.d,{children:[Object(r.jsx)(h.b,{exact:!0,path:"".concat(e),children:Object(r.jsx)(Ne,{code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Task Dashboard",children:Object(r.jsx)(sr,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/planning"),children:Object(r.jsx)(Ne,{code:be.a.securities.TASK_PLANNING.code,grant:be.a.securities.TASK_PLANNING.grants.read,to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Planning",children:Object(r.jsx)(Pr,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/task-rules"),children:Object(r.jsx)(Ne,{code:be.a.securities.TASK_RULE.code,grant:be.a.securities.TASK_RULE.grants.read,to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Task Rules",children:Object(r.jsx)(Yr,{})})})}),Object(r.jsx)(h.b,{path:"".concat(e,"/task-flows"),children:Object(r.jsx)(Ne,{code:be.a.securities.TASK_FLOW.code,grant:be.a.securities.TASK_FLOW.grants.read,to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Flows",children:Object(r.jsx)(dr,{})})})}),Object(r.jsx)(h.b,{exact:!0,path:"".concat(e,"/:id"),children:Object(r.jsx)(Ne,{code:be.a.securities.TASK.code,grant:be.a.securities.TASK.grants.read,to:"/",failureNotification:{header:"No Access",content:"No permission to access this page. Please contact your administrator."},children:Object(r.jsx)(b.a,{title:"Task",children:Object(r.jsx)("div",{children:"Task"})})})})]})})},Jr=function(){var e=Object(a.useContext)(g);return Object(a.useEffect)((function(){function t(){return(t=Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=5;break}return t.next=3,tr.connectSSE();case 3:(n=t.sent).addEventListener("init",(function(t){e.setContext((function(e){return Object(u.a)(Object(u.a)({},e),{},{connectionId:JSON.parse(t.data)[0],connection:n})}))}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.user]),null},Zr=s.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,435))})),Xr=function(){var e=Object(a.useState)({user:null,Authorize:T.Authorize,setContext:null,userPreferences:{theme:te()}}),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useContext)(g),i=n.userPreferences.theme;return Object(a.useEffect)((function(){s((function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},c),e),{},{setContext:s})}))}),[c]),Object(r.jsx)(g.Provider,{value:n,children:Object(r.jsxs)(d.a,{applyTo:"body",theme:i,children:[Object(r.jsx)(Jr,{}),Object(r.jsx)(mn.a,{timeout:1e4}),Object(r.jsxs)(m.a,{children:[Object(r.jsx)(D,{ctx:n,setCtx:s}),Object(r.jsx)(N,{}),Object(r.jsx)(ve,{}),Object(r.jsx)(fn,{}),Object(r.jsx)(p.a,{keytipStartSequences:[{key:"a",modifierKeys:[j.a.alt]}]}),Object(r.jsx)(h.d,{children:Object(r.jsxs)("div",{style:{marginTop:"40px"},children:[Object(r.jsx)(h.b,{path:"/appraisals",children:Object(r.jsx)(b.a,{title:"Appraisals",children:Object(r.jsx)(vt,{ctx:n,setCtx:s})})}),Object(r.jsx)(h.b,{path:"/audits",children:Object(r.jsx)(b.a,{title:"Audits",children:Object(r.jsx)("h1",{children:"IN PROGRESS"})})}),Object(r.jsx)(h.b,{path:"/reporting",children:Object(r.jsx)(b.a,{title:"Reporting",children:Object(r.jsx)(jn,{ctx:n,setCtx:s})})}),Object(r.jsx)(h.b,{path:"/settings",children:Object(r.jsx)(b.a,{title:"Settings",children:Object(r.jsx)(Vt,{})})}),Object(r.jsx)(h.b,{path:"/tasks",children:Object(r.jsx)(b.a,{title:"Tasks",children:Object(r.jsx)(Qr,{})})}),Object(r.jsx)(h.b,{path:"/login",children:Object(r.jsx)(b.a,{title:"Sign in",children:Object(r.jsx)(bn,{ctx:n,setCtx:s})})}),Object(r.jsx)(h.b,{exact:!0,path:"/",children:Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:Object(r.jsx)(Zr,{ctx:n,setCtx:s})})})]})})]})]})})};n(268);Object(o.a)(),i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(Xr,{})}),document.getElementById("root"))},270:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(3),s=n.n(a),c=n(6),i=n(4),o=n(100),u=n(287),l=n(37),d=n(29),p=n(0),j=n(7),f=n(31),b=n(67),m=n(86),h=n(22),O=n(5),x=n(149),g=n(193),v=n(360),y=n(181),k=n(388),w=n(46),S=n(192),C=n(377),T=n(76),A=n(87).a,P=Object(x.a)((function(){return{root:{"& > * + *":{marginTop:"16px"}}}})),D=function(e){var t=e.isOpen,n=e.setOpen,a=P(),o=Object(p.useState)(""),l=Object(i.a)(o,2),d=l[0],b=l[1],m=Object(p.useState)(""),x=Object(i.a)(m,2),D=x[0],N=x[1],R=Object(p.useState)(null),I=Object(i.a)(R,2),E=I[0],F=I[1],U=Object(p.useState)(""),z=Object(i.a)(U,2),L=z[0],W=z[1],M=Object(p.useState)({aggregation:!0,sample:!1}),H=Object(i.a)(M,2),B=H[0],G=H[1],V=function(e){return function(t){t&&t.target&&e&&e(t.target.value)}},q=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("aggregation",d),t.append("name",D),t.append("template",E),e.next=6,f.a.generateTemplate(t);case 6:return n=e.sent,e.next=9,Object(T.downloadBlob)(E.name,n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.getSample(d);case 2:(t=e.sent)&&t.data&&(W(JSON.stringify(t.data,null,4)),G({aggregation:!1,sample:!0}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("aggregation",d),t.append("name",D),t.append("template",E),e.next=6,f.a.createTemplate(t);case 6:n(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(k.a,{isOpen:t,onDismiss:function(){return n(!1)},headerText:"Create template",type:w.a.large,onRenderFooterContent:function(){return Object(r.jsxs)(g.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:[Object(r.jsx)(v.a,{type:"submit",form:"new-template-form",children:"Create"}),Object(r.jsx)(y.a,{onClick:K,children:"Sample"}),Object(r.jsx)(y.a,{onClick:q,children:"Generate"}),Object(r.jsx)(y.a,{onClick:function(){return n(!1)},children:"Cancel"})]})},children:Object(r.jsx)("form",{id:"new-template-form",onSubmit:Y,children:Object(r.jsxs)(j.Container,{fluid:!0,className:a.root,children:[Object(r.jsx)(u.a,{children:"Aggregation"}),Object(r.jsx)(j.Row,{justify:"center",children:Object(r.jsxs)(S.a,{variant:"mediumPlus",children:["Create a valid MongoDB aggregation. Test and verify if it returns valid info below. For more info, refer to MongoDB"," ",Object(r.jsx)("a",{href:"https://docs.mongodb.com/manual/aggregation/",target:"_blank",rel:"noopener noreferrer",children:"documentation"}),"."]})}),Object(r.jsx)(A,{items:[{key:"aggregation",text:"Aggregation",isOpen:B.aggregation,render:function(){return Object(r.jsx)(j.Row,{children:Object(r.jsx)(j.Col,{xs:12,children:Object(r.jsx)(C.a,{multiline:!0,value:d,onChange:V(b),autoAdjustHeight:!0,required:!0})})})}},{key:"sample",text:"Sample Data",isOpen:B.sample,render:function(){return Object(r.jsx)(j.Row,{children:Object(r.jsx)(j.Col,{xs:12,children:Object(r.jsx)(C.a,{multiline:!0,readOnly:!0,value:L,autoAdjustHeight:!0})})})}}],onRenderItem:function(e){return e.render()},onToggle:function(e,t,n){return G((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(h.a)({},t.key,n))}))}}),Object(r.jsx)(u.a,{children:"Template"}),Object(r.jsx)(j.Row,{justify:"center",children:Object(r.jsxs)(S.a,{variant:"mediumPlus",children:["Specify your template name, then attach your template file."," ","(Ex: All user info, or Items per user)."]})}),Object(r.jsx)(j.Row,{children:Object(r.jsxs)(j.Col,{xs:12,children:[Object(r.jsx)(C.a,{label:"Template name",value:D,onChange:V(N),required:!0}),Object(r.jsx)(C.a,{styles:{fieldGroup:{padding:"8px",height:"auto"}},onChange:function(e){if(e&&e.target){var t=e.target.files;t.length>0?F(t[0]):F(null)}},type:"file",label:"Template file",required:!0})]})})]})})})},N=n(177),R=Object(x.a)((function(){return{root:{"& > * + *":{marginTop:"16px"}}}})),I=function(e){var t=e.id,n=e.isOpen,a=e.setOpen,o=e.setEdit,l=R(),d=Object(p.useState)(null),b=Object(i.a)(d,2),m=b[0],h=b[1];Object(p.useEffect)((function(){var e=!0;function n(){return(n=Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.getTemplate(t);case 2:r=n.sent,e&&h(r);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return t&&function(){n.apply(this,arguments)}(),function(){e=!1}}),[t]);var O=function(){o(!0),a(!1)};return Object(r.jsx)(k.a,{isOpen:n,onDismiss:function(){return a(!1)},headerText:"Details - ".concat(m?m.name:""),type:w.a.large,onRenderFooterContent:function(){return Object(r.jsxs)(g.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:[Object(r.jsx)(v.a,{onClick:O,children:"Edit"}),Object(r.jsx)(y.a,{onClick:function(){return a(!1)},children:"Close"})]})},isLightDismiss:!0,children:Object(r.jsxs)(j.Container,{fluid:!0,className:l.root,children:[Object(r.jsx)(u.a,{children:"General"}),m&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.Row,{justify:"start",children:Object(r.jsxs)(j.Col,{xs:12,sm:8,md:4,children:[Object(r.jsx)(C.a,{label:"Name: ",value:m&&m.name,readOnly:!0,underlined:!0}),Object(r.jsx)(C.a,{label:"Created by: ",value:m&&m.createdUser&&m.createdUser.username,readOnly:!0,underlined:!0}),Object(r.jsx)(C.a,{label:"Created on: ",value:m&&new Date(m.createdDate).toLocaleString(),readOnly:!0,underlined:!0}),m.modifiedUser&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C.a,{label:"Modified by: ",value:m.modifiedUser.username,readOnly:!0,underlined:!0}),Object(r.jsx)(C.a,{label:"Modified on: ",value:m.modifiedDate&&new Date(m.modifiedDate).toLocaleString(),readOnly:!0,underlined:!0})]})]})}),Object(r.jsx)(u.a,{children:"Details"}),Object(r.jsxs)(j.Row,{justify:"start",children:[Object(r.jsx)(j.Col,{xs:12,sm:8,md:4,children:Object(r.jsx)(C.a,{label:"Filename: ",value:m.filename,readOnly:!0,underlined:!0})}),Object(r.jsx)(j.Col,{xs:12,sm:8,md:4,children:Object(r.jsx)(N.a,{iconProps:{iconName:"DownloadDocument"},text:"Download template",onClick:function(){f.a.downloadTemplate(t,m.filename||"template")}})})]}),Object(r.jsx)(j.Row,{justify:"start",children:Object(r.jsx)(j.Col,{xs:12,sm:8,md:6,children:Object(r.jsx)(C.a,{readOnly:!0,multiline:!0,autoAdjustHeight:!0,value:m.aggregation||"",label:"Aggregation"})})})]})]})})},E=Object(x.a)((function(){return{root:{"& > * + *":{marginTop:"16px"}}}})),F=function(e){var t=e.id,n=e.isOpen,a=e.updateTemplates,l=e.setOpen,d=E(),b=Object(p.useState)({}),m=Object(i.a)(b,2),x=m[0],S=m[1],T=Object(p.useState)({}),A=Object(i.a)(T,2),P=A[0],D=A[1],R=Object(p.useState)(null),I=Object(i.a)(R,2),F=I[0],U=I[1];Object(p.useEffect)((function(){var e=!0;function n(){return(n=Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.getTemplate(t);case 2:r=n.sent,e&&(S(r),D({name:r.name,filename:r.filename,aggregation:r.aggregation}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return t&&function(){n.apply(this,arguments)}(),function(){e=!1}}),[t]);var z=function(e){return function(t){t&&t.target&&D((function(n){return Object(O.a)(Object(O.a)({},n),{},Object(h.a)({},e,t.target.value))}))}},L=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("aggregation",P.aggregation),t.append("name",P.name),t.append("filename",P.filename),F&&t.append("template",F),e.next=7,f.a.updateTemplate(x.id,t);case 7:n=e.sent,S(n),a(n),l(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e,t,n){return function(a){return Object(r.jsxs)("label",{style:{lineHeight:"2em",fontWeight:600},htmlFor:t,id:e,children:[Object(r.jsx)(o.a,{iconName:n})," ",a.label]})}};return Object(r.jsx)(k.a,{isOpen:n,onDismiss:function(){return l(!1)},headerText:"Edit - ".concat(x?x.name:""),type:w.a.large,onRenderFooterContent:function(){return Object(r.jsxs)(g.a,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:10},children:[Object(r.jsx)(v.a,{onClick:L,children:"Update"}),Object(r.jsx)(y.a,{onClick:function(){return l(!1)},children:"Close"})]})},children:Object(r.jsxs)(j.Container,{fluid:!0,className:d.root,children:[Object(r.jsx)(u.a,{children:"General"}),x&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.Row,{justify:"start",children:Object(r.jsxs)(j.Col,{xs:12,sm:8,md:4,children:[Object(r.jsx)(C.a,{onRenderLabel:W("label-aggregation-edit","aggregation-edit","Edit"),label:"Name: ",value:P&&P.name,onChange:z("name"),underlined:!0}),Object(r.jsx)(C.a,{label:"Created by: ",value:x&&x.createdUser&&x.createdUser.username,readOnly:!0,underlined:!0,tabIndex:-1}),Object(r.jsx)(C.a,{label:"Created on: ",value:x&&new Date(x.createdDate).toLocaleString(),readOnly:!0,underlined:!0,tabIndex:-1}),x.modifiedUser&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C.a,{label:"Modified by: ",value:x.modifiedUser.username,readOnly:!0,underlined:!0,tabIndex:-1}),Object(r.jsx)(C.a,{label:"Modified on: ",value:x.modifiedDate&&new Date(x.modifiedDate).toLocaleString(),readOnly:!0,underlined:!0,tabIndex:-1})]})]})}),Object(r.jsx)(u.a,{children:"Details"}),Object(r.jsxs)(j.Row,{justify:"start",children:[Object(r.jsx)(j.Col,{xs:12,sm:8,md:4,children:Object(r.jsx)(C.a,{onRenderLabel:W("label-aggregation-edit","aggregation-edit","Edit"),label:"Filename: ",value:P.filename,onChange:z("filename"),underlined:!0})}),Object(r.jsx)(j.Col,{xs:12,sm:8,md:4,children:Object(r.jsx)(N.a,{iconProps:{iconName:"DownloadDocument"},text:"Download template",onClick:function(){f.a.downloadTemplate(t,x.filename||"template")}})})]}),Object(r.jsx)(j.Row,{justify:"start",children:Object(r.jsx)(j.Col,{xs:12,sm:8,md:4,children:Object(r.jsx)(C.a,{styles:{fieldGroup:{padding:"8px",height:"auto"}},onChange:function(e){if(e&&e.target){var t=e.target.files;t.length>0?(U(t[0]),D((function(e){return Object(O.a)(Object(O.a)({},e),{},{filename:t[0].name})}))):U(null)}},type:"file",label:"Template file"})})}),Object(r.jsx)(j.Row,{justify:"start",children:Object(r.jsx)(j.Col,{xs:12,sm:8,md:6,children:Object(r.jsx)(C.a,{onRenderLabel:W("label-aggregation-edit","aggregation-edit","Edit"),multiline:!0,autoAdjustHeight:!0,value:P.aggregation||"",onChange:z("aggregation"),label:"Aggregation","aria-labelledby":"label-aggregation-edit",id:"aggregation-edit"})})})]})]})})},U=function(e){var t=e.item;if(t.filename){var n,a=t.filename.split(".");switch(a[a.length-1]){case"xlsx":n="ExcelLogo";break;case"docx":n="WordLogo";break;default:n="FileBug"}return Object(r.jsx)("div",{style:{textAlign:"center"},children:Object(r.jsx)(o.a,{styles:{root:{fontSize:"1.3em"}},iconName:n})})}return null};t.default=function(){var e=Object(p.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(p.useState)(!1),h=Object(i.a)(o,2),O=h[0],x=h[1],g=Object(p.useState)(!1),v=Object(i.a)(g,2),y=v[0],k=v[1],w=Object(p.useState)(!1),S=Object(i.a)(w,2),C=S[0],T=S[1],A=Object(p.useState)({count:0,items:[]}),P=Object(i.a)(A,2),N=P[0],R=P[1],E=Object(p.useState)([{key:"type",name:" Type",fieldName:"name",iconName:"ToDoLogoBottom",minWidth:70,maxWidth:70,onRender:function(e){return Object(r.jsx)(U,{item:e})}},{key:"name",name:" Name",fieldName:"name",isSortable:!0,isFilterable:!0,iconName:"FileTemplate",minWidth:100,maxWidth:300},{key:"filename",name:" Filename",fieldName:"filename",isSortable:!0,isFilterable:!0,iconName:"FileBug",minWidth:100,maxWidth:200},{key:"createdby",name:" Created by",isSortable:!0,isFilterable:!0,iconName:"Contact",minWidth:100,maxWidth:300,sort:function(e,t){return e.createdUser.username<t.createdUser.username?-1:1},onRender:function(e){return e.createdUser.username}},{key:"createdon",name:" Created on",fieldName:"createdDate",isSortable:!0,isFilterable:!0,iconName:"DateTime",minWidth:200,maxWidth:300,onRender:function(e){return new Date(e.createdDate).toLocaleString()}}]),z=Object(i.a)(E,1)[0],L=Object(p.useState)({key:"createdon",name:" Created on",fieldName:"createdDate",isSorted:!0,isSortedDescending:!0,isSortable:!0,isFilterable:!0,iconName:"DateTime",minWidth:200,maxWidth:300,onRender:function(e){return new Date(e.createdDate).toLocaleString()}}),W=Object(i.a)(L,1)[0];return Object(p.useEffect)((function(){var e=!0;function t(){return(t=Object(c.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.getTemplates();case 2:n=t.sent,e&&a(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[]),Object(r.jsxs)(j.Container,{fluid:!0,children:[Object(r.jsx)(m.a,{text:"Templates"}),Object(r.jsx)(u.a,{}),Object(r.jsx)(j.Row,{children:Object(r.jsx)(j.Col,{xs:12,children:Object(r.jsx)(b.a,{commandItems:[{key:"createItem",text:"Create",iconProps:{iconName:"BoxAdditionSolid"},onClick:function(){return x(!0)}},{key:"details",text:"Details",disabled:0===N.count,iconProps:{iconName:"ProfileSearch"},onClick:function(){return k(!0)}},{key:"editItem",text:"Edit",disabled:0===N.count,iconProps:{iconName:"Edit"},onClick:function(){return T(!0)}}],tableProps:{items:n,columns:z,setSelectionDetails:R,selectionMode:l.b.single,onItemInvoked:function(){return k(!0)},layoutMode:d.e.justified,sortedCol:W}})})}),Object(r.jsx)(D,{isOpen:O,setOpen:x}),Object(r.jsx)(I,{isOpen:y,setOpen:k,id:N.items.length>0?N.items[0].id:"",setEdit:T}),Object(r.jsx)(F,{isOpen:C,setOpen:T,updateTemplates:function(e){return a((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))},id:N.items.length>0?N.items[0].id:""})]})}},31:function(e,t,n){"use strict";var r=n(3),a=n.n(r),s=n(6),c=n(13),i=n.n(c),o=n(76),u=n(11),l={templatesPath:"/api/reporting/templates",templatePath:function(e){return"/api/reporting/templates/".concat(e)},templateDownloadPath:function(e){return"/api/reporting/templates/".concat(e,"/download")},templateParametersPath:function(e){return"/api/reporting/templates/".concat(e,"/parameters")},generateTemplatePath:"/api/reporting/templates/generate",templateSamplePath:"/api/reporting/templates/sample",getTemplates:function(){var e=this;return Object(s.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get(e.templatesPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),u.a.notifyError(t.t0.response&&t.t0.response.data&&t.t0.response.data.error),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getTemplate:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.get(t.templatePath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},createTemplate:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post(t.templatesPath,e,{headers:{"Content-Type":"multipart/form-data"}});case 3:if(200!==(r=n.sent).status){n.next=7;break}return u.a.notifySuccess("Tempalte successfully created"),n.abrupt("return",r.data);case 7:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 10:throw n.prev=10,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},updateTemplate:function(e,t){var n=this;return Object(s.a)(a.a.mark((function r(){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.put(n.templatePath(e),t,{headers:{"Content-Type":"multipart/form-data"}});case 3:if(200!==(s=r.sent).status){r.next=6;break}return r.abrupt("return",s.data);case 6:throw new Error("Server response: ".concat(s.status," - ").concat(s.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data&&r.t0.response.data.error),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},downloadTemplate:function(e,t){var n=this;return Object(s.a)(a.a.mark((function r(){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.post(n.templateDownloadPath(e),null,{responseType:"blob"});case 3:if(200!==(s=r.sent).status){r.next=7;break}return r.next=7,Object(o.downloadBlob)(t,s.data);case 7:r.next=13;break;case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data&&r.t0.response.data.error),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},getTempalteParameters:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.get(t.templateParametersPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},generateTemplate:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post(t.generateTemplatePath,e,{headers:{"Content-Type":"multipart/form-data"},responseType:"blob"});case 3:if(200!==(r=n.sent).status){n.next=7;break}return u.a.notifySuccess("Tempalte successfully generated"),n.abrupt("return",r.data);case 7:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 10:throw n.prev=10,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},getSample:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post(t.templateSamplePath,{aggregation:e});case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},appraisalReportPath:"/api/reporting/reports/appraisal-report",reportPath:function(e){return"/api/reporting/reports/".concat(e)},postReportGeneratePath:function(e){return"/api/reporting/reports/".concat(e,"/generate")},reportsPath:"/api/reporting/reports",generateAppraisalReport:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post(t.appraisalReportPath,e,{responseType:"blob"});case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:if(204!==r.status){n.next=9;break}return u.a.notifyError("No data available for this filter"),n.abrupt("return",null);case 9:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 12:return n.prev=12,n.t0=n.catch(0),n.t0.response&&400===n.t0.response.status?u.a.notifyError("Invalid filters provided"):u.a.notifyError(n.t0.message),n.abrupt("return",null);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))()},getReports:function(){var e=this;return Object(s.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get(e.reportsPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),u.a.notifyError(t.t0.response&&t.t0.response.data&&t.t0.response.data.error),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getReport:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.get(t.reportPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},addReport:function(e){var t=this;return Object(s.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post(t.reportsPath,e,{headers:{"Content-Type":"multipart/form-data"}});case 3:return r=n.sent,n.abrupt("return",r.data);case 7:throw n.prev=7,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data&&n.t0.response.data.error),n.t0;case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},updateReport:function(e,t){var n=this;return Object(s.a)(a.a.mark((function r(){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.put(n.reportPath(e),t);case 3:return s=r.sent,r.abrupt("return",s.data);case 7:throw r.prev=7,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data&&r.t0.response.data.error),r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},generateReport:function(e,t){var n=this;return Object(s.a)(a.a.mark((function r(){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.post(n.postReportGeneratePath(e),t,{responseType:"blob"});case 3:if(200!==(s=r.sent).status){r.next=6;break}return r.abrupt("return",s.data);case 6:throw new Error("Server response: ".concat(s.status," - ").concat(s.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data&&r.t0.response.data.error),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()}};t.a=l},32:function(e,t,n){"use strict";var r=n(5),a=n(3),s=n.n(a),c=n(6),i=n(13),o=n.n(i),u=n(11),l=n(16);function d(e){this.id=e.id?e.id:0,this.type=e.type,this.status=e.status?e.status:"Active",this.content=e.content?e.content:"",this.periodId=e.periodId,this.organizationId=e.organizationId?e.organizationId:null,this.user=e.user,this.modifiedUser=e.modifiedUser?e.modifiedUser:null,this.modifiedDate=e.modifiedDate?e.modifiedDate:null,this.createdUser=e.createdUser?e.createdUser:e.user,this.createdDate=e.createdDate?e.createdDate:new Date}var p={getPeriodsPath:"/api/periods",addPeriodsPath:"/api/periods",periodPath:function(e){return"/api/periods/".concat(e)},periodFinishPath:function(e){return"/api/periods/".concat(e,"/finish")},getItemsPath:function(e){return"/api/periods/".concat(e)},getUserItemsPath:function(e,t){return"/api/periods/".concat(e,"/users/").concat(t)},toggleLockPeriodPath:function(e,t){return"/api/periods/".concat(e,"/users/").concat(t,"/toggle-lock")},getItemPath:function(e,t){return"/api/periods/".concat(e,"/items/").concat(t)},getOrphansPath:"/api/appraisal-items",addItemPath:"/api/appraisal-items",updateItemPath:function(e){return"/api/appraisal-items/".concat(e)},deleteItemPath:function(e){return"/api/appraisal-items/".concat(e)},addItemToPeriodPath:function(e){return"/api/periods/".concat(e,"/items")},addUserItemPath:function(e,t){return"/api/periods/".concat(e,"/users/").concat(t,"/items")},updateItemInPeriodPath:function(e,t){return"/api/periods/".concat(e,"/items/").concat(t)},updateUserItemPath:function(e,t,n){return"/api/periods/".concat(e,"/users/").concat(t,"/items/").concat(n)},deleteItemFromPeriodPath:function(e,t){return"/api/periods/".concat(e,"/items/").concat(t)},deleteUserItemPath:function(e,t,n){return"/api/periods/".concat(e,"/users/").concat(t,"/items/").concat(n)},updateItemTypePath:function(e,t){return"/api/periods/".concat(e,"/items/").concat(t,"/change-type")},updateUserItemTypePath:function(e,t,n){return"/api/periods/".concat(e,"/users/").concat(t,"/items/").concat(n,"/change-type")},getPeriods:function(){var e=this;return Object(c.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get(e.getPeriodsPath);case 3:if(200!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.data);case 6:throw new Error("Server response: ".concat(n.status," - ").concat(n.statusText));case 9:throw t.prev=9,t.t0=t.catch(0),u.a.notifyError(t.t0.response&&t.t0.response.data.error||t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getItems:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.get(t.getItemsPath(e));case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},getOrphans:function(){var e=arguments,t=this;return Object(c.a)(s.a.mark((function n(){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,n.prev=1,n.next=4,o.a.get(t.getOrphansPath,{params:{type:r}});case 4:if(200!==(a=n.sent).status){n.next=7;break}return n.abrupt("return",a.data);case 7:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 10:throw n.prev=10,n.t0=n.catch(1),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getUserItems:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.get(n.getUserItemsPath(e,t));case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},getItem:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.get(n.getItemPath(e,t));case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addItem:function(e,t){var n=this;return Object(c.a)(s.a.mark((function a(){var c,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=Object(l.a)([l.e.itemContentNotNull(t),l.e.isTruthy(t.user)]),a.next=4,Object(l.d)(c);case 4:return a.next=6,o.a.post(n.addItemToPeriodPath(e),Object(r.a)({},t));case 6:if(200!==(i=a.sent).status){a.next=9;break}return a.abrupt("return",i.data);case 9:throw new Error("Server response: ".concat(i.status," - ").concat(i.statusText));case 12:throw a.prev=12,a.t0=a.catch(0),u.a.notifyError(a.t0.response&&a.t0.response.data.error||a.t0.message),a.t0;case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},addOrphan:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.post(t.addItemPath,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},addUserItem:function(e,t,n){var a=this;return Object(c.a)(s.a.mark((function c(){var i,d;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,i=Object(l.a)([l.e.itemContentNotNull(n),l.e.isTruthy(n.user)]),s.next=4,Object(l.d)(i);case 4:return s.next=6,o.a.post(a.addUserItemPath(e,t),Object(r.a)({},n));case 6:if(200!==(d=s.sent).status){s.next=9;break}return s.abrupt("return",d.data);case 9:throw new Error("Server response: ".concat(d.status," - ").concat(d.statusText));case 12:throw s.prev=12,s.t0=s.catch(0),u.a.notifyError(s.t0.response&&s.t0.response.data.error||s.t0.message),s.t0;case 16:case"end":return s.stop()}}),c,null,[[0,12]])})))()},updateItemInPeriod:function(e,t){var n=this;return Object(c.a)(s.a.mark((function a(){var c,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=Object(l.a)([l.e.itemContentNotNull(t),l.e.isTruthy(t.user),l.e.isTruthy(t.periodId)]),a.next=4,Object(l.d)(c);case 4:return a.next=6,o.a.put(n.updateItemInPeriodPath(e,t.id),Object(r.a)({},t));case 6:if(200!==(i=a.sent).status){a.next=9;break}return a.abrupt("return",i.data);case 9:throw new Error("Server response: ".concat(i.status," - ").concat(i.statusText));case 12:throw a.prev=12,a.t0=a.catch(0),u.a.notifyError(a.t0.response&&a.t0.response.data.error||a.t0.message),a.t0;case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},updateItem:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=Object(l.a)([l.e.itemContentNotNull(e),l.e.isTruthy(e.user)]),n.next=4,Object(l.d)(r);case 4:return n.next=6,o.a.put(t.updateItemPath(e.id),e);case 6:if(200!==(a=n.sent).status){n.next=9;break}return n.abrupt("return",a.data);case 9:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 12:throw n.prev=12,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))()},updateUserItem:function(e,t,n){var a=this;return Object(c.a)(s.a.mark((function c(){var i,d;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,i=Object(l.a)([l.e.itemContentNotNull(n),l.e.isTruthy(n.user)]),s.next=4,Object(l.d)(i);case 4:return s.next=6,o.a.put(a.updateUserItemPath(e,t,n.id),Object(r.a)({},n));case 6:if(200!==(d=s.sent).status){s.next=9;break}return s.abrupt("return",d.data);case 9:throw new Error("Server response: ".concat(d.status," - ").concat(d.statusText));case 12:throw s.prev=12,s.t0=s.catch(0),u.a.notifyError(s.t0.response&&s.t0.response.data.error||s.t0.message),s.t0;case 16:case"end":return s.stop()}}),c,null,[[0,12]])})))()},updateItemType:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a,c;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=Object(l.a)([l.e.itemContentNotNull(t),l.e.isTruthy(t.user)]),r.next=4,Object(l.d)(a);case 4:return r.next=6,o.a.post(n.updateItemTypePath(e,t.id),{type:t.type});case 6:if(200!==(c=r.sent).status){r.next=9;break}return r.abrupt("return",c.data);case 9:throw new Error("Server response: ".concat(c.status," - ").concat(c.statusText));case 12:throw r.prev=12,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()},updateUserItemType:function(e,t,n){var r=this;return Object(c.a)(s.a.mark((function a(){var c,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=Object(l.a)([l.e.itemContentNotNull(n),l.e.isTruthy(n.user)]),a.next=4,Object(l.d)(c);case 4:return a.next=6,o.a.post(r.updateUserItemTypePath(e,t,n.id),{type:n.type});case 6:if(200!==(i=a.sent).status){a.next=9;break}return a.abrupt("return",i.data);case 9:throw new Error("Server response: ".concat(i.status," - ").concat(i.statusText));case 12:throw a.prev=12,a.t0=a.catch(0),u.a.notifyError(a.t0.response&&a.t0.response.data.error||a.t0.message),a.t0;case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},deleteItemFromPeriod:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.delete(n.deleteItemFromPeriodPath(e,t));case 3:if(204!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deleteItem:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.delete(t.deleteItemPath(e));case 3:if(204!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},deleteUserItem:function(e,t,n){var r=this;return Object(c.a)(s.a.mark((function a(){var c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o.a.delete(r.deleteUserItemPath(e,t,n));case 3:if(204!==(c=a.sent).status){a.next=6;break}return a.abrupt("return",c.data);case 6:throw new Error("Server response: ".concat(c.status," - ").concat(c.statusText));case 9:throw a.prev=9,a.t0=a.catch(0),u.a.notifyError(a.t0.response&&a.t0.response.data.error||a.t0.message),a.t0;case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},addPeriod:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.post(t.addPeriodsPath,e);case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",r.data);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updatePeriod:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.put(n.periodPath(e),t);case 3:if(200!==(a=r.sent).status){r.next=6;break}return r.abrupt("return",a.data);case 6:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 9:throw r.prev=9,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},finishPeriod:function(e){var t=this;return Object(c.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.post(t.periodFinishPath(e),null,{timeout:2e5});case 3:if(200!==(r=n.sent).status){n.next=6;break}return n.abrupt("return",!0);case 6:throw new Error("Server response: ".concat(r.status," - ").concat(r.statusText));case 9:throw n.prev=9,n.t0=n.catch(0),u.a.notifyError(n.t0.response&&n.t0.response.data.error||n.t0.message),n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},toggleLockPeriod:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t){r.next=3;break}throw new Error("User is unknown");case 3:return r.next=5,o.a.post(n.toggleLockPeriodPath(e,t));case 5:if(200!==(a=r.sent).status){r.next=8;break}return r.abrupt("return",a.data);case 8:throw new Error("Server response: ".concat(a.status," - ").concat(a.statusText));case 11:throw r.prev=11,r.t0=r.catch(0),u.a.notifyError(r.t0.response&&r.t0.response.data.error||r.t0.message),r.t0;case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},blankItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Active";return new d({type:n,status:r,periodId:e,user:t?t.id:null})},normalizeSet:function(e,t,n,r,a){var s=n.slice().filter((function(e){return null!==e.user}));if(!t)return s;if("Feedback"===a&&n.length>0)return s;0===s.map((function(e,t){return t})).filter((function(e){return""===s[e].content})).length&&s.push(this.blankItem(e,t,a));for(var c=r-s.length;c>0;)s.push(this.blankItem(e,t,a)),c-=1;return s},addItemToSet:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.addItem(e,t);case 3:return a=r.sent,r.abrupt("return",{value:a,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{value:null,error:r.t0});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},addUserItemToSet:function(e,t,n){var r=this;return Object(c.a)(s.a.mark((function a(){var c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.addUserItem(e,t,n);case 3:return c=a.sent,a.abrupt("return",{value:c,error:null});case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",{value:null,error:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},deleteItemFromSet:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.deleteItemFromPeriod(e,t.id);case 3:return a=r.sent,r.abrupt("return",{value:a,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.next=11,n.getItem(e,t.id);case 11:return r.t1=r.sent,r.t2=r.t0,r.abrupt("return",{value:r.t1,error:r.t2});case 14:case"end":return r.stop()}}),r,null,[[0,7]])})))()},deleteUserItemFromSet:function(e,t,n){var r=this;return Object(c.a)(s.a.mark((function a(){var c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.deleteUserItem(e,t,n.id);case 3:return c=a.sent,a.abrupt("return",{value:c,error:null});case 7:return a.prev=7,a.t0=a.catch(0),a.next=11,r.getItem(e,n.id);case 11:return a.t1=a.sent,a.t2=a.t0,a.abrupt("return",{value:a.t1,error:a.t2});case 14:case"end":return a.stop()}}),a,null,[[0,7]])})))()},updateItemInSet:function(e,t){var n=this;return Object(c.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.updateItemInPeriod(e,t);case 3:return a=r.sent,r.abrupt("return",{value:a,error:null});case 7:return r.prev=7,r.t0=r.catch(0),r.next=11,n.getItem(e,t.id);case 11:return r.t1=r.sent,r.t2=r.t0,r.abrupt("return",{value:r.t1,error:r.t2});case 14:case"end":return r.stop()}}),r,null,[[0,7]])})))()},updateUserItemInSet:function(e,t,n){var r=this;return Object(c.a)(s.a.mark((function a(){var c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.updateUserItem(e,t,n);case 3:return c=a.sent,a.abrupt("return",{value:c,error:null});case 7:return a.prev=7,a.t0=a.catch(0),a.next=11,r.getItem(e,n.id);case 11:return a.t1=a.sent,a.t2=a.t0,a.abrupt("return",{value:a.t1,error:a.t2});case 14:case"end":return a.stop()}}),a,null,[[0,7]])})))()}};t.a=p},41:function(e,t,n){"use strict";var r=n(86);t.a=r.a},67:function(e,t,n){"use strict";var r=n(5),a=n(1),s=n(4),c=n(0),i=n(7),o=n(193),u=n(283),l=n(288),d=n(287),p=n(124),j=function(e){var t=e.commandItems,n=e.tableProps,j=Object(c.useState)(""),f=Object(s.a)(j,2),b=f[0],m=f[1];return Object(a.jsx)(i.Container,{fluid:!0,children:Object(a.jsx)(i.Row,{children:Object(a.jsx)(i.Col,{xs:12,children:Object(a.jsxs)(o.a,{horizontalAlign:"stretch",children:[Object(a.jsxs)(i.Row,{align:"start",children:[Object(a.jsx)(i.Col,{xs:12,sm:9,children:Object(a.jsx)(u.a,{items:t})}),Object(a.jsx)(i.Col,{xs:12,sm:3,children:Object(a.jsx)(l.a,{placeholder:"Search",value:b,onChange:function(e){return m(e&&e.target?e.target.value:"")}})})]}),Object(a.jsx)(d.a,{}),Object(a.jsx)(p.a,Object(r.a)(Object(r.a)({},n),{},{searchValue:b}))]})})})})};j.defaultProps={commandItems:null},t.a=j},80:function(e,t,n){"use strict";var r=n(168),a=new(n.n(r).a),s={on:function(e,t){return a.on(e,t)},once:function(e,t){return a.once(e,t)},off:function(e,t){return a.off(e,t)},emit:function(e,t){return a.emit(e,t)}};Object.freeze(s);var c=s;t.a=c},86:function(e,t,n){"use strict";var r=n(1),a=(n(0),n(193)),s=n(192),c={root:{marginTop:"16px",marginBottom:"16px",align:"center"}};t.a=function(e){var t=e.text;return Object(r.jsx)(a.a,{horizontal:!0,horizontalAlign:"center",children:Object(r.jsx)(s.a,{variant:"xLarge",styles:c,children:t})})}},87:function(e,t,n){"use strict";var r=n(4),a=n(5),s=n(1),c=n(22),i=n(0),o=n(100),u=n(192),l=n(149),d=n(8),p=n(119),j=n(71),f=(n(267),function(e,t,n){var r;return Object(s.jsx)("span",{style:{paddingRight:"8px"},children:Object(s.jsx)(o.a,{className:Object(j.a)((r={},Object(c.a)(r,n.headerIcon,!0),Object(c.a)(r,n.headerIconOpen,t),r)),iconName:"ChevronRightMed"})})}),b=function(e){return Object(s.jsx)(u.a,{variant:"medium",children:e.text})},m=function(e,t,n){var r=n;return Object(s.jsxs)("div",{style:{display:"flex",flexFlow:"row nowrap",alignItems:"center"},children:[t.onRenderHeaderFold(e,t.isOpen,r),t.onRenderHeaderText(e,t.isOpen,r)]})},h=function(e){var t=e.item,n=e.headerProps,r=e.onRenderItem,c=e.isOpen,i=e.onToggle,o=e.classes;return Object(s.jsxs)("div",{className:o.container,children:[Object(s.jsx)("div",{role:"menuitem",tabIndex:0,onClick:function(e){return i(e,t,!c)},onKeyPress:function(e){return i(e,t,!c)},className:o.header,children:n.onRenderHeader(t,Object(a.a)(Object(a.a)({},n),{},{isOpen:c}),o)}),Object(s.jsx)(p.Collapse,{isOpened:c,children:Object(s.jsx)("div",{className:o.itemContent,children:r(t)})})]})},O=function(e){var t=e.items,n=e.getKey,o=e.headerProps,u=e.onRenderItem,p=e.exclusive,j=e.styles,O=e.compact,x=e.onToggle,g=Object(l.a)((function(e){return Object(d.r)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{root:{boxShadow:e.effects.elevation4,width:"100%",border:"1px solid ".concat(e.palette.themeLight)},container:{outline:"none",borderTop:"1px solid ".concat(e.palette.themeLight),"&:first-child":{borderTop:"none"},"& > div:first-child":{outline:"none"}},header:{cursor:"pointer",padding:"".concat(t?"8px":"16px")},headerIcon:{fontSize:"0.7em",transition:".2s transform"},headerIconOpen:{transform:"rotate(90deg)",transformOrigin:"center"},itemContent:{padding:"".concat(t?"8px":"16px")}}}(e,O),j)}))(),v=Object(i.useState)((function(){var e={};return t.forEach((function(t){var r=n(t);e[r]=Boolean(t.isOpen)||!1})),e})),y=Object(r.a)(v,2),k=y[0],w=y[1],S=Object(a.a)({onRenderHeader:m,onRenderHeaderFold:f,onRenderHeaderText:b},o),C=function(e){return p?function(t,r,s){return w((function(t){var r=Object(a.a)({},t),c=n(e);return Object.keys(r).forEach((function(e){r[e]=e===c&&s})),r}))}:function(t,r,s){return w((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},n(e),s))}))}};return Object(i.useEffect)((function(){w((function(){var e={};return t.forEach((function(t){var r=n(t);e[r]=Boolean(t.isOpen)||!1})),e}))}),[t,n]),Object(s.jsx)("div",{className:g.root,children:t.map((function(e){return Object(s.jsx)(h,{item:e,headerProps:S,onRenderItem:u,isOpen:Boolean(k[n(e)]),setOpen:C(e),getKey:n,classes:g,onToggle:x||C(e)},n(e))}))})};O.defaultProps={getKey:function(e){return e.key},onRenderItem:function(e){return Object(s.jsx)("p",{children:e.text})},exclusive:!1,headerProps:{onRenderHeader:m,onRenderHeaderFold:f,onRenderHeaderText:b},styles:{},compact:!1,onToggle:null},h.defaultProps={headerProps:{onRenderHeader:m,onRenderHeaderFold:f,onRenderHeaderText:b}},t.a=O}},[[269,1,2]]]);
//# sourceMappingURL=main.d543bf6e.chunk.js.map