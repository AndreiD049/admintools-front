{"version":3,"sources":["components/notification/NotificationContainer.jsx","services/NotificationService.js","components/notification/Notification.jsx","components/notification/index.js","components/shared/table/Table.jsx","components/shared/table/index.js","services/GlobalContext.js","services/AuthorizationService.js","services/LoginService.js","components/shared/user-info-provider/index.js","components/shared/user-info-provider/UserInfoProvider.jsx","components/shared/user-securities-provider/index.js","components/shared/user-securities-provider/UserSecuritiesProvider.jsx","styles/keytipStyles.js","themes/lightTheme.js","themes/darkTheme.js","themes/warmTheme.js","themes/blackWhiteTheme.js","themes/index.js","components/shared/select-theme/theme_dark_icon.png","components/shared/select-theme/theme_light_icon.png","components/shared/select-theme/theme_solarized_icon.png","components/shared/select-theme/theme_blackwhite_icon.png","components/shared/select-theme/SelectTheme.jsx","components/navigation/components/choose-theme-modal/ChooseThemeModal.jsx","components/navigation/components/user-info/UserInfo.jsx","components/navigation/components/app-bar/AppBar.jsx","components/navigation/components/app-bar/index.js","utils/constants.js","components/navigation/components/drawer/Drawer.jsx","components/navigation/components/drawer/index.js","components/navigation/Navigation.jsx","services/validators/operators.js","services/validators/UserValidators.js","services/validators/General.js","services/validators/AppraisalValidators.js","services/validators/index.js","services/AppraisalService.js","components/shared/authorization-redirect-component/index.js","components/shared/authorization-redirect-component/AuthorizationRedirectComponent.jsx","components/appraisal-details/components/appraisal-info/index.js","components/appraisal-details/components/appraisal-info/AppraisalDetailsInfo.jsx","services/UserService.js","components/shared/single-picker/SinglePicker.jsx","components/shared/team-mates-autocomplete/index.js","components/shared/team-mates-autocomplete/TeamMatesAutocomplete.jsx","components/appraisal-details/components/appraisal-user-redirect/AppraisalUserRedirect.jsx","components/appraisal-details/components/appraisal-user-redirect/index.js","components/shared/authorization-component/index.js","components/shared/authorization-component/AuthorizationComponent.jsx","components/shared/page-header/index.js","components/shared/chip/Chip.jsx","components/shared/chip/index.js","components/appraisal-details/components/appraisal-input/AppraisalInput.jsx","components/appraisal-details/components/appraisal-input/index.js","components/shared/box/Box.jsx","components/shared/box/index.js","components/appraisal-details/components/appraisal-field-set/FieldSet.jsx","components/appraisal-details/components/appraisal-field-set/index.js","components/appraisal-details/components/appraisal-details-display/AppraisalDetailsDisplay.jsx","components/appraisal-details/components/appraisal-details-display/index.js","components/appraisal-details/components/appraisal-user-info/index.js","components/appraisal-details/components/appraisal-user-info/AppraisalUserInfo.jsx","components/appraisal-details/components/appraisal-user-details-display/AppraisalUserDetails.jsx","components/appraisal-details/components/appraisal-user-details-display/index.js","components/appraisal-details/index.js","components/appraisal-details/AppraisalDetails.jsx","routes/appraisal-details/index.js","routes/appraisal-details/AppraisalDetailsPage.jsx","components/appraisal-list/panel-new/PanelNew.jsx","components/appraisal-list/panel-edit/PanelEdit.jsx","routes/appraisals/AppraisalsPage.jsx","routes/appraisals/index.js","components/widgets/home-planned-items/components/HomePlannedItemsDisplay/HomePlannedItemsDisplay.jsx","components/widgets/home-planned-items/components/HomePlannedItemsDisplay/index.js","components/widgets/home-planned-items/components/HomePlannedItemsInfoProvider/HomePlannedItemsInfoProvider.jsx","components/widgets/home-planned-items/index.js","components/widgets/home-planned-items/HomePlannedItems.jsx","routes/home/index.js","routes/home/HomePage.jsx","routes/settings-general/index.js","routes/settings-general/SettingsGeneral.jsx","services/TeamService.js","routes/settings-users/components/user-edit-panel/UserEditPanel.jsx","routes/settings-users/components/user-edit-panel/index.js","routes/settings-users/index.js","routes/settings-users/SettingsUsers.jsx","routes/settings-app-periods/index.js","routes/settings-app-periods/SettingsAppraisalPeriods.jsx","routes/settings-app-items/index.js","routes/settings-app-items/SettingsAppraisalItems.jsx","components/appraisal-details/components/security-details/components/security-info-provider/index.js","components/appraisal-details/components/security-details/components/security-info-provider/SecurityInfoProvider.jsx","components/appraisal-details/components/security-details/components/security-details-role-display/SecurityDetailsRoleDisplay.jsx","components/appraisal-details/components/security-details/components/security-details-role-display/index.js","components/appraisal-details/components/security-details/components/security-details-user-display/SecurityDetailsUserDisplay.jsx","components/appraisal-details/components/security-details/components/security-details-user-display/index.js","components/appraisal-details/components/security-details/SecurityDetails.jsx","routes/settings-role-permissions/index.js","routes/settings-role-permissions/SettingsRoles.jsx","routes/settings/index.js","routes/settings/SettingsPage.jsx","components/reports/components/reports-info-provider/ReportsInfoProvider.jsx","components/reports/components/reports-info-provider/index.js","components/reports/components/reports-new-panel/ReportsNewPanel.jsx","components/reports/components/reports-new-panel/index.js","components/reports/components/reports-details-panel/ReportsDetailsPanel.jsx","components/reports/components/reports-edit-panel/ReportsEditPanel.jsx","components/reports/components/reports-edit-panel/index.js","components/reports/index.js","components/reports/Reports.jsx","routes/reporting-reports/index.js","routes/reporting-reports/ReportsPage.jsx","components/report-templates/index.js","routes/reporting-templates/index.js","routes/reporting-templates/ReportTemplatesPage.jsx","components/appraisal-report/AppraisalReport.jsx","routes/reporting/index.js","routes/reporting/ReportingPage.jsx","components/shared/login-required/index.js","components/shared/login-required/LoginRequired.jsx","routes/login/index.js","routes/login/LoginPage.jsx","services/hooks/useFetch.js","services/tasks/TaskService.js","utils/date.js","components/ui-hooks/usePanel.jsx","components/shared/autocomplete/Autocomplete.jsx","components/task-dashboard/components/add-task/AddTask.jsx","components/task-dashboard/components/add-task/index.js","components/task-dashboard/components/current-date/CurrentDate.jsx","components/task-dashboard/components/task-personas/TaskPersonas.jsx","components/task-dashboard/components/task-collapsed/TaskCollapsed.jsx","components/task-dashboard/components/task-item/TaskItem.jsx","components/task-dashboard/components/task-item/index.js","components/task-dashboard/components/task-container/TaskContainer.jsx","components/task-dashboard/components/working-hours/WorkingHours.jsx","components/ui-hooks/useDialog.jsx","components/task-dashboard/components/task-busy-conflict/TaskBusyConflict.jsx","components/ui-hooks/useLocalStorage.jsx","services/ConnectionService.js","components/task-dashboard/components/task-live-update/TaskLiveUpdate.jsx","components/task-dashboard/TaskDashboard.jsx","utils/serviceRequestWrapper.js","services/tasks/TaskFlowService.js","components/task-flows/components/add-flow/AddFlow.jsx","components/task-flows/components/edit-flow/EditFlow.jsx","components/task-flows/index.js","components/task-flows/TaskFlows.jsx","components/task-planning/components/planning-cell/PlanningCell.jsx","components/task-planning/components/planning-matrix/PlanningMatrix.jsx","services/tasks/TaskPlanningService.js","components/task-planning/components/flow-picker/FlowPicker.jsx","components/task-planning/components/flow-picker/index.js","components/task-planning/components/planning-flows-dialog/PlanningFlowsDialog.jsx","components/task-planning/components/planning-flows-dialog/index.js","components/task-planning/TaskPlanning.jsx","services/tasks/TaskRuleService.js","components/task-rules/components/add-rule-type/AddRuleType.jsx","components/shared/people-picker/PeoplePicker.jsx","components/task-rules/components/add-rule/AddRule.jsx","components/task-rules/components/rule-details/RuleDetails.jsx","components/task-rules/index.js","components/task-rules/TaskRules.jsx","routes/tasks/index.js","routes/tasks/Tasks.jsx","components/shared/connection-manager/ConnectionManager.jsx","components/app/index.js","components/app/App.jsx","index.js","components/shared/accordion/index.js","components/report-templates/components/create-panel/CreateTemplatePanel.jsx","components/report-templates/components/create-panel/index.js","components/report-templates/components/details-panel/TemplateDetailsPanel.jsx","components/report-templates/components/details-panel/index.js","components/report-templates/components/edit-panel/TemplateEditPanel.jsx","components/report-templates/ReportTemplates.jsx","services/ReportingService.js","components/shared/command-table/CommandTable.jsx","components/shared/Emitter/Emitter.js","components/shared/Emitter/index.js","components/shared/page-header/PageHeader.jsx","components/shared/accordion/Accordion.jsx"],"names":["NotificationContainer","timeout","useState","items","setItems","onDismiss","idx","prev","found","find","i","id","timer","clearTimeout","filter","useEffect","Emitter","on","item","uuid","onRender","bind","setTimeout","prevState","off","className","map","classNames","NotificationService","notify","text","type","actions","emit","notifyError","this","notifySuccess","notifyInfo","notifySevereWarning","Notification","typeMessage","MessageBarType","success","warning","error","info","blocked","severeWarning","MessageBar","messageBarType","Text","variant","Table","columns","searchValue","sortedCol","setSelectionDetails","props","sortedColumn","setSortedColumn","_columns","setColumns","_items","selection","Selection","onSelectionChanged","count","getSelectedCount","getSelection","handleSort","evt","column","isSortable","columnCopy","columnsCopy","col","c","key","isSorted","isSortedDescending","filterValues","useCallback","values","rg","RegExp","filterableColumns","isFilterable","length","val","fieldName","filterValueAccessor","test","copy","slice","sort","a","b","DetailsList","onColumnClick","selectionPreservedOnEmptyClick","defaultProps","GlobalContext","React","createContext","user","connection","connectionId","Authorize","code","grant","notification","setContext","userPreferences","theme","AuthorizationService","getRolesPath","getCurrentUserSecuritiesPath","getUserSecuritiesPath","getOrganizationUsersSecuritiesPath","getRolesSecuritiesPath","getPermissionCodesPath","addPermissionPath","updatePermissionPath","deletePermissionPath","getRoles","axios","get","result","status","data","response","message","getSecurities","getUserSecurities","getOrganizationUsersSecurities","getRolesSecurities","getPermissionCodes","addPermission","permission","post","updatePermission","put","deletePermission","delete","security","index","el","indexOf","grants","err","LoginService","currentUserPath","getCurrentUser","DefaultButton","as","href","UserInfoProvider","verified","setVerified","global","useContext","name","displayName","username","avatar","split","n","join","toUpperCase","userLoaded","getUser","UserSecuritiesProvider","run","root","padding","createTheme","palette","themePrimary","themeLighterAlt","themeLighter","themeLight","themeTertiary","themeSecondary","themeDarkAlt","themeDark","themeDarker","neutralLighterAlt","neutralLighter","neutralLight","neutralQuaternaryAlt","neutralQuaternary","neutralTertiaryAlt","neutralTertiary","neutralSecondary","neutralPrimaryAlt","neutralPrimary","neutralDark","black","white","accent","isInverted","selectTheme","localStorage","getItem","lightTheme","darkTheme","warmTheme","blackWhiteTheme","SelectTheme","setTheme","imageSrc","lightImg","selectedImageSrc","imageSize","width","height","solarizedImg","darkImg","blackWhiteImg","Stack","verticalAlign","tokens","childrenGap","ChoiceGroup","options","selectedKey","onChange","option","setItem","ChooseThemeModal","isOpen","setOpen","Modal","isBlocking","styles","scrollableContent","minWidth","minHeight","style","horizontalAlign","StackItem","grow","align","onClick","useStyles","makeStyles","display","flexFlow","justifyContent","link","color","textAlign","paddingRight","fluidLink","usernameText","overflow","textDecoration","callout","UserInfo","classes","calloutVisible","setCalloutVisible","themeModalOpen","setThemeModalOpen","userLinkRef","useKeytipRef","keytipProps","keytipStyles","content","keySequences","onExecute","click","handleCalloutToggle","ref","wrap","horizontal","Persona","size","PersonaSize","size32","hidePersonaDetails","marginRight","Callout","role","gapSpace","target","setInitialFocus","isBeakVisible","Separator","size56","ActionButton","iconProps","iconName","position","backgroundColor","flex","icon","alignSelf","AppBar","toggleDrawer","useTheme","IconButton","hasMenu","title","ariaLabel","block","nowrap","Icon","fontSize","spacing","s2","constants","dialogAnswers","Yes","No","Cancel","Ok","timeOptions","h","m","str","push","connections","INSERT","UPDATE","DELETE","tasks","New","InProgress","Paused","Finished","Cancelled","types","Daily","Weekly","Monthly","DayTypes","Workday","Calendar","MonthlyOnType","Day","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","colors","securities","REPORTS","description","read","create","update","APPRAISAL_DETAILS","createFinished","updateFinished","deleteFinished","APPRAISAL_DETAILS_OTHER","toggleLock","APPRAISAL_PERIODS","finish","SETTINGS","general","users","appraisalItems","appraisalPeriods","permissions","AUDITS","REPORT_TEMPLATES","TASK","TASK_RULE","TASK_FLOW","TASK_PLANNING","classNamesFunction","borderBottom","top","left","nav","marginTop","Drawer","history","useHistory","handleLinkClick","preventDefault","url","links","keyTipContent","keyTipSequence","navLinks","filterLinks","forEach","visibleLinksGroup","setVisibleLinksGroup","Panel","hasCloseButton","PanelType","smallFixedNear","isLightDismiss","marginLeft","Nav","groups","onRenderLink","isExpanded","zIndex","Navigation","navPaneOpened","setOpened","and","validations","Error","Promise","all","v","results","every","andSync","last","l","or","some","orSync","not","validation","notSync","perform","throwExceptions","performSync","userExists","Boolean","userAuthorized","context","isTruthy","obj","operators","AD","ADO","periodStatus","period","periodExists","itemExists","periodLocked","userId","userPeriod","u","_id","locked","itemStatus","itemType","itemSameUser","String","itemRelated","relatedItemId","itemContentNotNull","trim","canInsert","generalVal","userVal","canUpdate","canDelete","validate","appraisalValidators","userValidators","generalValidators","Item","periodId","organizationId","modifiedUser","modifiedDate","createdUser","createdDate","Date","AppraisalService","getPeriodsPath","addPeriodsPath","periodPath","periodFinishPath","getItemsPath","getUserItemsPath","toggleLockPeriodPath","getItemPath","itemId","getOrphansPath","addItemPath","updateItemPath","deleteItemPath","addItemToPeriodPath","addUserItemPath","updateItemInPeriodPath","updateUserItemPath","deleteItemFromPeriodPath","deleteUserItemPath","updateItemTypePath","updateUserItemTypePath","getPeriods","statusText","getItems","getOrphans","params","getUserItems","addItem","addOrphan","addUserItem","updateItemInPeriod","updateItem","updateUserItem","updateItemType","updateUserItemType","deleteItemFromPeriod","deleteItem","deleteUserItem","addPeriod","body","updatePeriod","finishPeriod","toggleLockPeriod","blankItem","normalizeSet","min","dif","addItemToSet","value","addUserItemToSet","deleteItemFromSet","deleteUserItemFromSet","updateItemInSet","updateUserItemInSet","AuthorizationRedirectComponent","to","failureNotification","access","setAccess","redirect","setRedirect","notified","setNotified","isAuthorized","children","AppraisalDetailsInfo","setPeriodDetails","UserService","baseUrl","teamUsersPath","updateUsersPath","getUserPath","getUserOrganizationsPath","getUserTeamMembersPath","getSettingsUsersPath","putSettingsUsersPath","normalizeUser","organization","organizations","o","getSettingsUsers","updateUser","updateSettingsUser","getUserOrganizations","getUserTeamMembers","border","suggestion","defaultGetText","SinglePicker","getTextFromItem","selected","onSelect","onRenderItem","onRenderSuggestionsItem","placeholder","maxHeight","sc","useScreenClass","_selected","setSelected","maxWidth","setMaxwidth","inputRef","useRef","getText","renderItem","defaultRenderItem","renderSuggestionsItem","defaultRenderSuggestionItem","current","clientWidth","BasePicker","inputProps","pickerCalloutProps","pickerSuggestionsProps","suggestionsContainer","selectedItems","onItemSelected","onEmptyResolveSuggestions","onResolveSuggestions","suggestions","toLowerCase","TeamMatesAutocomplete","onUserSelect","setUsers","mounted","AppraisalUserRedirect","defaultValue","useParams","selectedUser","setSelectedUser","handleSelect","AuthorizationComponent","onReject","PageHeader","chip","borderRadius","Chip","calloutPrefix","boxShadow","effects","elevation64","CustomPrefix","isCalloutVisible","setIsCalloutVisible","tabIndex","CustomSuffix","menuProps","AppraisalInput","changeHandler","blurHandler","removeHandler","changeTypeHandler","multilineTrashold","setValue","modified","setModified","multiline","setMultiline","isRelated","isDeletable","isFinished","inputEditable","setValidations","calls","checkRelated","checkFinished","checkEditable","handleBlur","e","persist","mod","handleChange","newMultiline","handleTypeChange","handleDelete","shouldFocusOnMount","shouldFocusOnContainer","replace","disabled","tooltip","toLocaleString","TextField","resizable","prefix","suffix","field","onRenderPrefix","onRenderSuffix","autoAdjustHeight","autoComplete","onBlur","readOnly","bottom","right","box","l2","Box","stack","paddingTop","s1","FieldSet","details","setOtherItems","labels","Achieved","Planned","Training_Planned","Training_Achieved","SWOT_S","SWOT_W","SWOT_O","SWOT_T","Feedback","isLocked","firstChange","concat","Number","isNaN","isNew","isToBeDeleted","listItem","label","chipContent","alignItems","lockedChip","lockIcon","container","AppraisalDetailsDisplay","periodDetails","achieved","setAchieved","planned","setPlanned","trainingPlanned","setTrainingPlanned","trainingAchieved","setTrainingAchieved","swotS","setSWOTS","swotW","setSWOTW","swotO","setSWOTO","swotT","setSWOTT","feedBack","setFeedBack","setLocked","md","xs","justify","lg","size24","nogutter","AppraisalUserInfo","setUserDetails","userData","periodData","userStyles","AppraisalUserDetails","userDetails","handleLockButton","finished","setFinished","PrimaryButton","primary","AppraisalDetails","AppraisalDetailsPage","header","PanelNew","handleCreate","setVal","smallFixedFar","headerText","onSubmit","finally","margin","autoFocus","PanelEdit","handleEdit","AP","REP","AppraisalsPage","screenClass","filteredItems","setFilteredItems","showClosed","setShowClosed","newPanelOpen","setNewPanelOpen","editPanelOpen","setEditPanelOpen","setSearchValue","path","useRouteMatch","selectionDetails","blue","green","isResizable","isPadded","loadData","handleItemInvoked","clickFinishHandler","handleGenerateReport","ReportingService","generateAppraisalReport","periods","reportBlob","downloadBlob","exact","sm","CommandBar","SearchBox","Checkbox","checked","selectionMode","SelectionMode","single","onItemInvoked","ctx","setCtx","subHeader","HomePlannedItemsDisplay","newItemVal","setNewItemVal","setType","checkboxChangeHandler","removeItem","List","onRenderCell","CommandButton","default","HomePlannedItemsInfoProvider","HomePlannedItems","HomePage","fluid","SettingsGeneral","TeamService","team","getTeams","addTeam","UserEditPanel","setFunc","teams","roles","selTeams","setSelTeams","selPrimaryTeam","setSelPrimaryTeam","selOrganizations","setSelOrganizations","selRole","setSelRole","handleMultiCombobox","handleDeselect","t","ComboBox","multiSelect","useComboBoxAsMenuWidth","r","SettingsUsers","setData","setTeams","setRoles","indices","selectedColumn","handleUpdate","findIndex","_teams","_roles","CommandTable","commandItems","tableProps","layoutMode","DetailsListLayoutMode","justified","SettingsAppraisalPeriods","SettingsAppraisalItems","SecurityInfoProvider","setLoaded","setPermissionCodes","setRolePermissions","setUserPermissions","codes","rolesInfo","userInfo","rolesMap","reference","userPermissions","userPermMap","autocomplete","secondaryText","searchBox","SecurityDetailsRoleDisplay","rolePermissions","selectedRole","setSelectedRole","expanded","setExpanded","setFilter","handleExpandSingle","p","handleFilterInputChange","handleSetPermission","handleAdd","permissionType","handleClick","g","getPermissionChecked","buttonStyles","onClear","paddingLeft","render","Accordion","getKey","headerProps","onRenderHeaderText","onToggle","renderPermissions","SecurityDetailsUserDisplay","SecurityDetails","permissionCodes","loaded","Pivot","aria-label","PivotItem","itemIcon","SettingsRolesPage","SettingsPage","ReportsInfoProvider","setReports","getReports","reports","propTypes","PropTypes","func","isRequired","topMargin","borderTop","invisibleInput","background","outline","ReportsNewPanel","addReport","setName","setDescription","template","setTemplate","parameter","setParameter","templates","setTemplates","parameters","setParameters","selectedParameters","setSelectedParameters","set","handleChangeParameterName","handleChangeParameterValue","handleSubmit","formData","FormData","append","JSON","stringify","getTemplates","getTempalteParameters","large","onRenderFooterContent","form","required","Label","templ","temp","underlined","param","paths","flat","handleChangeParameter","sp","ReportsDetailsPanel","setDetails","getReport","reportDetails","parse","aggregation","ReportsEditPanel","setReport","parametersList","setParametersList","inputErrorMessages","setInputErrorMessages","newParameter","setNewParameter","handleChangeParams","property","handleChangeNewParam","handleSave","updateReport","errorMessage","newParamName","newParamPath","Reports","detailsPanelOpen","setDetailsPanelOpen","report","ReportsPage","ReportTemplates","require","ReportTemplatesPage","AppraisalReport","setPeriods","dateFrom","setDateFrom","dateTo","setDateTo","selectedPeriods","setSelectedPeriods","handleChangeDate","dt","UTC","getFullYear","getMonth","getDate","handleGenerate","Dropdown","selectedKeys","DatePicker","onSelectDate","ReportingPage","LoginRequired","LoginPage","useFetch","initialData","dependencies","cb","TaskService","taskPath","taskStatusPath","tasksCheckConflictsPath","getTasks","getBusyTasks","getTask","createTask","updateTask","updateTaskStatus","deleteTask","createTaskObject","task","startRaw","DateTime","fromISO","expectedStartDate","toUTC","endRaw","expectedFinishDate","fromObject","year","month","day","hour","minute","second","zone","toISO","getHoursFromText","hours","minutes","seconds","s","combineDateHours","date","makeUTC","getHours","getMinutes","getSeconds","getWeekFromDate","firstDay","firstDayUTC","makeUTCDateOnly","getDay","setDate","getNearestTime","Math","round","PanelContext","isPanel","onRenderFooter","setOnRenderFooter","usePanel","Component","componentProps","componentRef","Provider","isFooterAtBottom","borderColor","whiteSpace","textOverflow","fontWeight","hidden","Autocomplete","calloutWidth","setCalloutWidth","input","toggleSelect","ev","clear","itemProps","undefined","onRenderLabel","onSuggestionClick","document","AddTask","setTasks","userOptions","setUserOptions","remarks","expectedStartTime","duration","isBackgroundTask","selectedUsers","setValues","hr","expDate","getTime","assignedTo","calloutProps","calloutMaxHeight","SpinButton","onIncrement","onDecrement","step","incrementButtonAriaLabel","decrementButtonAriaLabel","labelPosition","Position","CurrentDate","currentDate","setCurrentDate","from","fromJSDate","millisecond","minus","toJSDate","firstDayOfWeek","plus","TaskPersonas","Facepile","personaSize","maxDisplayablePersonas","overflowButtonType","OverflowButtonType","descriptive","overflowButtonProps","ariaDescription","personas","personaName","borderCollapse","TaskCollapsed","collapsed","setCollapsed","handleStatusChange","isOpened","ButtonGrid","columnCount","borderLeft","collapse","cursor","marginBottom","chevron","chevronIcon","rows","flexGrow","taskDescription","prewrap","neutralSecondaryAlt","time","lineHeight","TaskItem","setTime","startDate","finishDate","fromHours","fromMinutes","toHours","toMinutes","clsx","onKeyDown","alignContent","semanticColors","bodyBackground","l1","TaskContainer","hourOptions","combo","space","WorkingHours","setHours","DialogContext","isDialog","isVisible","setVisible","show","accept","cancel","resolve","setResolve","dialogFooter","setDialogFooter","useDialog","visible","res","Dialog","modalProps","dialogContentProps","DialogType","normal","subText","DialogFooter","TaskBusyConflict","conflictTasks","paused","ctask","component","Link","actualStartDate","useLocalStorageState","initialValue","ConnectionService","subscribePath","connectSSE","es","EventSource","subscribe","TaskLiveUpdate","handleMessage","action","initiator","addEventListener","removeEventListener","searchIcon","TaskDashboard","setSelectedUsers","fromDate","DU","toDate","newPanel","dialogProps","setDialogProps","resolveBusyConflictDialog","_accept","handleUserSelect","conflicts","updated","ts","unpaused","openOnKeyboardFocus","selUser","t1","t2","serviceRequestWrapper","requestFunc","successStatusCode","showNotification","TaskFlowService","singleUrl","getTaskFlow","createTaskFlow","updateTaskFlow","AddFlow","setFlows","panel","handleDataChange","args","createdFlow","htmlFor","SwatchColorPicker","cellHeight","cellWidth","cellShape","colorCells","selectedId","onColorChanged","EditFlow","isActive","flow","setFlow","fl","TaskFlows","flows","addFlowPanel","getElementById","contains","editFlowPanel","flowItem","noSelect","userSelect","PlanningCell","userFlows","handleInvoke","isSelected","onDoubleClick","Array","f","row","PlanningMatrix","userFlowMap","dates","selectedCell","setSelectedCell","today","toLocaleDateString","userCol","handleSelectCell","fixedColumns","onRenderRow","DetailsRow","none","TaskPlanningService","addFlowUrl","planningId","flowId","removeFlowUrl","createPlanning","addFlowToPlanning","removeFromFromPlanning","suggestionRoot","suggestionCheck","picker","colorBox","removeIcon","FlowPicker","onRemove","showDeleteIcon","showCheckboxes","selectedSet","useMemo","Set","handleCheckboxClick","stopPropagation","has","resolveDelay","preventDismissOnScroll","focusPoint","visibility","PlanningFlowsDialog","planning","addFlow","removeFlow","validOptions","userTeams","TaskPlanning","DateUtils","setDates","selectedTeam","setSelectedTeam","Map","handleAddFlow","plan","handleRemoveFlow","flowsDialog","largeHeader","isMonthPickerVisible","dateRangeType","DateRangeType","Week","showWeekNumbers","showSixWeeksByDefault","showGoToToday","selDate","selDates","TaskRuleService","taskRulePath","getTaskRules","getTaskRule","createTaskRule","updateTaskRule","deleteTaskRule","monthlyOptions","weeklyCheck","monthlyCheck","monthlyDropdown","AddRuleType","handleSetWeeklyData","weeklyDays","d","handleSetMonths","monthlyMonths","isDaySelected","defaultSelectedKey","dailyType","verticalFill","monthlyOn","newVal","max","placeHolder","monthlyOnType","suggestionText","textTransform","itemRoot","PeoplePicker","AddRule","setRules","isSharedTask","taskStartTime","validFrom","taskDuration","local","zoneName","typeOptions","Object","keys","handleSelectDate","validTo","weekday","setMonth","setMinutes","exp","utcExpected","utc","checkbox","typeIcon","typeDetails","paddingBottom","userColumn","separator","weekDay","weekDays","months","getOrdinalSuffix","number","RuleTypeDetails","rule","getTypeIcon","ruleDetails","getRenderDetails","RuleDetails","editing","setEditing","flowsData","renderFooter","borderless","allowTextInput","vertical","TaskRules","rules","detailsPanel","medium","_isOpen","Tasks","ConnectionManager","con","App","initContext","ThemeProvider","applyTo","KeytipLayer","keytipStartSequences","modifierKeys","KeyCodes","alt","initializeIcons","ReactDOM","StrictMode","CreateTemplatePanel","setAggregation","file","setFile","sample","setSample","openAcordion","setOpenAccordion","generateTemplate","handleSample","getSample","createTemplate","rel","open","fieldGroup","filelist","files","TemplateDetailsPanel","setEdit","getTemplate","filename","downloadTemplate","TemplateEditPanel","updateTemplates","setUpdate","updateTemplate","updateResult","labelId","controlId","aria-labelledby","ItemType","createPanelOpen","setCreatePanelOpen","templatesPath","templatePath","templateDownloadPath","templateParametersPath","generateTemplatePath","templateSamplePath","formdata","headers","responseType","appraisalReportPath","reportPath","postReportGeneratePath","reportsPath","generateReport","eventEmitter","EventEmitter","event","fn","once","payload","freeze","defaultRenderHeaderFold","headerIcon","headerIconOpen","defaultRenderHeaderText","defaultRenderHeader","classProps","onRenderHeaderFold","AccordionItemContainer","onKeyPress","onRenderHeader","itemContent","exclusive","compact","concatStyleSets","elevation4","transition","transform","transformOrigin","defstyles","defHeaderProps","handleSetOpen","itemKey"],"mappings":"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","file":"static/js/main.6bf926e1.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { v4 as uuid } from 'uuid';\r\nimport Emitter from '../shared/Emitter';\r\nimport './styles.css';\r\n\r\nconst NotificationContainer = ({ timeout = 5000 }) => {\r\n  const [items, setItems] = useState([]);\r\n\r\n  const onDismiss = (idx) => () => {\r\n    setItems((prev) => {\r\n      const found = prev.find((i) => i.id === idx);\r\n      if (found) {\r\n        if (found.timer) clearTimeout(found.timer);\r\n        return prev.filter((i) => i.id !== idx);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  // Use below effect to start listening to Notification events\r\n  // When element is unmounted, listener is removed\r\n  useEffect(() => {\r\n    const listener = (item) => {\r\n      const idx = uuid();\r\n      setItems((prev) => [...prev, {\r\n        ...item,\r\n        onRender: item.onRender.bind({}, onDismiss(idx)),\r\n        id: idx,\r\n        timer: setTimeout(\r\n          () => setItems((prevState) => prevState.filter((i) => i.id !== idx)), timeout,\r\n        ),\r\n      }]);\r\n    };\r\n\r\n    Emitter.on('notification-add', listener);\r\n    return () => {\r\n      Emitter.off('notification-add');\r\n    };\r\n  }, [timeout]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <TransitionGroup>\r\n        {items.map((item) => (\r\n          <CSSTransition\r\n            key={item.id}\r\n            timeout={400}\r\n            classNames=\"notification\"\r\n          >\r\n            <div className=\"item-wrapper\">\r\n              {item.onRender()}\r\n            </div>\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationContainer;\r\n","import React from 'react';\r\nimport { Notification } from '../components/notification';\r\nimport Emitter from '../components/shared/Emitter';\r\n\r\nconst NotificationService = {\r\n  notify(text, type, actions) {\r\n    Emitter.emit('notification-add', {\r\n      onRender: (onDismiss) => (\r\n        // eslint-disable-next-line react/jsx-filename-extension\r\n        <Notification\r\n          text={text}\r\n          type={type}\r\n          actions={actions}\r\n          onDismiss={onDismiss}\r\n        />\r\n      ),\r\n    });\r\n  },\r\n\r\n  notifyError(text) {\r\n    this.notify(text, 'error');\r\n  },\r\n\r\n  notifySuccess(text) {\r\n    this.notify(text, 'success');\r\n  },\r\n\r\n  notifyInfo(text) {\r\n    this.notify(text, 'info');\r\n  },\r\n\r\n  notifySevereWarning(text) {\r\n    this.notify(text, 'severeWarning');\r\n  },\r\n};\r\n\r\nexport default NotificationService;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MessageBar, MessageBarType, Text } from '@fluentui/react';\n\nconst Notification = ({\n  type, text, actions, onDismiss,\n}) => {\n  let typeMessage;\n  switch (type) {\n    case 'success':\n      typeMessage = MessageBarType.success;\n      break;\n    case 'warning':\n      typeMessage = MessageBarType.warning;\n      break;\n    case 'error':\n      typeMessage = MessageBarType.error;\n      break;\n    case 'info':\n      typeMessage = MessageBarType.info;\n      break;\n    case 'blocked':\n      typeMessage = MessageBarType.blocked;\n      break;\n    case 'severeWarning':\n      typeMessage = MessageBarType.severeWarning;\n      break;\n    default:\n      typeMessage = MessageBarType.info;\n      break;\n  }\n  return (\n    <MessageBar\n      messageBarType={typeMessage}\n      actions={actions || null}\n      onDismiss={onDismiss}\n    >\n      <Text variant=\"medium\">{text}</Text>\n    </MessageBar>\n  );\n};\n\nNotification.propTypes = {\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  actions: PropTypes.shape({}).isRequired,\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default Notification;\n","import NotificationContainer from './NotificationContainer';\r\nimport Notification from './Notification';\r\n\r\nexport default NotificationContainer;\r\n\r\nexport { Notification };\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { DetailsList, Selection } from '@fluentui/react';\r\n\r\nconst Table = ({\r\n  columns, items, searchValue, sortedCol, setSelectionDetails, ...props\r\n}) => {\r\n  const [sortedColumn, setSortedColumn] = useState(null);\r\n  const [_columns, setColumns] = useState(columns);\r\n  const [_items, setItems] = useState([]);\r\n  const selection = new Selection({\r\n    onSelectionChanged: () => {\r\n      setSelectionDetails({\r\n        count: selection.getSelectedCount(),\r\n        items: selection.getSelection(),\r\n      });\r\n    },\r\n  });\r\n\r\n  const getSortFunction = (column) => {\r\n    const sortFunc = (a, b) => {\r\n      if (!column.isSortedDescending) {\r\n        return a[column.fieldName] < b[column.fieldName] ? -1 : 1;\r\n      }\r\n      return a[column.fieldName] > b[column.fieldName] ? -1 : 1;\r\n    };\r\n    if (column.sort) {\r\n      return (a, b) => {\r\n        if (!column.isSortedDescending) {\r\n          return column.sort(b, a);\r\n        }\r\n        return column.sort(a, b);\r\n      };\r\n    }\r\n    return sortFunc;\r\n  };\r\n\r\n  const handleSort = (evt, column) => {\r\n    if (column.isSortable) {\r\n      let columnCopy = column;\r\n      const columnsCopy = _columns.map((col) => {\r\n        const c = col;\r\n        // column we're sorting now\r\n        if (c.key === column.key) {\r\n        // if it's already sorted, just invert the sorting\r\n          columnCopy = c;\r\n          if (c.isSorted) {\r\n            c.isSortedDescending = !c.isSortedDescending;\r\n            return c;\r\n          }\r\n          // columns was not sorted previously, just set it sorted\r\n          c.isSorted = true;\r\n          c.isSortedDescending = true;\r\n        } else {\r\n        // other column, remove the sorting\r\n          c.isSorted = false;\r\n          c.isSortedDescending = false;\r\n        }\r\n        return c;\r\n      });\r\n      setColumns(columnsCopy);\r\n      // setItems(_items.sort(getSortFunction(columnCopy)));\r\n      setSortedColumn(columnCopy);\r\n    }\r\n  };\r\n\r\n  const filterValues = useCallback((values) => {\r\n    if (!searchValue) {\r\n      return values;\r\n    }\r\n    const rg = new RegExp(searchValue, 'i');\r\n    return values.filter((item) => {\r\n      const filterableColumns = _columns.filter((c) => c.isFilterable);\r\n      for (let i = 0; i < filterableColumns.length; i += 1) {\r\n        const col = filterableColumns[i];\r\n        let val = item[col.fieldName];\r\n        if (col.filterValueAccessor) {\r\n          val = col.filterValueAccessor(item);\r\n        }\r\n        if (rg.test(val)) return true;\r\n      }\r\n      return false;\r\n    });\r\n  }, [_columns, searchValue]);\r\n\r\n  useEffect(() => {\r\n    const copy = items.slice();\r\n    if (sortedColumn) {\r\n      copy.sort(getSortFunction(sortedColumn));\r\n    }\r\n    if (!searchValue) {\r\n      return setItems(copy);\r\n    }\r\n    return setItems(filterValues(copy));\r\n  }, [items, searchValue, filterValues, sortedColumn]);\r\n\r\n  useEffect(() => {\r\n    if (sortedCol) {\r\n      setColumns((prev) => prev.map((col) => (col.key === sortedCol.key\r\n        ? ({\r\n          ...col,\r\n          isSorted: sortedCol.isSorted,\r\n          isSortedDescending: sortedCol.isSortedDescending,\r\n        }) : col)));\r\n      setSortedColumn(sortedCol);\r\n    }\r\n  }, [sortedCol]);\r\n\r\n  return (\r\n    <DetailsList\r\n      {...props}\r\n      selection={selection}\r\n      columns={_columns.map((c) => ({ ...c, onColumnClick: handleSort }))}\r\n      items={_items}\r\n      selectionPreservedOnEmptyClick\r\n    />\r\n  );\r\n};\r\n\r\nTable.propTypes = {\r\n  columns: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    name: PropTypes.string,\r\n    fieldName: PropTypes.string,\r\n    minWidth: PropTypes.number,\r\n    maxWidth: PropTypes.number,\r\n    isSortable: PropTypes.bool,\r\n    isFilterable: PropTypes.bool,\r\n    isResizable: PropTypes.bool,\r\n    sort: PropTypes.func,\r\n    onRender: PropTypes.func,\r\n  })).isRequired,\r\n  items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  searchValue: PropTypes.string,\r\n  sortedCol: PropTypes.shape({\r\n    key: PropTypes.string,\r\n    name: PropTypes.string,\r\n    fieldName: PropTypes.string,\r\n    minWidth: PropTypes.number,\r\n    maxWidth: PropTypes.number,\r\n    isSortable: PropTypes.bool,\r\n    isFilterable: PropTypes.bool,\r\n    isResizable: PropTypes.bool,\r\n    sort: PropTypes.func,\r\n    onRender: PropTypes.func,\r\n    isSorted: PropTypes.bool,\r\n    isSortedDescending: PropTypes.bool,\r\n  }),\r\n  setSelectionDetails: PropTypes.func,\r\n};\r\n\r\nTable.defaultProps = {\r\n  searchValue: '',\r\n  sortedCol: null,\r\n  setSelectionDetails: () => {},\r\n};\r\n\r\nexport default Table;\r\n","import Table from './Table';\r\n\r\nexport default Table;\r\n","import React from 'react';\r\nimport { Notification } from '../components/notification';\r\nimport Emitter from '../components/shared/Emitter';\r\n\r\n// Global context will store the everything that should be shared across all\r\n// components but i don't want to pass it around as props.\r\nconst GlobalContext = React.createContext({\r\n  user: null,\r\n  connection: null,\r\n  connectionId: null,\r\n  // eslint-disable-next-line no-unused-vars\r\n  Authorize: (code, grant, notification) => false,\r\n  setContext: () => null,\r\n  userPreferences: {\r\n    theme: null,\r\n  },\r\n  notify: (text, type, actions = null) => {\r\n    Emitter.emit('notification-add', {\r\n      onRender: (onDismiss) => (\r\n        // eslint-disable-next-line react/jsx-filename-extension\r\n        <Notification\r\n          text={text}\r\n          type={type}\r\n          actions={actions}\r\n          onDismiss={onDismiss}\r\n        />\r\n      ),\r\n    });\r\n  },\r\n});\r\n\r\nexport default GlobalContext;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst AuthorizationService = {\r\n  getRolesPath: '/api/security/roles',\r\n  getCurrentUserSecuritiesPath: '/api/security/permissions/me',\r\n  getUserSecuritiesPath: (id) => `/api/security/permissions/user/${id}`,\r\n  getOrganizationUsersSecuritiesPath: '/api/security/permissions/organization',\r\n  getRolesSecuritiesPath: '/api/security/permissions/role',\r\n  getPermissionCodesPath: '/api/security/permissions/code',\r\n  addPermissionPath: '/api/security/permissions',\r\n  updatePermissionPath: (id) => `/api/security/permissions/${id}`,\r\n  deletePermissionPath: (id) => `/api/security/permissions/${id}`,\r\n\r\n  async getRoles() {\r\n    try {\r\n      const result = await axios.get(this.getRolesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getCurrentUserSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserSecurities(id) {\r\n    try {\r\n      const result = await axios.get(this.getUserSecuritiesPath(id));\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getOrganizationUsersSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getOrganizationUsersSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getRolesSecurities() {\r\n    try {\r\n      const result = await axios.get(this.getRolesSecuritiesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getPermissionCodes() {\r\n    try {\r\n      const result = await axios.get(this.getPermissionCodesPath);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addPermission(permission) {\r\n    try {\r\n      const result = await axios.post(this.addPermissionPath, permission);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updatePermission(id, permission) {\r\n    try {\r\n      const result = await axios.put(this.updatePermissionPath(id), permission);\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deletePermission(id) {\r\n    try {\r\n      const result = await axios.delete(this.deletePermissionPath(id));\r\n      if (result.status === 200) {\r\n        return result.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  // this function is meant to be injected in the context in order to have access to 'this'\r\n  Authorize(code, grant) {\r\n    try {\r\n      if (this.security) {\r\n        const codes = this.security.map((el) => el.code);\r\n        const index = codes.indexOf(code);\r\n        if (index !== -1) {\r\n          return this.security[index].grants.indexOf(grant) !== -1;\r\n        }\r\n      }\r\n      return false;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default AuthorizationService;\r\n","import React from 'react';\r\nimport { DefaultButton } from '@fluentui/react';\r\nimport axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst LoginService = {\r\n  currentUserPath: '/api/me',\r\n  async getCurrentUser() {\r\n    try {\r\n      const response = await axios.get(this.currentUserPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      return null;\r\n    } catch (err) {\r\n      NotificationService.notify(`Not logged in. ${(err.response.data && err.response.data.error) || err.message}`,\r\n        'error', (\r\n          // eslint-disable-next-line react/jsx-filename-extension\r\n          <DefaultButton\r\n            as=\"a\"\r\n            href=\"/auth/login\"\r\n          >\r\n            Log in\r\n          </DefaultButton>));\r\n      return null;\r\n    }\r\n  },\r\n};\r\n\r\nexport default LoginService;\r\n","import UserInfoProvider from './UserInfoProvider';\r\n\r\nexport default UserInfoProvider;\r\n","import { useEffect, useState, useContext } from 'react';\r\n\r\nimport LoginService from '../../../services/LoginService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst UserInfoProvider = () => {\r\n  const [verified, setVerified] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function getUser() {\r\n      if (!global.setContext) return setVerified(false);\r\n      if (!global.user && !verified) {\r\n        setVerified(true);\r\n        const user = await LoginService.getCurrentUser();\r\n        if (user) {\r\n          const name = user.displayName || user.username || 'Unknown';\r\n          user.avatar = name.split(/[. ,_-]/).map((n) => n[0]).join('').slice(0, 2)\r\n            .toUpperCase();\r\n        }\r\n        return global.setContext({ ...global, user, userLoaded: true });\r\n      }\r\n      return null;\r\n    }\r\n    getUser();\r\n  }, [verified, global]);\r\n  return null;\r\n};\r\n\r\nexport default UserInfoProvider;\r\n","import UserSecuritiesProvider from './UserSecuritiesProvider';\r\n\r\nexport default UserSecuritiesProvider;\r\n","import { useEffect, useContext } from 'react';\r\nimport AuthorizationService from '../../../services/AuthorizationService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst UserSecuritiesProvider = () => {\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (!global.security && global.user !== null) {\r\n        const result = await AuthorizationService.getSecurities();\r\n        if (result) {\r\n          global.setContext((prev) => ({\r\n            ...prev,\r\n            security: result,\r\n          }));\r\n        }\r\n      }\r\n    }\r\n    run();\r\n  }, [global.user, global.security, global.setContext]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default UserSecuritiesProvider;\r\n","export default {\r\n  root: {\r\n    padding: '3px',\r\n  },\r\n};\r\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#0078d7',\n    themeLighterAlt: '#f3f9fd',\n    themeLighter: '#d1e7f8',\n    themeLight: '#aad2f3',\n    themeTertiary: '#5ca8e7',\n    themeSecondary: '#1a84db',\n    themeDarkAlt: '#006ac1',\n    themeDark: '#005aa3',\n    themeDarker: '#004278',\n    neutralLighterAlt: '#faf9f8',\n    neutralLighter: '#f3f2f1',\n    neutralLight: '#edebe9',\n    neutralQuaternaryAlt: '#e1dfdd',\n    neutralQuaternary: '#d0d0d0',\n    neutralTertiaryAlt: '#c8c6c4',\n    neutralTertiary: '#a19f9d',\n    neutralSecondary: '#605e5c',\n    neutralPrimaryAlt: '#3b3a39',\n    neutralPrimary: '#323130',\n    neutralDark: '#201f1e',\n    black: '#000000',\n    white: '#ffffff',\n    accent: '#ffffff',\n  },\n  type: 'light',\n});\n","import { createTheme } from '@fluentui/react';\n\nconst theme = createTheme({\n  palette: {\n    themePrimary: '#0078d7',\n    themeLighterAlt: '#000509',\n    themeLighter: '#001322',\n    themeLight: '#002340',\n    themeTertiary: '#004781',\n    themeSecondary: '#0068bc',\n    themeDarkAlt: '#1682da',\n    themeDark: '#3693e0',\n    themeDarker: '#66aee8',\n    neutralLighterAlt: '#212121',\n    neutralLighter: '#2a2a2a',\n    neutralLight: '#393939',\n    neutralQuaternaryAlt: '#424242',\n    neutralQuaternary: '#494949',\n    neutralTertiaryAlt: '#686868',\n    neutralTertiary: '#c8c8c8',\n    neutralSecondary: '#d0d0d0',\n    neutralPrimaryAlt: '#dadada',\n    neutralPrimary: '#ffffff',\n    neutralDark: '#f4f4f4',\n    black: '#f8f8f8',\n    white: '#171717',\n    accent: '#ffffff',\n  },\n  type: 'dark',\n  isInverted: true,\n});\n\nexport default theme;\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#268bd2',\n    themeLighterAlt: '#f5fafd',\n    themeLighter: '#d7eaf8',\n    themeLight: '#b6d9f1',\n    themeTertiary: '#74b5e3',\n    themeSecondary: '#3c96d7',\n    themeDarkAlt: '#227cbc',\n    themeDark: '#1d699f',\n    themeDarker: '#154d75',\n    neutralLighterAlt: '#f6efdd',\n    neutralLighter: '#f2ebd9',\n    neutralLight: '#e8e2d1',\n    neutralQuaternaryAlt: '#d8d2c2',\n    neutralQuaternary: '#cec9b9',\n    neutralTertiaryAlt: '#c6c1b2',\n    neutralTertiary: '#585959',\n    neutralSecondary: '#363737',\n    neutralPrimaryAlt: '#2e2f2f',\n    neutralPrimary: '#000000',\n    neutralDark: '#151515',\n    black: '#0b0b0b',\n    white: '#fdf6e3',\n    accent: '#ffffff',\n  },\n});\n","import { createTheme } from '@fluentui/react';\n\nexport default createTheme({\n  palette: {\n    themePrimary: '#ffffff',\n    themeLighterAlt: '#767676',\n    themeLighter: '#a6a6a6',\n    themeLight: '#c8c8c8',\n    themeTertiary: '#d0d0d0',\n    themeSecondary: '#dadada',\n    themeDarkAlt: '#eaeaea',\n    themeDark: '#f4f4f4',\n    themeDarker: '#f8f8f8',\n    neutralLighterAlt: '#333839',\n    neutralLighter: '#3a4041',\n    neutralLight: '#464d4e',\n    neutralQuaternaryAlt: '#4e5456',\n    neutralQuaternary: '#545b5d',\n    neutralTertiaryAlt: '#6f7679',\n    neutralTertiary: '#f3f3f3',\n    neutralSecondary: '#f5f5f5',\n    neutralPrimaryAlt: '#f7f7f7',\n    neutralPrimary: '#ededed',\n    neutralDark: '#fbfbfb',\n    black: '#fdfdfd',\n    white: '#2b2f30',\n    accent: '#000000',\n  },\n});\n","import lightTheme from './lightTheme';\r\nimport darkTheme from './darkTheme';\r\nimport warmTheme from './warmTheme';\r\nimport blackWhiteTheme from './blackWhiteTheme';\r\n\r\nconst selectTheme = (theme) => {\r\n  const localStorageTheme = theme || localStorage.getItem('theme');\r\n  switch (localStorageTheme) {\r\n    case 'light':\r\n      return lightTheme;\r\n    case 'dark':\r\n      return darkTheme;\r\n    case 'warm':\r\n      return warmTheme;\r\n    case 'blackwhite':\r\n      return blackWhiteTheme;\r\n    default:\r\n      return lightTheme;\r\n  }\r\n};\r\n\r\nexport {\r\n  lightTheme,\r\n  darkTheme,\r\n  warmTheme,\r\n  selectTheme,\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAGuElEQVR4nO2aS2waVxSG/3uHVzAm2CBiaCDGE0VJ5RAFlKSLLKo+sqgqxYq6qdRuskj2aStVaqS2UleVsLKLFGXVl6pKUYmyidR20V3VGKM4XkQ4ECeyDZiABwwGLGZuF85MwU8eA0Me34o59zJzzj/3ee4QbMLv9w8YDIb3GGM8AP3m8hcRQsg6gDhj7M9IJLLWUFb/OxAIfE4I+QrA/p562DsEAN9FIpFJAAz4XwAaDAZ/AvCxVp71mF8ikcgnABgBgEAg8AUh5Hu51Gg0wmq1guM4zTxUE1EUUSgUUK1W682fRSKRSeL3+wf0ev0injd7h8MBj8cDSqkmznYLSZLw9OlTZLNZ2SQAeIMaDIZ38Tx4o9H4UgYPAJRSeL1eGI1G2WRjjL1DGWNHZIvValWCZ4whm83WK9a0rV+hlMJqtSrXhJAjOkKIhTEGANDr/5/1crkc5ufn5YoYHh5u2tbP1MdICLG+fG29RXQ7FdjtdhCyMUvKb7VZ24vEjgIA2wfUrO1F4XUXqL9YXV1VmvPLwtDQUP3Ut4UtAqyurnbdqV7y7NkzjI+P71hOAcR7507/oZuamvo5EAgwl8v1o9bOqA2lFENDQ7vWUTr8pUuXWNc96gOSySSWlpYAAISQb1/5WeC1AKdPnz4SDAYTs7OzqFQqWvvTc2itVvsIgK9arUIQBK396TmUUmqQL+Rd4avEKz8G7LoZapVarQZBEFAulwEAZrMZNputr3OLqgmQyWSwsLAASZIa7BzH4eDBg3A4HGo9SlVUESCVSmFxcXHbMlEU8eTJE4iiiAMHDqjxOFXpeAyoVCrKymo3FhcX+3Ka7ViATCbT1OzBGEMmk+n0carTsQClUqkrdXtFxwJsHvTUqtsrOhbAYDDsXek5u2VmtKJjAWw2W1fq9oqOp0G73Y5MJoO1tbVd65nN5razxysrKxAEAevr69DpdLBYLHA4HKossDpuAYQQ8Dy/a/M2mUzgeb7lhKsoipibm0MikUAul0OxWIQgCHA4HDh+/DhMJlOn7quzEDIYDDh27BjS6TSy2SzW19cVu91ux8jISMsHrnLwm2cOi8WCy5cvg1KKEydO4Pbt23u2vt1QbSnMcRzcbjfcbjdEUQQhpO1T5p2CBzYWXoVCATabDYODg5iYmEA4HG5bhK7sBjmO60rwwMaG69q1aygUCgA2WsSFCxdgsVjael5fbYf3Cl4mmUwiFAopIpjNZkxMTLQlQt8I0GzwMqlUCqFQCPl8HkD7IlBJktblC62OxVoNXiaVSmFycrJtERhjVc7j8aQZYx8YjcZht9sNnU7VHMmetBu8TLFYxIMHDxAIBGAymaDX68HzPBKJhDIb1WMwGJDP5yGKYlwUxa80PRjpNPh6RkZGcOXKFezfv/GJ49raGsLhMIrF4rb1b9y4QQANxwA1gwfaHxM0EUDt4GXS6TRCoZCS3pdFGBwc3PE/uwogiiIEQUA2m0WhUFBlOyuKImKxWNdyA+l0GpOTkw0inD9/vuHrsHp2FGBpaQkzMzOIx+OYn5/H3NwclpeXO9qAyMF3snRthlZE2CIAYwyJRALJZLLhjY+NjeHq1au4ePEiRkdHW3aqV8HLbO4O+/bt21aEBgHk4FdWVrbc0Ol0glIKQgjOnTsHn8/XtDNyn+9V8DLLy8vbilA/JijtORAIfPP48eMdzweTySQOHToEp9MJAOB5Htlsds/zxF6/+c2USqUt64TR0VGk0+lfHz16lJUFoMPDw19v9+ZlGGOYnp6Gx+NR8vs8zyOfzyOXy237H62DlymVSpiZmcHJkydhMpnAGMOdO3feXFhY+IEDgGAw+GWlUnl3rxtJkoRoNNoggs/n21aEfgleplQqIRqNolwuIxwOI5fL+Vwu12/cmTNnrJIk/Q6gqYylLEJ9d/D5fBAEQekOer0e4+PjOHr0KGKxGGq1WtcCa4VyuYxYLKYslgDc51wu14cAPm3lRpIkYXp6ukGEsbExOJ1OOBwOnD17FjzPw+v1QhAE5WPqfoMQ8i8FwLfz51qthuvXr2N2dlaxeTwe+P1+ZfnJGNvxzLAfIIToOLfb/T6At9u5gSRJiEQi0Ov18Hq9DYukXC6Hmzdv4uHDh2r5qzqEkL873vuKoohbt27h7t27OHz4MAYGBpDJZBCPx/vyJGgzqm3+S6US7t+/r9btekbfpMS04rUAWjugNZQxVt272ssJY6xKCSFTWjuiFZIk/Uunpqb+IIT8pLUzvYYx9mM0Gv1LyQqfOnXqPUmS3gLQ3hnTi0ORUvrPvXv3/gSA/wDZmkXYs+fHBwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { ChoiceGroup, Stack, Text } from '@fluentui/react';\r\nimport React, { useContext, useState } from 'react';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\nimport { selectTheme } from '../../../themes';\r\nimport darkImg from './theme_dark_icon.png';\r\nimport lightImg from './theme_light_icon.png';\r\nimport solarizedImg from './theme_solarized_icon.png';\r\nimport blackWhiteImg from './theme_blackwhite_icon.png';\r\n\r\nconst SelectTheme = () => {\r\n  const global = useContext(GlobalContext);\r\n  const [theme, setTheme] = useState(global.userPreferences.theme.type);\r\n  const [items] = useState([\r\n    {\r\n      key: 'light',\r\n      text: 'Light',\r\n      imageSrc: lightImg,\r\n      selectedImageSrc: lightImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'warm',\r\n      text: 'Warm',\r\n      imageSrc: solarizedImg,\r\n      selectedImageSrc: solarizedImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'dark',\r\n      text: 'Dark',\r\n      imageSrc: darkImg,\r\n      selectedImageSrc: darkImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n    {\r\n      key: 'blackwhite',\r\n      text: 'Dark Black&White',\r\n      imageSrc: blackWhiteImg,\r\n      selectedImageSrc: blackWhiteImg,\r\n      imageSize: { width: 64, height: 64 },\r\n    },\r\n  ]);\r\n\r\n  const handleChange = (evt, option) => {\r\n    if (option && option.key) {\r\n      setTheme(option.key);\r\n      localStorage.setItem('theme', option.key);\r\n      global.setContext((prev) => ({\r\n        ...prev,\r\n        userPreferences: {\r\n          ...global.userPreferences,\r\n          theme: selectTheme(option.key),\r\n        },\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Stack verticalAlign=\"start\" tokens={{ childrenGap: 16 }}>\r\n      <Text variant=\"large\">Select color theme:</Text>\r\n      <ChoiceGroup\r\n        options={items}\r\n        selectedKey={theme}\r\n        onChange={handleChange}\r\n      />\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default SelectTheme;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Modal, Stack, StackItem,\r\n} from '@fluentui/react';\r\nimport SelectTheme from '../../../shared/select-theme/SelectTheme';\r\n\r\nconst ChooseThemeModal = ({ isOpen, setOpen }) => (\r\n  <Modal\r\n    isOpen={isOpen}\r\n    onDismiss={() => setOpen(false)}\r\n    isBlocking={false}\r\n    styles={{\r\n      scrollableContent: {\r\n        minWidth: 300,\r\n        minHeight: 300,\r\n        height: 300,\r\n      },\r\n    }}\r\n  >\r\n    <Stack\r\n      style={{\r\n        height: '100%',\r\n        padding: '16px',\r\n      }}\r\n      horizontalAlign=\"space-evenly\"\r\n      verticalAlign=\"center\"\r\n    >\r\n      <StackItem grow={1}>\r\n        <SelectTheme />\r\n      </StackItem>\r\n      <StackItem align=\"center\">\r\n        <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n      </StackItem>\r\n    </Stack>\r\n  </Modal>\r\n);\r\n\r\nChooseThemeModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChooseThemeModal;\r\n","import React, { useContext, useState } from 'react';\nimport {\n  Persona,\n  PersonaSize,\n  Stack,\n  Text,\n  Link as FluidLink,\n  Callout,\n  Separator,\n  ActionButton,\n  makeStyles,\n  useKeytipRef,\n} from '@fluentui/react';\nimport keytipStyles from '../../../../styles/keytipStyles';\nimport GlobalContext from '../../../../services/GlobalContext';\nimport ChooseThemeModal from '../choose-theme-modal/ChooseThemeModal';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '40px',\n    width: '200px',\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    justifyContent: 'center',\n  },\n  link: {\n    color: theme.palette.accent,\n    textAlign: 'center',\n    display: 'block',\n    paddingRight: '16px',\n  },\n  fluidLink: {\n    color: theme.palette.accent,\n  },\n  usernameText: {\n    overflow: 'hidden',\n    paddingRight: '8px',\n    textDecoration: 'none',\n    color: theme.palette.accent,\n  },\n  callout: {\n    minWidth: '200px',\n    minHeight: '100px',\n    padding: '16px',\n  },\n}));\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const [calloutVisible, setCalloutVisible] = useState(false);\n  const [themeModalOpen, setThemeModalOpen] = useState(false);\n  const global = useContext(GlobalContext);\n  const userLinkRef = useKeytipRef({\n    keytipProps: {\n      styles: keytipStyles,\n      content: 'I',\n      keySequences: ['i'],\n      onExecute: (el) => el.click(),\n    },\n  });\n  const displayName = global.user\n    ? (global.user.displayName || global.user.username)\n    : 'Unknown';\n\n  const handleCalloutToggle = () => setCalloutVisible((prev) => !prev);\n\n  return (\n    <div className={classes.root}>\n      {\n        global.user\n          ? (\n            <FluidLink\n              ref={userLinkRef}\n              onClick={handleCalloutToggle}\n              style={{\n                textDecoration: 'none',\n              }}\n              id=\"persona\"\n            >\n              <Stack verticalAlign=\"center\" wrap={false} horizontal>\n                <Text className={classes.usernameText}>{global.user.username}</Text>\n                <Persona\n                  size={PersonaSize.size32}\n                  text={displayName}\n                  hidePersonaDetails\n                  className={classes.fluidLink}\n                  styles={{\n                    root: {\n                      marginRight: '18px',\n                    },\n                  }}\n                />\n              </Stack>\n              {\n                calloutVisible && (\n                <Callout\n                  role=\"alertdialog\"\n                  gapSpace={0}\n                  target=\"#persona\"\n                  setInitialFocus\n                  isBeakVisible={false}\n                  onDismiss={handleCalloutToggle}\n                >\n                  <Stack className={classes.callout}>\n                    <Stack horizontalAlign=\"space-between\" horizontal>\n                      <Text variant=\"medium\">Admin Tools</Text>\n                      <FluidLink href=\"/auth/logout\">\n                        <Text variant=\"medium\">Sign Out</Text>\n                      </FluidLink>\n                    </Stack>\n                    <Separator />\n                    <Stack horizontal horizontalAlign=\"space-evenly\" wrap>\n                      <Persona size={PersonaSize.size56} />\n                      <Text variant=\"mediumPlus\">{global.user.username}</Text>\n                    </Stack>\n                    <Separator />\n                    <ActionButton\n                      onClick={() => setThemeModalOpen(true)}\n                      iconProps={{\n                        iconName: 'Brush',\n                      }}\n                    >\n                      Chgange Layout\n                    </ActionButton>\n                    <Separator />\n                  </Stack>\n                  <ChooseThemeModal\n                    isOpen={themeModalOpen}\n                    setOpen={setThemeModalOpen}\n                  />\n                </Callout>\n                )\n              }\n            </FluidLink>\n          )\n          : (\n            <div>\n              {\n                global.userLoaded\n                  ? (\n                    <FluidLink className={classes.link} href=\"/auth/login\">\n                      <Text variant=\"mediumPlus\">\n                        Login\n                      </Text>\n                    </FluidLink>\n                  )\n                  : null\n              }\n            </div>\n          )\n      }\n    </div>\n  );\n};\n\nexport default UserInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Icon, IconButton, makeStyles, Text, useTheme,\n} from '@fluentui/react';\nimport UserInfo from '../user-info/UserInfo';\nimport keytipStyles from '../../../../styles/keytipStyles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    backgroundColor: theme.palette.themeDark,\n    height: '40px',\n    width: '100vw',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    justifyContent: 'space-between',\n  },\n  flex: {\n    height: '40px',\n    display: 'flex',\n    flexFlow: 'row nowrap',\n    justifyContent: 'start',\n  },\n  icon: {\n    height: '40px',\n    color: theme.palette.accent,\n  },\n  text: {\n    width: '150px',\n    alignSelf: 'center',\n    textAlign: 'center',\n    color: theme.palette.accent,\n  },\n}));\n\nconst AppBar = ({ toggleDrawer }) => {\n  const theme = useTheme();\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.flex}>\n        <IconButton\n          keytipProps={{\n            styles: keytipStyles,\n            content: 'M',\n            keySequences: ['m'],\n            onExecute: toggleDrawer,\n            hasMenu: true,\n          }}\n          className={classes.icon}\n          iconProps={{ iconName: 'GlobalNavButton' }}\n          title=\"Global Nav\"\n          ariaLabel=\"Global Navigation\"\n          onClick={toggleDrawer}\n        />\n        <Text className={classes.text} variant=\"large\" block nowrap>\n          <Icon\n            iconName=\"Glasses\"\n            styles={{\n              root: {\n                fontSize: '25px',\n                padding: theme.spacing.s2,\n              },\n            }}\n          />\n          Admin Tools\n        </Text>\n      </div>\n      <UserInfo />\n    </div>\n  );\n};\n\nAppBar.propTypes = {\n  toggleDrawer: PropTypes.func.isRequired,\n};\n\nexport default AppBar;\n","import AppBar from './AppBar';\n\nexport default AppBar;\n","const constants = {\r\n  dialogAnswers: {\r\n    Yes: 1,\r\n    No: 0,\r\n    Cancel: 2,\r\n    Ok: 3,\r\n  },\r\n  timeOptions: (() => {\r\n    const options = [];\r\n    for (let h = 0; h < 24; h += 1) {\r\n      for (let m = 0; m < 60; m += 10) {\r\n        const str = `${`0${h}`.slice(-2)}:${`0${m}`.slice(-2)}`;\r\n        options.push({\r\n          key: str,\r\n          text: str,\r\n        });\r\n      }\r\n    }\r\n    return options;\r\n  })(),\r\n  connections: {\r\n    actions: {\r\n      INSERT: 'INSERT',\r\n      UPDATE: 'UPDATE',\r\n      DELETE: 'DELETE',\r\n    },\r\n  },\r\n  tasks: {\r\n    status: {\r\n      New: 'New',\r\n      InProgress: 'InProgress',\r\n      Paused: 'Paused',\r\n      Finished: 'Finished',\r\n      Cancelled: 'Cancelled',\r\n    },\r\n    types: {\r\n      Daily: 'Daily',\r\n      Weekly: 'Weekly',\r\n      Monthly: 'Monthly',\r\n    },\r\n    DayTypes: {\r\n      Workday: 'Work',\r\n      Calendar: 'Calendar',\r\n    },\r\n    MonthlyOnType: {\r\n      Day: 'Day',\r\n      Workday: 'Workday',\r\n      Monday: 'Monday',\r\n      Tuesday: 'Tuesday',\r\n      Wednesday: 'Wednesday',\r\n      Thursday: 'Thursday',\r\n      Friday: 'Friday',\r\n      Saturday: 'Saturday',\r\n      Sunday: 'Sunday',\r\n    },\r\n  },\r\n  colors: [\r\n    '#FFB900', '#FF8C00', '#E74856', '#E81123',\r\n    '#0078D7', '#0063B1', '#0099BC', '#2D7D9A',\r\n    '#EA005E', '#C30052', '#8E8CD8', '#6B69D6',\r\n    '#00B7C3', '#038387', '#7A7574', '#5D5A58',\r\n    '#68768A', '#515C6B', '#B146C2', '#881798',\r\n    '#00CC6A', '#10893E', '#498205', '#107C10',\r\n  ],\r\n  securities: {\r\n    REPORTS: {\r\n      code: 'REPORTS',\r\n      description: 'Access to view, generate, create and edit reports',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    APPRAISAL_DETAILS: {\r\n      code: 'APPRAISAL DETAILS',\r\n      description: 'Access to see, add, edit, delete Appraisal details for user himself',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        createFinished: 'create-finished',\r\n        updateFinished: 'update-finished',\r\n        deleteFinished: 'delete-finished',\r\n      },\r\n    },\r\n    APPRAISAL_DETAILS_OTHER: {\r\n      code: 'APPRAISAL DETAILS - OTHER USERS',\r\n      description: 'Access to see, add, edit, delete Appraisal details for other users within the team',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        createFinished: 'create-finished',\r\n        updateFinished: 'update-finished',\r\n        deleteFinished: 'delete-finished',\r\n        toggleLock: 'toggle-lock',\r\n      },\r\n    },\r\n    APPRAISAL_PERIODS: {\r\n      code: 'APPRAISAL PERIODS',\r\n      description: 'Access to see, add, edit, finish Appraisal Periods',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n        finish: 'finish',\r\n      },\r\n    },\r\n    SETTINGS: {\r\n      code: 'SETTINGS',\r\n      description: 'Access to various settings. Be careful about following: users - will allow users to modify other users; permissions - will allow users to alter permissions',\r\n      grants: {\r\n        read: 'read',\r\n        general: 'general',\r\n        users: 'users',\r\n        appraisalItems: 'appraisal-items',\r\n        appraisalPeriods: 'appraisal-periods',\r\n        permissions: 'permissions',\r\n      },\r\n    },\r\n    AUDITS: {\r\n      code: 'AUDITS',\r\n      description: 'Access to request, execute, update, delete audits.',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    REPORT_TEMPLATES: {\r\n      code: 'REPORT-TEMPLATES',\r\n      description: 'Access to create and edit report templates',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK: {\r\n      code: 'TASK',\r\n      description: 'Access to read, update, create or delete tasks',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_RULE: {\r\n      code: 'TASK-RULE',\r\n      description: 'Access to read, update, create or delete task rules',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_FLOW: {\r\n      code: 'TASK-FLOW',\r\n      description: 'Access to read, update, create or delete task flows',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n    TASK_PLANNING: {\r\n      code: 'TASK-PLANNING',\r\n      description: 'Access to read, update, create or delete task planning items',\r\n      grants: {\r\n        read: 'read',\r\n        create: 'create',\r\n        update: 'update',\r\n        delete: 'delete',\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport default constants;\r\n","/* eslint-disable react/prop-types */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport {\n  Panel, PanelType, classNamesFunction, Icon, ActionButton, Nav,\n} from '@fluentui/react';\nimport constants from '../../../../utils/constants';\nimport GlobalContext from '../../../../services/GlobalContext';\nimport keytipStyles from '../../../../styles/keytipStyles';\n\nconst classNames = classNamesFunction();\nconst styles = () => ({\n  root: {\n  },\n  icon: {\n    height: '40px',\n    width: '100%',\n    borderBottom: '1px solid',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n  },\n  nav: {\n    marginTop: '40px',\n  },\n});\n\nconst Drawer = ({ isOpen, toggleDrawer }) => {\n  const classes = classNames(styles);\n  const global = useContext(GlobalContext);\n  const history = useHistory();\n\n  const handleLinkClick = (evt, link) => {\n    evt.preventDefault();\n    history.push(link.url);\n    toggleDrawer();\n  };\n\n  const [navLinks] = useState([\n    {\n      links: [\n        {\n          name: 'Home',\n          url: '/',\n          icon: 'Home',\n          keyTipContent: '1',\n          keyTipSequence: ['m', '1'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Appraisals',\n          url: '/appraisals',\n          code: constants.securities.APPRAISAL_PERIODS.code,\n          grant: 'read',\n          icon: 'Feedback',\n          keyTipContent: '2',\n          keyTipSequence: ['m', '2'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Audits',\n          url: '/audits',\n          code: constants.securities.AUDITS.code,\n          grant: 'read',\n          icon: 'ComplianceAudit',\n          keyTipContent: '3',\n          keyTipSequence: ['m', '3'],\n          hasMenu: false,\n          onClick: handleLinkClick,\n        },\n        {\n          name: 'Reporting',\n          code: constants.securities.REPORTS.code,\n          grant: 'read',\n          keyTipContent: '4',\n          keyTipSequence: ['m', '4'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'Appraisal report',\n              url: '/reporting/appraisal-report',\n              code: constants.securities.REPORTS.code,\n              grant: 'read',\n              icon: 'AutoFillTemplate',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '4', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Custom reports',\n              url: '/reporting/reports',\n              code: constants.securities.REPORTS.code,\n              grant: 'read',\n              icon: 'ReportDocument',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '4', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Templates',\n              url: '/reporting/templates',\n              code: constants.securities.REPORT_TEMPLATES.code,\n              grant: 'read',\n              icon: 'FileTemplate',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '4', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n        {\n          name: 'Tasks',\n          code: constants.securities.TASK.code,\n          grant: constants.securities.TASK.grants.read,\n          keyTipContent: '5',\n          keyTipSequence: ['m', '5'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'Dashboard',\n              url: '/tasks',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'ViewDashboard',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '5', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Planning',\n              url: '/tasks/planning',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'PlanView',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '5', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Rules',\n              url: '/tasks/task-rules',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'AustralianRules',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '5', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Flows',\n              url: '/tasks/task-flows',\n              code: constants.securities.TASK.code,\n              grant: constants.securities.TASK.grants.read,\n              icon: 'Flow',\n              keyTipContent: '4',\n              keyTipSequence: ['m', '5', '4'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n        {\n          name: 'Settings',\n          code: constants.securities.SETTINGS.code,\n          grant: 'read',\n          keyTipContent: '6',\n          keyTipSequence: ['m', '6'],\n          hasMenu: true,\n          links: [\n            {\n              name: 'General',\n              url: '/settings',\n              code: constants.securities.SETTINGS.code,\n              grant: 'read',\n              icon: 'Settings',\n              keyTipContent: '1',\n              keyTipSequence: ['m', '6', '1'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Users',\n              url: '/settings/users',\n              code: constants.securities.SETTINGS.code,\n              grant: 'users',\n              icon: 'UserFollowed',\n              keyTipContent: '2',\n              keyTipSequence: ['m', '6', '2'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n            {\n              name: 'Permissions',\n              url: '/settings/permissions',\n              code: constants.securities.SETTINGS.code,\n              grant: 'permissions',\n              icon: 'Permissions',\n              keyTipContent: '3',\n              keyTipSequence: ['m', '6', '3'],\n              hasMenu: false,\n              onClick: handleLinkClick,\n            },\n          ],\n        },\n      ],\n    },\n  ]);\n\n  const filterLinks = (links) => {\n    const result = [];\n    links.forEach((link) => {\n      if (link.code && link.grant) {\n        if (global.Authorize(link.code, link.grant)) {\n          if (link.links) {\n            // eslint-disable-next-line no-param-reassign\n            link.links = filterLinks(link.links);\n          }\n          result.push(link);\n        }\n      } else {\n        result.push(link);\n      }\n    });\n    return result;\n  };\n\n  const [visibleLinksGroup, setVisibleLinksGroup] = useState([]);\n\n  useEffect(() => {\n    setVisibleLinksGroup([{\n      links: filterLinks(navLinks[0].links),\n    }]);\n  }, [global.security, global.user, global.Authorize]);\n\n  return (\n    <Panel\n      isOpen={isOpen}\n      hasCloseButton={false}\n      type={PanelType.smallFixedNear}\n      isLightDismiss\n      onDismiss={toggleDrawer}\n    >\n      <ActionButton\n        className={classes.icon}\n        onClick={toggleDrawer}\n      >\n        <Icon\n          iconName=\"GlobalNavButton\"\n          style={{ marginLeft: 5 }}\n        />\n      </ActionButton>\n      <Nav\n        className={classes.nav}\n        ariaLabel=\"Global navigation\"\n        selectedKey=\"\"\n        groups={visibleLinksGroup}\n        onRenderLink={(link) => (\n          <ActionButton\n            keytipProps={\n                link.keyTipContent\n                && ({\n                  styles: keytipStyles,\n                  content: link.keyTipContent,\n                  onExecute: (el) => (link.links ? link.isExpanded || el.click() : el.click()),\n                  keySequences: link.keyTipSequence,\n                  hasMenu: link.hasMenu || false,\n                })\n              }\n          >\n            {link.name}\n          </ActionButton>\n        )}\n      />\n    </Panel>\n  );\n};\n\nDrawer.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  toggleDrawer: PropTypes.func.isRequired,\n};\n\nexport default Drawer;\n","import Drawer from './Drawer';\n\nexport default Drawer;\n","import React, { useState } from 'react';\r\nimport { classNamesFunction } from '@fluentui/react';\r\nimport AppBar from './components/app-bar';\r\nimport Drawer from './components/drawer';\r\n\r\nconst classNames = classNamesFunction();\r\nconst styles = {\r\n  root: {\r\n    position: 'fixed',\r\n    zIndex: 1002,\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n};\r\n\r\nexport default function Navigation() {\r\n  const classes = classNames(styles);\r\n  const [navPaneOpened, setOpened] = useState(false);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar toggleDrawer={() => setOpened(true)} />\r\n      <Drawer isOpen={navPaneOpened} toggleDrawer={() => setOpened((prev) => !prev)} />\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst and = (validations) => async () => {\r\n  try {\r\n    if (validations.length === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    const results = await Promise.all(validations.map((v) => v()));\r\n    if (results.every((v) => v.result)) {\r\n      return results[0];\r\n    }\r\n    return results.find((v) => v.result === false);\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: err.message,\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst andSync = (validations) => () => {\r\n  try {\r\n    const l = validations.length;\r\n    if (l === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    let last;\r\n    for (let i = 0; i < l; i += 1) {\r\n      last = validations[i]();\r\n      if (!last.result) break;\r\n    }\r\n    return last;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst or = (validations) => async () => {\r\n  try {\r\n    if (validations.length === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    const results = await Promise.all(validations.map((v) => v()));\r\n    if (results.some((v) => v.result)) {\r\n      return results.find((v) => v.result);\r\n    }\r\n    return results[results.length - 1];\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Array.<function(): {result: boolean, message: string}>} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst orSync = (validations) => () => {\r\n  try {\r\n    const l = validations.length;\r\n    if (l === 0) {\r\n      throw new Error('No validations provided');\r\n    }\r\n    let last;\r\n    for (let i = 0; i < l; i += 1) {\r\n      last = validations[i]();\r\n      if (last.result) break;\r\n    }\r\n    return last;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {function(): {result: boolean, message: string}} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst not = (validation) => async () => {\r\n  try {\r\n    const val = await validation();\r\n    val.result = !val.result;\r\n    val.message = `Not - ${val.message}`;\r\n    return val;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @param {function(): {result: boolean, message: string}} validations\r\n * @return {function(): {result: boolean, message: string}} validations\r\n */\r\nconst notSync = (validation) => () => {\r\n  try {\r\n    const val = validation();\r\n    val.result = !val.result;\r\n    return val;\r\n  } catch (err) {\r\n    return {\r\n      result: false,\r\n      message: 'error',\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {function(): {result: boolean, message: string}} validation\r\n * @param {boolean} throwExceptions\r\n * @returns {Promise<{result: boolean, message: string}>}\r\n */\r\nconst perform = async (validation, throwExceptions = true) => {\r\n  const v = await validation();\r\n  if (!v.result) {\r\n    if (throwExceptions) {\r\n      throw new Error(v.message);\r\n    } else {\r\n      return v;\r\n    }\r\n  } else {\r\n    return v;\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @param {function(): {result: boolean, message: string}} validation\r\n * @param {boolean} throwExceptions\r\n * @returns {{ result: boolean, message: string }}\r\n */\r\nconst performSync = (validation, throwExceptions = true) => {\r\n  const v = validation();\r\n  if (!v.result) {\r\n    if (throwExceptions) {\r\n      throw new Error(v.message);\r\n    } else {\r\n      return v;\r\n    }\r\n  } else {\r\n    return v;\r\n  }\r\n};\r\n\r\nexport default {\r\n  and,\r\n  andSync,\r\n  or,\r\n  orSync,\r\n  not,\r\n  notSync,\r\n  perform,\r\n  performSync,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\n\r\nconst userExists = (user) => async () => ({\r\n  result: Boolean(user),\r\n  message: 'User doesn\\'t exist.',\r\n});\r\n\r\nconst userAuthorized = (context, code, grant) => async () => ({\r\n  result: context.Authorize(code, grant),\r\n  message: `Access denied. Code: ${code}, Grant: ${grant}`,\r\n});\r\n\r\nexport default {\r\n  userExists,\r\n  userAuthorized,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\n\r\n/**\r\n * @param {any} obj\r\n * @returns {function(): {result: boolean, message: string}} validation result\r\n */\r\nconst isTruthy = (obj) => () => ({\r\n  result: Boolean(obj),\r\n  message: `${obj} is not true`,\r\n});\r\n\r\nexport default {\r\n  isTruthy,\r\n};\r\n","/**\r\n * This file contains valious validation functions.\r\n * Function schema\r\n * @param {any} args - any arguments function might use\r\n * @returns {function(): {result: boolean, message: string}}\r\n */\r\nimport operators from './operators';\r\nimport userVal from './UserValidators';\r\nimport generalVal from './General';\r\nimport constants from '../../utils/constants';\r\n\r\nconst {\r\n  and, or, not, perform,\r\n} = operators;\r\nconst AD = constants.securities.APPRAISAL_DETAILS;\r\nconst ADO = constants.securities.APPRAISAL_DETAILS_OTHER;\r\n\r\nconst periodExists = (period) => async () => ({\r\n  result: Boolean(period),\r\n  message: 'Period doesn\\'t exist.',\r\n});\r\n\r\nconst periodLocked = (period, userId, message = null) => async () => {\r\n  const { users } = period;\r\n  if (users) {\r\n    // eslint-disable-next-line no-underscore-dangle\r\n    const userPeriod = users.find((u) => u._id === userId);\r\n    if (userPeriod) {\r\n      return {\r\n        result: Boolean(userPeriod.locked),\r\n        message: message || 'Period is not locked',\r\n      };\r\n    }\r\n  }\r\n  return {\r\n    result: false,\r\n    message: message || 'Period is not locked',\r\n  };\r\n};\r\n\r\nconst itemExists = (item) => async () => ({\r\n  result: Boolean(item),\r\n  message: 'Item doesn\\'t exist.',\r\n});\r\n\r\nconst periodStatus = (period, status) => async () => ({\r\n  result: Boolean(period.status === status),\r\n  message: `Period '${period.name}' status is not valid. Expected (${status})`,\r\n});\r\n\r\nconst itemStatus = (item, status) => async () => ({\r\n  result: Boolean(item.status === status),\r\n  message: `Item '${item.content}' status is not valid. Expected '${status}'.`,\r\n});\r\n\r\nconst itemType = (item, type) => async () => ({\r\n  result: Boolean(item.type === type),\r\n  message: `Item '${item.content}' type is not valid. Expected '${type}'.`,\r\n});\r\n\r\nconst itemSameUser = (item, user) => async () => ({\r\n  result: Boolean(String(item.user) === String(user.id)),\r\n  message: `Item '${item.content}'s user is not the same as '${user.username}'`,\r\n});\r\n\r\nconst itemRelated = (item) => async () => ({\r\n  result: Boolean(item.relatedItemId),\r\n  message: 'Item is related.',\r\n});\r\n\r\nconst itemContentNotNull = (item) => async () => ({\r\n  result: Boolean(item.content.trim().length > 0),\r\n  message: 'Item content is empty',\r\n});\r\n\r\nconst canInsert = (context, period, userId) => async () => {\r\n  const result = perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.create),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.create),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.createFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.createFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nconst canUpdate = (context, period, userId) => async () => {\r\n  const result = perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.update),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.update),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.updateFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.updateFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nconst canDelete = (context, period, userId) => async () => {\r\n  const result = await perform(or([\r\n    and([\r\n      periodStatus(period, 'Active'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.delete),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.delete),\r\n        ]),\r\n      ]),\r\n    ]),\r\n    and([\r\n      periodStatus(period, 'Finished'),\r\n      or([\r\n        and([\r\n          not(generalVal.isTruthy(userId)),\r\n          userVal.userAuthorized(context, AD.code, AD.grants.deleteFinished),\r\n        ]),\r\n        and([\r\n          generalVal.isTruthy(userId),\r\n          userVal.userAuthorized(context, ADO.code, ADO.grants.deleteFinished),\r\n        ]),\r\n      ]),\r\n    ]),\r\n  ]), false);\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  periodExists,\r\n  itemExists,\r\n  periodStatus,\r\n  periodLocked,\r\n  itemStatus,\r\n  itemType,\r\n  itemSameUser,\r\n  itemRelated,\r\n  itemContentNotNull,\r\n  canInsert,\r\n  canUpdate,\r\n  canDelete,\r\n};\r\n","import appraisalValidators from './AppraisalValidators';\r\nimport userValidators from './UserValidators';\r\nimport generalValidators from './General';\r\nimport operators from './operators';\r\n\r\nconst {\r\n  and, andSync, or, orSync, not, notSync, perform, performSync,\r\n} = operators;\r\n\r\nconst validate = {\r\n  ...appraisalValidators,\r\n  ...userValidators,\r\n  ...generalValidators,\r\n};\r\n\r\nexport {\r\n  and,\r\n  andSync,\r\n  or,\r\n  orSync,\r\n  not,\r\n  notSync,\r\n  perform,\r\n  performSync,\r\n  validate,\r\n};\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\nimport {\r\n  and, perform, validate,\r\n} from './validators';\r\n\r\nfunction Item(item) {\r\n  this.id = item.id ? item.id : 0;\r\n  this.type = item.type;\r\n  this.status = item.status ? item.status : 'Active';\r\n  this.content = item.content ? item.content : '';\r\n  this.periodId = item.periodId;\r\n  this.organizationId = item.organizationId ? item.organizationId : null;\r\n  this.user = item.user;\r\n  this.modifiedUser = item.modifiedUser ? item.modifiedUser : null;\r\n  this.modifiedDate = item.modifiedDate ? item.modifiedDate : null;\r\n  this.createdUser = item.createdUser ? item.createdUser : item.user;\r\n  this.createdDate = item.createdDate ? item.createdDate : new Date();\r\n}\r\n\r\nconst AppraisalService = {\r\n  getPeriodsPath: '/api/periods',\r\n  addPeriodsPath: '/api/periods',\r\n  periodPath: (periodId) => `/api/periods/${periodId}`,\r\n  periodFinishPath: (periodId) => `/api/periods/${periodId}/finish`,\r\n  getItemsPath: (id) => `/api/periods/${id}`,\r\n  getUserItemsPath: (id, userId) => `/api/periods/${id}/users/${userId}`,\r\n  toggleLockPeriodPath: (id, userId) => `/api/periods/${id}/users/${userId}/toggle-lock`,\r\n  getItemPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  getOrphansPath: '/api/appraisal-items',\r\n  addItemPath: '/api/appraisal-items',\r\n  updateItemPath: (id) => `/api/appraisal-items/${id}`,\r\n  deleteItemPath: (id) => `/api/appraisal-items/${id}`,\r\n  addItemToPeriodPath: (periodId) => `/api/periods/${periodId}/items`,\r\n  addUserItemPath: (periodId, userId) => `/api/periods/${periodId}/users/${userId}/items`,\r\n  updateItemInPeriodPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  updateUserItemPath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}`,\r\n  deleteItemFromPeriodPath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}`,\r\n  deleteUserItemPath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}`,\r\n  updateItemTypePath: (periodId, itemId) => `/api/periods/${periodId}/items/${itemId}/change-type`,\r\n  updateUserItemTypePath: (periodId, userId, itemId) => `/api/periods/${periodId}/users/${userId}/items/${itemId}/change-type`,\r\n\r\n  async getPeriods() {\r\n    try {\r\n      const response = await axios.get(this.getPeriodsPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getItems(periodId) {\r\n    try {\r\n      const response = await axios.get(this.getItemsPath(periodId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getOrphans(type = null) {\r\n    try {\r\n      const response = await axios.get(this.getOrphansPath, {\r\n        params: {\r\n          type,\r\n        },\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserItems(periodId, userId) {\r\n    try {\r\n      const response = await axios.get(this.getUserItemsPath(periodId, userId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getItem(periodId, itemId) {\r\n    try {\r\n      const response = await axios.get(this.getItemPath(periodId, itemId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addItem(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(this.addItemToPeriodPath(periodId), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addOrphan(item) {\r\n    try {\r\n      const response = await axios.post(this.addItemPath, item);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addUserItem(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(this.addUserItemPath(periodId, userId), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItemInPeriod(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n        validate.isTruthy(item.periodId),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(this.updateItemInPeriodPath(periodId, item.id), { ...item });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItem(item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(this.updateItemPath(item.id), item);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUserItem(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.put(\r\n        this.updateUserItemPath(periodId, userId, item.id), { ...item },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateItemType(periodId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(\r\n        this.updateItemTypePath(periodId, item.id), { type: item.type },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUserItemType(periodId, userId, item) {\r\n    try {\r\n      const validations = and([\r\n        validate.itemContentNotNull(item),\r\n        validate.isTruthy(item.user),\r\n      ]);\r\n      await perform(validations);\r\n      const response = await axios.post(\r\n        this.updateUserItemTypePath(periodId, userId, item.id), { type: item.type },\r\n      );\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteItemFromPeriod(periodId, itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteItemFromPeriodPath(periodId, itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteItem(itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteItemPath(itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteUserItem(periodId, userId, itemId) {\r\n    try {\r\n      const response = await axios.delete(this.deleteUserItemPath(periodId, userId, itemId));\r\n      if (response.status === 204) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addPeriod(body) {\r\n    try {\r\n      const response = await axios.post(this.addPeriodsPath, body);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updatePeriod(periodId, body) {\r\n    try {\r\n      const response = await axios.put(this.periodPath(periodId), body);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async finishPeriod(periodId) {\r\n    try {\r\n      const response = await axios.post(this.periodFinishPath(periodId), null, {\r\n        timeout: 200000,\r\n      });\r\n      if (response.status === 200) {\r\n        return true;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param {String} periodId\r\n   * @param {String} userId\r\n   * @returns {any} the updated period\r\n   */\r\n  async toggleLockPeriod(periodId, userId) {\r\n    try {\r\n      if (!userId) throw new Error('User is unknown');\r\n      const response = await axios.post(this.toggleLockPeriodPath(periodId, userId));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  blankItem(periodId, user, type, status = 'Active') {\r\n    return new Item({\r\n      type,\r\n      status,\r\n      periodId,\r\n      user: user ? user.id : null,\r\n    });\r\n  },\r\n\r\n  /*\r\n   * Given the items, minimum amount and their type:\r\n   * this function should return back the adjusted items collection:\r\n   * 1. if number of items < min => add blank items to fullfil the list\r\n   * 2. if number of items > min and blank items > 1 => remove blank items until\r\n   * blank items = 1 or number of items = min\r\n   */\r\n  normalizeSet(periodId, user, items, min, type) {\r\n    const copy = items.slice().filter((i) => i.user !== null);\r\n    if (!user) {\r\n      return copy;\r\n    } if (type === 'Feedback' && items.length > 0) {\r\n      return copy;\r\n    }\r\n    // array of empty indexes ex: [1, 4, 5]\r\n    const empty = copy.map((i, idx) => idx).filter((i) => copy[i].content === '');\r\n    if (empty.length === 0) {\r\n      copy.push(this.blankItem(periodId, user, type));\r\n    }\r\n    let dif = min - copy.length;\r\n    while (dif > 0) {\r\n      copy.push(this.blankItem(periodId, user, type));\r\n      dif -= 1;\r\n    }\r\n    return copy;\r\n  },\r\n\r\n  async addItemToSet(periodId, item) {\r\n    try {\r\n      const result = await this.addItem(periodId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: null,\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async addUserItemToSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.addUserItem(periodId, userId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: null,\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async deleteItemFromSet(periodId, item) {\r\n    try {\r\n      const result = await this.deleteItemFromPeriod(periodId, item.id);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async deleteUserItemFromSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.deleteUserItem(periodId, userId, item.id);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateItemInSet(periodId, item) {\r\n    try {\r\n      const result = await this.updateItemInPeriod(periodId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateUserItemInSet(periodId, userId, item) {\r\n    try {\r\n      const result = await this.updateUserItem(periodId, userId, item);\r\n      return {\r\n        value: result,\r\n        error: null,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        value: await this.getItem(periodId, item.id),\r\n        error: err,\r\n      };\r\n    }\r\n  },\r\n};\r\n\r\nexport default AppraisalService;\r\n","import AuthorizationRedirectComponent from './AuthorizationRedirectComponent';\r\n\r\nexport default AuthorizationRedirectComponent;\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\nimport NotificationService from '../../../services/NotificationService';\r\n\r\nconst AuthorizationRedirectComponent = ({\r\n  code, grant, to, failureNotification, ...props\r\n}) => {\r\n  const global = useContext(GlobalContext);\r\n  const [access, setAccess] = useState(false);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [notified, setNotified] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const isAuthorized = global.Authorize(code, grant);\r\n    setAccess(isAuthorized);\r\n    if (global.security) {\r\n      setRedirect(!isAuthorized);\r\n      if (failureNotification && !isAuthorized && !notified) {\r\n        NotificationService.notify(failureNotification.content);\r\n        setNotified(true);\r\n      }\r\n    }\r\n  }, [global, code, grant, failureNotification, notified]);\r\n\r\n  let result = null;\r\n\r\n  if (access) {\r\n    result = props.children;\r\n  }\r\n\r\n  if (redirect) {\r\n    result = (<Redirect to={to || '/'} />);\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport default AuthorizationRedirectComponent;\r\n","import AppraisalDetailsInfo from './AppraisalDetailsInfo';\r\n\r\nexport default AppraisalDetailsInfo;\r\n","import { useEffect } from 'react';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\n\r\nconst AppraisalDetailsInfo = ({ periodId, setPeriodDetails }) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      const data = await AppraisalService.getItems(periodId);\r\n      setPeriodDetails(data);\r\n    }\r\n    run();\r\n  }, [periodId, setPeriodDetails]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default AppraisalDetailsInfo;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst UserService = {\r\n  baseUrl: '/api/users',\r\n  teamUsersPath: '/api/users/team-users',\r\n  updateUsersPath: (id) => `/api/users/${id}`,\r\n  getUserPath: (id) => `/api/users/user/${id}`,\r\n  getUserOrganizationsPath: '/api/users/organizations',\r\n  getUserTeamMembersPath: '/api/users/team-members',\r\n  getSettingsUsersPath: '/api/settings/users',\r\n  putSettingsUsersPath: (id) => `/api/settings/users/${id}`,\r\n\r\n  normalizeUser(user) {\r\n    const u = user;\r\n    if (u.role && u.role.id) {\r\n      u.role = u.role.id;\r\n    }\r\n    if (u.organization && u.organization.id) {\r\n      u.organization = u.organization.id;\r\n    }\r\n    u.organizations = u.organizations.map((o) => o.id || o);\r\n    return u;\r\n  },\r\n\r\n  async getSettingsUsers() {\r\n    try {\r\n      const response = await axios.get(this.getSettingsUsersPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUser(id) {\r\n    try {\r\n      const response = await axios.get(this.getUserPath(id));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateUser(id, user) {\r\n    try {\r\n      const response = await axios.put(this.updateUsersPath(id), this.normalizeUser(user));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}\\n`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateSettingsUser(id, user) {\r\n    try {\r\n      const response = await axios.put(this.putSettingsUsersPath(id), this.normalizeUser(user));\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}\\n`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserOrganizations() {\r\n    try {\r\n      const response = await axios.get(this.getUserOrganizationsPath);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getUserTeamMembers() {\r\n    try {\r\n      const response = await axios.get(this.getUserTeamMembersPath);\r\n      return response.data;\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n};\r\nexport default UserService;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { BasePickerListBelow, makeStyles, Text } from '@fluentui/react';\r\nimport { useScreenClass } from 'react-grid-system';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  item: {\r\n    textAlign: 'center',\r\n    padding: theme.spacing.m,\r\n    color: theme.palette.neutralSecondary,\r\n    marginTop: theme.spacing.s2,\r\n    '& > *': {\r\n      padding: theme.spacing.s2,\r\n      border: `1px solid ${theme.palette.themeSecondary}`,\r\n    },\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.m,\r\n  },\r\n  root: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralTertiary,\r\n      '& ::placeholder': {\r\n        color: theme.palette.neutralTertiary,\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nconst defaultGetText = (item) => item.text;\r\n\r\nconst defaultRenderSuggestionItem = (getText, classes) => (item) => (\r\n  <div className={classes.suggestion}>\r\n    <Text variant=\"mediumPlus\">{getText(item)}</Text>\r\n  </div>\r\n);\r\n\r\nconst defaultRenderItem = (getText, classes) => (item) => (\r\n  <div className={classes.item} key={item.key}>\r\n    <Text variant=\"mediumPlus\">{getText(item)}</Text>\r\n  </div>\r\n);\r\n\r\nconst SinglePicker = ({\r\n  options,\r\n  getTextFromItem,\r\n  selected,\r\n  onSelect,\r\n  onRenderItem,\r\n  onRenderSuggestionsItem,\r\n  placeholder = 'Select or search a value in the list...',\r\n  className,\r\n  styles,\r\n  maxHeight,\r\n}) => {\r\n  const classes = useStyles();\r\n  const sc = useScreenClass();\r\n  const [_selected, setSelected] = useState([]);\r\n  const [maxWidth, setMaxwidth] = useState(200);\r\n  const inputRef = useRef();\r\n  const getText = getTextFromItem || defaultGetText;\r\n  const renderItem = onRenderItem || defaultRenderItem(getText, classes);\r\n  const renderSuggestionsItem = onRenderSuggestionsItem\r\n  || defaultRenderSuggestionItem(getText, classes);\r\n\r\n  const handleFilter = (filter, suggestions) => {\r\n    if (filter === '') return suggestions;\r\n    return options.filter(\r\n      (option) => getText(option).toLowerCase().indexOf(filter.toLowerCase()) !== -1,\r\n    );\r\n  };\r\n\r\n  const handleSelect = (item) => {\r\n    if (onSelect) {\r\n      onSelect(item);\r\n    }\r\n    setSelected([item]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (inputRef.current) {\r\n      setMaxwidth(inputRef.current.clientWidth);\r\n    }\r\n  }, [inputRef, sc]);\r\n\r\n  return (\r\n    <div\r\n      ref={inputRef}\r\n      className={`${classes.root} ${className}`}\r\n    >\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder,\r\n        }}\r\n        pickerCalloutProps={{\r\n          styles: {\r\n            root: {\r\n              width: maxWidth,\r\n            },\r\n          },\r\n        }}\r\n        pickerSuggestionsProps={{\r\n          styles: {\r\n            suggestionsContainer: {\r\n              maxHeight,\r\n            },\r\n          },\r\n        }}\r\n        styles={styles}\r\n        selectedItems={selected ? [selected] : _selected}\r\n        onItemSelected={handleSelect}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onResolveSuggestions={handleFilter}\r\n        onRenderItem={({ item }) => renderItem(item)}\r\n        getTextFromItem={getText}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nSinglePicker.propTypes = {\r\n  options: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n  })).isRequired,\r\n  getTextFromItem: PropTypes.func,\r\n  selected: PropTypes.shape({\r\n    key: PropTypes.string,\r\n  }),\r\n  onSelect: PropTypes.func,\r\n  onRenderItem: PropTypes.func,\r\n  onRenderSuggestionsItem: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  className: PropTypes.string,\r\n  styles: PropTypes.shape({\r\n    input: PropTypes.shape({}),\r\n    itemsWrapper: PropTypes.shape({}),\r\n    root: PropTypes.shape({}),\r\n    screenReaderText: PropTypes.shape({}),\r\n    text: PropTypes.shape({}),\r\n  }),\r\n  maxHeight: PropTypes.string,\r\n};\r\n\r\nSinglePicker.defaultProps = {\r\n  getTextFromItem: defaultGetText,\r\n  selected: null,\r\n  onSelect: null,\r\n  onRenderItem: null,\r\n  onRenderSuggestionsItem: null,\r\n  placeholder: 'Select or search a value in the list...',\r\n  className: '',\r\n  styles: null,\r\n  maxHeight: '600px',\r\n};\r\n\r\nexport default SinglePicker;\r\n","import TeamMatesAutocomplete from './TeamMatesAutocomplete';\r\n\r\nexport default TeamMatesAutocomplete;\r\n","import React, { useState, useEffect } from 'react';\r\nimport UserService from '../../../services/UserService';\r\nimport SinglePicker from '../single-picker/SinglePicker';\r\n\r\nconst TeamMatesAutocomplete = ({ onUserSelect }) => {\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await UserService.getUserTeamMembers();\r\n      if (mounted) setUsers(data);\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const handleSelect = (value) => {\r\n    if (onUserSelect) { onUserSelect(value.data); }\r\n  };\r\n\r\n  const autocomplete = (\r\n    <SinglePicker\r\n      placeholder=\"Select or search for a user\"\r\n      options={users.map((u) => ({\r\n        key: u.id,\r\n        data: u,\r\n      }))}\r\n      getTextFromItem={(u) => u.data.username}\r\n      onSelect={handleSelect}\r\n      onRenderItem={() => null}\r\n    />\r\n  );\r\n\r\n  return (\r\n    autocomplete\r\n  );\r\n};\r\n\r\nexport default TeamMatesAutocomplete;\r\n","import React, { useCallback, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport TeamMatesAutocomplete from '../../../shared/team-mates-autocomplete';\r\n\r\nconst AppraisalUserRedirect = ({ defaultValue }) => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const [selectedUser, setSelectedUser] = useState(defaultValue || null);\r\n\r\n  const handleSelect = useCallback((user) => {\r\n    if (user) return history.push(`/appraisals/${id}/user/${user.id}`);\r\n    return setSelectedUser(user);\r\n  }, [history, id]);\r\n\r\n  return (\r\n    <>\r\n      <TeamMatesAutocomplete\r\n        value={selectedUser}\r\n        onUserSelect={(user) => handleSelect(user)}\r\n        defaultValue={defaultValue}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nAppraisalUserRedirect.propTypes = {\r\n  defaultValue: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }),\r\n};\r\n\r\nAppraisalUserRedirect.defaultProps = {\r\n  defaultValue: null,\r\n};\r\n\r\nexport default AppraisalUserRedirect;\r\n","import AppraisalUserRedirect from './AppraisalUserRedirect';\r\n\r\nexport default AppraisalUserRedirect;\r\n","import AuthorizationComponent from './AuthorizationComponent';\r\n\r\nexport default AuthorizationComponent;\r\n","import { useContext, useState, useEffect } from 'react';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst AuthorizationComponent = ({\r\n  code, grant, onReject, ...props\r\n}) => {\r\n  const global = useContext(GlobalContext);\r\n  const [access, setAccess] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setAccess(global.Authorize(code, grant));\r\n  }, [global, code, grant]);\r\n\r\n  if (access) {\r\n    return props.children;\r\n  } if (onReject) {\r\n    return onReject();\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default AuthorizationComponent;\r\n","import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  chip: {\r\n    borderRadius: '16px',\r\n    textAlign: 'center',\r\n    verticalAlign: 'middle',\r\n  },\r\n}));\r\n\r\nconst Chip = ({ style, children, className }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={`${className} ${classes.chip}`} style={style}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nChip.propTypes = {\r\n  style: PropTypes.shape({}),\r\n  className: PropTypes.string,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.any.isRequired,\r\n};\r\n\r\nChip.defaultProps = {\r\n  className: '',\r\n  style: {},\r\n};\r\n\r\nexport default Chip;\r\n","import Chip from './Chip';\r\n\r\nexport default Chip;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  Callout,\r\n  DefaultButton,\r\n  makeStyles,\r\n  Separator,\r\n  Stack,\r\n  Text,\r\n  TextField,\r\n} from '@fluentui/react';\r\nimport { useScreenClass } from 'react-grid-system';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  validate, perform, not, and, or,\r\n} from '../../../../services/validators';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  calloutPrefix: {\r\n    boxShadow: theme.effects.elevation64,\r\n  },\r\n}));\r\n\r\nconst CustomPrefix = ({ children, id }) => {\r\n  const classes = useStyles();\r\n  const [isCalloutVisible, setIsCalloutVisible] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <ActionButton\r\n        id={`prefix-${id}`}\r\n        tabIndex={-1}\r\n        iconProps={{\r\n          iconName: 'Info',\r\n        }}\r\n        onClick={() => setIsCalloutVisible((prev) => !prev)}\r\n      />\r\n      {\r\n        isCalloutVisible\r\n          ? (\r\n            <Callout\r\n              className={classes.calloutPrefix}\r\n              target={`#prefix-${id}`}\r\n              setInitialFocus\r\n              onDismiss={() => setIsCalloutVisible(false)}\r\n              role=\"alertdialog\"\r\n            >\r\n              <Stack\r\n                horizontalAlign=\"start\"\r\n                tokens={{\r\n                  childrenGap: 4,\r\n                }}\r\n                style={{\r\n                  padding: '20px',\r\n                }}\r\n              >\r\n                {children}\r\n                <DefaultButton onClick={() => setIsCalloutVisible(false)}>Close</DefaultButton>\r\n              </Stack>\r\n            </Callout>\r\n          )\r\n          : null\r\n      }\r\n    </>\r\n  );\r\n};\r\n\r\nconst CustomSuffix = ({ menuProps }) => (\r\n  <ActionButton\r\n    tabIndex={-1}\r\n    // onRenderMenuIcon={() => null}\r\n    iconProps={{\r\n      iconName: 'MoreVertical',\r\n    }}\r\n    menuProps={menuProps}\r\n  />\r\n);\r\n\r\nconst AppraisalInput = ({\r\n  item,\r\n  idx,\r\n  changeHandler,\r\n  blurHandler,\r\n  removeHandler,\r\n  changeTypeHandler,\r\n  canInsert,\r\n  canUpdate,\r\n  canDelete,\r\n}) => {\r\n  const sc = useScreenClass();\r\n  let multilineTrashold = 80;\r\n  if (sc === 'sm' || sc === 'xl') {\r\n    multilineTrashold = 50;\r\n  } else if (sc === 'xs' || sc === 'md') {\r\n    multilineTrashold = 25;\r\n  }\r\n  const [value, setValue] = useState({ ...item });\r\n  const [modified, setModified] = useState(false);\r\n  const [multiline, setMultiline] = useState(item.content.length > multilineTrashold);\r\n  const { userId } = useParams();\r\n  const [validations, setValidations] = useState({\r\n    isRelated: false,\r\n    isDeletable: false,\r\n    isFinished: false,\r\n    inputEditable: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const calls = [\r\n        perform(validate.itemRelated(item), false),\r\n        perform(validate.itemStatus(item, 'Finished'), false),\r\n        perform(and([\r\n          not(validate.itemRelated(item)),\r\n          or([\r\n            not(validate.isTruthy(userId)),\r\n            validate.isTruthy(userId),\r\n          ]),\r\n        ]), false),\r\n      ];\r\n      const [checkRelated, checkFinished, checkEditable] = await Promise.all(calls);\r\n      const isRelated = checkRelated.result;\r\n      const isFinished = checkFinished.result;\r\n      const inputEditable = (canInsert || canUpdate)\r\n      && checkEditable.result;\r\n      const isDeletable = canDelete && !isRelated;\r\n      if (mounted) {\r\n        setValidations({\r\n          isRelated,\r\n          isDeletable,\r\n          isFinished,\r\n          inputEditable,\r\n        });\r\n      }\r\n    }\r\n    setValue({ ...item });\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [item, canInsert, canUpdate, canDelete, userId]);\r\n\r\n  const handleBlur = async (e) => {\r\n    e.persist();\r\n    const mod = modified;\r\n    setModified(false);\r\n    await blurHandler(value, idx, mod);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    if (item.type !== 'Feedback') {\r\n      const newMultiline = e.target.value.length > multilineTrashold;\r\n      if (multiline !== newMultiline) {\r\n        setMultiline(newMultiline);\r\n      }\r\n    }\r\n    setValue({ ...item, content: e.target.value });\r\n    changeHandler({ ...value, content: e.target.value }, idx, !modified);\r\n    setModified(true);\r\n  };\r\n\r\n  const handleTypeChange = (type) => async () => {\r\n    if (item.id !== 0) { await changeTypeHandler(item.id, type); }\r\n  };\r\n\r\n  const handleDelete = async (e) => {\r\n    e.persist();\r\n    setValue({ ...item, content: '' });\r\n    await removeHandler(value, idx);\r\n    setModified(false);\r\n  };\r\n\r\n  const menuProps = {\r\n    shouldFocusOnMount: true,\r\n    shouldFocusOnContainer: true,\r\n    items: [],\r\n  };\r\n\r\n  if (item.type.indexOf('Planned') !== -1) {\r\n    menuProps.items.push({\r\n      key: 'moveAchieved',\r\n      text: 'Move to Achieved',\r\n      iconProps: {\r\n        iconName: 'ChevronLeftSmall',\r\n      },\r\n      onClick: handleTypeChange(item.type.replace('Planned', 'Achieved')),\r\n    });\r\n  }\r\n\r\n  if (item.type.indexOf('Achieved') !== -1) {\r\n    menuProps.items.push({\r\n      key: 'movePlanned',\r\n      text: 'Move to Planned',\r\n      iconProps: {\r\n        iconName: 'ChevronRightSmall',\r\n      },\r\n      onClick: handleTypeChange(item.type.replace('Achieved', 'Planned')),\r\n    });\r\n  }\r\n\r\n  menuProps.items.push({\r\n    key: 'delete',\r\n    text: 'Delete',\r\n    iconProps: {\r\n      iconName: 'Delete',\r\n    },\r\n    disabled: !validations.isDeletable,\r\n    onClick: handleDelete,\r\n  });\r\n\r\n  const tooltip = (\r\n    <Stack\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: '3',\r\n      }}\r\n    >\r\n      {\r\n        validations.isRelated\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  This item was added automatically from previous appraisals\r\n                </Text>\r\n              </Stack.Item>\r\n              <Stack.Item align=\"stretch\">\r\n                <Separator />\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n      <Text variant=\"medium\">\r\n        <strong>Created user:</strong>\r\n        {' '}\r\n        {item.createdUser && item.createdUser.username}\r\n      </Text>\r\n      <Text variant=\"medium\">\r\n        <strong>Created date:</strong>\r\n        {' '}\r\n        {item.createdDate && new Date(item.createdDate).toLocaleString()}\r\n      </Text>\r\n      <Stack.Item align=\"stretch\">\r\n        <Separator />\r\n      </Stack.Item>\r\n      {\r\n        item.modifiedUser\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  <strong>Modified user:</strong>\r\n                  {' '}\r\n                  {item.modifiedUser && item.modifiedUser.username}\r\n                </Text>\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n      {\r\n        item.modifiedUser\r\n          ? (\r\n            <>\r\n              <Stack.Item>\r\n                <Text variant=\"medium\">\r\n                  <strong>Modified date:</strong>\r\n                  {' '}\r\n                  {item.modifiedDate && new Date(item.modifiedDate).toLocaleString()}\r\n                </Text>\r\n              </Stack.Item>\r\n              <Stack.Item align=\"stretch\">\r\n                <Separator />\r\n              </Stack.Item>\r\n            </>\r\n          )\r\n          : null\r\n      }\r\n    </Stack>\r\n  );\r\n\r\n  return item.type !== 'Feedback'\r\n    ? (\r\n      <TextField\r\n        id={`app-item-${item.type.toLowerCase()}-${idx}`}\r\n        value={value.content}\r\n        resizable\r\n        multiline={multiline}\r\n        styles={{\r\n          prefix: {\r\n            backgroundColor: 'transparent',\r\n            padding: '0',\r\n          },\r\n          suffix: {\r\n            backgroundColor: 'transparent',\r\n            padding: '0',\r\n          },\r\n          field: {\r\n            padding: '0',\r\n          },\r\n        }}\r\n        onRenderPrefix={() => (item.id !== 0 ? <CustomPrefix id={`${item.type}-${idx}`}>{tooltip}</CustomPrefix> : null)}\r\n        onRenderSuffix={() => (item.id !== 0 ? <CustomSuffix menuProps={menuProps} /> : null)}\r\n        autoAdjustHeight\r\n        autoComplete=\"off\"\r\n        onChange={handleChange}\r\n        onBlur={handleBlur}\r\n        readOnly={!validations.inputEditable}\r\n        iconProps={validations.isRelated ? {\r\n          iconName: 'History',\r\n          style: {\r\n            position: 'relative',\r\n            alignSelf: 'center',\r\n            bottom: 0,\r\n            right: 0,\r\n            paddingRight: 0,\r\n            marginLeft: '8px',\r\n          },\r\n        } : null}\r\n      />\r\n    )\r\n    : (\r\n      <TextField\r\n        id={`app-item-${item.type.toLowerCase()}-${idx}`}\r\n        value={value.content}\r\n        multiline\r\n        autoAdjustHeight\r\n        autoComplete=\"off\"\r\n        onChange={handleChange}\r\n        onBlur={handleBlur}\r\n        disabled={!validations.inputEditable}\r\n      />\r\n    );\r\n};\r\n\r\nAppraisalInput.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    status: PropTypes.string,\r\n    type: PropTypes.string,\r\n    content: PropTypes.string,\r\n    relatedItemId: PropTypes.string,\r\n    createdUser: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    })]),\r\n    createdDate: PropTypes.oneOfType([PropTypes.string, PropTypes.objectOf(Date)]),\r\n    modifiedUser: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n    modifiedDate: PropTypes.string,\r\n  }).isRequired,\r\n  idx: PropTypes.number.isRequired,\r\n  changeHandler: PropTypes.func.isRequired,\r\n  blurHandler: PropTypes.func.isRequired,\r\n  removeHandler: PropTypes.func.isRequired,\r\n  changeTypeHandler: PropTypes.func.isRequired,\r\n  canInsert: PropTypes.bool.isRequired,\r\n  canUpdate: PropTypes.bool.isRequired,\r\n  canDelete: PropTypes.bool.isRequired,\r\n};\r\n\r\nCustomPrefix.propTypes = {\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.any.isRequired,\r\n  id: PropTypes.string.isRequired,\r\n};\r\n\r\nCustomSuffix.propTypes = {\r\n  menuProps: PropTypes.shape({}).isRequired,\r\n};\r\n\r\nexport default AppraisalInput;\r\n","import AppraisalInput from './AppraisalInput';\r\n\r\nexport default AppraisalInput;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    padding: theme.spacing.l2,\r\n  },\r\n}));\r\n\r\nconst Box = ({ children, style, className }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div style={style} className={`${classes.box} ${className}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nBox.propTypes = {\r\n  style: PropTypes.shape({}),\r\n  className: PropTypes.string,\r\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\r\n};\r\n\r\nBox.defaultProps = {\r\n  style: {},\r\n  className: '',\r\n};\r\n\r\nexport default Box;\r\n","import Box from './Box';\r\n\r\nexport default Box;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams } from 'react-router-dom';\r\nimport { makeStyles, Stack, Text } from '@fluentui/react';\r\nimport AppraisalInput from '../appraisal-input';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\nimport Box from '../../../shared/box';\r\nimport { validate, perform } from '../../../../services/validators';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  stack: {\r\n    '& > * + *': {\r\n      paddingTop: theme.spacing.s1,\r\n    },\r\n  },\r\n}));\r\n\r\nconst FieldSet = ({\r\n  context,\r\n  items,\r\n  setItems,\r\n  details,\r\n  type,\r\n  setOtherItems,\r\n}) => {\r\n  const minItems = {\r\n    Achieved: 5,\r\n    Planned: 5,\r\n    Training_Planned: 3,\r\n    Training_Achieved: 3,\r\n    SWOT_S: 5,\r\n    SWOT_W: 5,\r\n    SWOT_O: 5,\r\n    SWOT_T: 5,\r\n    Feedback: 1,\r\n  };\r\n\r\n  const labels = {\r\n    Achieved: 'Achieved',\r\n    Planned: 'Planned',\r\n    Training_Planned: 'Planned',\r\n    Training_Achieved: 'Achieved',\r\n    SWOT_S: 'Strengths',\r\n    SWOT_W: 'Weaknesses',\r\n    SWOT_O: 'Opportunities',\r\n    SWOT_T: 'Threats',\r\n    Feedback: 'Remarks / Other feedback',\r\n  };\r\n  const periodId = details.id;\r\n  const classes = useStyles();\r\n  const min = minItems[type] || 0;\r\n  const [validations, setValidations] = useState({\r\n    canInsert: false,\r\n    canUpdate: false,\r\n    canDelete: false,\r\n  });\r\n  const { userId } = useParams();\r\n  const { user } = context;\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      // if we have no userid, we need to check if the period is locked\r\n      let isLocked = !userId\r\n        ? (await validate.periodLocked(details, user.id)()).result\r\n        : false;\r\n      const isFinished = (await validate.periodStatus(details, 'Finished')()).result;\r\n      // Locked is false by default for finished periods\r\n      if (isFinished) isLocked = false;\r\n      // if period is locked, we cannot insert, update or delete items\r\n      if (!isLocked) {\r\n        const canInsert = (await perform(validate\r\n          .canInsert(context, details, userId), false)).result;\r\n        const canUpdate = (await perform(validate\r\n          .canUpdate(context, details, userId), false)).result;\r\n        const canDelete = (await perform(validate\r\n          .canDelete(context, details, userId), false)).result;\r\n        setValidations((prev) => ({\r\n          ...prev,\r\n          canInsert,\r\n          canUpdate,\r\n          canDelete,\r\n        }));\r\n      }\r\n    }\r\n    setItems(AppraisalService.normalizeSet(\r\n      periodId,\r\n      context.user,\r\n      items,\r\n      min,\r\n      type,\r\n    ));\r\n    run();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // CRUD functions\r\n  const addItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.addItemToSet(id, item);\r\n    }\r\n    return AppraisalService.addUserItemToSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const updateItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.updateItemInSet(id, item);\r\n    }\r\n    return AppraisalService.updateUserItemInSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const deleteItem = useCallback(async (id, item) => {\r\n    if (!userId) {\r\n      return AppraisalService.deleteItemFromSet(id, item);\r\n    }\r\n    return AppraisalService.deleteUserItemFromSet(id, userId, item);\r\n  }, [userId]);\r\n\r\n  const changeHandler = useCallback((item, idx, firstChange) => {\r\n    if (firstChange) {\r\n      setItems((prev) => {\r\n        const copy = prev.slice();\r\n        copy[idx].content = item.content;\r\n        return AppraisalService.normalizeSet(\r\n          periodId, user, copy, min, type,\r\n        );\r\n      });\r\n    }\r\n  }, [user, periodId, type, min, setItems]);\r\n\r\n  const changeTypeHandler = useCallback(async (itemId, itemType) => {\r\n    if (itemId !== 0 && setOtherItems) {\r\n      const item = items.find((i) => i.id === itemId);\r\n      if (item) {\r\n        item.type = itemType;\r\n        const result = await updateItem(periodId, item);\r\n        if (!result.error) {\r\n          setItems((prev) => (\r\n            AppraisalService.normalizeSet(\r\n              periodId,\r\n              user,\r\n              prev.filter((i) => i.id !== result.value.id),\r\n              min,\r\n              itemType,\r\n            )));\r\n          setOtherItems((prev) => AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            prev.filter((i) => i.content !== '').concat(result.value),\r\n            min,\r\n            itemType,\r\n          ));\r\n        }\r\n      }\r\n    }\r\n  }, [user, setOtherItems, min, items, periodId, setItems, updateItem]);\r\n\r\n  // Handle the remove button press\r\n  const removeHandler = useCallback(async (item, idx) => {\r\n    try {\r\n      if (!Number.isNaN(idx) && idx < items.length) {\r\n        if (item.id !== 0) {\r\n          const result = await deleteItem(periodId, items[idx]);\r\n          if (result.error !== null) {\r\n            throw result.error;\r\n          }\r\n        }\r\n        setItems((prev) => {\r\n          const copy = prev.filter((i) => i.id !== item.id);\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setItems((prev) => {\r\n        const copy = prev.slice();\r\n        copy[idx] = item;\r\n        return AppraisalService.normalizeSet(\r\n          periodId,\r\n          user,\r\n          copy,\r\n          min,\r\n          type,\r\n        );\r\n      });\r\n    }\r\n  }, [user, items, periodId, type, min, deleteItem, setItems]);\r\n\r\n  /*\r\n      Following procedure needs to syncronize the current\r\n    item modification with the database\r\n    whenever user loses focus of the input field.\r\n    (Press Tab or click out).\r\n    I receive the item that i was modifying, it's order in\r\n    the group of inputs (index), and a\r\n    flag saiyng whether it was modified.\r\n   */\r\n  const blurHandler = useCallback(async (item, idx, modified) => {\r\n    // If the element i want to syncronize is valid, meaning it has correct order number and type.\r\n    if (idx < items.length && item.type === type) {\r\n      // I determine if the item is new (if it was earlier saved to the database)\r\n      const isNew = item.id === 0 && item.content;\r\n      // I determine if the item needs to be deleted from the database\r\n      // (is not new and content is empty)\r\n      const isToBeDeleted = item.id !== 0 && item.content === '';\r\n      if (isNew) {\r\n        // I try to add the item to the database.\r\n        const result = await addItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          const copy = prev.slice();\r\n          if (!result.error) {\r\n            copy[idx] = result.value;\r\n          } else {\r\n            copy[idx] = item;\r\n            copy[idx].content = '';\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      } else if (isToBeDeleted) {\r\n        // I try to delete the item from the database:\r\n        const result = await deleteItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          let copy = prev.slice();\r\n          if (!result.error) {\r\n            copy = copy.filter((i) => i.id !== item.id);\r\n          } else if (result.value) {\r\n            copy[idx] = result.value;\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      } else if (!isNew && !isToBeDeleted && modified && item.content !== '') {\r\n        // I try to modify item in the database\r\n        const result = await updateItem(periodId, item);\r\n        // Depending whether the addition succeeded or not, i update the input field accordingly\r\n        setItems((prev) => {\r\n          let copy;\r\n          if (result.error) {\r\n            copy = prev.slice();\r\n            if (result.value) copy[idx] = result.value;\r\n          } else {\r\n            copy = prev.map((i) => {\r\n              if (i.id === item.id) {\r\n                return result.value;\r\n              }\r\n              return i;\r\n            });\r\n          }\r\n          return AppraisalService.normalizeSet(\r\n            periodId,\r\n            user,\r\n            copy,\r\n            min,\r\n            type,\r\n          );\r\n        });\r\n      }\r\n    }\r\n  }, [user, items, periodId, type, min, addItem, deleteItem, updateItem, setItems]);\r\n\r\n  return (\r\n    <Box>\r\n      <Stack verticalAlign=\"center\" className={classes.stack}>\r\n        <Stack.Item align=\"center\">\r\n          <Text variant=\"mediumPlus\">{labels[type]}</Text>\r\n        </Stack.Item>\r\n        {items.map((i, idx) => {\r\n          const key = i.id === 0 ? idx : i.id;\r\n          return (\r\n            <Stack.Item\r\n              className={classes.listItem}\r\n              key={key}\r\n            >\r\n              <AppraisalInput\r\n                item={i}\r\n                idx={idx}\r\n                label={labels[type]}\r\n                changeHandler={changeHandler}\r\n                blurHandler={blurHandler}\r\n                removeHandler={removeHandler}\r\n                changeTypeHandler={changeTypeHandler}\r\n                canInsert={validations.canInsert}\r\n                canUpdate={validations.canUpdate}\r\n                canDelete={validations.canDelete}\r\n              />\r\n            </Stack.Item>\r\n          );\r\n        })}\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n\r\nFieldSet.propTypes = {\r\n  context: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n    Authorize: PropTypes.func,\r\n  }).isRequired,\r\n  items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  setItems: PropTypes.func.isRequired,\r\n  details: PropTypes.shape({\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  setOtherItems: PropTypes.func,\r\n};\r\n\r\nFieldSet.defaultProps = {\r\n  setOtherItems: null,\r\n};\r\n\r\nexport default FieldSet;\r\n","import FieldSet from './FieldSet';\r\n\r\nexport default FieldSet;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Icon,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  Separator,\r\n  Text,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport AppraisalUserRedirect from '../appraisal-user-redirect';\r\nimport AuthorizationComponent from '../../../shared/authorization-component';\r\nimport { validate } from '../../../../services/validators';\r\nimport PageHeader from '../../../shared/page-header';\r\nimport Chip from '../../../shared/chip';\r\nimport FieldSet from '../appraisal-field-set';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chipContent: {\r\n    backgroundColor: theme.palette.neutralQuaternary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  lockedChip: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: '#fff',\r\n  },\r\n  lockIcon: {\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  container: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalDetailsDisplay = ({ context, periodDetails }) => {\r\n  const classes = useStyles();\r\n  const [achieved, setAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Achieved'));\r\n  const [planned, setPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Planned'));\r\n  const [trainingPlanned, setTrainingPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Training_Planned'));\r\n  const [trainingAchieved, setTrainingAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Training_Achieved'));\r\n  const [swotS, setSWOTS] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_S'));\r\n  const [swotW, setSWOTW] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_W'));\r\n  const [swotO, setSWOTO] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_O'));\r\n  const [swotT, setSWOTT] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_T'));\r\n  const [feedBack, setFeedBack] = useState(periodDetails.items.filter((el) => el.type === 'Feedback'));\r\n  const [locked, setLocked] = useState(false);\r\n  const { user } = context;\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const isLocked = (await validate.periodLocked(periodDetails, user.id)()).result;\r\n      if (mounted) {\r\n        setLocked(isLocked);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [periodDetails, user.id]);\r\n\r\n  return (\r\n    <Container md className={classes.container}>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <PageHeader text={`Details '${periodDetails.name ? periodDetails.name : ''}'`} />\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={6} lg={4}>\r\n          <AuthorizationComponent code=\"APPRAISAL DETAILS - OTHER USERS\" grant=\"read\">\r\n            <AppraisalUserRedirect />\r\n          </AuthorizationComponent>\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {user\r\n            ? (\r\n              <Chip className={classes.chipContent}>\r\n                <Persona size={PersonaSize.size24} text={user.username} />\r\n              </Chip>\r\n            )\r\n            : null}\r\n        </div>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {\r\n          locked\r\n            ? (\r\n              <Chip className={classes.lockedChip}>\r\n                <Icon className={classes.lockIcon} iconName=\"LockSolid\" />\r\n                <Text variant=\"smallPlus\">Locked</Text>\r\n              </Chip>\r\n            )\r\n            : null\r\n          }\r\n        </div>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Objectives</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={achieved} setItems={setAchieved} type=\"Achieved\" setOtherItems={setPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={planned} setItems={setPlanned} type=\"Planned\" setOtherItems={setAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Trainings</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingAchieved} setItems={setTrainingAchieved} type=\"Training_Achieved\" setOtherItems={setTrainingPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingPlanned} setItems={setTrainingPlanned} type=\"Training_Planned\" setOtherItems={setTrainingAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">SWOT</Text></Separator>\r\n      <Row nogutter>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotS} setItems={setSWOTS} type=\"SWOT_S\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotW} setItems={setSWOTW} type=\"SWOT_W\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotO} setItems={setSWOTO} type=\"SWOT_O\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotT} setItems={setSWOTT} type=\"SWOT_T\" />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <FieldSet context={context} details={periodDetails} items={feedBack} setItems={setFeedBack} type=\"Feedback\" />\r\n        </Col>\r\n      </Row>\r\n      <div style={{ padding: '20px' }} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nAppraisalDetailsDisplay.propTypes = {\r\n  context: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      avatar: PropTypes.string,\r\n      username: PropTypes.string,\r\n    }),\r\n  }).isRequired,\r\n  periodDetails: PropTypes.shape({\r\n    name: PropTypes.string,\r\n    items: PropTypes.arrayOf(PropTypes.shape({\r\n      type: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n};\r\n\r\nexport default AppraisalDetailsDisplay;\r\n","import AppraisalDetailsDisplay from './AppraisalDetailsDisplay';\r\n\r\nexport default AppraisalDetailsDisplay;\r\n","import AppraisalUserInfo from './AppraisalUserInfo';\r\n\r\nexport default AppraisalUserInfo;\r\n","import { useEffect } from 'react';\r\nimport AppraisalService from '../../../../services/AppraisalService';\r\nimport UserService from '../../../../services/UserService';\r\n\r\nconst AppraisalUserInfo = ({\r\n  periodId, userId, setUserDetails, setPeriodDetails,\r\n}) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      /*\r\n        I try to get user's info and set it\r\n        Then i try to get periodInfo and set it\r\n        If i fail, i throw an error\r\n      */\r\n      const userData = await UserService.getUser(userId);\r\n      setUserDetails(userData);\r\n      const periodData = await AppraisalService.getUserItems(periodId, userId);\r\n      setPeriodDetails(periodData);\r\n    }\r\n    run();\r\n  }, [periodId, userId, setPeriodDetails, setUserDetails]);\r\n  return null;\r\n};\r\n\r\nexport default AppraisalUserInfo;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Icon, makeStyles, Persona, PersonaSize, PrimaryButton, Separator, Text,\r\n} from '@fluentui/react';\r\nimport FieldSet from '../appraisal-field-set';\r\nimport AppraisalUserRedirect from '../appraisal-user-redirect';\r\nimport AuthorizationComponent from '../../../shared/authorization-component';\r\nimport constants from '../../../../utils/constants';\r\nimport { validate } from '../../../../services/validators';\r\nimport Chip from '../../../shared/chip';\r\nimport PageHeader from '../../../shared/page-header';\r\n\r\nconst userStyles = makeStyles((theme) => ({\r\n  chipContent: {\r\n    backgroundColor: theme.palette.neutralQuaternary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  lockedChip: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    padding: '7px',\r\n    display: 'inline-flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: '#fff',\r\n  },\r\n  lockIcon: {\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  container: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalUserDetails = ({\r\n  context, periodDetails, userDetails, handleLockButton,\r\n}) => {\r\n  const classes = userStyles();\r\n  const [achieved, setAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Achieved'));\r\n  const [planned, setPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Planned'));\r\n  const [trainingPlanned, setTrainingPlanned] = useState(periodDetails.items.filter((el) => el.type === 'Training_Planned'));\r\n  const [trainingAchieved, setTrainingAchieved] = useState(periodDetails.items.filter((el) => el.type === 'Training_Achieved'));\r\n  const [swotS, setSWOTS] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_S'));\r\n  const [swotW, setSWOTW] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_W'));\r\n  const [swotO, setSWOTO] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_O'));\r\n  const [swotT, setSWOTT] = useState(periodDetails.items.filter((el) => el.type === 'SWOT_T'));\r\n  const [feedBack, setFeedBack] = useState(periodDetails.items.filter((el) => el.type === 'Feedback'));\r\n  const [locked, setLocked] = useState(false);\r\n  const [finished, setFinished] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const isLocked = (await validate.periodLocked(periodDetails, userDetails.id)()).result;\r\n      const isFinished = (await validate.periodStatus(periodDetails, 'Finished')()).result;\r\n      if (mounted) {\r\n        setLocked(isLocked);\r\n        setFinished(isFinished);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [periodDetails, userDetails.id]);\r\n\r\n  return (\r\n    <Container md className={classes.container}>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <PageHeader text={`Details '${periodDetails.name ? periodDetails.name : ''}'`} />\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={6} lg={4}>\r\n          <AuthorizationComponent code=\"APPRAISAL DETAILS - OTHER USERS\" grant=\"read\">\r\n            <AppraisalUserRedirect />\r\n          </AuthorizationComponent>\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {userDetails\r\n            ? (\r\n              <Chip className={classes.chipContent}>\r\n                <Persona size={PersonaSize.size24} text={userDetails.username} />\r\n              </Chip>\r\n            )\r\n            : null}\r\n        </div>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <div>\r\n          {\r\n          locked\r\n            ? (\r\n              <Chip className={classes.lockedChip}>\r\n                <Icon className={classes.lockIcon} iconName=\"LockSolid\" />\r\n                <Text variant=\"smallPlus\">Locked</Text>\r\n              </Chip>\r\n            )\r\n            : null\r\n          }\r\n        </div>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Objectives</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={achieved} setItems={setAchieved} type=\"Achieved\" setOtherItems={setPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={planned} setItems={setPlanned} type=\"Planned\" setOtherItems={setAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">Trainings</Text></Separator>\r\n      <Row>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingAchieved} setItems={setTrainingAchieved} type=\"Training_Achieved\" setOtherItems={setTrainingPlanned} />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={trainingPlanned} setItems={setTrainingPlanned} type=\"Training_Planned\" setOtherItems={setTrainingAchieved} />\r\n        </Col>\r\n      </Row>\r\n      <Separator><Text variant=\"mediumPlus\">SWOT</Text></Separator>\r\n      <Row nogutter>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotS} setItems={setSWOTS} type=\"SWOT_S\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotW} setItems={setSWOTW} type=\"SWOT_W\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotO} setItems={setSWOTO} type=\"SWOT_O\" />\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <FieldSet context={context} details={periodDetails} items={swotT} setItems={setSWOTT} type=\"SWOT_T\" />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <FieldSet context={context} details={periodDetails} items={feedBack} setItems={setFeedBack} type=\"Feedback\" />\r\n        </Col>\r\n      </Row>\r\n      <AuthorizationComponent\r\n        code={constants.securities.APPRAISAL_DETAILS_OTHER.code}\r\n        grant={constants.securities.APPRAISAL_DETAILS_OTHER.grants.toggleLock}\r\n      >\r\n        {\r\n           !finished\r\n             ? (\r\n               <Row align=\"center\" justify=\"center\">\r\n                 <PrimaryButton\r\n                   primary\r\n                   iconProps={{\r\n                     iconName: locked ? 'Unlock' : 'Lock',\r\n                   }}\r\n                   onClick={handleLockButton}\r\n                   text={locked ? 'Unlock' : 'Lock'}\r\n                 />\r\n               </Row>\r\n             )\r\n             : null\r\n         }\r\n        <div style={{ padding: '20px' }} />\r\n      </AuthorizationComponent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nAppraisalUserDetails.propTypes = {\r\n  context: PropTypes.shape({\r\n\r\n  }).isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  userDetails: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }).isRequired,\r\n  periodDetails: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n    items: PropTypes.arrayOf(PropTypes.shape({\r\n      type: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n  handleLockButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AppraisalUserDetails;\r\n","import AppraisalUserDetails from './AppraisalUserDetails';\r\n\r\nexport default AppraisalUserDetails;\r\n","import AppraisalDetails from './AppraisalDetails';\r\n\r\nexport default AppraisalDetails;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useParams } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport AppraisalDetailsInfo from './components/appraisal-info';\r\nimport AppraisalDetailsDisplay from './components/appraisal-details-display';\r\nimport AppraisalUserInfo from './components/appraisal-user-info';\r\nimport AppraisalUserDetails from './components/appraisal-user-details-display';\r\nimport AppraisalService from '../../services/AppraisalService';\r\n\r\nconst AppraisalDetails = ({ context }) => {\r\n  const [periodDetails, setPeriodDetails] = useState(null);\r\n  const [userDetails, setUserDetails] = useState(null);\r\n  const periodId = useParams().id;\r\n  const { userId } = useParams();\r\n\r\n  useEffect(() => {\r\n    setPeriodDetails(null);\r\n    setUserDetails(null);\r\n  }, [userId]);\r\n\r\n  /**\r\n   * Handle locking button for user period\r\n   */\r\n  const handleLockButton = async () => {\r\n    if (userId) {\r\n      const result = await AppraisalService.toggleLockPeriod(periodDetails.id, userId);\r\n      setPeriodDetails((prev) => {\r\n        if (prev) {\r\n          return {\r\n            ...prev,\r\n            users: result.users.slice(),\r\n          };\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n  };\r\n\r\n  let display;\r\n  if (!userId) {\r\n    display = (\r\n      <>\r\n        {\r\n          periodDetails === null\r\n            ? <AppraisalDetailsInfo periodId={periodId} setPeriodDetails={setPeriodDetails} />\r\n            : <AppraisalDetailsDisplay context={context} periodDetails={periodDetails} />\r\n        }\r\n      </>\r\n    );\r\n  } else {\r\n    display = (\r\n      <>\r\n        {\r\n          periodDetails === null || userDetails === null\r\n            ? (\r\n              <AppraisalUserInfo\r\n                periodId={periodId}\r\n                userId={userId}\r\n                setUserDetails={setUserDetails}\r\n                setPeriodDetails={setPeriodDetails}\r\n              />\r\n            )\r\n            : (\r\n              <AppraisalUserDetails\r\n                context={context}\r\n                periodDetails={periodDetails}\r\n                userDetails={userDetails}\r\n                handleLockButton={handleLockButton}\r\n              />\r\n            )\r\n}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DocumentTitle title={periodDetails ? periodDetails.name : 'App'}>\r\n      {display}\r\n    </DocumentTitle>\r\n  );\r\n};\r\n\r\nAppraisalDetails.propTypes = {\r\n  context: PropTypes.shape({}).isRequired,\r\n};\r\n\r\nexport default AppraisalDetails;\r\n","import AppraisalDetailsPage from './AppraisalDetailsPage';\r\n\r\nexport default AppraisalDetailsPage;\r\n","import React, { useContext } from 'react';\r\nimport { Container } from 'react-grid-system';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport AppraisalDetails from '../../components/appraisal-details';\r\nimport constants from '../../utils/constants';\r\n\r\nconst AppraisalDetailsPage = () => {\r\n  const global = useContext(GlobalContext);\r\n  return (\r\n    <Container md>\r\n      <AuthorizationRedirectComponent\r\n        code={constants.securities.APPRAISAL_DETAILS.code}\r\n        grant={constants.securities.APPRAISAL_DETAILS.grants.read}\r\n        to=\"/appraisals\"\r\n        failureNotification={{\r\n          type: 'info',\r\n          header: 'No access',\r\n          content: 'You have no access to this page. Please contact your administrator',\r\n        }}\r\n      >\r\n        <AppraisalDetails context={global} />\r\n      </AuthorizationRedirectComponent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppraisalDetailsPage;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack, TextField,\r\n} from '@fluentui/react';\r\n\r\nconst PanelNew = ({ isOpen, setOpen, handleCreate }) => {\r\n  const [val, setVal] = useState('');\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleCreate(val).finally(() => {\r\n      setVal('');\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      type={PanelType.smallFixedFar}\r\n      headerText=\"Create period\"\r\n    >\r\n      <form onSubmit={handleSubmit}>\r\n        <Stack verticalAlign=\"start\">\r\n          <Stack.Item tokens={{\r\n            margin: '10px 0',\r\n          }}\r\n          >\r\n            <TextField\r\n              label=\"Name\"\r\n              value={val}\r\n              autoFocus\r\n              onChange={(e) => {\r\n                const result = e.target.value;\r\n                setVal(result);\r\n              }}\r\n            />\r\n          </Stack.Item>\r\n          <Stack horizontal horizontalAlign=\"space-evenly\">\r\n            <PrimaryButton type=\"submit\">Create</PrimaryButton>\r\n            <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n          </Stack>\r\n        </Stack>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nPanelNew.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleCreate: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default PanelNew;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack, TextField,\r\n} from '@fluentui/react';\r\n\r\nconst PanelEdit = ({\r\n  item, isOpen, setOpen, handleEdit,\r\n}) => {\r\n  const [val, setVal] = useState(item ? item.name : '');\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleEdit(item.id, val).finally(() => {\r\n      setVal('');\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setVal(item ? item.name : '');\r\n  }, [item]);\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      type={PanelType.smallFixedFar}\r\n      headerText=\"Edit period\"\r\n    >\r\n      <form onSubmit={handleSubmit}>\r\n        <Stack verticalAlign=\"start\">\r\n          <Stack.Item tokens={{\r\n            margin: '10px 0',\r\n          }}\r\n          >\r\n            <TextField\r\n              label=\"Name\"\r\n              value={val}\r\n              autoFocus\r\n              onChange={(e) => {\r\n                const result = e.target.value;\r\n                setVal(result);\r\n              }}\r\n            />\r\n          </Stack.Item>\r\n          <Stack horizontal horizontalAlign=\"space-evenly\">\r\n            <PrimaryButton type=\"submit\">Update</PrimaryButton>\r\n            <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n          </Stack>\r\n        </Stack>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nPanelEdit.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  }),\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleEdit: PropTypes.func.isRequired,\r\n};\r\n\r\nPanelEdit.defaultProps = {\r\n  item: null,\r\n};\r\n\r\nexport default PanelEdit;\r\n","/* eslint-disable no-param-reassign */\r\nimport React, {\r\n  useState, useEffect, useContext,\r\n} from 'react';\r\nimport {\r\n  Switch, Route, useRouteMatch, useHistory,\r\n} from 'react-router-dom';\r\nimport {\r\n  Checkbox,\r\n  CommandBar,\r\n  SearchBox,\r\n  SelectionMode,\r\n  Separator,\r\n  Stack,\r\n  Text,\r\n  useTheme,\r\n} from '@fluentui/react';\r\nimport {\r\n  Col, Container, Row, useScreenClass,\r\n} from 'react-grid-system';\r\nimport { downloadBlob } from 'download.js';\r\nimport Table from '../../components/shared/table';\r\nimport AppraisalService from '../../services/AppraisalService';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AppraisalDetailsPage from '../appraisal-details';\r\nimport PageHeader from '../../components/shared/page-header';\r\nimport Chip from '../../components/shared/chip';\r\nimport PanelNew from '../../components/appraisal-list/panel-new/PanelNew';\r\nimport constants from '../../utils/constants';\r\nimport PanelEdit from '../../components/appraisal-list/panel-edit/PanelEdit';\r\nimport NotificationService from '../../services/NotificationService';\r\nimport ReportingService from '../../services/ReportingService';\r\n\r\nconst { APPRAISAL_PERIODS: AP, REPORTS: REP } = constants.securities;\r\n\r\nconst AppraisalsPage = () => {\r\n  const theme = useTheme();\r\n  const history = useHistory();\r\n  const screenClass = useScreenClass();\r\n  const [items, setItems] = useState([]);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [showClosed, setShowClosed] = useState(true);\r\n  const [newPanelOpen, setNewPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const global = useContext(GlobalContext);\r\n  const { path } = useRouteMatch();\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'status',\r\n      name: 'Status',\r\n      fieldName: 'status',\r\n      minWidth: 70,\r\n      maxWidth: 70,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      sort: (a, b) => (a.status > b.status ? -1 : 1),\r\n      onRender: (item) => (\r\n        <Chip\r\n          style={{\r\n            backgroundColor: item.status === 'Finished'\r\n              ? theme.palette.blue\r\n              : theme.palette.green,\r\n            padding: '3px',\r\n          }}\r\n        >\r\n          <Text\r\n            variant=\"xSmall\"\r\n            style={{\r\n              color: '#fff',\r\n            }}\r\n          >\r\n            {item.status}\r\n          </Text>\r\n        </Chip>\r\n      ),\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: 'Name',\r\n      fieldName: 'name',\r\n      data: 'string',\r\n      isResizable: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      minWidth: 100,\r\n      maxWidth: 350,\r\n    },\r\n    {\r\n      key: 'createdUser',\r\n      name: 'Created by',\r\n      fieldName: 'createdUser',\r\n      isPadded: true,\r\n      isResizable: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      filterValueAccessor: (i) => i.createdUser.username,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      data: 'string',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{item.createdUser.username}</div>),\r\n    },\r\n    {\r\n      key: 'createdDate',\r\n      name: 'Created on',\r\n      fieldName: 'createdDate',\r\n      isResizable: true,\r\n      isPadded: true,\r\n      isSortable: true,\r\n      data: 'date',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{new Date(item.createdDate).toLocaleString()}</div>),\r\n    },\r\n  ]);\r\n  const [sortedColumn, setSortedColumn] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      const result = await AppraisalService.getPeriods();\r\n      setItems(result);\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSortedColumn({\r\n      ...columns[3],\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n    });\r\n  }, [columns]);\r\n\r\n  useEffect(() => {\r\n    setFilteredItems(showClosed ? items : items.filter((i) => i.status !== 'Finished'));\r\n  }, [showClosed, items]);\r\n\r\n  const handleItemInvoked = (item) => {\r\n    history.push(`${path}/${item.id}`);\r\n  };\r\n\r\n  const clickFinishHandler = async () => {\r\n    if (selectionDetails.count) {\r\n      const item = selectionDetails.items[0];\r\n      const result = await AppraisalService.finishPeriod(item.id);\r\n      if (result) {\r\n        setItems((prev) => prev.map((i) => (i.id === item.id ? { ...item, status: 'Finished' } : i)));\r\n        NotificationService.notifySuccess(`Period '${item.name}' finished`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreate = async (name) => {\r\n    if (global.user\r\n      && global.user.id\r\n      && global.user.organization\r\n      && global.user.organization.id) {\r\n      const result = await AppraisalService.addPeriod({\r\n        name,\r\n        status: 'Active',\r\n        organizationId: global.user.organization.id,\r\n        createdUser: global.user.id,\r\n      });\r\n      setItems((prev) => prev.slice().concat(result));\r\n      NotificationService.notifySuccess(`Period '${name}' created`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = async (id, name) => {\r\n    if (global.user\r\n      && global.user.id\r\n      && global.user.organization\r\n      && global.user.organization.id\r\n      && global.Authorize(AP.code, AP.grants.update)) {\r\n      const result = await AppraisalService.updatePeriod(id, {\r\n        name,\r\n      });\r\n      setItems((prev) => prev.map((i) => (i.id === result.id ? result : i)));\r\n    }\r\n  };\r\n\r\n  const handleGenerateReport = async (id) => {\r\n    try {\r\n      const reportBlob = await ReportingService.generateAppraisalReport({\r\n        periods: [id],\r\n      });\r\n      if (reportBlob) {\r\n        downloadBlob('appraisal.xlsx', reportBlob);\r\n        NotificationService.notifySuccess('Report generated');\r\n      }\r\n    } catch (err) {\r\n      NotificationService.notifyError('Cannot generate report -', err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route exact path={path}>\r\n          <Container md>\r\n            <Row>\r\n              <Col xs={12}>\r\n                <PageHeader text=\"Appraisals\" />\r\n              </Col>\r\n            </Row>\r\n            <Separator />\r\n            <Row>\r\n              <Col xs={12}>\r\n                <Stack horizontalAlign=\"stretch\">\r\n                  <Row align=\"start\">\r\n                    <Col xs={12} sm={6}>\r\n                      <CommandBar items={[\r\n                        {\r\n                          key: 'openItem',\r\n                          text: 'Open',\r\n                          disabled: selectionDetails.count === 0\r\n                          || !global.Authorize(AP.code, AP.grants.read),\r\n                          iconProps: { iconName: 'OpenFile' },\r\n                          onClick: () => handleItemInvoked(\r\n                            selectionDetails.count\r\n                            && selectionDetails.items[0],\r\n                          ),\r\n                        },\r\n                        {\r\n                          key: 'newItem',\r\n                          text: 'New',\r\n                          disabled: !global.Authorize(AP.code, AP.grants.create),\r\n                          iconProps: { iconName: 'Add' },\r\n                          onClick: () => setNewPanelOpen(true),\r\n                        },\r\n                        {\r\n                          key: 'editItem',\r\n                          text: 'Edit',\r\n                          disabled: selectionDetails.count === 0\r\n                          || !global.Authorize(AP.code, AP.grants.update),\r\n                          iconProps: { iconName: 'Edit' },\r\n                          onClick: () => setEditPanelOpen(true),\r\n                        },\r\n                        {\r\n                          key: 'finishItem',\r\n                          text: 'Finish',\r\n                          disabled: selectionDetails.count === 0\r\n                            || (selectionDetails.count && selectionDetails.items[0].status === 'Finished')\r\n                            || !global.Authorize(AP.code, AP.grants.finish),\r\n                          iconProps: { iconName: 'SaveAndClose' },\r\n                          onClick: clickFinishHandler,\r\n                        },\r\n                        {\r\n                          key: 'generateReport',\r\n                          text: 'Appraisal report',\r\n                          disabled: selectionDetails.count === 0\r\n                            || !global.Authorize(REP.code, REP.grants.read),\r\n                          iconProps: { iconName: 'MobileReport' },\r\n                          onClick: () => handleGenerateReport(\r\n                            selectionDetails.count ? selectionDetails.items[0].id : null,\r\n                          ),\r\n                        },\r\n                      ]}\r\n                      />\r\n                    </Col>\r\n                    <Col xs={12} sm={6}>\r\n                      <Stack horizontalAlign={screenClass === 'xs' ? 'start' : 'end'} horizontal>\r\n                        <Stack verticalAlign=\"center\" horizontalAlign=\"start\">\r\n                          <SearchBox\r\n                            placeholder=\"Search\"\r\n                            styles={{\r\n                              root: {\r\n                                minWidth: 250,\r\n                              },\r\n                            }}\r\n                            value={searchValue}\r\n                            onChange={(e) => setSearchValue(e && e.target ? e.target.value : '')}\r\n                          />\r\n                          <Checkbox\r\n                            label=\"Show closed\"\r\n                            checked={showClosed}\r\n                            onChange={() => setShowClosed((prev) => !prev)}\r\n                            styles={{\r\n                              root: {\r\n                                paddingTop: theme.spacing.s1,\r\n                              },\r\n                            }}\r\n                          />\r\n                        </Stack>\r\n                      </Stack>\r\n                    </Col>\r\n                  </Row>\r\n                  <Separator />\r\n                  <Table\r\n                    items={filteredItems}\r\n                    columns={columns}\r\n                    selectionMode={SelectionMode.single}\r\n                    onItemInvoked={handleItemInvoked}\r\n                    searchValue={searchValue}\r\n                    sortedCol={sortedColumn}\r\n                    setSelectionDetails={setSelectionDetails}\r\n                  />\r\n                  <PanelNew\r\n                    isOpen={newPanelOpen}\r\n                    setOpen={setNewPanelOpen}\r\n                    handleCreate={handleCreate}\r\n                  />\r\n                  <PanelEdit\r\n                    item={selectionDetails.count ? selectionDetails.items[0] : null}\r\n                    isOpen={editPanelOpen}\r\n                    setOpen={setEditPanelOpen}\r\n                    handleEdit={handleEdit}\r\n                  />\r\n                </Stack>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Route>\r\n        <Route exact path={`${path}/:id/user/:userId`}>\r\n          <AppraisalDetailsPage ctx={global} setCtx={global.setContext} />\r\n        </Route>\r\n        <Route path={`${path}/:id`}>\r\n          <AppraisalDetailsPage ctx={global} setCtx={global.setContext} />\r\n        </Route>\r\n      </Switch>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppraisalsPage;\r\n","import AppraisalsPage from './AppraisalsPage';\r\n\r\nexport default AppraisalsPage;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  CommandButton,\r\n  List,\r\n  makeStyles,\r\n  Separator,\r\n  Stack,\r\n  Text,\r\n  TextField,\r\n} from '@fluentui/react';\r\nimport AppraisalService from '../../../../../services/AppraisalService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    border: `1px solid ${theme.palette.themeDarkAlt}`,\r\n    padding: theme.spacing.m,\r\n  },\r\n  header: {\r\n    textAlign: 'center',\r\n  },\r\n  subHeader: {\r\n    textAlign: 'center',\r\n    color: theme.palette.neutralTertiary,\r\n  },\r\n}));\r\n\r\nconst HomePlannedItemsDisplay = ({ items, setItems }) => {\r\n  const classes = useStyles();\r\n  const [newItemVal, setNewItemVal] = useState('');\r\n\r\n  const handleInputChange = (e) => {\r\n    setNewItemVal(e.target.value);\r\n  };\r\n\r\n  const setType = async (item, type) => {\r\n    const result = await AppraisalService.updateItem({ ...item, type });\r\n    setItems((prev) => {\r\n      const copy = { ...item, type: result.type };\r\n      return prev.map((i) => (i.id === item.id ? copy : i));\r\n    });\r\n  };\r\n\r\n  const checkboxChangeHandler = (item) => (e) => {\r\n    if (e.target.checked) {\r\n      setType(item, 'Achieved');\r\n    } else {\r\n      setType(item, 'Planned');\r\n    }\r\n  };\r\n\r\n  const addItem = async (content) => {\r\n    if (content !== '') {\r\n      const item = {\r\n        content,\r\n        createdDate: new Date(),\r\n        modifiedDate: new Date(),\r\n        status: 'Active',\r\n        type: 'Planned',\r\n        periodId: null,\r\n        relatedItemId: null,\r\n      };\r\n      const result = await AppraisalService.addOrphan(item);\r\n      setItems((prev) => prev.concat(result));\r\n      setNewItemVal('');\r\n    }\r\n  };\r\n\r\n  const removeItem = async (item) => {\r\n    await AppraisalService.deleteItem(item.id);\r\n    setItems((prev) => prev.filter((i) => i.id !== item.id));\r\n  };\r\n\r\n  const renderCell = (item) => (\r\n    <Stack horizontalAlign=\"start\" verticalAlign=\"center\" horizontal>\r\n      <Checkbox name={item.content} checked={item.type === 'Achieved'} onChange={checkboxChangeHandler(item)} />\r\n      <Stack.Item grow={1}>\r\n        <Text variant=\"medium\">{item.content}</Text>\r\n      </Stack.Item>\r\n      <CommandButton iconProps={{ iconName: 'ChromeClose' }} disabled={item.relatedItemId !== null} onClick={() => removeItem(item)} />\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stack>\r\n        <Text block className={classes.header} variant=\"mediumPlus\">Planned items</Text>\r\n        <Text block className={classes.subHeader} variant=\"medium\">Here you will see items planned over past periods</Text>\r\n        <Separator />\r\n        <List items={items} onRenderCell={renderCell} />\r\n        <Separator />\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            addItem(newItemVal);\r\n          }}\r\n        >\r\n          <TextField\r\n            autoComplete=\"off\"\r\n            value={newItemVal}\r\n            onChange={handleInputChange}\r\n            suffix=\"Add\"\r\n            onRenderSuffix={({ suffix }) => (\r\n              <CommandButton\r\n                type=\"submit\"\r\n                default\r\n                iconProps={{ iconName: 'Add' }}\r\n              >\r\n                {suffix}\r\n              </CommandButton>\r\n            )}\r\n          />\r\n        </form>\r\n      </Stack>\r\n    </div>\r\n  );\r\n};\r\n\r\nHomePlannedItemsDisplay.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  setItems: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default HomePlannedItemsDisplay;\r\n","import HomePlannedItemsDisplay from './HomePlannedItemsDisplay';\r\n\r\nexport default HomePlannedItemsDisplay;\r\n","import { useEffect } from 'react';\r\nimport AppraisalService from '../../../../../services/AppraisalService';\r\n\r\nconst HomePlannedItemsInfoProvider = ({ setItems }) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      setItems(await AppraisalService.getOrphans('Planned,Achieved'));\r\n    }\r\n    run();\r\n  }, [setItems]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default HomePlannedItemsInfoProvider;\r\n","import HomePlannedItems from './HomePlannedItems';\r\n\r\nexport default HomePlannedItems;\r\n","import React, { useState } from 'react';\r\n\r\nimport HomePlannedItemsDisplay from './components/HomePlannedItemsDisplay';\r\nimport HomePlannedItemsInfoProvider from './components/HomePlannedItemsInfoProvider/HomePlannedItemsInfoProvider';\r\n\r\nconst HomePlannedItems = () => {\r\n  const [items, setItems] = useState([]);\r\n\r\n  return (\r\n    <>\r\n      <HomePlannedItemsInfoProvider setItems={setItems} />\r\n      <HomePlannedItemsDisplay items={items} setItems={setItems} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePlannedItems;\r\n","import HomePage from './HomePage';\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { Container, Row, Col } from 'react-grid-system';\r\nimport PageHeader from '../../components/shared/page-header';\r\nimport HomePlannedItems from '../../components/widgets/home-planned-items';\r\n\r\nconst HomePage = () => (\r\n  <>\r\n    <PageHeader text=\"Home Page\" />\r\n    <Container fluid>\r\n      <Row>\r\n        <Col sm={6} xs={12}>\r\n          <HomePlannedItems />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  </>\r\n);\r\n\r\nexport default HomePage;\r\n","import SettingsGeneral from './SettingsGeneral';\r\n\r\nexport default SettingsGeneral;\r\n","import React from 'react';\r\n\r\nconst SettingsGeneral = () => (\r\n  <>\r\n    <h1>Settings general</h1>\r\n  </>\r\n);\r\n\r\nexport default SettingsGeneral;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst TeamService = {\r\n  baseUrl: '/api/teams',\r\n\r\n  validate(team) {\r\n    if (!team) throw new Error('Team name missing');\r\n    return true;\r\n  },\r\n\r\n  async getTeams() {\r\n    try {\r\n      const response = await axios.get(this.baseUrl);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async addTeam(team) {\r\n    try {\r\n      this.validate(team);\r\n      const response = await axios.post(this.baseUrl, { team });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n};\r\n\r\nexport default TeamService;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ComboBox,\r\n  DefaultButton, Panel, PanelType, PrimaryButton, Stack,\r\n} from '@fluentui/react';\r\n\r\nconst UserEditPanel = ({\r\n  isOpen, user, setOpen, handleEdit, teams, organizations, roles,\r\n}) => {\r\n  const [selTeams, setSelTeams] = useState([]);\r\n  const [selPrimaryTeam, setSelPrimaryTeam] = useState(null);\r\n  const [selOrganizations, setSelOrganizations] = useState([]);\r\n  const [selRole, setSelRole] = useState(null);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleEdit({\r\n      ...user,\r\n      teams: selTeams,\r\n      team: selPrimaryTeam,\r\n      organizations: selOrganizations,\r\n      role: selRole,\r\n    }).finally(() => {\r\n      setOpen(false);\r\n    });\r\n  };\r\n\r\n  const handleSelect = (item, setFunc) => {\r\n    setFunc((prev) => prev.concat(item));\r\n  };\r\n\r\n  const handleDeselect = (item, setFunc) => {\r\n    setFunc((prev) => prev.filter((i) => i.id !== item.id));\r\n  };\r\n\r\n  const handleMultiCombobox = (setFunc) => (evt, item) => {\r\n    if (item.selected) {\r\n      handleSelect(item.data, setFunc);\r\n    } else {\r\n      handleDeselect(item.data, setFunc);\r\n    }\r\n  };\r\n\r\n  const handleCombobox = (setFunc) => (evt, item) => {\r\n    setFunc(item.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setSelTeams(user.teams);\r\n      setSelPrimaryTeam(user.team);\r\n      setSelOrganizations(user.organizations);\r\n      if (user.role) {\r\n        setSelRole(user.role);\r\n      }\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (selPrimaryTeam?.id && !selTeams.find((t) => t.id === selPrimaryTeam?.id)) {\r\n      setSelPrimaryTeam(null);\r\n    }\r\n  }, [selTeams]);\r\n\r\n  return (\r\n    <>\r\n      <Panel\r\n        isOpen={isOpen}\r\n        onDismiss={() => setOpen(false)}\r\n        type={PanelType.smallFixedFar}\r\n        headerText=\"Edit user\"\r\n      >\r\n        <form onSubmit={handleSubmit}>\r\n          <Stack verticalAlign=\"start\">\r\n            <Stack.Item tokens={{\r\n              margin: '10px 0',\r\n            }}\r\n            >\r\n              <ComboBox\r\n                label=\"Teams\"\r\n                multiSelect\r\n                id=\"user-edit-select-team\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selTeams.map((t) => t.id)}\r\n                onChange={handleMultiCombobox(setSelTeams)}\r\n                options={teams.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Primary team\"\r\n                id=\"user-edit-select-primary-team\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selPrimaryTeam?.id}\r\n                onChange={(evt, option) => setSelPrimaryTeam(option.data)}\r\n                options={selTeams.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Organizations\"\r\n                multiSelect\r\n                id=\"user-edit-select-organizations\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selOrganizations.map((o) => o.id)}\r\n                onChange={handleMultiCombobox(setSelOrganizations)}\r\n                options={organizations.map((t) => ({\r\n                  key: t.id,\r\n                  text: t.name,\r\n                  data: t,\r\n                }))}\r\n              />\r\n              <ComboBox\r\n                label=\"Role\"\r\n                id=\"user-edit-select-role\"\r\n                useComboBoxAsMenuWidth\r\n                selectedKey={selRole && selRole.id}\r\n                onChange={handleCombobox(setSelRole)}\r\n                options={roles.map((r) => ({\r\n                  key: r.id,\r\n                  text: r.name,\r\n                  data: r,\r\n                }))}\r\n              />\r\n            </Stack.Item>\r\n            <Stack horizontal horizontalAlign=\"space-evenly\">\r\n              <PrimaryButton type=\"submit\">Update</PrimaryButton>\r\n              <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n            </Stack>\r\n          </Stack>\r\n        </form>\r\n      </Panel>\r\n    </>\r\n  );\r\n};\r\n\r\nUserEditPanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  user: PropTypes.shape({\r\n    teams: PropTypes.arrayOf(PropTypes.shape({})),\r\n    team: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      name: PropTypes.string,\r\n    }),\r\n    organizations: PropTypes.arrayOf(PropTypes.shape({})),\r\n    role: PropTypes.shape({}),\r\n  }),\r\n  setOpen: PropTypes.func.isRequired,\r\n  handleEdit: PropTypes.func.isRequired,\r\n  teams: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n  organizations: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n  roles: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n  })),\r\n};\r\n\r\nUserEditPanel.defaultProps = {\r\n  user: null,\r\n  teams: [],\r\n  organizations: [],\r\n  roles: [],\r\n};\r\n\r\nexport default UserEditPanel;\r\n","import UserEditPanel from './UserEditPanel';\r\n\r\nexport default UserEditPanel;\r\n","import SettingsUsers from './SettingsUsers';\r\n\r\nexport default SettingsUsers;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport {\r\n  Col, Container, Row,\r\n} from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport UserService from '../../services/UserService';\r\nimport TeamService from '../../services/TeamService';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport AuthorizationService from '../../services/AuthorizationService';\r\nimport PageHeader from '../../components/shared/page-header';\r\nimport CommandTable from '../../components/shared/command-table/CommandTable';\r\nimport UserEditPanel from './components/user-edit-panel';\r\n\r\nconst SettingsUsers = () => {\r\n  const [data, setData] = useState([]);\r\n  const [teams, setTeams] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n    indices: [],\r\n  });\r\n  const [columns] = useState([\r\n    {\r\n      key: 'username',\r\n      name: ' Username',\r\n      fieldName: 'username',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'UserOptional',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'teams',\r\n      name: ' Teams',\r\n      fieldName: 'teams',\r\n      onRender: (item) => item.teams.map((t) => t.name).join(', '),\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.teams[0].name > b.teams[0].name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.teams.map((t) => t.name).join(','),\r\n      iconName: 'Teamwork',\r\n      minWidth: 100,\r\n      maxWidth: 500,\r\n    },\r\n    {\r\n      key: 'organizations',\r\n      name: ' Organizations',\r\n      fieldName: 'organizations',\r\n      onRender: (item) => item.organizations.map((o) => o.name).join(', '),\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.organizations[0]?.name > b.organizations[0]?.name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.organizations.map((o) => o.name).join(','),\r\n      iconName: 'Org',\r\n      minWidth: 50,\r\n      maxWidth: 200,\r\n    },\r\n    {\r\n      key: 'role',\r\n      name: ' Role',\r\n      onRender: (item) => item.role && item.role?.name,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      sort: (a, b) => (a.role?.name > b.role?.name ? -1 : 1),\r\n      filterValueAccessor: (i) => i.role && i.role?.name,\r\n      iconName: 'Signin',\r\n      isPadded: true,\r\n    },\r\n  ]);\r\n  const [selectedColumn] = useState({\r\n    key: 'role',\r\n    name: ' Role',\r\n    onRender: (item) => item.role && item.role?.name,\r\n    isSortable: true,\r\n    isFilterable: true,\r\n    isResizable: true,\r\n    sort: (a, b) => (a.role?.name > b.role?.name ? -1 : 1),\r\n    filterValueAccessor: (i) => i.role && i.role?.name,\r\n    iconName: 'Signin',\r\n    isPadded: true,\r\n    isSorted: true,\r\n    isSortedDescending: false,\r\n  });\r\n\r\n  const handleUpdate = async (user) => {\r\n    const idx = data.findIndex((u) => u.id === user.id);\r\n    const copy = data.slice();\r\n    if (idx !== -1) {\r\n      let organization = user.organization || null;\r\n      if (!user.organization && user.organizations.length) {\r\n        organization = user.organizations[0].id;\r\n      } else if (user.organizations.length === 0) {\r\n        organization = null;\r\n      }\r\n      const result = await UserService.updateSettingsUser(user.id, {\r\n        ...user,\r\n        teams: user.teams.map((t) => t.id),\r\n        team: user.team?.id || null,\r\n        organizations: user.organizations.map((o) => o.id),\r\n        organization,\r\n      });\r\n      if (result) copy[idx] = result;\r\n      setData(copy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Retrieve the users list\r\n   */\r\n  useEffect(() => {\r\n    async function run() {\r\n      const [users, _teams, _roles] = await Promise.all(\r\n        [\r\n          UserService.getSettingsUsers(),\r\n          TeamService.getTeams(),\r\n          AuthorizationService.getRoles(),\r\n        ],\r\n      );\r\n      setData(() => users);\r\n      setTeams(() => _teams);\r\n      setRoles(() => _roles);\r\n    }\r\n    run();\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row justify=\"center\">\r\n        <PageHeader text=\"Users Settings\" />\r\n      </Row>\r\n      <Separator />\r\n      <Row align=\"start\">\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: true,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: data,\r\n              columns,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setEditPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: selectedColumn,\r\n              setSelectionDetails,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <UserEditPanel\r\n        isOpen={editPanelOpen}\r\n        handleEdit={handleUpdate}\r\n        setOpen={setEditPanelOpen}\r\n        user={selectionDetails.count ? selectionDetails.items[0] : null}\r\n        teams={teams}\r\n        organizations={global.user.organizations}\r\n        roles={roles}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SettingsUsers;\r\n","import SettingsAppraisalPeriods from './SettingsAppraisalPeriods';\r\n\r\nexport default SettingsAppraisalPeriods;\r\n","import React from 'react';\r\n\r\nconst SettingsAppraisalPeriods = () => (\r\n  <h1>AppraisalPeriods Settings</h1>\r\n);\r\n\r\nexport default SettingsAppraisalPeriods;\r\n","import SettingsAppraisalItems from './SettingsAppraisalItems';\r\n\r\nexport default SettingsAppraisalItems;\r\n","import React from 'react';\r\n\r\nconst SettingsAppraisalItems = () => (\r\n  <h1>AppraisalItems Settings</h1>\r\n);\r\n\r\nexport default SettingsAppraisalItems;\r\n","import SecurityInfoProvider from './SecurityInfoProvider';\r\n\r\nexport default SecurityInfoProvider;\r\n","import { useEffect } from 'react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport UserService from '../../../../../../services/UserService';\r\n\r\nconst SecurityInfoProvider = ({\r\n  setLoaded,\r\n  setPermissionCodes,\r\n  setRoles,\r\n  setUsers,\r\n  setRolePermissions,\r\n  setUserPermissions,\r\n}) => {\r\n  useEffect(() => {\r\n    async function run() {\r\n      // Get Permission Codes\r\n      const codes = await AuthorizationService.getPermissionCodes();\r\n      setPermissionCodes(codes.sort((a, b) => (a.code < b.code ? -1 : 1)));\r\n\r\n      // get all roles\r\n      const rolesInfo = await AuthorizationService.getRoles();\r\n      setRoles(rolesInfo.sort((a, b) => (a.name < b.name ? -1 : 1)));\r\n\r\n      // get all users\r\n      const userInfo = await UserService.getSettingsUsers();\r\n      setUsers(userInfo.sort((a, b) => (a.username < b.username ? -1 : 1)));\r\n\r\n      // get All role permissions\r\n      const roles = await AuthorizationService.getRolesSecurities();\r\n      const rolesMap = {};\r\n      roles.forEach((role) => {\r\n        rolesMap[role.reference.name] = {\r\n          ...rolesMap[role.reference.name],\r\n          [role.code.code]: role,\r\n        };\r\n      });\r\n      setRolePermissions(rolesMap);\r\n\r\n      // get my organization's user permission\r\n      const userPermissions = await AuthorizationService.getOrganizationUsersSecurities();\r\n      const userPermMap = {};\r\n      userPermissions.forEach((user) => {\r\n        userPermMap[user.reference.username] = {\r\n          ...userPermMap[user.reference.username],\r\n          [user.code.code]: user,\r\n        };\r\n      });\r\n      setUserPermissions(userPermMap);\r\n\r\n      // Confirm information was loaded\r\n      setLoaded(true);\r\n    }\r\n    run();\r\n  }, [\r\n    setPermissionCodes,\r\n    setLoaded,\r\n    setRoles,\r\n    setUsers,\r\n    setRolePermissions,\r\n    setUserPermissions,\r\n  ]);\r\n  return null;\r\n};\r\n\r\nexport default SecurityInfoProvider;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Checkbox,\r\n  CommandBar, makeStyles, SearchBox, Stack, Text,\r\n} from '@fluentui/react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport Accordion from '../../../../../shared/accordion/Accordion';\r\nimport SinglePicker from '../../../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n  autocomplete: {\r\n    marginTop: theme.spacing.l2,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralTertiary,\r\n  },\r\n  searchBox: {\r\n    alignSelf: 'center',\r\n    marginLeft: theme.spacing.m,\r\n    minWidth: 200,\r\n  },\r\n}));\r\n\r\nconst SecurityDetailsRoleDisplay = ({\r\n  codes,\r\n  roles,\r\n  rolePermissions,\r\n  setRolePermissions,\r\n  selectedRole,\r\n  setSelectedRole,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n\r\n  const handleExpandSingle = (e, item, isExpanded) => {\r\n    if (isExpanded) {\r\n      setExpanded((prev) => [...prev, item.code]);\r\n    } else {\r\n      setExpanded((prev) => prev.filter((p) => p !== item.code));\r\n    }\r\n  };\r\n\r\n  const handleExpandAll = () => {\r\n    if (expanded.length === codes.length) {\r\n      setExpanded([]);\r\n    } else {\r\n      setExpanded(codes.map((e) => e.code));\r\n    }\r\n  };\r\n\r\n  const handleFilterInputChange = (e) => {\r\n    if (e && e.target) {\r\n      setFilter(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSetPermission = (role, code, permission) => {\r\n    setRolePermissions((prev) => ({\r\n      ...prev,\r\n      [role.name]: {\r\n        ...prev[role.name],\r\n        [code.code]: permission,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleAdd = async (role, code, grant) => {\r\n    const result = await AuthorizationService.addPermission({\r\n      grants: [grant],\r\n      code: code.id,\r\n      permissionType: 'Role',\r\n      reference: role.id,\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const handleUpdate = async (permission) => {\r\n    const result = await AuthorizationService.updatePermission(permission.id, permission);\r\n    return result;\r\n  };\r\n\r\n  const handleDelete = async (permission) => {\r\n    try {\r\n      const result = await AuthorizationService.deletePermission(permission.id);\r\n      return result;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleClick = (role, code, grant) => async (e) => {\r\n    e.persist();\r\n    // check if it's a new permission\r\n    if (!rolePermissions[role.name] || !rolePermissions[role.name][code.code]) {\r\n      const result = await handleAdd(role, code, grant);\r\n      result && handleSetPermission(role, code, result);\r\n    } else if (e.target.checked) {\r\n      // add a grant\r\n      const grants = [...rolePermissions[role.name][code.code].grants, grant];\r\n      const result = await handleUpdate({ ...rolePermissions[role.name][code.code], grants });\r\n      result && handleSetPermission(role, code, result);\r\n    } else if (!e.target.checked) {\r\n      const grants = rolePermissions[role.name][code.code].grants.filter((g) => g !== grant);\r\n      if (grants.length === 0) {\r\n        await handleDelete(rolePermissions[role.name][code.code]);\r\n        handleSetPermission(role, code, null);\r\n      } else {\r\n        const result = await handleUpdate({ ...rolePermissions[role.name][code.code], grants });\r\n        result && handleSetPermission(role, code, result);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPermissionChecked = (role, code, grant) => {\r\n    const permission = rolePermissions[role.name] && rolePermissions[role.name][code.code];\r\n    if (permission) {\r\n      return permission.grants.indexOf(grant) !== -1;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const renderPermissions = () => {\r\n    if (selectedRole) {\r\n      const render = codes.filter((el) => (\r\n        el.code.toLowerCase().indexOf(filter.toLowerCase()) !== -1));\r\n      return (\r\n        <Accordion\r\n          items={render.map(\r\n            (permission) => (\r\n              {\r\n                ...permission,\r\n                text: permission.code,\r\n                isOpen: expanded.indexOf(permission.code) !== -1,\r\n              }),\r\n          )}\r\n          getKey={(code) => code.id}\r\n          headerProps={{\r\n            onRenderHeaderText: (item) => (\r\n              <div>\r\n                <Text variant=\"mediumPlus\" block>{item.code}</Text>\r\n                <Text variant=\"medium\" className={classes.secondaryText}>{item.description}</Text>\r\n              </div>\r\n            ),\r\n          }}\r\n          onRenderItem={(item) => (\r\n            <Stack\r\n              verticalAlign=\"start\"\r\n              tokens={{\r\n                childrenGap: 3,\r\n              }}\r\n            >\r\n              {\r\n                  item.grants.map((grant) => (\r\n                    <Checkbox\r\n                      key={`${item.id}-${grant}`}\r\n                      label={grant}\r\n                      checked={getPermissionChecked(selectedRole, item, grant)}\r\n                      onChange={handleClick(selectedRole, item, grant)}\r\n                    />\r\n                  ))\r\n                }\r\n            </Stack>\r\n          )}\r\n          onToggle={handleExpandSingle}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={4}>\r\n          <SinglePicker\r\n            className={classes.autocomplete}\r\n            options={roles.map((r) => ({ key: r.id, data: r }))}\r\n            getTextFromItem={(item) => item.data.name}\r\n            selected={{ key: selectedRole.id, data: selectedRole }}\r\n            onSelect={(item) => setSelectedRole(item.data)}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandBar\r\n            items={[\r\n              {\r\n                key: 'expandAll',\r\n                text: `${expanded.length === codes.length ? 'Collapse' : 'Expand'} All`,\r\n                iconProps: {\r\n                  iconName: `${expanded.length === codes.length ? 'ChevronFold10' : 'ChevronUnfold10'}`,\r\n                },\r\n                onClick: handleExpandAll,\r\n                buttonStyles: {\r\n                  root: {\r\n                    minWidth: '120px',\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                key: 'search',\r\n                onRender: () => (\r\n                  <SearchBox\r\n                    className={classes.searchBox}\r\n                    value={filter}\r\n                    onChange={handleFilterInputChange}\r\n                    onClear={() => setFilter('')}\r\n                  />\r\n                ),\r\n              },\r\n            ]}\r\n            styles={{\r\n              root: {\r\n                paddingLeft: 0,\r\n              },\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        { renderPermissions() }\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nSecurityDetailsRoleDisplay.propTypes = {\r\n  codes: PropTypes.arrayOf(PropTypes.shape({\r\n    code: PropTypes.string,\r\n  })).isRequired,\r\n  roles: PropTypes.arrayOf(PropTypes.shape({\r\n    name: PropTypes.string,\r\n  })).isRequired,\r\n  rolePermissions: PropTypes.shape({}).isRequired,\r\n  setRolePermissions: PropTypes.func.isRequired,\r\n  selectedRole: PropTypes.shape({\r\n    username: PropTypes.string,\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  setSelectedRole: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SecurityDetailsRoleDisplay;\r\n","import SecurityDetailsRoleDisplay from './SecurityDetailsRoleDisplay';\r\n\r\nexport default SecurityDetailsRoleDisplay;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Checkbox, CommandBar, makeStyles, SearchBox, Stack, Text,\r\n} from '@fluentui/react';\r\nimport AuthorizationService from '../../../../../../services/AuthorizationService';\r\nimport Accordion from '../../../../../shared/accordion/Accordion';\r\nimport SinglePicker from '../../../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n  autocomplete: {\r\n    marginTop: theme.spacing.l2,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralTertiary,\r\n  },\r\n  searchBox: {\r\n    alignSelf: 'center',\r\n    marginLeft: theme.spacing.m,\r\n    minWidth: 200,\r\n  },\r\n}));\r\n\r\nconst SecurityDetailsUserDisplay = ({\r\n  codes,\r\n  users,\r\n  userPermissions,\r\n  setUserPermissions,\r\n  selectedUser,\r\n  setSelectedUser,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n\r\n  const handleExpandSingle = (e, item, isExpanded) => {\r\n    if (isExpanded) {\r\n      setExpanded((prev) => [...prev, item.code]);\r\n    } else {\r\n      setExpanded((prev) => prev.filter((err) => err !== item.code));\r\n    }\r\n  };\r\n\r\n  const handleExpandAll = () => {\r\n    if (expanded.length === codes.length) {\r\n      setExpanded([]);\r\n    } else {\r\n      setExpanded(codes.map((e) => e.code));\r\n    }\r\n  };\r\n\r\n  const handleFilterInputChange = (e) => {\r\n    if (e && e.target) {\r\n      setFilter(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSetPermission = (user, code, permission) => {\r\n    setUserPermissions((prev) => ({\r\n      ...prev,\r\n      [user.username]: {\r\n        ...prev[user.username],\r\n        [code.code]: permission,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleAdd = async (user, code, grant) => {\r\n    const result = await AuthorizationService.addPermission({\r\n      grants: [grant],\r\n      code: code.id,\r\n      permissionType: 'User',\r\n      reference: user.id,\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const handleUpdate = async (permission) => {\r\n    const result = await AuthorizationService.updatePermission(permission.id, permission);\r\n    return result;\r\n  };\r\n\r\n  const handleDelete = async (permission) => {\r\n    try {\r\n      const result = await AuthorizationService.deletePermission(permission.id);\r\n      return result;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleClick = (user, code, grant) => async (e) => {\r\n    e.persist();\r\n    // check if it's a new permission\r\n    if (!userPermissions[user.username] || !userPermissions[user.username][code.code]) {\r\n      const result = await handleAdd(user, code, grant);\r\n      result && handleSetPermission(user, code, result);\r\n    } else if (e.target.checked) {\r\n      // add a grant\r\n      const grants = [...userPermissions[user.username][code.code].grants, grant];\r\n      const result = await handleUpdate({ ...userPermissions[user.username][code.code], grants });\r\n      result && handleSetPermission(user, code, result);\r\n    } else if (!e.target.checked) {\r\n      const grants = userPermissions[user.username][code.code].grants.filter((g) => g !== grant);\r\n      if (grants.length === 0) {\r\n        await handleDelete(userPermissions[user.username][code.code]);\r\n        handleSetPermission(user, code, null);\r\n      } else {\r\n        const result = await handleUpdate({ ...userPermissions[user.username][code.code], grants });\r\n        result && handleSetPermission(user, code, result);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPermissionChecked = (user, code, grant) => {\r\n    const permission = userPermissions[user.username] && userPermissions[user.username][code.code];\r\n    if (permission) {\r\n      return permission.grants.indexOf(grant) !== -1;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const renderPermissions = () => {\r\n    if (selectedUser) {\r\n      const render = codes.filter((el) => (\r\n        el.code.toLowerCase().indexOf(filter.toLowerCase()) !== -1));\r\n      return (\r\n        <Accordion\r\n          items={render.map(\r\n            (permission) => (\r\n              {\r\n                ...permission,\r\n                text: permission.code,\r\n                isOpen: expanded.indexOf(permission.code) !== -1,\r\n              }),\r\n          )}\r\n          getKey={(code) => code.id}\r\n          headerProps={{\r\n            onRenderHeaderText: (item) => (\r\n              <div>\r\n                <Text variant=\"mediumPlus\" block>{item.code}</Text>\r\n                <Text variant=\"medium\" className={classes.secondaryText}>{item.description}</Text>\r\n              </div>\r\n            ),\r\n          }}\r\n          onRenderItem={(item) => (\r\n            <Stack\r\n              verticalAlign=\"start\"\r\n              tokens={{\r\n                childrenGap: 3,\r\n              }}\r\n            >\r\n              <Checkbox\r\n                label=\"overrule\"\r\n                checked={getPermissionChecked(selectedUser, item, 'overrule')}\r\n                onChange={handleClick(selectedUser, item, 'overrule')}\r\n              />\r\n              {\r\n                  item.grants.map((grant) => (\r\n                    <Checkbox\r\n                      label={grant}\r\n                      checked={getPermissionChecked(selectedUser, item, grant)}\r\n                      onChange={handleClick(selectedUser, item, grant)}\r\n                    />\r\n                  ))\r\n                }\r\n            </Stack>\r\n          )}\r\n          onToggle={handleExpandSingle}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <Row justify=\"center\">\r\n        <Col xs={12} md={4}>\r\n          <SinglePicker\r\n            className={classes.autocomplete}\r\n            options={users.map((u) => ({ key: u.id, data: u }))}\r\n            getTextFromItem={(item) => item.data.username}\r\n            selected={{ key: selectedUser.id, data: selectedUser }}\r\n            onSelect={(item) => setSelectedUser(item.data)}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandBar\r\n            items={[\r\n              {\r\n                key: 'expandAll',\r\n                text: `${expanded.length === codes.length ? 'Collapse' : 'Expand'} All`,\r\n                iconProps: {\r\n                  iconName: `${expanded.length === codes.length ? 'ChevronFold10' : 'ChevronUnfold10'}`,\r\n                },\r\n                onClick: handleExpandAll,\r\n                buttonStyles: {\r\n                  root: {\r\n                    minWidth: '120px',\r\n                  },\r\n                },\r\n              },\r\n              {\r\n                key: 'search',\r\n                onRender: () => (\r\n                  <SearchBox\r\n                    className={classes.searchBox}\r\n                    value={filter}\r\n                    onChange={handleFilterInputChange}\r\n                    onClear={() => setFilter('')}\r\n                  />\r\n                ),\r\n              },\r\n            ]}\r\n            styles={{\r\n              root: {\r\n                paddingLeft: 0,\r\n              },\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        { renderPermissions() }\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nSecurityDetailsUserDisplay.propTypes = {\r\n  codes: PropTypes.arrayOf(PropTypes.shape({\r\n    code: PropTypes.string,\r\n  })).isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({\r\n    username: PropTypes.string,\r\n  })).isRequired,\r\n  userPermissions: PropTypes.shape({}).isRequired,\r\n  setUserPermissions: PropTypes.func.isRequired,\r\n  selectedUser: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }).isRequired,\r\n  setSelectedUser: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SecurityDetailsUserDisplay;\r\n","import SecurityDetailsUserDisplay from './SecurityDetailsUserDisplay';\r\n\r\nexport default SecurityDetailsUserDisplay;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Pivot, PivotItem } from '@fluentui/react';\r\nimport { Container } from 'react-grid-system';\r\nimport SecurityInfoProvider from './components/security-info-provider';\r\nimport SecurityDetailsRoleDisplay from './components/security-details-role-display';\r\nimport SecurityDetailsUserDisplay from './components/security-details-user-display';\r\nimport PageHeader from '../../../shared/page-header';\r\n\r\nconst SecurityDetails = () => {\r\n  const [permissionCodes, setPermissionCodes] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [rolePermissions, setRolePermissions] = useState({});\r\n  const [userPermissions, setUserPermissions] = useState({});\r\n  const [selectedRole, setSelectedRole] = useState(null);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setSelectedRole((prev) => {\r\n      if (prev === null && roles.length > 0) return roles[0];\r\n      return prev;\r\n    });\r\n  }, [roles]);\r\n\r\n  useEffect(() => {\r\n    setSelectedUser((prev) => {\r\n      if (prev === null && users.length > 0) return users[0];\r\n      return prev;\r\n    });\r\n  }, [users]);\r\n\r\n  return (\r\n    <>\r\n      <SecurityInfoProvider\r\n        setLoaded={setLoaded}\r\n        setPermissionCodes={setPermissionCodes}\r\n        setRoles={setRoles}\r\n        setUsers={setUsers}\r\n        setRolePermissions={setRolePermissions}\r\n        setUserPermissions={setUserPermissions}\r\n      />\r\n      <Container lg>\r\n        <PageHeader text=\"Permissions\" />\r\n        {\r\n        loaded\r\n          ? (\r\n            <Pivot\r\n              aria-label=\"User and Roles permissions\"\r\n              styles={{\r\n                root: {\r\n                  display: 'flex',\r\n                  flexFlow: 'row nowrap',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center',\r\n                },\r\n              }}\r\n            >\r\n              <PivotItem headerText=\"Roles\" itemIcon=\"SecurityGroup\">\r\n                <SecurityDetailsRoleDisplay\r\n                  codes={permissionCodes}\r\n                  roles={roles}\r\n                  rolePermissions={rolePermissions}\r\n                  setRolePermissions={setRolePermissions}\r\n                  selectedRole={selectedRole}\r\n                  setSelectedRole={setSelectedRole}\r\n                />\r\n              </PivotItem>\r\n              <PivotItem headerText=\"Users\" itemIcon=\"Contact\">\r\n                <SecurityDetailsUserDisplay\r\n                  codes={permissionCodes}\r\n                  users={users}\r\n                  userPermissions={userPermissions}\r\n                  setUserPermissions={setUserPermissions}\r\n                  selectedUser={selectedUser}\r\n                  setSelectedUser={setSelectedUser}\r\n                />\r\n              </PivotItem>\r\n            </Pivot>\r\n          )\r\n          : null\r\n      }\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SecurityDetails;\r\n","import SettingsRolesPage from './SettingsRoles';\r\n\r\nexport default SettingsRolesPage;\r\n","import React from 'react';\r\nimport SecurityDetails from '../../components/appraisal-details/components/security-details/SecurityDetails';\r\n\r\nconst SettingsRolesPage = () => (<SecurityDetails />);\r\n\r\nexport default SettingsRolesPage;\r\n","import SettingsPage from './SettingsPage';\r\n\r\nexport default SettingsPage;\r\n","import React from 'react';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport SettingsGeneral from '../settings-general';\r\nimport SettingsUsers from '../settings-users';\r\nimport SettingsAppraisalPeriods from '../settings-app-periods';\r\nimport SettingsAppraisalItems from '../settings-app-items';\r\nimport SettingsRolesPage from '../settings-role-permissions';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\n\r\n/*\r\n * On the settings page the navigation will be done via a\r\n */\r\nconst SettingsPage = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <>\r\n      <Container lg fluid>\r\n        <Switch>\r\n          <Route exact path={path}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"general\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <SettingsGeneral />\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/users`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"users\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Users\">\r\n                <SettingsUsers />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/appraisal-periods`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"appraisal-periods\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - appraisal periods\">\r\n                <SettingsAppraisalPeriods />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/appraisal-items`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"appraisal-items\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - appraisal items\">\r\n                <SettingsAppraisalItems />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n          <Route path={`${path}/permissions`}>\r\n            <AuthorizationRedirectComponent\r\n              code=\"SETTINGS\"\r\n              grant=\"permissions\"\r\n              to=\"/\"\r\n              failureNotification={{\r\n                header: 'No Access',\r\n                content: 'No permission to access this page. Please contact your administrator.',\r\n              }}\r\n            >\r\n              <DocumentTitle title=\"Settings - Securities\">\r\n                <SettingsRolesPage />\r\n              </DocumentTitle>\r\n            </AuthorizationRedirectComponent>\r\n          </Route>\r\n        </Switch>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst ReportsInfoProvider = ({ setReports }) => {\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const reports = await ReportingService.getReports();\r\n      if (mounted) {\r\n        setReports(reports);\r\n      }\r\n    }\r\n    run();\r\n    return () => { mounted = false; };\r\n  }, [setReports]);\r\n  return null;\r\n};\r\n\r\nReportsInfoProvider.propTypes = {\r\n  setReports: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsInfoProvider;\r\n","import ReportsInfoProvider from './ReportsInfoProvider';\r\n\r\nexport default ReportsInfoProvider;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Panel, PrimaryButton, DefaultButton, PanelType, Stack, TextField, Separator, Label, makeStyles,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport SinglePicker from '../../../shared/single-picker/SinglePicker';\r\nimport Box from '../../../shared/box';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  topMargin: {\r\n    marginTop: '8px',\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n  invisibleInput: {\r\n    background: 'none',\r\n    outline: 'none',\r\n    border: 'none',\r\n    height: 0,\r\n  },\r\n}));\r\n\r\nconst ReportsNewPanel = ({ isOpen, setOpen, addReport }) => {\r\n  const classes = useStyles();\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [template, setTemplate] = useState('');\r\n  const [parameter, setParameter] = useState('');\r\n  const [templates, setTemplates] = useState([]);\r\n  const [parameters, setParameters] = useState([]);\r\n  const [selectedParameters, setSelectedParameters] = useState([]);\r\n  const history = useHistory();\r\n\r\n  const handleChange = (set) => (e) => {\r\n    set(e.target.value);\r\n  };\r\n\r\n  const handleChangeTempalte = (templ) => {\r\n    setTemplate(templ.data.id);\r\n  };\r\n\r\n  const handleChangeParameter = (item) => {\r\n    setParameter(item.data);\r\n  };\r\n\r\n  const handleAddParameter = () => {\r\n    if (parameter !== '') {\r\n      setParameter('');\r\n      setSelectedParameters((prev) => {\r\n        if (selectedParameters.map((p) => p.name).indexOf(parameter) === -1) {\r\n          return prev.concat({\r\n            name: parameter,\r\n            defaultValue: '',\r\n            path: parameter,\r\n          });\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleChangeParameterName = (idx) => (e) => {\r\n    e.persist();\r\n    setSelectedParameters((prev) => {\r\n      const copy = prev.slice();\r\n      copy[idx].name = e.target.value;\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleChangeParameterValue = (idx) => (e) => {\r\n    e.persist();\r\n    setSelectedParameters((prev) => {\r\n      const copy = prev.slice();\r\n      copy[idx].defaultValue = e.target.value;\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.persist();\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('name', name);\r\n    formData.append('description', description);\r\n    formData.append('template', template);\r\n    formData.append('parameters', JSON.stringify(selectedParameters));\r\n    const result = await ReportingService.addReport(formData);\r\n    if (result) {\r\n      history.push('/reporting/reports');\r\n      NotificationService.notifySuccess('Report successfully created');\r\n      setOpen(false);\r\n      addReport(result);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const t = await ReportingService.getTemplates();\r\n      if (mounted) {\r\n        setTemplates(t);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (template !== '') {\r\n        const params = await ReportingService.getTempalteParameters(template);\r\n        if (params.length && mounted) {\r\n          setParameters(params);\r\n        }\r\n      } else {\r\n        setParameters([]);\r\n      }\r\n      setSelectedParameters([]);\r\n      setParameter('');\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [template]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton form=\"new-report-form\" type=\"submit\">Create</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText=\"Create Report\"\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <form onSubmit={handleSubmit} id=\"new-report-form\">\r\n        <Container fluid className={classes.root}>\r\n          <Separator>General</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              <TextField\r\n                label=\"Name\"\r\n                value={name}\r\n                onChange={handleChange(setName)}\r\n                required\r\n              />\r\n              <TextField\r\n                label=\"Description\"\r\n                value={description}\r\n                onChange={handleChange(setDescription)}\r\n                multiline\r\n              />\r\n              <Label>Select template</Label>\r\n              <SinglePicker\r\n                options={templates.map((t) => ({ key: t.id, data: t }))}\r\n                getTextFromItem={(item) => item.data.name}\r\n                onSelect={handleChangeTempalte}\r\n                onRenderItem={() => (\r\n                  <TextField\r\n                    value={template ? templates.find((temp) => temp.id === template)?.name : null}\r\n                    underlined\r\n                    readOnly\r\n                  />\r\n                )}\r\n                maxHeight=\"400px\"\r\n              />\r\n              <input value={template} className={classes.invisibleInput} required />\r\n            </Col>\r\n          </Row>\r\n          <Separator>Parameters</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              <Label>Select parameter</Label>\r\n              <SinglePicker\r\n                options={parameters.map((param) => param.paths.map((path) => ({\r\n                  key: `${param.name}${path}`,\r\n                  data: `${param.name}${path}`,\r\n                }))).flat()}\r\n                getTextFromItem={(item) => item.data}\r\n                onSelect={(item) => handleChangeParameter(item)}\r\n                onRenderItem={() => (\r\n                  <TextField\r\n                    value={parameter}\r\n                    underlined\r\n                    readOnly\r\n                  />\r\n                )}\r\n                maxHeight=\"400px\"\r\n              />\r\n              <DefaultButton\r\n                className={classes.topMargin}\r\n                onClick={handleAddParameter}\r\n              >\r\n                Add Parameter\r\n              </DefaultButton>\r\n            </Col>\r\n          </Row>\r\n          <Separator>Selected Paramaters</Separator>\r\n          <Row justify=\"start\">\r\n            <Col xs={12} sm={8} md={6}>\r\n              {\r\n              selectedParameters.map((sp, idx) => (\r\n                <Box className={classes.box}>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    value={sp.name}\r\n                    onChange={handleChangeParameterName(idx)}\r\n                  />\r\n                  <TextField\r\n                    label=\"Default value\"\r\n                    value={sp.defaultValue}\r\n                    onChange={handleChangeParameterValue(idx)}\r\n                  />\r\n                  <TextField\r\n                    label=\"Path\"\r\n                    value={sp.path}\r\n                    readOnly\r\n                  />\r\n                </Box>\r\n              ))\r\n            }\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nReportsNewPanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  addReport: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsNewPanel;\r\n","import ReportsNewPanel from './ReportsNewPanel';\r\n\r\nexport default ReportsNewPanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, makeStyles, Panel, PanelType, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Box from '../../../shared/box';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n}));\r\n\r\nconst ReportsDetailsPanel = ({ id, isOpen, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [details, setDetails] = useState(null);\r\n  const [parameters, setParameters] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (id && isOpen) {\r\n        const reportDetails = await ReportingService.getReport(id);\r\n        if (mounted) {\r\n          setDetails(reportDetails);\r\n          setParameters(reportDetails.parameters.map((p) => ({\r\n            name: p.name,\r\n            value: p.defaultValue,\r\n            path: p.path,\r\n          })));\r\n        }\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id, isOpen]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    isOpen && details\r\n      ? (\r\n        <Panel\r\n          isOpen={isOpen}\r\n          onDismiss={() => setOpen(false)}\r\n          headerText=\"Create Report\"\r\n          type={PanelType.large}\r\n          onRenderFooterContent={onRenderFooter}\r\n          isLightDismiss\r\n        >\r\n          <Container fluid className={classes.root}>\r\n            <Separator>General</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  label=\"Name: \"\r\n                  value={details.name}\r\n                  underlined\r\n                  readOnly\r\n                />\r\n                <TextField\r\n                  label=\"Description: \"\r\n                  value={details.description}\r\n                  multiline\r\n                  underlined\r\n                  readOnly\r\n                  resizable={false}\r\n                />\r\n                <TextField\r\n                  label=\"Template: \"\r\n                  value={details.template.name}\r\n                  underlined\r\n                  readOnly\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator>Parameters</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                {\r\n                  parameters.map((parameter) => (\r\n                    <Box className={classes.box}>\r\n                      <TextField\r\n                        label=\"Name: \"\r\n                        value={parameter.name}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                      <TextField\r\n                        label=\"Path: \"\r\n                        value={parameter.path}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                      <TextField\r\n                        label=\"Default value: \"\r\n                        value={parameter.value}\r\n                        underlined\r\n                        readOnly\r\n                      />\r\n                    </Box>\r\n                  ))\r\n                }\r\n              </Col>\r\n            </Row>\r\n            <Separator>Aggregation</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  value={JSON.stringify(JSON.parse(details.template.aggregation), null, 4)}\r\n                  multiline\r\n                  underlined\r\n                  readOnly\r\n                  autoAdjustHeight\r\n                  resizable={false}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Panel>\r\n      ) : null\r\n  );\r\n};\r\n\r\nReportsDetailsPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ReportsDetailsPanel;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Box from '../../../shared/box';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport SinglePicker from '../../../shared/single-picker/SinglePicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n  box: {\r\n    border: `1px solid ${theme.palette.themeSecondary}`,\r\n    '&:not(:first-of-type)': {\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n}));\r\n\r\nconst ReportsEditPanel = ({\r\n  id, isOpen, setOpen, setReport,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [details, setDetails] = useState(null);\r\n  const [parameters, setParameters] = useState([]);\r\n  const [parametersList, setParametersList] = useState([]);\r\n  const [inputErrorMessages, setInputErrorMessages] = useState({});\r\n  const [newParameter, setNewParameter] = useState({\r\n    name: '',\r\n    path: '',\r\n    defaultValue: '',\r\n  });\r\n\r\n  const handleChangeDetails = (property) => (evt) => {\r\n    const val = evt.target.value;\r\n    setDetails((prev) => ({\r\n      ...prev,\r\n      [property]: val,\r\n    }));\r\n  };\r\n\r\n  const handleChangeParams = (property, param) => (evt) => {\r\n    const { value } = evt.target;\r\n    setParameters((prev) => prev.map(\r\n      (parameter) => {\r\n        if (parameter && parameter.path === param.path) {\r\n          return { ...parameter, [property]: value };\r\n        }\r\n        return parameter;\r\n      },\r\n    ));\r\n  };\r\n\r\n  const deleteParam = (param) => () => {\r\n    setParameters((prev) => prev.filter((p) => p.path !== param.path));\r\n  };\r\n\r\n  const handleChangeNewParam = (property) => (evt) => {\r\n    const { value } = evt.target;\r\n    setNewParameter((prev) => ({\r\n      ...prev,\r\n      [property]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    let error = false;\r\n    if (newParameter.name === '') {\r\n      error = true;\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamName: 'Name is required',\r\n      }));\r\n    } else {\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamName: '',\r\n      }));\r\n    }\r\n    if (newParameter.path === '') {\r\n      error = true;\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamPath: 'Path is required',\r\n      }));\r\n    } else {\r\n      setInputErrorMessages((prev) => ({\r\n        ...prev,\r\n        newParamPath: '',\r\n      }));\r\n    }\r\n    if (error) return;\r\n    setParameters((prev) => {\r\n      const item = prev.find((p) => p.path === newParameter.path);\r\n      if (!item) {\r\n        return prev.concat(newParameter);\r\n      }\r\n      setInputErrorMessages(() => ({\r\n        ...prev,\r\n        newParamPath: 'This parameter is already added.',\r\n      }));\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const result = await ReportingService.updateReport(details.id, {\r\n      description: details.description,\r\n      parameters,\r\n    });\r\n    if (result) {\r\n      setReport(result);\r\n      setOpen(false);\r\n      setDetails(null);\r\n      setParameters([]);\r\n      setNewParameter({});\r\n      NotificationService.notifySuccess('Report saved');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      if (id && isOpen) {\r\n        const reportDetails = await ReportingService.getReport(id);\r\n        let params = [];\r\n        if (reportDetails?.template?.id) {\r\n          params = await ReportingService.getTempalteParameters(reportDetails.template.id);\r\n        }\r\n        if (mounted) {\r\n          setDetails(reportDetails);\r\n          setParameters(reportDetails.parameters);\r\n          setParametersList(params);\r\n        }\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id, isOpen]);\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleSave}>Save</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    isOpen && details\r\n      ? (\r\n        <Panel\r\n          isOpen={isOpen}\r\n          onDismiss={() => setOpen(false)}\r\n          headerText=\"Create Report\"\r\n          type={PanelType.large}\r\n          onRenderFooterContent={onRenderFooter}\r\n        >\r\n          <Container fluid className={classes.root}>\r\n            <Separator>General</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  label=\"Name: \"\r\n                  value={details.name}\r\n                  underlined\r\n                  disabled\r\n                />\r\n                <TextField\r\n                  label=\"Description: \"\r\n                  value={details.description}\r\n                  multiline\r\n                  underlined\r\n                  resizable={false}\r\n                  onChange={handleChangeDetails('description')}\r\n                />\r\n                <TextField\r\n                  label=\"Template: \"\r\n                  value={details.template.name}\r\n                  underlined\r\n                  disabled\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator>Parameters</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                {\r\n                  parameters.map((parameter) => (\r\n                    <Box className={classes.box}>\r\n                      <TextField\r\n                        label=\"Name: \"\r\n                        value={parameter.name}\r\n                        underlined\r\n                        onChange={handleChangeParams('name', parameter)}\r\n                      />\r\n                      <TextField\r\n                        label=\"Path: \"\r\n                        value={parameter.path}\r\n                        underlined\r\n                        disabled\r\n                      />\r\n                      <TextField\r\n                        label=\"Default value: \"\r\n                        value={parameter.defaultValue}\r\n                        underlined\r\n                        onChange={handleChangeParams('defaultValue', parameter)}\r\n                      />\r\n                      <ActionButton\r\n                        onClick={deleteParam(parameter)}\r\n                        iconProps={{\r\n                          iconName: 'Delete',\r\n                        }}\r\n                        text=\"Delete\"\r\n                      />\r\n                    </Box>\r\n                  ))\r\n                }\r\n                <Box className={classes.box}>\r\n                  <SinglePicker\r\n                    options={parametersList.map((param) => param.paths.map((path) => ({\r\n                      key: `${param.name}${path}`,\r\n                      data: `${param.name}${path}`,\r\n                    }))).flat()}\r\n                    getTextFromItem={(item) => item.data}\r\n                    onSelect={(item) => setNewParameter((prev) => ({\r\n                      ...prev,\r\n                      path: item.data,\r\n                    }))}\r\n                    onRenderItem={() => null}\r\n                    maxHeight=\"400px\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Name: \"\r\n                    value={newParameter.name || ''}\r\n                    underlined\r\n                    onChange={handleChangeNewParam('name')}\r\n                    required\r\n                    errorMessage={inputErrorMessages.newParamName || ''}\r\n                  />\r\n                  <TextField\r\n                    label=\"Path: \"\r\n                    value={newParameter.path || ''}\r\n                    underlined\r\n                    required\r\n                    errorMessage={inputErrorMessages.newParamPath || ''}\r\n                  />\r\n                  <TextField\r\n                    label=\"Default value: \"\r\n                    value={newParameter.defaultValue || ''}\r\n                    underlined\r\n                    onChange={handleChangeNewParam('defaultValue')}\r\n                  />\r\n                  <ActionButton\r\n                    onClick={handleAdd}\r\n                    iconProps={{\r\n                      iconName: 'Add',\r\n                    }}\r\n                    text=\"Add\"\r\n                  />\r\n                </Box>\r\n              </Col>\r\n            </Row>\r\n            <Separator>Aggregation</Separator>\r\n            <Row justify=\"start\">\r\n              <Col xs={12} sm={8} md={6}>\r\n                <TextField\r\n                  value={JSON.stringify(JSON.parse(details.template.aggregation), null, 4)}\r\n                  multiline\r\n                  underlined\r\n                  disabled\r\n                  autoAdjustHeight\r\n                  resizable={false}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Panel>\r\n      ) : null\r\n  );\r\n};\r\n\r\nReportsEditPanel.propTypes = {\r\n  id: PropTypes.string,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  setReport: PropTypes.func.isRequired,\r\n};\r\n\r\nReportsEditPanel.defaultProps = {\r\n  id: null,\r\n};\r\n\r\nexport default ReportsEditPanel;\r\n","import ReportsEditPanel from './ReportsEditPanel';\r\n\r\nexport default ReportsEditPanel;\r\n","import Reports from './Reports';\r\n\r\nexport default Reports;\r\n","import React, { useState } from 'react';\r\nimport { Container, Row, Col } from 'react-grid-system';\r\nimport { DetailsListLayoutMode, SelectionMode, Separator } from '@fluentui/react';\r\nimport ReportsInfoProvider from './components/reports-info-provider';\r\nimport PageHeader from '../shared/page-header/PageHeader';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport ReportsNewPanel from './components/reports-new-panel';\r\nimport ReportsDetailsPanel from './components/reports-details-panel/ReportsDetailsPanel';\r\nimport ReportsEditPanel from './components/reports-edit-panel';\r\n\r\nconst ReportsList = () => {\r\n  const [newPanelOpen, setNewPanelOpen] = useState(false);\r\n  const [detailsPanelOpen, setDetailsPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [reports, setReports] = useState([]);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'description',\r\n      name: ' Description',\r\n      fieldName: 'description',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileBug',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'createdby',\r\n      name: ' Created by',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'Contact',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      onRender: (item) => item.createdUser.username,\r\n    },\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  ]);\r\n\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      isSorted: true,\r\n      isSortedDescending: false,\r\n    },\r\n  );\r\n\r\n  return (\r\n    <Container fluid>\r\n      <ReportsInfoProvider setReports={setReports} />\r\n      <PageHeader text=\"Reports\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => setNewPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n                onClick: () => setDetailsPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: reports,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setDetailsPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <ReportsNewPanel\r\n        isOpen={newPanelOpen}\r\n        setOpen={setNewPanelOpen}\r\n        addReport={(report) => setReports((prev) => prev.concat(report))}\r\n      />\r\n      <ReportsDetailsPanel\r\n        id={selectionDetails.count > 0 ? selectionDetails.items[0].id : null}\r\n        isOpen={detailsPanelOpen}\r\n        setOpen={setDetailsPanelOpen}\r\n      />\r\n      <ReportsEditPanel\r\n        id={selectionDetails.count > 0 ? selectionDetails.items[0].id : null}\r\n        isOpen={editPanelOpen}\r\n        setOpen={setEditPanelOpen}\r\n        setReport={\r\n          (report) => setReports((prev) => prev.map((r) => (r.id === report.id ? report : r)))\r\n        }\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ReportsList;\r\n","import ReportsPage from './ReportsPage';\r\n\r\nexport default ReportsPage;\r\n","import React from 'react';\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport Reports from '../../components/reports';\r\n\r\nconst ReportsPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route exact path={path}>\r\n          <Reports />\r\n        </Route>\r\n        <Route exact path={`${path}/new`}>\r\n          <h1>Report</h1>\r\n        </Route>\r\n        <Route exact path={`${path}/:id`}>\r\n          <h1>Report</h1>\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReportsPage;\r\n","const { default: ReportTemplates } = require('./ReportTemplates');\r\n\r\nexport default ReportTemplates;\r\n","import ReportTemplatesPage from './ReportTemplatesPage';\r\n\r\nexport default ReportTemplatesPage;\r\n","import React from 'react';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport ReportTemplates from '../../components/report-templates';\r\n\r\nconst ReportTemplatesPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <Switch>\r\n      <Route exact path={path}>\r\n        <ReportTemplates />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default ReportTemplatesPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Container, Row, Col } from 'react-grid-system';\r\nimport {\r\n  PrimaryButton, Separator, Dropdown, makeStyles, DatePicker,\r\n} from '@fluentui/react';\r\nimport { downloadBlob } from 'download.js';\r\nimport PageHeader from '../shared/page-header';\r\nimport AppraisalService from '../../services/AppraisalService';\r\nimport NotificationService from '../../services/NotificationService';\r\nimport ReportingService from '../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: theme.spacing.m,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AppraisalReport = () => {\r\n  const classes = useStyles();\r\n  const [periods, setPeriods] = useState([]);\r\n  const [dateFrom, setDateFrom] = useState(null);\r\n  const [dateTo, setDateTo] = useState(null);\r\n  const [selectedPeriods, setSelectedPeriods] = useState([]);\r\n\r\n  const handlePeriodsChange = (evt, selection) => {\r\n    if (selection) {\r\n      if (selection.selected) {\r\n        setSelectedPeriods((prev) => prev.concat(selection.key));\r\n      } else {\r\n        setSelectedPeriods((prev) => prev.filter((p) => p !== selection.key));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChangeDate = (setFunc) => (dt) => {\r\n    setFunc(new Date(Date.UTC(dt.getFullYear(), dt.getMonth(), dt.getDate())));\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (dateFrom && dateTo && (dateTo < dateFrom)) {\r\n      return NotificationService.notifySevereWarning(\"'Date to' should be bigger than 'Date from'\");\r\n    }\r\n    // if any of the fields are set, generate the report\r\n    if (dateFrom || dateTo || selectedPeriods.length) {\r\n      const report = await ReportingService.generateAppraisalReport({\r\n        dateFrom,\r\n        dateTo,\r\n        periods: selectedPeriods,\r\n      });\r\n      if (report) {\r\n        return downloadBlob('appraisal.xlsx', report);\r\n      }\r\n      return null;\r\n    }\r\n    // otherwise, notify user\r\n    return NotificationService.notifySevereWarning('At least one field should be set');\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const result = await AppraisalService.getPeriods();\r\n      if (result && mounted) {\r\n        setPeriods(result.map((r) => ({\r\n          key: r.id,\r\n          text: r.name,\r\n          data: r,\r\n        })));\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid className={classes.root}>\r\n      <PageHeader text=\"Appraisal Report\" />\r\n      <Separator />\r\n      {/* Select periods */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={8} sm={12}>\r\n          <Dropdown\r\n            placeholder=\"Select periods\"\r\n            label=\"Select one or multiple periods\"\r\n            multiSelect\r\n            options={periods}\r\n            onChange={handlePeriodsChange}\r\n            selectedKeys={selectedPeriods}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {/* Select Date range */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <DatePicker\r\n              placeholder=\"Select date from...\"\r\n              aria-label=\"Select date from\"\r\n              value={dateFrom}\r\n              label=\"Date from\"\r\n              onSelectDate={handleChangeDate(setDateFrom)}\r\n            />\r\n          </Row>\r\n        </Col>\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <DatePicker\r\n              placeholder=\"Select date to...\"\r\n              aria-label=\"Select date to\"\r\n              value={dateTo}\r\n              label=\"Date to\"\r\n              onSelectDate={handleChangeDate(setDateTo)}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      {/* Generate button */}\r\n      <Row align=\"center\" justify=\"center\">\r\n        <Col md={4} sm={12}>\r\n          <Row justify=\"center\">\r\n            <PrimaryButton\r\n              text=\"Generate\"\r\n              type=\"submit\"\r\n              onClick={handleGenerate}\r\n            />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppraisalReport;\r\n","import ReportingPage from './ReportingPage';\r\n\r\nexport default ReportingPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport ReportsPage from '../reporting-reports';\r\nimport ReportingTemplatesPage from '../reporting-templates';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport AppraisalReport from '../../components/appraisal-report/AppraisalReport';\r\n\r\nconst ReportingPage = () => {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <Container lg>\r\n      <Switch>\r\n        <Route path={`${path}/reports`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORTS\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <ReportsPage />\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/templates`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORT-TEMPLATES\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Reporting Templates\">\r\n              <ReportingTemplatesPage />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/appraisal-report`}>\r\n          <AuthorizationRedirectComponent\r\n            code=\"REPORTS\"\r\n            grant=\"read\"\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Appraisal Report\">\r\n              <AppraisalReport />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n      </Switch>\r\n    </Container>\r\n  );\r\n};\r\n\r\nReportingPage.propTypes = {\r\n  ctx: PropTypes.shape({\r\n    user: PropTypes.shape({\r\n      username: PropTypes.string,\r\n    }),\r\n  }).isRequired,\r\n};\r\n\r\nexport default ReportingPage;\r\n","import LoginRequired from './LoginRequired';\r\n\r\nexport default LoginRequired;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst LoginRequired = () => {\r\n  const [redirect, setRedirect] = useState(false);\r\n  const global = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function getUser() {\r\n      // const user = await LoginService.getCurrentUser();\r\n\r\n      if (!global.userLoaded) return;\r\n      // There is no user anymore, probably logged out, so we need to remove it from the state\r\n      if (global.user === null) {\r\n        setRedirect(true);\r\n      }\r\n    }\r\n    getUser();\r\n  }, [global]);\r\n\r\n  return (\r\n    <>\r\n      {redirect\r\n        ? <Redirect to=\"/login\" />\r\n        : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginRequired;\r\n","import LoginPage from './LoginPage';\r\n\r\nexport default LoginPage;\r\n","import React from 'react';\r\n\r\nconst LoginPage = () => (\r\n  <>\r\n    <h1 style={{ textAlign: 'center' }}>Login</h1>\r\n    <a href=\"/auth/login\">Login</a>\r\n  </>\r\n);\r\n\r\nexport default LoginPage;\r\n","import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst useFetch = (url, options = null, initialData = [], dependencies = [], cb = null) => {\r\n  const [data, setData] = useState(initialData);\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      setData(initialData);\r\n      const result = await axios.get(url, options);\r\n      if (result.status === 200) {\r\n        setData(cb ? cb(result.data) : result.data);\r\n      }\r\n    }\r\n    if (url) {\r\n      run();\r\n    }\r\n  }, [url, ...dependencies]);\r\n\r\n  return [data, setData];\r\n};\r\n\r\nexport default useFetch;\r\n","import { DateTime } from 'luxon';\r\nimport axios from 'axios';\r\nimport NotificationService from '../NotificationService';\r\n\r\nconst TaskService = {\r\n  baseUrl: '/api/tasks',\r\n  taskPath: (id) => `/api/tasks/${id}`,\r\n  taskStatusPath: (id) => `/api/tasks/${id}/status`,\r\n  tasksCheckConflictsPath: '/api/tasks/check-busy',\r\n\r\n  async getTasks(params = {}) {\r\n    try {\r\n      const response = await axios.get(this.baseUrl, {\r\n        params,\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getBusyTasks({ user }) {\r\n    try {\r\n      const response = await axios.get(this.tasksCheckConflictsPath, {\r\n        params: { user },\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getTask() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async createTask(data) {\r\n    try {\r\n      const response = await axios.post(this.baseUrl, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTask(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskPath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTaskStatus(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskStatusPath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteTask() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  createTaskObject(task) {\r\n    const copy = { ...task };\r\n    const startRaw = DateTime\r\n      .fromISO(task.expectedStartDate).toUTC();\r\n    const endRaw = DateTime\r\n      .fromISO(task.expectedFinishDate).toUTC();\r\n    copy.expectedStartDate = DateTime.fromObject({\r\n      year: startRaw.year,\r\n      month: startRaw.month,\r\n      day: startRaw.day,\r\n      hour: startRaw.hour,\r\n      minute: startRaw.minute,\r\n      second: 0,\r\n      zone: task.zone,\r\n    }).toISO();\r\n    copy.expectedFinishDate = DateTime.fromObject({\r\n      year: endRaw.year,\r\n      month: endRaw.month,\r\n      day: endRaw.day,\r\n      hour: endRaw.hour,\r\n      minute: endRaw.minute,\r\n      second: 0,\r\n      zone: task.zone,\r\n    }).toISO();\r\n    return copy;\r\n  },\r\n};\r\n\r\nexport default TaskService;\r\n","export default {\r\n  getHoursFromText(text) {\r\n    const [hours, minutes, seconds] = text.split(':').map((t) => +t);\r\n    return {\r\n      h: hours,\r\n      m: minutes,\r\n      s: seconds ?? 0,\r\n    };\r\n  },\r\n\r\n  combineDateHours(date, hours) {\r\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate(), hours.h, hours.m, hours.s);\r\n  },\r\n\r\n  makeUTC(date) {\r\n    if (Number.isNaN(+new Date(date)) || date === null) return null;\r\n    return new Date(Date.UTC(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      date.getHours(),\r\n      date.getMinutes(),\r\n      date.getSeconds(),\r\n    ));\r\n  },\r\n\r\n  // Return an array containing all days from the same week as date\r\n  // By default first day is monday\r\n  getWeekFromDate(date, firstDay = 1) {\r\n    const result = [];\r\n    // Get first day of the week, take into account firstDay parameter\r\n    const firstDayUTC = this.makeUTCDateOnly(date);\r\n    let day = firstDayUTC.getDay();\r\n    if (day === 0 && firstDay === 1) day = 7;\r\n    firstDayUTC.setDate(firstDayUTC.getDate() - day + firstDay);\r\n    for (let i = 0; i < 7; i += 1) {\r\n      const dt = new Date(firstDayUTC);\r\n      dt.setDate(dt.getDate() + i);\r\n      result.push(dt);\r\n    }\r\n    return result;\r\n  },\r\n\r\n  makeUTCDateOnly(date) {\r\n    if (Number.isNaN(+new Date(date)) || date === null) return null;\r\n    return new Date(Date.UTC(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      0,\r\n      0,\r\n      0,\r\n    ));\r\n  },\r\n\r\n  getNearestTime(date) {\r\n    return `${(`0${date.getHours()}`).slice(-2)}:${(`0${Math.round(date.getMinutes() / 10) * 10}`).slice(-2)}`;\r\n  },\r\n};\r\n","import React, { useState, createContext, useRef } from 'react';\r\nimport {\r\n  Panel, PanelType,\r\n} from '@fluentui/react';\r\n\r\nconst PanelContext = createContext({\r\n  isPanel: false,\r\n  isOpen: null,\r\n  setOpen: null,\r\n  onRenderFooter: null,\r\n  setOnRenderFooter: null,\r\n});\r\n\r\n/**\r\n * @param {Object} onRenderComponent\r\n * @param {Object} options\r\n * @param {Function} options.onDismiss\r\n * @param {Number} options.type\r\n * @param {String} options.headerText\r\n * @param {Boolean} options.isLightDismiss\r\n * @param {Function} options.onRenderFooterContent\r\n * @param {Boolean} options.isFooterAtBottom\r\n * @param {String} options.id\r\n */\r\nconst usePanel = (Component, options = {}, componentProps = {}) => {\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [onRenderFooter, setOnRenderFooter] = useState(() => options.onRenderFooterContent);\r\n  const componentRef = useRef(null);\r\n  const [ctx] = useState({\r\n    isPanel: true,\r\n    isOpen,\r\n    setOpen,\r\n    onRenderFooter,\r\n    setOnRenderFooter,\r\n  });\r\n\r\n  const render = (\r\n    <PanelContext.Provider value={ctx}>\r\n      <Panel\r\n        id={options.id ?? 'use-panel'}\r\n        componentRef={componentRef}\r\n        isOpen={isOpen}\r\n        onDismiss={(options?.onDismiss && options.onDismiss(isOpen, setOpen))\r\n        ?? (() => setOpen(false))}\r\n        type={options.type ?? PanelType.smallFixedFar}\r\n        headerText={options.headerText ?? 'Panel'}\r\n        isLightDismiss={options.isLightDismiss ?? false}\r\n        onRenderFooterContent={onRenderFooter}\r\n        isFooterAtBottom={options.isFooterAtBottom ?? false}\r\n      >\r\n        {\r\n        isOpen\r\n          // eslint-disable-next-line react/jsx-props-no-spreading\r\n          ? <Component isOpen={isOpen} setOpen={setOpen} {...componentProps} />\r\n          : null\r\n      }\r\n      </Panel>\r\n    </PanelContext.Provider>\r\n  );\r\n\r\n  return {\r\n    isOpen, setOpen, render, componentRef,\r\n  };\r\n};\r\n\r\nexport default usePanel;\r\n\r\nexport {\r\n  PanelContext,\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePicker,\r\n  Checkbox,\r\n  makeStyles,\r\n  Text,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& .ms-BasePicker-text': {\r\n      display: 'flex',\r\n      flexFlow: 'row nowrap',\r\n      borderColor: theme.palette.neutralPrimaryAlt,\r\n    },\r\n    '& .ms-BasePicker-text:hover': {\r\n      borderColor: theme.palette.neutralPrimary,\r\n    },\r\n    '& span[id*=\\'selected-items\\']': {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'elipsis',\r\n    },\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n    '& input::placeholder': {\r\n      color: theme.palette.neutralPrimaryAlt,\r\n    },\r\n  },\r\n  label: {\r\n    padding: '5px 0',\r\n    fontWeight: 600,\r\n  },\r\n  hidden: {\r\n    height: 0,\r\n    width: 0,\r\n    outline: 'none',\r\n    border: 'none',\r\n    background: 'none',\r\n  },\r\n}));\r\n\r\nconst Autocomplete = ({\r\n  options,\r\n  selected,\r\n  onItemSelected,\r\n  label,\r\n  required,\r\n}) => {\r\n  const [calloutWidth, setCalloutWidth] = useState(400);\r\n  const input = useRef(null);\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (input?.current?.root?.current) {\r\n      setCalloutWidth(input.current.root.current.clientWidth);\r\n    }\r\n  }, [input]);\r\n\r\n  const toggleSelect = (item, ev) => {\r\n    if (ev) ev.preventDefault();\r\n    if (selected.indexOf(item) === -1) {\r\n      onItemSelected((prev) => prev.concat(item));\r\n      if (input.current) input.current.input.current.clear();\r\n    } else {\r\n      onItemSelected((prev) => prev.filter((p) => p !== item));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Text variant=\"medium\" block className={classes.label}>\r\n        {label}\r\n      </Text>\r\n      <BasePicker\r\n        className={classes.root}\r\n        componentRef={input}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onRenderItem={(itemProps) => {\r\n          if (selected.length > 1) {\r\n            if (itemProps.index === 0) return `${selected.length} selected`;\r\n            return '';\r\n          }\r\n          return itemProps.item.text;\r\n        }}\r\n        selectedItems={selected}\r\n        onChange={(items) => {\r\n          if (items.indexOf(undefined) === -1) onItemSelected(() => items);\r\n        }}\r\n        inputProps={{\r\n          placeholder: selected?.length ? '' : 'Search...',\r\n        }}\r\n        getTextFromItem={(item) => item.text}\r\n        onItemSelected={(item) => {\r\n          toggleSelect(item);\r\n        }}\r\n        onResolveSuggestions={\r\n        (filter) => options.filter((option) => option.text.indexOf(filter) !== -1)\r\n      }\r\n        onRenderSuggestionsItem={(suggestion) => (\r\n          <div\r\n            style={{\r\n              padding: '5px 10px',\r\n            }}\r\n          >\r\n            <Checkbox\r\n              checked={\r\n                selected.find((s) => s.text === suggestion.text) !== undefined\r\n              }\r\n              onRenderLabel={() => suggestion.text}\r\n            />\r\n          </div>\r\n        )}\r\n        pickerSuggestionsProps={{\r\n          onSuggestionClick: (ev, item) => {\r\n            toggleSelect(item, ev);\r\n          },\r\n        }}\r\n        pickerCalloutProps={{\r\n          target: input?.current?.root || document.body,\r\n          calloutWidth,\r\n        }}\r\n      />\r\n      <input type=\"text\" className={classes.hidden} required={required} value={selected.length ? 'filled' : ''} />\r\n    </>\r\n  );\r\n};\r\n\r\nAutocomplete.propTypes = {\r\n  options: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n  })).isRequired,\r\n  selected: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n  })).isRequired,\r\n  onItemSelected: PropTypes.func.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  required: PropTypes.bool,\r\n};\r\n\r\nAutocomplete.defaultProps = {\r\n  required: false,\r\n};\r\n\r\nexport default Autocomplete;\r\n","import {\r\n  ComboBox,\r\n  Position,\r\n  SpinButton,\r\n  TextField,\r\n  DatePicker,\r\n} from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport TaskService from '../../../../services/tasks/TaskService';\r\nimport UserService from '../../../../services/UserService';\r\nimport Autocomplete from '../../../shared/autocomplete/Autocomplete';\r\nimport constants from '../../../../utils/constants';\r\nimport { useFetch } from '../../../../services/hooks';\r\n\r\nconst AddTask = ({ setOpen, setTasks }) => {\r\n  const [options] = useState(constants.timeOptions);\r\n  const [users] = useFetch(UserService.teamUsersPath);\r\n  const [userOptions, setUserOptions] = useState([]);\r\n  const [values, setValues] = useState({\r\n    title: '',\r\n    description: '',\r\n    remarks: '',\r\n    expectedStartDate: new Date(),\r\n    expectedStartTime: '00:00',\r\n    duration: 60,\r\n    isBackgroundTask: false,\r\n    selectedUsers: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    setUserOptions(users.map((user) => ({\r\n      key: user.id,\r\n      text: user.username,\r\n      data: user,\r\n    })));\r\n  }, [users]);\r\n\r\n  const handleUpdate = (key) => (evt) => {\r\n    setValues((prev) => ({ ...prev, [key]: evt.target.value }));\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.persist();\r\n    evt.preventDefault();\r\n    const dt = values.expectedStartDate;\r\n    const [hr, min] = values.expectedStartTime.split(':');\r\n    const expDate = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(), +hr, +min);\r\n    const result = await TaskService.createTask({\r\n      title: values.title,\r\n      description: values.description,\r\n      remarks: values.remarks,\r\n      expectedStartDate: expDate,\r\n      expectedFinishDate: new Date(expDate.getTime() + values.duration * 60000),\r\n      assignedTo: values.selectedUsers.map((u) => u.data.id),\r\n      isBackgroundTask: values.isBackgroundTask,\r\n    });\r\n    if (result) {\r\n      setTasks((prev) => {\r\n        if (prev.length) {\r\n          return prev.concat(result);\r\n        }\r\n        return prev;\r\n      });\r\n    }\r\n    if (setOpen) {\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form id=\"create-task-form\" onSubmit={handleSubmit}>\r\n        <TextField\r\n          required\r\n          label=\"Title\"\r\n          value={values.title}\r\n          onChange={handleUpdate('title')}\r\n        />\r\n        <TextField\r\n          label=\"Description\"\r\n          value={values.description}\r\n          onChange={handleUpdate('description')}\r\n        />\r\n        <TextField\r\n          label=\"Remarks\"\r\n          value={values.remarks}\r\n          multiline\r\n          onChange={handleUpdate('remarks')}\r\n        />\r\n        <DatePicker\r\n          label=\"Start date\"\r\n          value={values.expectedStartDate}\r\n          onSelectDate={(date) => setValues((prev) => ({ ...prev, expectedStartDate: date }))}\r\n        />\r\n        <ComboBox\r\n          label=\"Start time\"\r\n          options={options}\r\n          selectedKey={values.expectedStartTime}\r\n          autoComplete=\"on\"\r\n          onChange={\r\n            (evt, option) => setValues((prev) => ({ ...prev, expectedStartTime: option.text }))\r\n          }\r\n          calloutProps={{\r\n            calloutMaxHeight: 400,\r\n          }}\r\n          useComboBoxAsMenuWidth\r\n        />\r\n        <SpinButton\r\n          label=\"Duration (min)\"\r\n          value={values.duration}\r\n          onChange={(evt) => {\r\n            let val = +evt.target.value;\r\n            if (Number.isNaN(val)) val = 0;\r\n            setValues((prev) => ({ ...prev, duration: val }));\r\n          }}\r\n          onIncrement={(val) => setValues((prev) => ({ ...prev, duration: (+val + 10) }))}\r\n          onDecrement={(val) => {\r\n            if (val > 10) setValues((prev) => ({ ...prev, duration: (+val - 10) }));\r\n          }}\r\n          min={0}\r\n          step={10}\r\n          incrementButtonAriaLabel=\"Increase value by 10\"\r\n          decrementButtonAriaLabel=\"Decrease value by 10\"\r\n          labelPosition={Position.top}\r\n        />\r\n        <Autocomplete\r\n          label=\"Assigned to\"\r\n          options={userOptions}\r\n          selected={values.selectedUsers}\r\n          onItemSelected={(data) => setValues((prev) => ({\r\n            ...prev,\r\n            selectedUsers: data(prev.selectedUsers),\r\n          }))}\r\n          required\r\n        />\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nAddTask.propTypes = {\r\n  setOpen: PropTypes.func,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nAddTask.defaultProps = {\r\n  setOpen: null,\r\n};\r\n\r\nexport default AddTask;\r\n","import AddTask from './AddTask';\r\n\r\nexport default AddTask;\r\n","import { DateTime } from 'luxon';\r\nimport { ActionButton, DatePicker, Stack } from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst CurrentDate = ({ currentDate, setCurrentDate }) => (\r\n  <>\r\n    <Stack horizontal verticalAlign=\"center\" horizontalAlign=\"center\">\r\n      <ActionButton\r\n        onClick={() => setCurrentDate((prev) => {\r\n          const from = DateTime.fromJSDate(prev);\r\n          return DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).minus({ day: 1 }).toJSDate();\r\n        })}\r\n        iconProps={{\r\n          iconName: 'Previous',\r\n        }}\r\n      />\r\n      <DatePicker\r\n        value={currentDate}\r\n        onSelectDate={(date) => {\r\n          const from = DateTime.fromJSDate(date);\r\n          const result = DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).toJSDate();\r\n          return setCurrentDate(result);\r\n        }}\r\n        firstDayOfWeek={1}\r\n      />\r\n      <ActionButton\r\n        onClick={() => setCurrentDate((prev) => {\r\n          const from = DateTime.fromJSDate(prev);\r\n          return DateTime.fromObject({\r\n            year: from.year,\r\n            month: from.month,\r\n            day: from.day,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisecond: 0,\r\n            zone: 'utc',\r\n          }).plus({ day: 1 }).toJSDate();\r\n        })}\r\n        iconProps={{\r\n          iconName: 'Next',\r\n        }}\r\n      />\r\n    </Stack>\r\n  </>\r\n);\r\n\r\nCurrentDate.propTypes = {\r\n  currentDate: PropTypes.instanceOf(Date).isRequired,\r\n  setCurrentDate: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default CurrentDate;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Facepile, makeStyles, OverflowButtonType, PersonaSize,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: 'inline-block',\r\n  },\r\n  container: {\r\n    textAlign: 'center',\r\n  },\r\n}));\r\n\r\nconst TaskPersonas = ({ task }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.container}>\r\n      <Facepile\r\n        className={classes.root}\r\n        personaSize={PersonaSize.size24}\r\n        maxDisplayablePersonas={1}\r\n        overflowButtonType={OverflowButtonType.descriptive}\r\n        overflowButtonProps={{\r\n          ariaDescription: 'More users',\r\n        }}\r\n        personas={task.assignedTo.map((u) => ({\r\n          personaName: u.username,\r\n        }))}\r\n        // onRenderPersona={(persona) => (\r\n        //   <Persona\r\n        //     size={PersonaSize.size24}\r\n        //     text={persona.personaName}\r\n        //     hidePersonaDetails\r\n        //     imageAlt={persona.personaName}\r\n        //   />\r\n        // )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskPersonas.propTypes = {\r\n  task: PropTypes.shape({\r\n    assignedTo: PropTypes.arrayOf(PropTypes.shape({\r\n      id: PropTypes.string,\r\n      username: PropTypes.string,\r\n    })),\r\n  }).isRequired,\r\n};\r\n\r\nexport default TaskPersonas;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Collapse } from 'react-collapse';\r\nimport {\r\n  ButtonGrid, DefaultButton, makeStyles, Separator, Text,\r\n} from '@fluentui/react';\r\nimport TaskPersonas from '../task-personas/TaskPersonas';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& table': {\r\n      margin: 'auto',\r\n      borderCollapse: 'unset',\r\n    },\r\n  },\r\n  statusText: {\r\n    textAlign: 'center',\r\n  },\r\n}));\r\n\r\nconst TaskCollapsed = ({\r\n  task, collapsed, setCollapsed, handleStatusChange,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (item) => async () => {\r\n    await handleStatusChange(task, item.status);\r\n    setCollapsed(true);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Collapse isOpened={!collapsed}>\r\n        <Separator />\r\n        <TaskPersonas task={task} />\r\n        <Separator>\r\n          <Text variant=\"smallPlus\">Status</Text>\r\n        </Separator>\r\n        <ButtonGrid\r\n          columnCount={2}\r\n          onRenderItem={(item) => (\r\n            <DefaultButton\r\n              onClick={handleChange(item)}\r\n              disabled={item.disabled}\r\n              style={{\r\n                width: 115,\r\n                margin: 3,\r\n                fontSize: 8,\r\n                height: 18,\r\n              }}\r\n            >\r\n              <Text variant=\"small\">{item.text}</Text>\r\n            </DefaultButton>\r\n          )}\r\n          items={[\r\n            {\r\n              key: 'inprogress',\r\n              text: 'In progress',\r\n              status: 'InProgress',\r\n              disabled: task.status === 'InProgress',\r\n            },\r\n            {\r\n              key: 'paused',\r\n              text: 'Paused',\r\n              status: 'Paused',\r\n              disabled: task.status !== 'InProgress',\r\n            },\r\n            {\r\n              key: 'finished',\r\n              text: 'Finished',\r\n              status: 'Finished',\r\n              disabled: task.status === 'Finished',\r\n            },\r\n            {\r\n              key: 'cancelled',\r\n              text: 'Cancelled',\r\n              status: 'Cancelled',\r\n              disabled: task.status === 'Cancelled',\r\n            },\r\n          ]}\r\n        />\r\n      </Collapse>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskCollapsed.propTypes = {\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  task: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    status: PropTypes.string,\r\n  }).isRequired,\r\n  collapsed: PropTypes.bool.isRequired,\r\n  setCollapsed: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskCollapsed;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport {\r\n  ActionButton, makeStyles, Separator, Text,\r\n} from '@fluentui/react';\r\nimport TaskCollapsed from '../task-collapsed/TaskCollapsed';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: '75px',\r\n    position: 'relative',\r\n    '& .task-new': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #87D7A1',\r\n      borderLeft: '10px solid #87D7A1',\r\n      '& .task-new-status': {\r\n        backgroundColor: '#87D7A1',\r\n      },\r\n    },\r\n    '& .task-inprogress': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #F4C884',\r\n      borderLeft: '10px solid #F4C884',\r\n      '& .task-inprogress-status': {\r\n        backgroundColor: '#F4C884',\r\n      },\r\n    },\r\n    '& .task-finished': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #C4C4C4',\r\n      borderLeft: '10px solid #C4C4C4',\r\n      '& .task-finished-status': {\r\n        backgroundColor: '#C4C4C4',\r\n      },\r\n    },\r\n    '& .task-cancelled': {\r\n      minHeight: 'inherit',\r\n      border: '1px solid #FF6B59',\r\n      borderLeft: '10px solid #FF6B59',\r\n      '& .task-cancelled-status': {\r\n        backgroundColor: '#FF6B59',\r\n      },\r\n    },\r\n    '& .task-paused': {\r\n      minHeight: 'inherit',\r\n      border: `1px solid ${theme.palette.neutralLight}`,\r\n      borderLeft: `10px solid ${theme.palette.neutralLight}`,\r\n      '& .task-paused-status': {\r\n        backgroundColor: theme.palette.neutralLight,\r\n      },\r\n    },\r\n  },\r\n  status: {\r\n    alignSelf: 'center',\r\n    display: 'inline',\r\n    minWidth: '80px',\r\n    position: 'absolute',\r\n    textAlign: 'center',\r\n    color: theme.palette.neutralLighterAlt,\r\n    padding: '2px 0',\r\n  },\r\n  collapse: {\r\n    width: '100%',\r\n    textAlign: 'center',\r\n    cursor: 'pointer',\r\n    outline: 'none',\r\n    marginBottom: theme.spacing.s2,\r\n  },\r\n  chevron: {\r\n    height: '100%',\r\n  },\r\n  chevronIcon: {\r\n    color: `${theme.palette.black} !important`,\r\n  },\r\n  rows: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    flexGrow: '1',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    minHeight: 'inherit',\r\n    maxWidth: '75%',\r\n  },\r\n  taskDescription: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'space-between',\r\n    width: '100%',\r\n    margin: '25px 0',\r\n  },\r\n  nowrap: {\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  prewrap: {\r\n    whiteSpace: 'pre-wrap',\r\n  },\r\n  title: {\r\n    paddingLeft: theme.spacing.s1,\r\n  },\r\n  description: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n    paddingLeft: theme.spacing.s1,\r\n  },\r\n  time: {\r\n    paddingRight: theme.spacing.s1,\r\n    lineHeight: '10px',\r\n  },\r\n  column: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n  },\r\n}));\r\n\r\nconst TaskItem = ({ task, setTasks, handleStatusChange }) => {\r\n  const classes = useStyles();\r\n  const [time, setTime] = useState({\r\n    from: '00:00',\r\n    to: '00:00',\r\n  });\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (task) {\r\n      const startDate = new Date(task.expectedStartDate);\r\n      const finishDate = new Date(task.expectedFinishDate);\r\n      const [fromHours, fromMinutes, toHours, toMinutes] = [\r\n        `0${startDate.getHours()}`.slice(-2),\r\n        `0${startDate.getMinutes()}`.slice(-2),\r\n        `0${finishDate.getHours()}`.slice(-2),\r\n        `0${finishDate.getMinutes()}`.slice(-2),\r\n      ];\r\n      setTime(() => ({\r\n        from: `${fromHours}:${fromMinutes}`,\r\n        to: `${toHours}:${toMinutes}`,\r\n      }));\r\n    }\r\n  }, [task]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={clsx(`task-${task.status.toLowerCase()}`, classes.column)}>\r\n        <span className={clsx([`task-${task.status.toLowerCase()}-status`, classes.status])}>\r\n          {task.status}\r\n        </span>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexFlow: 'row nowrap',\r\n          justifyContent: 'space-between',\r\n          minHeight: 'inherit',\r\n          alignItems: 'center',\r\n        }}\r\n        >\r\n          <div className={classes.rows}>\r\n            <div className={classes.taskDescription}>\r\n              <Text variant=\"medium\" className={clsx([classes.title, collapsed && classes.nowrap])}>{task.title}</Text>\r\n              <Text variant=\"smallPlus\" className={clsx([classes.description, collapsed ? classes.nowrap : classes.prewrap])}>{task.description}</Text>\r\n            </div>\r\n          </div>\r\n          <div className={classes.time}>\r\n            <Text variant=\"smallPlus\">{time.from}</Text>\r\n            <Separator styles={{\r\n              root: {\r\n                padding: 0,\r\n              },\r\n            }}\r\n            />\r\n            <Text variant=\"smallPlus\">{time.to}</Text>\r\n          </div>\r\n        </div>\r\n        <TaskCollapsed\r\n          task={task}\r\n          setTasks={setTasks}\r\n          collapsed={collapsed}\r\n          setCollapsed={setCollapsed}\r\n          handleStatusChange={handleStatusChange}\r\n        />\r\n        <div\r\n          tabIndex=\"-1\"\r\n          role=\"button\"\r\n          onKeyDown={(evt) => evt.key === 'Enter' && setCollapsed((prev) => !prev)}\r\n          className={clsx(classes.collapse)}\r\n          onClick={() => setCollapsed((prev) => !prev)}\r\n        >\r\n          <ActionButton\r\n            className={classes.chevron}\r\n            iconProps={{\r\n              iconName: collapsed ? 'ChevronDown' : 'ChevronUp',\r\n              className: classes.chevronIcon,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskItem.propTypes = {\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  task: PropTypes.shape({\r\n    status: PropTypes.string,\r\n    title: PropTypes.string,\r\n    description: PropTypes.string,\r\n    expectedStartDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\r\n    expectedFinishDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\r\n  }).isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskItem;\r\n","import TaskItem from './TaskItem';\r\n\r\nexport default TaskItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  makeStyles,\r\n  Persona, PersonaSize, Separator, Stack, StackItem,\r\n} from '@fluentui/react';\r\nimport TaskItem from '../task-item';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    alignContent: 'center',\r\n    width: '300px',\r\n    minWidth: '300px',\r\n    minHeight: '400px',\r\n    maxHeight: '600px',\r\n    padding: '5px',\r\n    overflow: 'auto',\r\n    backgroundColor: theme.semanticColors.bodyBackground,\r\n    border: `2px solid ${theme.palette.neutralLight}`,\r\n    '& > * + *': {\r\n      marginTop: '2px',\r\n    },\r\n    marginTop: theme.spacing.l1,\r\n  },\r\n}));\r\n\r\nconst TaskContainer = ({\r\n  tasks,\r\n  setTasks,\r\n  handleStatusChange,\r\n  user,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stack horizontalAlign=\"stretch\" verticalAlign=\"stretch\">\r\n        <StackItem align=\"center\">\r\n          <Persona size={PersonaSize.size32} text={user?.username} />\r\n        </StackItem>\r\n        <Separator />\r\n        {\r\n          tasks.map((task) => (\r\n            <TaskItem\r\n              key={task.id}\r\n              task={task}\r\n              setTasks={setTasks}\r\n              handleStatusChange={handleStatusChange}\r\n            />\r\n          ))\r\n        }\r\n      </Stack>\r\n    </div>\r\n  );\r\n};\r\n\r\nTaskContainer.propTypes = {\r\n  user: PropTypes.shape({\r\n    username: PropTypes.string,\r\n  }),\r\n  handleStatusChange: PropTypes.func.isRequired,\r\n  tasks: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nTaskContainer.defaultProps = {\r\n  user: null,\r\n};\r\n\r\nexport default TaskContainer;\r\n","import {\r\n  ComboBox, makeStyles, Stack, Text,\r\n} from '@fluentui/react';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nconst hourOptions = [\r\n  { key: '00:00', text: '00:00' },\r\n  { key: '01:00', text: '01:00' },\r\n  { key: '02:00', text: '02:00' },\r\n  { key: '03:00', text: '03:00' },\r\n  { key: '04:00', text: '04:00' },\r\n  { key: '05:00', text: '05:00' },\r\n  { key: '06:00', text: '06:00' },\r\n  { key: '07:00', text: '07:00' },\r\n  { key: '08:00', text: '08:00' },\r\n  { key: '09:00', text: '09:00' },\r\n  { key: '10:00', text: '10:00' },\r\n  { key: '11:00', text: '11:00' },\r\n  { key: '12:00', text: '12:00' },\r\n  { key: '13:00', text: '13:00' },\r\n  { key: '14:00', text: '14:00' },\r\n  { key: '15:00', text: '15:00' },\r\n  { key: '16:00', text: '16:00' },\r\n  { key: '17:00', text: '17:00' },\r\n  { key: '18:00', text: '18:00' },\r\n  { key: '19:00', text: '19:00' },\r\n  { key: '20:00', text: '20:00' },\r\n  { key: '21:00', text: '21:00' },\r\n  { key: '22:00', text: '22:00' },\r\n  { key: '23:00', text: '23:00' },\r\n];\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  combo: {\r\n    width: 100,\r\n  },\r\n  space: {\r\n    padding: '0px 10px',\r\n  },\r\n  text: {\r\n    padding: '10px',\r\n  },\r\n}));\r\n\r\nconst WorkingHours = ({ hours, setHours }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (type) => (evt, option) => {\r\n    setHours((prev) => ({\r\n      ...prev,\r\n      [type]: option.key,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Text className={classes.text} variant=\"medium\">Working hours</Text>\r\n        <Stack horizontalAlign=\"center\" horizontal verticalAlign=\"center\">\r\n          <ComboBox\r\n            className={classes.combo}\r\n            options={hourOptions}\r\n            selectedKey={hours.from}\r\n            autoComplete=\"on\"\r\n            useComboBoxAsMenuWidth\r\n            calloutProps={{\r\n              calloutMaxHeight: 500,\r\n            }}\r\n            onChange={handleChange('from')}\r\n          />\r\n          <span className={classes.space}>-</span>\r\n          <ComboBox\r\n            className={classes.combo}\r\n            options={hourOptions}\r\n            selectedKey={hours.to}\r\n            autoComplete=\"on\"\r\n            useComboBoxAsMenuWidth\r\n            calloutProps={{\r\n              calloutMaxHeight: 500,\r\n            }}\r\n            onChange={handleChange('to')}\r\n          />\r\n        </Stack>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\n\r\nWorkingHours.propTypes = {\r\n  hours: PropTypes.shape({\r\n    from: PropTypes.string,\r\n    to: PropTypes.string,\r\n  }).isRequired,\r\n  setHours: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default WorkingHours;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { createContext, useEffect, useState } from 'react';\r\nimport {\r\n  Dialog, DialogFooter, DialogType,\r\n} from '@fluentui/react';\r\nimport constants from '../../utils/constants';\r\n\r\nconst DialogContext = createContext({\r\n  isDialog: false,\r\n  isVisible: false,\r\n  setVisible: null,\r\n  show: null,\r\n  accept: null,\r\n  cancel: null,\r\n  resolve: null,\r\n  setResolve: null,\r\n  dialogFooter: null,\r\n  setDialogFooter: null,\r\n});\r\n\r\n/**\r\n * @param {Object} Component\r\n * @param {Object} options\r\n * @param {Function} options.onDismiss\r\n * @param {Boolean} options.isBlocking\r\n * @param {Number} options.type\r\n * @param {String} options.title\r\n * @param {String} options.subText\r\n * @param {Function} options.dialogFooter\r\n * @param {Object} componentProps\r\n */\r\nconst useDialog = (Component, options = {}, componentProps = {}) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [resolve, setResolve] = useState(null);\r\n  const [dialogFooter, setDialogFooter] = useState(() => options.dialogFooter);\r\n\r\n  useEffect(() => {\r\n    if (resolve && !visible) {\r\n      resolve(constants.dialogAnswers.No);\r\n    }\r\n  }, [resolve]);\r\n\r\n  const show = async () => {\r\n    setVisible(true);\r\n    return new Promise((res) => {\r\n      setResolve(() => (res));\r\n    });\r\n  };\r\n\r\n  const accept = () => {\r\n    if (resolve !== null) resolve(constants.dialogAnswers.Yes);\r\n    setVisible(false);\r\n  };\r\n\r\n  const cancel = () => {\r\n    if (resolve !== null) resolve(constants.dialogAnswers.No);\r\n    setVisible(false);\r\n  };\r\n\r\n  const [ctx] = useState({\r\n    isDialog: true,\r\n    isVisible: visible,\r\n    setVisible,\r\n    show,\r\n    accept,\r\n    cancel,\r\n    resolve,\r\n    setResolve,\r\n    dialogFooter,\r\n    setDialogFooter,\r\n  });\r\n\r\n  const render = (\r\n    visible\r\n      ? (\r\n        <DialogContext.Provider value={ctx}>\r\n          <Dialog\r\n            hidden={!visible}\r\n            onDismiss={options.onDismiss ?? (() => setVisible(false))}\r\n            modalProps={{\r\n              isBlocking: options.isBlocking ?? false,\r\n            }}\r\n            dialogContentProps={{\r\n              type: options.type ?? DialogType.normal,\r\n              title: options.title ?? 'Title',\r\n              subText: options.subText ?? '',\r\n            }}\r\n          >\r\n            <Component accept={accept} cancel={cancel} {...componentProps} />\r\n            {\r\n              dialogFooter\r\n                ? (\r\n                  <DialogFooter>\r\n                    { dialogFooter(accept, cancel) }\r\n                  </DialogFooter>\r\n                )\r\n                : null\r\n            }\r\n          </Dialog>\r\n        </DialogContext.Provider>\r\n      )\r\n      : null\r\n  );\r\n\r\n  return {\r\n    visible, setVisible, render, show,\r\n  };\r\n};\r\n\r\nexport default useDialog;\r\n\r\nexport {\r\n  DialogContext,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, Separator, Text } from '@fluentui/react';\r\nimport { Link as RLink } from 'react-router-dom';\r\nimport TaskService from '../../../../services/tasks/TaskService';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst TaskBusyConflict = ({\r\n  accept, setTasks, conflictTasks = [],\r\n}) => {\r\n  const handleSubmit = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const paused = conflictTasks.map(\r\n        (ctask) => TaskService\r\n          .updateTaskStatus(\r\n            ctask.id,\r\n            { status: constants.tasks.status.Paused },\r\n          ),\r\n      );\r\n      // Update paused tasks\r\n      (await Promise.all(paused)).map(\r\n        (task) => setTasks((prev) => prev.map((t) => (t.id === task.result.id ? task.result : t))),\r\n      );\r\n    } finally {\r\n      accept();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form id=\"task-busy-resolve\" onSubmit={handleSubmit}>\r\n      <Text block variant=\"medium\">Following tasks are still busy:</Text>\r\n      <Separator />\r\n      { conflictTasks.map((ctask, idx) => (\r\n        <RLink to={`/tasks/${ctask.id}`} target=\"_blank\" component={Link}>\r\n          <Text variant=\"medium\">\r\n            {idx + 1}\r\n            .\r\n            {' '}\r\n            {ctask.title}\r\n            {` (${new Date(ctask.actualStartDate).toLocaleString()})`}\r\n          </Text>\r\n        </RLink>\r\n      )) }\r\n      <Separator />\r\n      <Text block variant=\"medium\">If you continue, above tasks will be paused.</Text>\r\n    </form>\r\n  );\r\n};\r\n\r\nTaskBusyConflict.propTypes = {\r\n  accept: PropTypes.func.isRequired,\r\n  setTasks: PropTypes.func.isRequired,\r\n  currentTask: PropTypes.shape({\r\n    id: PropTypes.string,\r\n  }).isRequired,\r\n  conflictTasks: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n};\r\n\r\nexport default TaskBusyConflict;\r\n","import { useEffect, useState } from 'react';\r\n\r\nconst useLocalStorageState = (label, initialValue = []) => {\r\n  const [data, setData] = useState(JSON.parse(localStorage.getItem(label)) ?? initialValue);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(label, JSON.stringify(data));\r\n  }, [data]);\r\n\r\n  return [data, setData];\r\n};\r\n\r\nexport default useLocalStorageState;\r\n","import axios from 'axios';\r\nimport NotificationService from './NotificationService';\r\n\r\nconst ConnectionService = {\r\n  baseUrl: '/stream',\r\n  subscribePath: '/stream/subscribe',\r\n\r\n  async connectSSE() {\r\n    try {\r\n      const es = new EventSource(this.baseUrl);\r\n      return es;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  async subscribe(data) {\r\n    try {\r\n      const response = await axios.post(this.subscribePath, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport default ConnectionService;\r\n","import { useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GlobalContext from '../../../../services/GlobalContext';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst TaskLiveUpdate = ({ setTasks }) => {\r\n  const global = useContext(GlobalContext);\r\n\r\n  const handleMessage = async (evt) => {\r\n    const info = JSON.parse(evt.data);\r\n    if (info) {\r\n      if (info.action === constants.connections.actions.INSERT) {\r\n        // Insert\r\n      } else if (info.action === constants.connections.actions.UPDATE) {\r\n        if (info.initiator !== global.user.id) {\r\n          setTasks((prev) => prev.map((task) => (task.id === info.data.id ? info.data : task)));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (global.connection) {\r\n      global.connection.addEventListener('message', handleMessage);\r\n    }\r\n    return () => {\r\n      if (global.connection) {\r\n        global.connection.removeEventListener('message', handleMessage);\r\n      }\r\n    };\r\n  }, [global.connection]);\r\n\r\n  return null;\r\n};\r\n\r\nTaskLiveUpdate.propTypes = {\r\n  setTasks: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TaskLiveUpdate;\r\n","import {\r\n  ComboBox,\r\n  CommandBar, DefaultButton, Icon, makeStyles, PrimaryButton, Separator, Stack,\r\n} from '@fluentui/react';\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport { DateTime } from 'luxon';\r\nimport { useFetch } from '../../services/hooks';\r\nimport DU from '../../utils/date';\r\nimport TaskService from '../../services/tasks/TaskService';\r\nimport PageHeader from '../shared/page-header';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddTask from './components/add-task';\r\nimport CurrentDate from './components/current-date/CurrentDate';\r\nimport TaskContainer from './components/task-container/TaskContainer';\r\nimport WorkingHours from './components/working-hours/WorkingHours';\r\nimport GlobalContext from '../../services/GlobalContext';\r\nimport useDialog from '../ui-hooks/useDialog';\r\nimport constants from '../../utils/constants';\r\nimport TaskBusyConflict from './components/task-busy-conflict/TaskBusyConflict';\r\nimport UserService from '../../services/UserService';\r\nimport useLocalStorageState from '../ui-hooks/useLocalStorage';\r\nimport ConnectionService from '../../services/ConnectionService';\r\nimport TaskLiveUpdate from './components/task-live-update/TaskLiveUpdate';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  searchIcon: {\r\n    color: theme.palette.themePrimary,\r\n    marginLeft: theme.spacing.s1,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n}));\r\n\r\nconst TaskDashboard = () => {\r\n  const classes = useStyles();\r\n  const global = useContext(GlobalContext);\r\n  const [users] = useFetch(UserService.teamUsersPath);\r\n  const [userOptions, setUserOptions] = useState([]);\r\n  const [selectedUsers, setSelectedUsers] = useLocalStorageState('DTSelectedUsers', [global.user.id]);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [hours, setHours] = useLocalStorageState('DTWorkingHours', {\r\n    from: '09:00',\r\n    to: '18:00',\r\n  });\r\n  const options = {\r\n    params: {\r\n      fromDate: DateTime.fromJSDate(currentDate).toUTC().set({\r\n        hour: DU.getHoursFromText(hours.from).h,\r\n        minute: DU.getHoursFromText(hours.from).m,\r\n        second: 0,\r\n      }).toJSDate(),\r\n      toDate: DateTime.fromJSDate(currentDate).toUTC().set({\r\n        hour: DU.getHoursFromText(hours.to).h,\r\n        minute: DU.getHoursFromText(hours.to).m,\r\n        second: 0,\r\n      }).toJSDate(),\r\n      users: selectedUsers,\r\n    },\r\n  };\r\n  const [tasks, setTasks] = useFetch(\r\n    TaskService.baseUrl,\r\n    options,\r\n    [],\r\n    [currentDate, hours, selectedUsers],\r\n    (data) => data.map((task) => TaskService.createTaskObject(task)),\r\n  );\r\n  const newPanel = usePanel(\r\n    AddTask, {\r\n      headerText: 'Create new task',\r\n      onRenderFooterContent: () => (\r\n        <PrimaryButton text=\"Create\" type=\"submit\" form=\"create-task-form\" />\r\n      ),\r\n    }, {\r\n      setTasks,\r\n    },\r\n  );\r\n  const [dialogProps, setDialogProps] = useState({});\r\n  const resolveBusyConflictDialog = useDialog(\r\n    TaskBusyConflict,\r\n    {\r\n      isBlocking: true,\r\n      title: 'Busy task found',\r\n      dialogFooter: (_accept, cancel) => (\r\n        <>\r\n          <DefaultButton onClick={cancel}>Cancel</DefaultButton>\r\n          <PrimaryButton style={{ marginLeft: '5px' }} form=\"task-busy-resolve\" type=\"submit\">Continue</PrimaryButton>\r\n        </>\r\n      ),\r\n    }, dialogProps,\r\n  );\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (global.connectionId) {\r\n        await ConnectionService.subscribe({ to: selectedUsers, connectionId: global.connectionId });\r\n      }\r\n    }\r\n    run();\r\n  }, [selectedUsers, global.connectionId]);\r\n\r\n  /**\r\n   * Update user options\r\n   */\r\n  useEffect(() => {\r\n    setUserOptions(users.map((user) => ({\r\n      key: user.id,\r\n      text: user.username,\r\n      data: user,\r\n    })));\r\n  }, [users]);\r\n\r\n  const handleUserSelect = (ev, option) => {\r\n    if (option.selected) {\r\n      setSelectedUsers((prev) => prev.concat(option.key));\r\n    } else {\r\n      setSelectedUsers((prev) => prev.filter((user) => user !== option.key));\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (task, status) => {\r\n    if (status === constants.tasks.status.InProgress && !task.isBackgroundTask) {\r\n      // If status to be updated is in progress:\r\n      // 1. Check for conflicts first,\r\n      const conflicts = await TaskService.getBusyTasks({ user: global.user.id });\r\n      // if found, show the dialog\r\n      if (conflicts.length > 0) {\r\n        setDialogProps({\r\n          setTasks,\r\n          conflictTasks: conflicts,\r\n        });\r\n        const answer = await resolveBusyConflictDialog.show();\r\n        if (answer === constants.dialogAnswers.No) return;\r\n      }\r\n    }\r\n    const updated = await TaskService.updateTaskStatus(task.id, { status });\r\n    setTasks((ts) => (ts.map((t) => (t.id === task.id ? updated.result : t))));\r\n    // if task was unpaused, update it too\r\n    if (updated.unpaused?.id) {\r\n      setTasks((ts) => (ts.map((t) => (t.id === updated.unpaused.id ? updated.unpaused : t))));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TaskLiveUpdate setTasks={setTasks} />\r\n      <Container lg>\r\n        <PageHeader text=\"Daily tasks\" />\r\n        <Row>\r\n          <Col xs={12}>\r\n            <CurrentDate currentDate={currentDate} setCurrentDate={setCurrentDate} />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <WorkingHours hours={hours} date={currentDate} setHours={setHours} />\r\n          </Col>\r\n        </Row>\r\n        <Separator />\r\n        <Row>\r\n          <Col>\r\n            <CommandBar\r\n              items={[\r\n                {\r\n                  key: 'new',\r\n                  text: 'New',\r\n                  iconProps: {\r\n                    iconName: 'Add',\r\n                  },\r\n                  onClick: () => { newPanel.setOpen(true); },\r\n                },\r\n                {\r\n                  key: 'users',\r\n                  text: 'Users',\r\n                  iconProps: {\r\n                    iconName: 'ProfileSearch',\r\n                  },\r\n                  onRender: () => (\r\n                    <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n                      <Icon className={classes.searchIcon} iconName=\"ProfileSearch\" />\r\n                      <ComboBox\r\n                        autoComplete=\"on\"\r\n                        options={userOptions}\r\n                        multiSelect\r\n                        selectedKey={selectedUsers}\r\n                        openOnKeyboardFocus\r\n                        onChange={handleUserSelect}\r\n                        calloutProps={{\r\n                          calloutMaxHeight: 500,\r\n                        }}\r\n                      />\r\n                    </Stack>\r\n                  ),\r\n                },\r\n              ]}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Separator />\r\n        <Row justify=\"around\">\r\n          {\r\n              selectedUsers.map((selUser) => (\r\n                <TaskContainer\r\n                  key={selUser}\r\n                  tasks={\r\n                    tasks\r\n                      .filter((task) => task\r\n                        .assignedTo\r\n                        .find((user) => user.id === selUser) !== undefined)\r\n                      .sort((t1, t2) => (t1.expectedStartDate < t2.expectedStartDate ? -1 : 1))\r\n                    }\r\n                  user={users.find((u) => u.id === selUser)}\r\n                  setTasks={setTasks}\r\n                  handleStatusChange={handleStatusChange}\r\n                />\r\n              ))\r\n            }\r\n        </Row>\r\n      </Container>\r\n      {newPanel.render}\r\n      {resolveBusyConflictDialog.render}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TaskDashboard;\r\n","import NotificationService from '../services/NotificationService';\r\n\r\n/**\r\n * Wrapper around servise axios request\r\n * Does the call to the backend, checks for successfull return and returns data\r\n * if Failed, notifies the user\r\n * @param {Function} requestFunc\r\n * @returns Object\r\n */\r\nconst serviceRequestWrapper = async (\r\n  requestFunc,\r\n  successStatusCode = 200,\r\n  showNotification = true,\r\n) => {\r\n  try {\r\n    const response = await requestFunc();\r\n    if (response.status === successStatusCode) {\r\n      return response.data;\r\n    }\r\n    throw new Error(`Server response: ${response.status} - ${response.statusText}`);\r\n  } catch (err) {\r\n    if (showNotification) {\r\n      NotificationService\r\n        .notifyError((err.response.data && err.response.data.error) || err.message);\r\n    }\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport default serviceRequestWrapper;\r\n","import axios from 'axios';\r\nimport serviceRequestWrapper from '../../utils/serviceRequestWrapper';\r\n\r\nconst TaskFlowService = {\r\n  baseUrl: '/api/task-flows',\r\n  singleUrl: (id) => `/api/task-flows/${id}`,\r\n\r\n  async getTaskFlow(id) {\r\n    return serviceRequestWrapper(() => axios.get(this.singleUrl(id)));\r\n  },\r\n\r\n  async createTaskFlow(data) {\r\n    return serviceRequestWrapper(() => axios.post(this.baseUrl, data));\r\n  },\r\n\r\n  async updateTaskFlow(id, data) {\r\n    return serviceRequestWrapper(() => axios.put(this.singleUrl(id), data));\r\n  },\r\n};\r\n\r\nexport default TaskFlowService;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, Dropdown, Label, PrimaryButton, Stack, SwatchColorPicker, TextField,\r\n} from '@fluentui/react';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TeamService from '../../../../services/TeamService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst AddFlow = ({ setFlows }) => {\r\n  const [teams] = useFetch(TeamService.baseUrl);\r\n  const [data, setData] = useState({\r\n    name: '',\r\n    teams: [],\r\n    color: '',\r\n  });\r\n  const panel = useContext(PanelContext);\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (!data.name) {\r\n      return NotificationService.notifyError('Flow Name is missing');\r\n    } if (data.teams.length === 0) {\r\n      return NotificationService.notifyError('Please choose at least one team');\r\n    } if (!data.color) {\r\n      return NotificationService.notifyError('Color must be provided');\r\n    }\r\n    const createdFlow = await TaskFlowService.createTaskFlow(data);\r\n    if (createdFlow) {\r\n      setFlows((prev) => prev.concat(createdFlow));\r\n    }\r\n    if (panel.isPanel) panel.setOpen(false);\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (() => (\r\n        <Stack horizontal tokens={{ childrenGap: 2 }}>\r\n          <PrimaryButton text=\"Create\" type=\"submit\" form=\"add-flow-form\" />\r\n          <DefaultButton text=\"Close\" onClick={() => panel.setOpen(false)} />\r\n        </Stack>\r\n      )));\r\n    }\r\n  }, [panel]);\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} id=\"add-flow-form\">\r\n      <TextField\r\n        label=\"Name\"\r\n        value={data.name}\r\n        onChange={handleDataChange('name')}\r\n        placeholder=\"Flow name\"\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Flow teams\"\r\n        label=\"Teams\"\r\n        selectedKeys={data.teams}\r\n        multiSelect\r\n        options={teams.map((team) => ({\r\n          key: team.id,\r\n          text: team.name,\r\n        }))}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('teams', ([evt, option]) => {\r\n          if (option.selected) return data.teams.concat(option.key);\r\n          return data.teams.filter((team) => team !== option.key);\r\n        })}\r\n      />\r\n      <Label htmlFor=\"add-flow-color-picker\">Color</Label>\r\n      <SwatchColorPicker\r\n        id=\"add-flow-color-picker\"\r\n        columnCount={6}\r\n        cellHeight={35}\r\n        cellWidth={35}\r\n        cellShape=\"square\"\r\n        colorCells={constants.colors.map((color) => ({\r\n          id: color,\r\n          color,\r\n        }))}\r\n        selectedId={data.color}\r\n        onColorChanged={handleDataChange('color', ([id]) => id)}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nAddFlow.propTypes = {\r\n  setFlows: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AddFlow;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  DefaultButton, Dropdown, Label, PrimaryButton, Stack, SwatchColorPicker, TextField,\r\n} from '@fluentui/react';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport TeamService from '../../../../services/TeamService';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst EditFlow = ({ id, setFlows }) => {\r\n  const [flow, setFlow] = useFetch(TaskFlowService.singleUrl(id), null, null, [], (data) => ({\r\n    name: data.name,\r\n    color: data.color,\r\n    isActive: data.isActive,\r\n    teams: data.teams.map((team) => team.id),\r\n  }));\r\n  const [teams] = useFetch(TeamService.baseUrl);\r\n  const panel = useContext(PanelContext);\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    const result = await TaskFlowService.updateTaskFlow(id, flow);\r\n    if (result) {\r\n      setFlows((prev) => (prev.map((fl) => (fl.id === result.id ? result : fl))));\r\n    }\r\n    if (panel.isPanel) panel.setOpen(false);\r\n  };\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setFlow((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (() => (\r\n        <Stack horizontal tokens={{ childrenGap: 2 }}>\r\n          <PrimaryButton text=\"Update\" type=\"submit\" form=\"edit-flow-form\" />\r\n          <DefaultButton text=\"Close\" onClick={() => panel.setOpen(false)} />\r\n        </Stack>\r\n      )));\r\n    }\r\n  }, [panel]);\r\n\r\n  return flow !== null && (\r\n    <form onSubmit={handleSubmit} id=\"edit-flow-form\">\r\n      <TextField\r\n        label=\"Name\"\r\n        value={flow?.name}\r\n        onChange={handleDataChange('name')}\r\n        placeholder=\"Flow name\"\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Flow teams\"\r\n        label=\"Teams\"\r\n        selectedKeys={flow?.teams}\r\n        multiSelect\r\n        options={teams.map((team) => ({\r\n          key: team.id,\r\n          text: team.name,\r\n        }))}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('teams', ([evt, option]) => {\r\n          if (option.selected) return flow?.teams.concat(option.key);\r\n          return flow?.teams?.filter((team) => team !== option.key);\r\n        })}\r\n      />\r\n      <Label htmlFor=\"edit-flow-color-picker\">Color</Label>\r\n      <SwatchColorPicker\r\n        id=\"edit-flow-color-picker\"\r\n        columnCount={6}\r\n        cellHeight={35}\r\n        cellWidth={35}\r\n        cellShape=\"square\"\r\n        colorCells={constants.colors.map((color) => ({\r\n          id: color,\r\n          color,\r\n        }))}\r\n        selectedId={flow?.color}\r\n        onColorChanged={handleDataChange('color', ([colorId]) => colorId)}\r\n      />\r\n      <Checkbox\r\n        label=\"Active\"\r\n        checked={flow?.isActive}\r\n        // eslint-disable-next-line no-unused-vars\r\n        onChange={handleDataChange('isActive', ([ev, checked]) => checked)}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nEditFlow.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  setFlows: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EditFlow;\r\n","import TaskFlows from './TaskFlows';\r\n\r\nexport default TaskFlows;\r\n","import React, { useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, PanelType, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddFlow from './components/add-flow/AddFlow';\r\nimport { useFetch } from '../../services/hooks';\r\nimport TaskFlowService from '../../services/tasks/TaskFlowService';\r\nimport EditFlow from './components/edit-flow/EditFlow';\r\n\r\nconst TaskFlows = () => {\r\n  const [flows, setFlows] = useFetch(TaskFlowService.baseUrl);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n    indices: [],\r\n  });\r\n  const addFlowPanel = usePanel(AddFlow, {\r\n    id: 'add-flow-panel',\r\n    headerText: 'Create new flow',\r\n    isFooterAtBottom: true,\r\n    type: PanelType.smallFixedFar,\r\n    isLightDismiss: false,\r\n    onDismiss: (isOpen, setOpen) => (ev) => {\r\n      const panel = document.getElementById('add-flow-panel');\r\n      if (panel) {\r\n        if (panel.contains(ev.target)) {\r\n          setOpen(false);\r\n        }\r\n      }\r\n    },\r\n  }, { setFlows });\r\n\r\n  const editFlowPanel = usePanel(EditFlow, {\r\n    id: 'edit-flow-panel',\r\n    headerText: 'Update flow',\r\n    isFooterAtBottom: true,\r\n    type: PanelType.smallFixedFar,\r\n    isLightDismiss: false,\r\n  }, { id: selectionDetails.items[0]?.id, setFlows });\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'color',\r\n      name: ' Color',\r\n      fieldName: 'color',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: false,\r\n      maxWidth: 50,\r\n      onRender: (item) => (\r\n        <div style={{\r\n          backgroundColor: item.color,\r\n          width: 20,\r\n          height: 20,\r\n        }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'status',\r\n      name: ' Status',\r\n      fieldName: 'isActive',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      onRender: (item) => (item.isActive ? 'Active' : 'Disabled'),\r\n      filterValueAccessor: (item) => (item.isActive ? 'Active' : 'Disabled'),\r\n      minWidth: 100,\r\n      maxWidth: 150,\r\n    },\r\n    {\r\n      key: 'teams',\r\n      name: ' Teams',\r\n      fieldName: 'teams',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      onRender: (item) => item.teams.map((team) => team.name).join(', '),\r\n    },\r\n  ]);\r\n\r\n  return (\r\n    <Container md>\r\n      <Row>\r\n        <Col>\r\n          <PageHeader text=\"Task Flows\" />\r\n        </Col>\r\n      </Row>\r\n      <Separator />\r\n      <Row>\r\n        <Col>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'add',\r\n                text: 'Add',\r\n                iconProps: { iconName: 'Add' },\r\n                onClick: () => addFlowPanel.setOpen(true),\r\n              },\r\n              {\r\n                key: 'edit',\r\n                text: 'Edit',\r\n                iconProps: { iconName: 'Edit' },\r\n                disabled: selectionDetails.items.length === 0,\r\n                onClick: () => editFlowPanel.setOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: flows,\r\n              columns,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => editFlowPanel.setOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              setSelectionDetails,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {addFlowPanel.render}\r\n      {editFlowPanel.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskFlows;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles, Text } from '@fluentui/react';\r\nimport clsx from 'clsx';\r\nimport Chip from '../../../shared/chip/Chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.neutralLighter,\r\n    height: '100%',\r\n    textAlign: 'center',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'center',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.themePrimary,\r\n    },\r\n  },\r\n  selected: {\r\n    backgroundColor: theme.palette.themeDark,\r\n  },\r\n  flowItem: {\r\n    padding: 3,\r\n  },\r\n  noSelect: {\r\n    userSelect: 'none',\r\n  },\r\n}));\r\n\r\nconst PlanningCell = ({\r\n  userFlows, handleClick, handleInvoke, isSelected,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      className={clsx([classes.root, isSelected && classes.selected])}\r\n      onClick={handleClick}\r\n      onKeyDown={(evt) => evt.code === 'Enter' && handleClick()}\r\n      onDoubleClick={handleInvoke}\r\n    >\r\n      {\r\n        !userFlows?.flows || userFlows?.flows?.length === 0\r\n          ? <Text className={classes.noSelect} variant=\"medium\">-</Text>\r\n          : (\r\n            <ul>\r\n              {Array.from(userFlows?.flows)?.map((f) => (\r\n                <li className={classes.flowItem} key={f.id}>\r\n                  <Chip\r\n                    className={classes.noSelect}\r\n                    style={{\r\n                      backgroundColor: f.color ?? 'transparent',\r\n                      padding: 3,\r\n                      whiteSpace: 'pre-wrap',\r\n                    }}\r\n                  >\r\n                    <Text variant=\"medium\">{f.name}</Text>\r\n                  </Chip>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nPlanningCell.propTypes = {\r\n  userFlows: PropTypes.shape({\r\n    flows: PropTypes.arrayOf(PropTypes.shape({})),\r\n  }),\r\n  handleClick: PropTypes.func.isRequired,\r\n  handleInvoke: PropTypes.func.isRequired,\r\n  isSelected: PropTypes.bool.isRequired,\r\n};\r\n\r\nPlanningCell.defaultProps = {\r\n  userFlows: null,\r\n};\r\n\r\nexport default PlanningCell;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container } from 'react-grid-system';\r\nimport {\r\n  DetailsList,\r\n  DetailsListLayoutMode,\r\n  DetailsRow,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  SelectionMode,\r\n  useTheme,\r\n} from '@fluentui/react';\r\nimport PlanningCell from '../planning-cell/PlanningCell';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  row: {\r\n    color: theme.palette.black,\r\n  },\r\n}));\r\n\r\nconst PlanningMatrix = ({\r\n  userFlowMap, dates, users, selectedCell, setSelectedCell, handleInvoke,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const today = new Date().toLocaleDateString();\r\n  const userCol = {\r\n    key: 'username',\r\n    name: 'Username',\r\n    fieldName: 'username',\r\n    maxWidth: 300,\r\n    onRender: (item) => (<Persona size={PersonaSize.size24} text={item.username} />),\r\n    isResizable: true,\r\n  };\r\n\r\n  const isSelected = (date, userId) => Boolean(selectedCell?.date\r\n      && selectedCell.date === date\r\n      && selectedCell?.user\r\n      && selectedCell.user === userId);\r\n\r\n  const handleSelectCell = (date, user) => () => {\r\n    setSelectedCell({\r\n      date, user,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container fluid>\r\n      <DetailsList\r\n        layoutMode={DetailsListLayoutMode.fixedColumns}\r\n        onRenderRow={(props) => (\r\n          <DetailsRow\r\n            className={classes.row}\r\n            // eslint-disable-next-line react/jsx-props-no-spreading\r\n            {...props}\r\n            styles={{\r\n              root: {\r\n                '&:hover': {\r\n                  backgroundColor: 'transparent',\r\n                },\r\n              },\r\n            }}\r\n          />\r\n        )}\r\n        columns={[userCol].concat(dates.map((date) => ({\r\n          key: date.toLocaleDateString(),\r\n          name: date.toLocaleDateString(),\r\n          minWidth: 100,\r\n          styles: {\r\n            root: {\r\n              backgroundColor: date.toLocaleDateString() === today ? theme.palette.themeLighter : '',\r\n            },\r\n          },\r\n          onRender: (item, idx, col) => (\r\n            <PlanningCell\r\n              // eslint-disable-next-line react/prop-types\r\n              userFlows={userFlowMap.get(item.id)?.get(col.key)}\r\n              handleClick={handleSelectCell(col.key, item.id)}\r\n              handleInvoke={handleInvoke}\r\n              isSelected={isSelected(col.key, item.id)}\r\n            />\r\n          ),\r\n        })))}\r\n        items={users}\r\n        selectionMode={SelectionMode.none}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nPlanningMatrix.propTypes = {\r\n  userFlowMap: PropTypes.instanceOf(Map).isRequired,\r\n  dates: PropTypes.arrayOf(PropTypes.instanceOf(Date)).isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.string,\r\n    username: PropTypes.string,\r\n  })).isRequired,\r\n  selectedCell: PropTypes.shape({\r\n    date: PropTypes.string,\r\n    user: PropTypes.string,\r\n  }),\r\n  setSelectedCell: PropTypes.func.isRequired,\r\n  handleInvoke: PropTypes.func.isRequired,\r\n};\r\n\r\nPlanningMatrix.defaultProps = {\r\n  selectedCell: null,\r\n};\r\n\r\nexport default PlanningMatrix;\r\n","import axios from 'axios';\r\nimport serviceRequestWrapper from '../../utils/serviceRequestWrapper';\r\n\r\nconst TaskPlanningService = {\r\n  baseUrl: '/api/task-planning',\r\n  addFlowUrl: (planningId, flowId) => `/api/task-planning/${planningId}/add-flow/${flowId}`,\r\n  removeFlowUrl: (planningId, flowId) => `/api/task-planning/${planningId}/remove-flow/${flowId}`,\r\n\r\n  async createPlanning(date, user, flows) {\r\n    return serviceRequestWrapper(() => axios.post(this.baseUrl, {\r\n      date,\r\n      user,\r\n      flows: flows.map((f) => f.id),\r\n    }));\r\n  },\r\n\r\n  async addFlowToPlanning(planningId, flowId) {\r\n    return serviceRequestWrapper(() => axios.put(this.addFlowUrl(planningId, flowId)));\r\n  },\r\n\r\n  async removeFromFromPlanning(planningId, flowId) {\r\n    return serviceRequestWrapper(() => axios.delete(this.removeFlowUrl(planningId, flowId)));\r\n  },\r\n};\r\n\r\nexport default TaskPlanningService;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePickerListBelow, Checkbox, IconButton, Label, makeStyles, Stack, Text,\r\n} from '@fluentui/react';\r\nimport Chip from '../../../shared/chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {},\r\n  suggestionRoot: {\r\n    padding: theme.spacing.s2,\r\n  },\r\n  suggestionCheck: {\r\n    marginRight: theme.spacing.s2,\r\n    padding: theme.spacing.s2,\r\n    outline: 'none',\r\n  },\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.s1,\r\n  },\r\n  colorBox: {\r\n    width: 20,\r\n    height: 20,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n  },\r\n  item: {\r\n    marginTop: 4,\r\n    '&:first-child': {\r\n      marginTop: 8,\r\n    },\r\n  },\r\n  removeIcon: {\r\n    width: 32,\r\n    height: 32,\r\n  },\r\n}));\r\n\r\nconst FlowPicker = ({\r\n  label, options, onSelect, onRemove, selected, showDeleteIcon, showCheckboxes, ...props\r\n}) => {\r\n  const classes = useStyles();\r\n  const selectedSet = useMemo(() => new Set(selected.map((s) => s.key)), [selected]);\r\n\r\n  const handleCheckboxClick = (item) => (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  const renderSuggestionsItem = (item) => (\r\n    <Stack\r\n      className={classes.suggestionRoot}\r\n      key={item.key}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      {\r\n        showCheckboxes\r\n        && (\r\n        <span\r\n          className={classes.suggestionCheck}\r\n          role=\"button\"\r\n          tabIndex={-1}\r\n          onKeyDown={(evt) => (evt.key === 'Space'\r\n            ? renderSuggestionsItem(item)()\r\n            : null)}\r\n          onClick={handleCheckboxClick(item)}\r\n        >\r\n          <Checkbox\r\n            checked={selectedSet.has(item.key)}\r\n          />\r\n        </span>\r\n        )\r\n      }\r\n      <div\r\n        className={classes.colorBox}\r\n        style={{\r\n          backgroundColor: item?.data?.color ?? 'transparent',\r\n        }}\r\n      />\r\n      <Stack horizontalAlign=\"start\">\r\n        <Text variant=\"mediumPlus\">{item.data.name}</Text>\r\n        <Text className={classes.secondaryText} variant=\"xSmall\">{item.data.teams.map((t) => t.name).join(', ')}</Text>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n\r\n  const renderItem = (details) => (\r\n    <Stack\r\n      key={details.item?.data?.id}\r\n      className={classes.item}\r\n      horizontalAlign=\"center\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <Chip\r\n        style={{\r\n          backgroundColor: details.item?.data?.color ?? 'transparent',\r\n          padding: 3,\r\n          whiteSpace: 'pre-wrap',\r\n          width: '50%',\r\n          marginLeft: showDeleteIcon ? 32 : 0,\r\n        }}\r\n      >\r\n        <Text variant=\"medium\">{details.item?.data?.name}</Text>\r\n      </Chip>\r\n      {\r\n        showDeleteIcon\r\n      && (\r\n      <IconButton\r\n        className={classes.removeIcon}\r\n        iconProps={{\r\n          iconName: 'Delete',\r\n        }}\r\n        onClick={() => onRemove(details.item)}\r\n      />\r\n      )\r\n      }\r\n    </Stack>\r\n  );\r\n\r\n  const handleSelect = (item) => {\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  return (\r\n    <div {...props}>\r\n      { label && (<Label>{label}</Label>) }\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder: 'Select...',\r\n        }}\r\n        className={classes.picker}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n        onResolveSuggestions={(filter) => options\r\n          .filter((o) => o.data.name.toLowerCase().indexOf(filter.toLowerCase()) !== -1)}\r\n        resolveDelay={300}\r\n        onRenderItem={renderItem}\r\n        selectedItems={selected}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onItemSelected={handleSelect}\r\n        pickerCalloutProps={{\r\n          preventDismissOnScroll: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nFlowPicker.propTypes = {\r\n  label: PropTypes.string,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  selected: PropTypes.arrayOf(String).isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n  onRemove: PropTypes.func.isRequired,\r\n  showDeleteIcon: PropTypes.bool,\r\n  showCheckboxes: PropTypes.bool,\r\n  props: PropTypes.shape({\r\n    style: PropTypes.shape({}),\r\n  }),\r\n};\r\n\r\nFlowPicker.defaultProps = {\r\n  label: null,\r\n  props: null,\r\n  showCheckboxes: true,\r\n  showDeleteIcon: false,\r\n};\r\n\r\nexport default FlowPicker;\r\n","import FlowPicker from './FlowPicker';\r\n\r\nexport default FlowPicker;\r\n","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@fluentui/react';\r\nimport FlowPicker from '../flow-picker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth: 300,\r\n    minHeight: 200,\r\n  },\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.neutralLight,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n  },\r\n  suggestion: {\r\n    padding: theme.spacing.s1,\r\n  },\r\n  item: {\r\n    marginTop: theme.spacing.s1,\r\n  },\r\n  colorBox: {\r\n    width: 20,\r\n    height: 20,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n  focusPoint: {\r\n    visibility: 'hidden',\r\n    height: 0,\r\n    width: 0,\r\n    margin: 0,\r\n    padding: 0,\r\n    border: 'none',\r\n  },\r\n  removeIcon: {\r\n    width: 32,\r\n    height: 32,\r\n  },\r\n}));\r\n\r\nconst PlanningFlowsDialog = ({\r\n  planning, options, addFlow, removeFlow, users, user,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const validOptions = useMemo(() => {\r\n    const selected = new Set(planning?.flows?.map((f) => f.id));\r\n    const userTeams = new Set(\r\n      users.find((u) => u.id === user)?.teams?.map((t) => t.id),\r\n    );\r\n    const active = options.filter((o) => o.data.isActive);\r\n    const teamFlows = active.filter(\r\n      (o) => o.data.teams.filter((t) => userTeams.has(t.id)).length > 0,\r\n    );\r\n    return teamFlows.filter((o) => !selected.has(o.data.id));\r\n  }, [options, planning, users, user]);\r\n\r\n  const handleSelect = (item) => {\r\n    addFlow(planning, item.data);\r\n  };\r\n\r\n  const handleRemove = (item) => {\r\n    removeFlow(planning, item.data);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <input className={classes.focusPoint} />\r\n      <FlowPicker\r\n        options={validOptions}\r\n        showCheckboxes={false}\r\n        showDeleteIcon\r\n        onSelect={handleSelect}\r\n        onRemove={handleRemove}\r\n        selected={planning ? planning?.flows?.map((f) => ({ key: f.id, data: f })) : []}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nPlanningFlowsDialog.propTypes = {\r\n  planning: PropTypes.shape({\r\n    flows: PropTypes.arrayOf(PropTypes.shape({})),\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string,\r\n    }).isRequired,\r\n  }).isRequired,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  addFlow: PropTypes.func.isRequired,\r\n  removeFlow: PropTypes.func.isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  user: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default PlanningFlowsDialog;\r\n","import PlanningFlowsDialog from './PlanningFlowsDialog';\r\n\r\nexport default PlanningFlowsDialog;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  Calendar,\r\n  ComboBox,\r\n  CommandBar,\r\n  DateRangeType,\r\n  DialogType,\r\n  Icon,\r\n  makeStyles,\r\n  PrimaryButton,\r\n  Separator,\r\n  Stack,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport PlanningMatrix from './components/planning-matrix/PlanningMatrix';\r\nimport { useFetch } from '../../services/hooks';\r\nimport TeamService from '../../services/TeamService';\r\nimport TaskPlanningService from '../../services/tasks/TaskPlanningService';\r\nimport useLocalStorageState from '../ui-hooks/useLocalStorage';\r\nimport UserService from '../../services/UserService';\r\nimport DateUtils from '../../utils/date';\r\nimport useDialog from '../ui-hooks/useDialog';\r\nimport PlanningFlowsDialog from './components/planning-flows-dialog';\r\nimport TaskFlowService from '../../services/tasks/TaskFlowService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  searchIcon: {\r\n    color: theme.palette.themePrimary,\r\n    marginLeft: theme.spacing.s1,\r\n    marginRight: theme.spacing.s1,\r\n  },\r\n}));\r\n\r\nconst TaskPlanning = () => {\r\n  const classes = useStyles();\r\n  const [date, setDate] = useState(new Date());\r\n  const [dates, setDates] = useState(DateUtils.getWeekFromDate(date, 1));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl);\r\n  const [selectedCell, setSelectedCell] = useState(null);\r\n  const [teams] = useFetch(\r\n    TeamService.baseUrl,\r\n    null, [], [],\r\n    (data) => data.map((team) => ({\r\n      key: team.id,\r\n      text: team.name,\r\n      data: team,\r\n    })),\r\n  );\r\n  const [selectedTeam, setSelectedTeam] = useLocalStorageState('TaskPlanningSelectedTeam', null);\r\n  const [users] = useFetch(\r\n    UserService.baseUrl,\r\n    {\r\n      params: {\r\n        teams: [selectedTeam],\r\n      },\r\n    }, [], [selectedTeam],\r\n  );\r\n  const [data, setData] = useFetch(\r\n    TaskPlanningService.baseUrl,\r\n    {\r\n      params: {\r\n        dateFrom: DateUtils.makeUTCDateOnly(dates[0]),\r\n        dateTo: DateUtils.makeUTCDateOnly(dates[dates.length - 1]),\r\n        teams: [selectedTeam],\r\n      },\r\n    },\r\n    [],\r\n    [selectedTeam, dates],\r\n  );\r\n\r\n  const userFlowMap = useMemo(() => {\r\n    const result = new Map();\r\n    // Insert all users in the map\r\n    users.forEach((user) => result.set(user.id, new Map()));\r\n    // For each planning item, assign info to the appropriate user\r\n    data.forEach((item) => {\r\n      if (result.has(item.user?.id)) {\r\n        result.get(item.user.id).set(new Date(item.date).toLocaleDateString(), item);\r\n      }\r\n    });\r\n    return result;\r\n  }, [data, users]);\r\n\r\n  const handleAddFlow = async (planning, flow) => {\r\n    if (!planning) {\r\n      const result = await TaskPlanningService\r\n        .createPlanning(selectedCell.date, selectedCell.user, [flow]);\r\n      setData((prev) => prev.concat(result));\r\n    } else {\r\n      const result = await TaskPlanningService\r\n        .addFlowToPlanning(planning.id, flow.id);\r\n      setData((prev) => prev.map((plan) => (plan.id === result.id ? result : plan)));\r\n    }\r\n  };\r\n\r\n  const handleRemoveFlow = async (planning, flow) => {\r\n    if (planning?.id) {\r\n      const result = await TaskPlanningService.removeFromFromPlanning(planning.id, flow.id);\r\n      setData((prev) => prev.map((plan) => (plan.id === result.id ? result : plan)));\r\n    }\r\n  };\r\n\r\n  const flowsDialog = useDialog(\r\n    PlanningFlowsDialog,\r\n    {\r\n      title: 'Details',\r\n      type: DialogType.largeHeader,\r\n      dialogFooter: () => (\r\n        // eslint-disable-next-line jsx-a11y/tabindex-no-positive\r\n        <PrimaryButton tabIndex={1} onClick={() => flowsDialog.setVisible(false)} text=\"Close\" />\r\n      ),\r\n    }, {\r\n      planning: userFlowMap.get(selectedCell?.user)?.get(selectedCell?.date),\r\n      options: flows.map((f) => ({\r\n        key: f.id,\r\n        data: f,\r\n      })),\r\n      addFlow: handleAddFlow,\r\n      removeFlow: handleRemoveFlow,\r\n      users,\r\n      user: selectedCell?.user,\r\n    },\r\n  );\r\n\r\n  const handleInvoke = () => {\r\n    flowsDialog.setVisible(true);\r\n  };\r\n\r\n  const handleSelectWeek = (selDate, selDates) => {\r\n    setDate(selDate);\r\n    setDates(selDates);\r\n  };\r\n\r\n  return (\r\n    <Container md>\r\n      <Row>\r\n        <Col>\r\n          <PageHeader text=\"Task Planning\" />\r\n        </Col>\r\n      </Row>\r\n      <Separator />\r\n      <CommandBar\r\n        items={[\r\n          {\r\n            key: 'add',\r\n            text: 'Add',\r\n            iconProps: {\r\n              iconName: 'Add',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'copy',\r\n            text: 'Copy',\r\n            iconProps: {\r\n              iconName: 'Copy',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'paste',\r\n            text: 'Paste',\r\n            iconProps: {\r\n              iconName: 'Paste',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'copymult',\r\n            text: 'Copy mult.',\r\n            iconProps: {\r\n              iconName: 'Copy',\r\n            },\r\n            disabled: selectedCell === null,\r\n          },\r\n          {\r\n            key: 'teams',\r\n            text: 'Teams',\r\n            iconProps: {\r\n              iconName: 'Search',\r\n            },\r\n            onRender: () => (\r\n              <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n                <Icon className={classes.searchIcon} iconName=\"ProfileSearch\" />\r\n                <ComboBox\r\n                  placeholder=\"Teams\"\r\n                  autoComplete=\"on\"\r\n                  options={teams}\r\n                  selectedKey={selectedTeam}\r\n                  openOnKeyboardFocus\r\n                  onChange={(evt, option) => setSelectedTeam(option.key)}\r\n                  calloutProps={{\r\n                    calloutMaxHeight: 500,\r\n                  }}\r\n                  useComboBoxAsMenuWidth\r\n                />\r\n              </Stack>\r\n            ),\r\n          },\r\n        ]}\r\n      />\r\n      <Separator />\r\n      <Row>\r\n        <Calendar\r\n          isMonthPickerVisible={false}\r\n          dateRangeType={DateRangeType.Week}\r\n          showWeekNumbers\r\n          showSixWeeksByDefault\r\n          showGoToToday\r\n          value={date}\r\n          onSelectDate={handleSelectWeek}\r\n          firstDayOfWeek={1}\r\n        />\r\n        <Col>\r\n          <PlanningMatrix\r\n            userFlowMap={userFlowMap}\r\n            users={users}\r\n            dates={dates}\r\n            selectedCell={selectedCell}\r\n            setSelectedCell={setSelectedCell}\r\n            handleInvoke={handleInvoke}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {flowsDialog.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskPlanning;\r\n","import axios from 'axios';\r\nimport NotificationService from '../NotificationService';\r\n\r\nconst TaskRuleService = {\r\n  baseUrl: '/api/task-rules',\r\n  taskRulePath: (id) => `/api/task-rules/${id}`,\r\n\r\n  async getTaskRules(params = {}) {\r\n    try {\r\n      const response = await axios.get(this.baseUrl, {\r\n        params,\r\n      });\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async getTaskRule() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async createTaskRule(data) {\r\n    try {\r\n      const response = await axios.post(this.baseUrl, data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async updateTaskRule(id, data) {\r\n    try {\r\n      const response = await axios.put(this.taskRulePath(id), data);\r\n      if (response.status === 200) {\r\n        return response.data;\r\n      }\r\n      throw new Error(`Server response: ${response.data} - ${response.statusText}`);\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async deleteTaskRule() {\r\n    try {\r\n      // pass\r\n    } catch (err) {\r\n      NotificationService.notifyError((err.response && err.response.data.error) || err.message);\r\n      throw err;\r\n    }\r\n  },\r\n};\r\n\r\nexport default TaskRuleService;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox, ChoiceGroup, Stack, makeStyles, Dropdown, SpinButton, Position,\r\n} from '@fluentui/react';\r\nimport constants from '../../../../utils/constants';\r\n\r\nconst monthlyOptions = [\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Day,\r\n    text: 'Callendar day',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Workday,\r\n    text: 'Workday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Monday,\r\n    text: 'Monday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Tuesday,\r\n    text: 'Tuesday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Wednesday,\r\n    text: 'Wednesday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Thursday,\r\n    text: 'Thursday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Friday,\r\n    text: 'Friday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Saturday,\r\n    text: 'Saturday',\r\n  },\r\n  {\r\n    key: constants.tasks.MonthlyOnType.Sunday,\r\n    text: 'Sunday',\r\n  },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  weeklyCheck: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  monthlyCheck: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  monthlyDropdown: {\r\n    marginBottom: theme.spacing.m,\r\n  },\r\n}));\r\n\r\nconst AddRuleType = ({ data, setData }) => {\r\n  const classes = useStyles();\r\n  const options = [\r\n    { key: 'Work', text: 'Workday' },\r\n    { key: 'Calendar', text: 'Calendar day' },\r\n  ];\r\n\r\n  const handleSetWeeklyData = (day) => (evt, checked) => {\r\n    const dt = data.weeklyDays ?? [];\r\n    if (checked) {\r\n      return setData((prev) => ({\r\n        ...prev,\r\n        weeklyDays: dt.concat(day).sort(),\r\n      }));\r\n    }\r\n    return setData((prev) => ({\r\n      ...prev,\r\n      weeklyDays: dt.filter((d) => d !== day).sort(),\r\n    }));\r\n  };\r\n\r\n  const handleSetMonths = (month) => (evt, checked) => {\r\n    const dt = data.monthlyMonths ?? [];\r\n    if (checked) {\r\n      return setData((prev) => ({\r\n        ...prev,\r\n        monthlyMonths: dt.concat(month).sort(),\r\n      }));\r\n    }\r\n    return setData((prev) => ({\r\n      ...prev,\r\n      monthlyMonths: dt.filter((d) => d !== month).sort(),\r\n    }));\r\n  };\r\n\r\n  const isDaySelected = (day) => {\r\n    if (!data.weeklyDays) return false;\r\n    return data.weeklyDays.indexOf(day) !== -1;\r\n  };\r\n\r\n  let render;\r\n\r\n  switch (data.type) {\r\n    case constants.tasks.types.Daily:\r\n      render = (\r\n        <>\r\n          <ChoiceGroup\r\n            label=\"Day type\"\r\n            defaultSelectedKey={data.dailyType}\r\n            options={options}\r\n            onChange={(ev, option) => setData((prev) => ({\r\n              ...prev,\r\n              dailyType: option.key,\r\n            }))}\r\n          />\r\n        </>\r\n      );\r\n      break;\r\n    case constants.tasks.types.Weekly:\r\n      render = (\r\n        <Stack className={classes.weeklyCheck} verticalFill verticalAlign=\"start\">\r\n          <Checkbox onChange={handleSetWeeklyData(1)} checked={isDaySelected(1)} label=\"Monday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(2)} checked={isDaySelected(2)} label=\"Tuesday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(3)} checked={isDaySelected(3)} label=\"Wednesday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(4)} checked={isDaySelected(4)} label=\"Thursday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(5)} checked={isDaySelected(5)} label=\"Friday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(6)} checked={isDaySelected(6)} label=\"Saturday\" />\r\n          <Checkbox onChange={handleSetWeeklyData(7)} checked={isDaySelected(7)} label=\"Sunday\" />\r\n        </Stack>\r\n      );\r\n      break;\r\n    case constants.tasks.types.Monthly:\r\n      render = (\r\n        <Stack verticalAlign=\"start\" verticalFill>\r\n          <SpinButton\r\n            value={data.monthlyOn}\r\n            onChange={(evt, newVal) => {\r\n              if (newVal && !Number.isNaN(+newVal)) {\r\n                setData((prev) => ({\r\n                  ...prev,\r\n                  monthlyOn: +newVal,\r\n                }));\r\n              }\r\n            }}\r\n            min={1}\r\n            max={31}\r\n            label=\"On\"\r\n            incrementButtonAriaLabel=\"Increase value by 1\"\r\n            decrementButtonAriaLabel=\"Decrease value by 1\"\r\n            labelPosition={Position.top}\r\n          />\r\n          <Dropdown\r\n            className={classes.monthlyDropdown}\r\n            options={monthlyOptions}\r\n            placeHolder=\"Select\"\r\n            onChange={(evt, option) => setData((prev) => ({\r\n              ...prev,\r\n              monthlyOnType: option.key,\r\n            }))}\r\n            label=\"Type\"\r\n          />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(0)} label=\"January\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(1)} label=\"February\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(2)} label=\"March\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(3)} label=\"April\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(4)} label=\"May\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(5)} label=\"June\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(6)} label=\"July\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(7)} label=\"August\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(8)} label=\"September\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(9)} label=\"October\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(10)} label=\"November\" />\r\n          <Checkbox className={classes.monthlyCheck} onChange={handleSetMonths(11)} label=\"December\" />\r\n        </Stack>\r\n      );\r\n      break;\r\n    default:\r\n      render = null;\r\n      break;\r\n  }\r\n\r\n  return render;\r\n};\r\n\r\nAddRuleType.propTypes = {\r\n  setData: PropTypes.func.isRequired,\r\n  data: PropTypes.shape({\r\n    type: PropTypes.string,\r\n    dailyType: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default AddRuleType;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  BasePickerListBelow, Checkbox, Label, makeStyles, Persona, PersonaSize, Stack, Text,\r\n} from '@fluentui/react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {},\r\n  picker: {\r\n    '& input': {\r\n      backgroundColor: theme.palette.white,\r\n      color: theme.palette.neutralPrimary,\r\n    },\r\n  },\r\n  suggestionRoot: {\r\n    padding: theme.spacing.s2,\r\n  },\r\n  suggestionCheck: {\r\n    marginRight: theme.spacing.s2,\r\n    padding: theme.spacing.s2,\r\n    outline: 'none',\r\n  },\r\n  suggestionText: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  itemRoot: {\r\n    marginTop: 4,\r\n    '&:first-child': {\r\n      marginTop: 8,\r\n    },\r\n  },\r\n}));\r\n\r\nconst PeoplePicker = ({\r\n  label, options, onSelect, onRemove, selected, ...props\r\n}) => {\r\n  const classes = useStyles();\r\n  const selectedSet = useMemo(() => new Set(selected.map((s) => s.key)), [selected]);\r\n\r\n  const handleCheckboxClick = (item) => (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  const renderSuggestionsItem = (item) => (\r\n    <Stack\r\n      key={item.key}\r\n      className={classes.suggestionRoot}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <span\r\n        className={classes.suggestionCheck}\r\n        role=\"button\"\r\n        tabIndex={-1}\r\n        onKeyDown={(evt) => (evt.key === 'Space'\r\n          ? renderSuggestionsItem(item)()\r\n          : null)}\r\n        onClick={handleCheckboxClick(item)}\r\n      >\r\n        <Checkbox\r\n          checked={selectedSet.has(item.key)}\r\n        />\r\n      </span>\r\n      <Text className={classes.suggestionText} variant=\"mediumPlus\">{item.data.username}</Text>\r\n    </Stack>\r\n  );\r\n\r\n  const renderItem = (details) => (\r\n    <Stack\r\n      className={classes.itemRoot}\r\n      key={details.item.id}\r\n      horizontalAlign=\"start\"\r\n      verticalAlign=\"center\"\r\n      horizontal\r\n    >\r\n      <Persona text={details.item.data.username} size={PersonaSize.size24} />\r\n    </Stack>\r\n  );\r\n\r\n  const handleSelect = (item) => {\r\n    if (selectedSet.has(item.key)) {\r\n      return onRemove(item);\r\n    }\r\n    return onSelect(item);\r\n  };\r\n\r\n  return (\r\n    <div {...props}>\r\n      { label && (<Label>{label}</Label>) }\r\n      <BasePickerListBelow\r\n        inputProps={{\r\n          placeholder: 'Select...',\r\n        }}\r\n        className={classes.picker}\r\n        onRenderSuggestionsItem={renderSuggestionsItem}\r\n        onResolveSuggestions={(filter) => options\r\n          .filter((o) => o.data.username.toLowerCase().indexOf(filter.toLowerCase()) !== -1)}\r\n        resolveDelay={300}\r\n        onRenderItem={renderItem}\r\n        selectedItems={selected}\r\n        onEmptyResolveSuggestions={() => options}\r\n        onItemSelected={handleSelect}\r\n        pickerCalloutProps={{\r\n          preventDismissOnScroll: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nPeoplePicker.propTypes = {\r\n  label: PropTypes.string,\r\n  options: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  selected: PropTypes.arrayOf(String).isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n  onRemove: PropTypes.func.isRequired,\r\n  props: PropTypes.shape({\r\n    style: PropTypes.shape({}),\r\n  }),\r\n};\r\n\r\nPeoplePicker.defaultProps = {\r\n  label: null,\r\n  props: null,\r\n};\r\n\r\nexport default PeoplePicker;\r\n","import React, { useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  ComboBox,\r\n  Dropdown,\r\n  makeStyles,\r\n  Position,\r\n  SpinButton,\r\n  TextField,\r\n  DatePicker,\r\n  Separator,\r\n} from '@fluentui/react';\r\nimport { DateTime } from 'luxon';\r\nimport constants from '../../../../utils/constants';\r\nimport UserService from '../../../../services/UserService';\r\nimport AddRuleType from '../add-rule-type/AddRuleType';\r\nimport TaskRuleService from '../../../../services/tasks/TaskRuleService';\r\nimport NotificationService from '../../../../services/NotificationService';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport DateUtils from '../../../../utils/date';\r\nimport PeoplePicker from '../../../shared/people-picker/PeoplePicker';\r\nimport FlowPicker from '../../../task-planning/components/flow-picker';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\n\r\nconst { tasks } = constants;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    '& > * + *': {\r\n      paddingTop: theme.spacing.s1,\r\n    },\r\n  },\r\n}));\r\n\r\nconst AddRule = ({ setRules, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [users] = useFetch(UserService.teamUsersPath,\r\n    null, [], [],\r\n    (dt) => dt.map((user) => ({\r\n      key: user.id,\r\n      data: user,\r\n    })));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl,\r\n    null, [], [],\r\n    (dt) => dt.map((flow) => ({\r\n      key: flow.id,\r\n      data: flow,\r\n    })));\r\n  const [data, setData] = useState({\r\n    title: '',\r\n    description: '',\r\n    type: tasks.types.Daily,\r\n    dailyType: tasks.DayTypes.Workday,\r\n    isBackgroundTask: false,\r\n    isSharedTask: false,\r\n    taskStartTime: new Date(),\r\n    validFrom: new Date(),\r\n    taskDuration: 60,\r\n    users: [],\r\n    flows: [],\r\n    zone: DateTime.local().zoneName,\r\n  });\r\n  const typeOptions = useRef(Object.keys(tasks.types).map((t) => ({\r\n    key: t,\r\n    text: t,\r\n  })));\r\n  const timeOptions = useRef(constants.timeOptions);\r\n\r\n  const setValue = (field) => (evt) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: evt.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleTypeChange = (evt, item) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      type: item.key,\r\n    }));\r\n  };\r\n\r\n  const handleSelectDate = (field) => (date) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0)),\r\n    }));\r\n  };\r\n\r\n  const handleSelectTime = (evt, option) => {\r\n    const [hour, minute] = option.text.split(':').map((e) => +e);\r\n    if (hour !== undefined && minute !== undefined) {\r\n      setData((prev) => ({\r\n        ...prev,\r\n        taskStartTime: DateTime.local().set({\r\n          hour,\r\n          minute,\r\n          second: 0,\r\n        }).toJSDate(),\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (data.validFrom && data.validTo && data.validTo < data.validFrom) {\r\n      await NotificationService.notifyError(\"'Valid From' cannot be bigger than 'Valid To'\");\r\n      return;\r\n    }\r\n    // Send weeklyDays as an Array of dates instead of numbers\r\n    if (data.weeklyDays && data.weeklyDays.length) {\r\n      data.weeklyDays = data.weeklyDays.map((day) => {\r\n        const date = DateTime.local().toUTC().set({\r\n          weekday: day,\r\n        });\r\n        return date;\r\n      });\r\n    }\r\n    if (data.monthlyMonths && data.monthlyMonths.length) {\r\n      data.monthlyMonths = data.monthlyMonths.map((month) => {\r\n        const date = new Date(2020, 1, 1);\r\n        date.setMonth(month);\r\n        date.setHours(data.taskStartTime.getHours());\r\n        date.setMinutes(data.taskStartTime.getMinutes());\r\n        return date;\r\n      });\r\n    }\r\n    const exp = DateTime.fromJSDate(data.taskStartTime);\r\n    const utcExpected = DateTime.utc(exp.year, exp.month, exp.day, exp.hour, exp.minute, 0);\r\n    const result = await TaskRuleService.createTaskRule({\r\n      ...data,\r\n      taskStartTime: utcExpected.toJSDate(),\r\n      users: data.users.map((u) => u.id),\r\n      flows: data.flows.map((f) => f.id),\r\n    });\r\n    setRules((prev) => [...prev, result]);\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <form className={classes.form} id=\"add-task-rule-form\" onSubmit={handleSubmit}>\r\n      <TextField\r\n        required\r\n        label=\"Title\"\r\n        value={data.title}\r\n        onChange={setValue('title')}\r\n        name=\"task-rule-title\"\r\n      />\r\n      <TextField\r\n        label=\"Description\"\r\n        multiline\r\n        name=\"task-rule-description\"\r\n        onChange={setValue('description')}\r\n        value={data.description}\r\n      />\r\n      <Dropdown\r\n        label=\"Type\"\r\n        selectedKey={data.type}\r\n        onChange={handleTypeChange}\r\n        options={typeOptions.current}\r\n        name=\"task-rule-type\"\r\n      />\r\n      <AddRuleType data={data} setData={setData} />\r\n      <ComboBox\r\n        label=\"Start time\"\r\n        options={timeOptions.current}\r\n        selectedKey={DateUtils.getNearestTime(data.taskStartTime ?? new Date())}\r\n        autoComplete=\"on\"\r\n        onChange={handleSelectTime}\r\n        calloutProps={{\r\n          calloutMaxHeight: 400,\r\n        }}\r\n        useComboBoxAsMenuWidth\r\n      />\r\n      <SpinButton\r\n        label=\"Duration (min)\"\r\n        value={data.taskDuration}\r\n        onChange={(evt) => {\r\n          let val = +evt.target.value;\r\n          if (Number.isNaN(val)) val = 0;\r\n          setData((prev) => ({ ...prev, taskDuration: val }));\r\n        }}\r\n        onIncrement={(val) => setData((prev) => ({ ...prev, taskDuration: (+val + 10) }))}\r\n        onDecrement={(val) => {\r\n          if (val > 10) setData((prev) => ({ ...prev, taskDuration: (+val - 10) }));\r\n        }}\r\n        min={0}\r\n        step={10}\r\n        incrementButtonAriaLabel=\"Increase value by 10\"\r\n        decrementButtonAriaLabel=\"Decrease value by 10\"\r\n        labelPosition={Position.top}\r\n      />\r\n      <DatePicker\r\n        required\r\n        label=\"Valid From\"\r\n        value={data.validFrom}\r\n        onSelectDate={handleSelectDate('validFrom')}\r\n      />\r\n      <DatePicker\r\n        label=\"Valid To\"\r\n        value={data.validTo}\r\n        onSelectDate={handleSelectDate('validTo')}\r\n      />\r\n      <Checkbox\r\n        className={classes.checkbox}\r\n        label=\"Background\"\r\n        value={data.isBackgroundTask}\r\n        onChange={(ev, checked) => setData((prev) => ({\r\n          ...prev,\r\n          isBackgroundTask: checked,\r\n        }))}\r\n      />\r\n      <Checkbox\r\n        className={classes.checkbox}\r\n        label=\"Shared\"\r\n        value={data.isSharedTask}\r\n        onChange={(ev, checked) => setData((prev) => ({\r\n          ...prev,\r\n          isSharedTask: checked,\r\n        }))}\r\n      />\r\n      <PeoplePicker\r\n        label=\"Assigned to (Users)\"\r\n        options={users}\r\n        onSelect={(u) => setData((prev) => ({\r\n          ...prev,\r\n          users: prev.users.concat(u.data),\r\n        }))}\r\n        onRemove={(u) => setData((prev) => ({\r\n          ...prev,\r\n          users: prev.users.filter((user) => user.id !== u.data.id),\r\n        }))}\r\n        selected={data.users?.map((u) => ({ key: u.id, data: u }))}\r\n      />\r\n      <Separator />\r\n      <FlowPicker\r\n        label=\"Assigned to (Flows)\"\r\n        options={flows}\r\n        onSelect={(f) => setData((prev) => ({\r\n          ...prev,\r\n          flows: prev.flows?.concat(f.data),\r\n        }))}\r\n        onRemove={(u) => setData((prev) => ({\r\n          ...prev,\r\n          flows: prev.flows?.filter((flow) => flow.id !== u.data.id),\r\n        }))}\r\n        selected={data.flows?.map((f) => ({ key: f.id, data: f }))}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nAddRule.propTypes = {\r\n  setRules: PropTypes.func.isRequired,\r\n  setOpen: PropTypes.func,\r\n};\r\n\r\nAddRule.defaultProps = {\r\n  setOpen: null,\r\n};\r\n\r\nexport default AddRule;\r\n","import React, {\r\n  useCallback, useContext, useEffect, useState,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  ComboBox,\r\n  DefaultButton,\r\n  Icon,\r\n  Label,\r\n  makeStyles,\r\n  Persona,\r\n  PersonaSize,\r\n  Position,\r\n  PrimaryButton,\r\n  Separator,\r\n  SpinButton,\r\n  Stack,\r\n  StackItem,\r\n  Text,\r\n  TextField,\r\n  DatePicker,\r\n} from '@fluentui/react';\r\nimport { useFetch } from '../../../../services/hooks';\r\nimport TaskRuleService from '../../../../services/tasks/TaskRuleService';\r\nimport TaskFlowService from '../../../../services/tasks/TaskFlowService';\r\nimport constants from '../../../../utils/constants';\r\nimport { PanelContext } from '../../../ui-hooks/usePanel';\r\nimport DateUtils from '../../../../utils/date';\r\nimport PeoplePicker from '../../../shared/people-picker/PeoplePicker';\r\nimport UserService from '../../../../services/UserService';\r\nimport GlobalContext from '../../../../services/GlobalContext';\r\nimport FlowPicker from '../../../task-planning/components/flow-picker';\r\nimport Chip from '../../../shared/chip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: `${theme.spacing.s2} !important`,\r\n    },\r\n  },\r\n  description: {\r\n    color: theme.palette.neutralSecondaryAlt,\r\n    '& textarea': {\r\n      color: 'inherit',\r\n    },\r\n  },\r\n  typeIcon: {\r\n    fontSize: 50,\r\n    height: 50,\r\n    width: 50,\r\n  },\r\n  typeDetails: {\r\n    width: '50%',\r\n    borderTop: `1px solid ${theme.palette.themeSecondary}`,\r\n    borderBottom: `1px solid ${theme.palette.themeSecondary}`,\r\n    marginTop: `${theme.spacing.s2} !important`,\r\n    paddingTop: theme.spacing.m,\r\n    paddingBottom: theme.spacing.m,\r\n  },\r\n  paddingLeft: {\r\n    paddingLeft: theme.spacing.s2,\r\n  },\r\n  userColumn: {\r\n    width: '50%',\r\n  },\r\n  separator: {\r\n    margin: `${theme.spacing.m} 0`,\r\n    '& div[role=\\'separator\\']': {\r\n      backgroundColor: theme.palette.themePrimary,\r\n      padding: '3px',\r\n      borderRadius: '5px',\r\n      minWidth: 60,\r\n    },\r\n  },\r\n  weekDay: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    color: theme.palette.black,\r\n    padding: '5px 10px',\r\n    marginRight: theme.spacing.s2,\r\n  },\r\n  month: {\r\n    backgroundColor: theme.palette.themePrimary,\r\n    color: theme.palette.black,\r\n    padding: '5px 10px',\r\n    marginRight: theme.spacing.s2,\r\n    marginTop: theme.spacing.s2,\r\n  },\r\n}));\r\n\r\nconst weekDays = [null, 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\nconst months = [\r\n  null,\r\n  'January', 'February', 'March', 'April',\r\n  'May', 'June', 'July', 'August',\r\n  'September', 'October', 'November', 'December',\r\n];\r\n\r\nconst getOrdinalSuffix = (number) => {\r\n  switch (number) {\r\n    case 1:\r\n      return 'st';\r\n    case 2:\r\n      return 'nd';\r\n    case 3:\r\n      return 'rd';\r\n    default:\r\n      return 'th';\r\n  }\r\n};\r\n\r\nconst RuleTypeDetails = ({ rule }) => {\r\n  const classes = useStyles();\r\n\r\n  const getTypeIcon = (type) => {\r\n    switch (type) {\r\n      case constants.tasks.types.Daily:\r\n        return 'CalendarDay';\r\n      case constants.tasks.types.Weekly:\r\n        return 'CalendarWorkWeek';\r\n      case constants.tasks.types.Monthly:\r\n        return 'Calendar';\r\n      default:\r\n        return 'Unknown';\r\n    }\r\n  };\r\n\r\n  const getRenderDetails = (ruleDetails) => {\r\n    switch (ruleDetails.type) {\r\n      case constants.tasks.types.Daily:\r\n        return (\r\n          <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label>Day type: </Label>\r\n            <Text block className={classes.paddingLeft} variant=\"medium\">\r\n              {rule.dailyType}\r\n            </Text>\r\n          </Stack>\r\n        );\r\n      case constants.tasks.types.Weekly:\r\n        return (\r\n          <Stack horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label style={{ display: 'block' }}>Days: </Label>\r\n            <Stack horizontal horizontalAlign=\"center\">\r\n              {\r\n                rule.weeklyDays.map((day) => (\r\n                  <Chip className={classes.weekDay}>\r\n                    <Text variant=\"medium\">{weekDays[new Date(day).getDay()]}</Text>\r\n                  </Chip>\r\n                ))\r\n              }\r\n            </Stack>\r\n          </Stack>\r\n        );\r\n      case constants.tasks.types.Monthly:\r\n        return (\r\n          <Stack horizontalAlign=\"center\" verticalAlign=\"center\">\r\n            <Label>Occurs on: </Label>\r\n            <Text variant=\"medium\">\r\n              {`${rule.monthlyOn}${getOrdinalSuffix(rule.monthlyOn)} ${rule.monthlyOnType} of the month`}\r\n            </Text>\r\n            <Label>Months:</Label>\r\n            <Stack\r\n              horizontal\r\n              horizontalAlign=\"center\"\r\n              wrap\r\n              tokens={{\r\n                childrenGap: 4,\r\n              }}\r\n            >\r\n              {\r\n                rule.monthlyMonths.map((month) => (\r\n                  <Chip className={classes.month}>\r\n                    <Text variant=\"medium\">{months[month]}</Text>\r\n                  </Chip>\r\n                ))\r\n              }\r\n            </Stack>\r\n          </Stack>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Separator className={classes.separator}>Type</Separator>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Icon className={classes.typeIcon} iconName={getTypeIcon(rule.type)} />\r\n        <Text variant=\"medium\">{rule.type}</Text>\r\n        <StackItem className={classes.typeDetails}>\r\n          {getRenderDetails(rule)}\r\n        </StackItem>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\n\r\nRuleTypeDetails.propTypes = {\r\n  rule: PropTypes.shape({\r\n    type: PropTypes.string,\r\n    dailyType: PropTypes.string,\r\n    weeklyDays: PropTypes.arrayOf(PropTypes.number),\r\n    monthlyOn: PropTypes.number,\r\n    monthlyOnType: PropTypes.string,\r\n    monthlyMonths: PropTypes.arrayOf(PropTypes.number),\r\n  }).isRequired,\r\n};\r\n\r\nconst RuleDetails = ({\r\n  id, editing, setEditing, setRules,\r\n}) => {\r\n  const classes = useStyles();\r\n  const global = useContext(GlobalContext);\r\n  const [rule] = useFetch(id && TaskRuleService.taskRulePath(id), null, null);\r\n  const panel = useContext(PanelContext);\r\n  const [data, setData] = useState({});\r\n  const [users] = useFetch(UserService.baseUrl,\r\n    {\r\n      params: {\r\n        teams: global.user.teams.map((t) => t.id),\r\n      },\r\n    },\r\n    [], [],\r\n    (dt) => dt.map((u) => ({\r\n      key: u.id,\r\n      data: u,\r\n    })));\r\n  const [flows] = useFetch(TaskFlowService.baseUrl,\r\n    null, [], [],\r\n    (flowsData) => flowsData.map((flow) => ({\r\n      key: flow.id,\r\n      data: flow,\r\n    })));\r\n\r\n  const handleUpdate = useCallback(async () => {\r\n    const update = { ...data };\r\n    // If we changed users, map them to their id's\r\n    if (data.users) {\r\n      update.users = data.users.map((u) => u.id);\r\n    }\r\n    // If we changed flows, map them to the ids\r\n    if (data.flows) {\r\n      update.flows = data.flows.map((f) => f.id);\r\n    }\r\n    const result = await TaskRuleService.updateTaskRule(rule.id, update);\r\n    setRules((prev) => prev.map((r) => (r.id === result.id ? result : r)));\r\n    panel.setOpen(false);\r\n    setEditing(false);\r\n  }, [rule, data]);\r\n\r\n  const handleDataChange = (field, func = (args) => args[0].target.value) => (...args) => {\r\n    setData((prev) => ({\r\n      ...prev,\r\n      [field]: func(args),\r\n    }));\r\n  };\r\n\r\n  const renderFooter = useCallback(() => (\r\n    <>\r\n      {\r\n        editing\r\n          ? (<PrimaryButton onClick={handleUpdate}>Save</PrimaryButton>)\r\n          : (<PrimaryButton onClick={() => setEditing(true)}>Edit</PrimaryButton>)\r\n      }\r\n      <DefaultButton\r\n        style={{ marginLeft: '8px' }}\r\n        onClick={() => {\r\n          setEditing(false);\r\n          panel.setOpen(false);\r\n        }}\r\n      >\r\n        Close\r\n      </DefaultButton>\r\n    </>\r\n  ), [panel, editing, handleUpdate]);\r\n\r\n  /**\r\n   * In case it's opened in a panel\r\n   */\r\n  useEffect(() => {\r\n    if (panel.isPanel) {\r\n      panel.setOnRenderFooter(() => (renderFooter));\r\n    }\r\n  }, [panel, renderFooter]);\r\n\r\n  return rule && (\r\n    <Stack className={classes.root} verticalAlign=\"start\">\r\n      <Separator className={classes.separator}>General</Separator>\r\n      <TextField\r\n        borderless={!editing}\r\n        label=\"Title\"\r\n        readOnly={!editing}\r\n        value={data.title ?? rule.title}\r\n        onChange={handleDataChange('title')}\r\n      />\r\n      <TextField\r\n        autoAdjustHeight\r\n        borderless={!editing}\r\n        className={classes.description}\r\n        label=\"Description\"\r\n        multiline\r\n        readOnly={!editing}\r\n        resizable={false}\r\n        value={data.description ?? rule.description ?? '-'}\r\n        onChange={handleDataChange('description')}\r\n      />\r\n      <ComboBox\r\n        label=\"Start time\"\r\n        options={constants.timeOptions}\r\n        selectedKey={DateUtils.getNearestTime(\r\n          data.taskStartTime\r\n            ? new Date(data.taskStartTime)\r\n            : new Date(rule.taskStartTime),\r\n        )}\r\n        autoComplete=\"on\"\r\n        disabled={!editing}\r\n        onChange={handleDataChange('taskStartTime', (args) => {\r\n          const time = DateUtils.getHoursFromText(args[1].text);\r\n          const result = new Date();\r\n          result.setHours(time.h);\r\n          result.setMinutes(time.m);\r\n          return result;\r\n        })}\r\n        calloutProps={{\r\n          calloutMaxHeight: 400,\r\n        }}\r\n        useComboBoxAsMenuWidth\r\n      />\r\n      {\r\n        editing\r\n          ? (\r\n            <SpinButton\r\n              label=\"Duration\"\r\n              labelPosition={Position.top}\r\n              value={data.taskDuration ?? rule.taskDuration}\r\n              onChange={handleDataChange('taskDuration', (args) => (Number.isNaN(+args[0].target.value) ? 0 : +args[0].target.value))}\r\n              onIncrement={(val) => setData((prev) => ({ ...prev, taskDuration: (+val + 10) }))}\r\n              onDecrement={(val) => {\r\n                if (val > 10) setData((prev) => ({ ...prev, taskDuration: (+val - 10) }));\r\n              }}\r\n              type=\"number\"\r\n              min={0}\r\n              max={1440}\r\n              step={10}\r\n            />\r\n          )\r\n          : (\r\n            <TextField\r\n              borderless={!editing}\r\n              label=\"Duration\"\r\n              readOnly={!editing}\r\n              value={data.taskDuration ?? rule.taskDuration}\r\n              onChange={handleDataChange('taskDuration')}\r\n              min=\"1\"\r\n              max=\"1440\"\r\n              type=\"number\"\r\n            />\r\n          )\r\n      }\r\n      <DatePicker\r\n        borderless={!editing}\r\n        value={data.validFrom ?? new Date(rule.validFrom)}\r\n        disabled={!editing}\r\n        label=\"Valid from\"\r\n        onSelectDate={handleDataChange('validFrom', (args) => DateUtils.makeUTC(args[0]))}\r\n      />\r\n      <DatePicker\r\n        borderless={!editing}\r\n        value={data.validTo ?? (rule.validTo && new Date(rule.validTo))}\r\n        disabled={!editing}\r\n        onSelectDate={handleDataChange('validTo', (args) => DateUtils.makeUTC(args[0]))}\r\n        label=\"Valid to\"\r\n        allowTextInput\r\n      />\r\n      <RuleTypeDetails rule={rule} />\r\n      <Separator className={classes.separator}>Assigned</Separator>\r\n      <Stack horizontal horizontalAlign=\"stretch\" verticalAlign=\"stretch\">\r\n        <StackItem className={classes.userColumn} grow={1}>\r\n          <Stack horizontalAlign=\"center\">\r\n            <Label>Users</Label>\r\n            {\r\n              editing\r\n                ? (\r\n                  <PeoplePicker\r\n                    style={{\r\n                      width: '90%',\r\n                    }}\r\n                    options={users}\r\n                    onSelect={(item) => setData((prev) => {\r\n                      if (prev.users) {\r\n                        return ({\r\n                          ...prev,\r\n                          users: prev.users.concat(item.data),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        users: rule.users.concat(item.data),\r\n                      });\r\n                    })}\r\n                    onRemove={(item) => setData((prev) => {\r\n                      if (prev.users) {\r\n                        return ({\r\n                          ...prev,\r\n                          users: prev.users.filter((u) => u.id !== item.data.id),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        users: rule.users.filter((u) => u.id !== item.data.id),\r\n                      });\r\n                    })}\r\n                    selected={\r\n                      data.users\r\n                        ? data.users.map((u) => ({ key: u.id, data: u }))\r\n                        : rule.users.map((u) => ({ key: u.id, data: u }))\r\n                    }\r\n                  />\r\n                )\r\n                : (\r\n                  rule.users?.map((user) => (\r\n                    <StackItem align=\"start\" key={user.id}>\r\n                      <Persona text={user.username} size={PersonaSize.size24} />\r\n                    </StackItem>\r\n                  ))\r\n                )\r\n            }\r\n          </Stack>\r\n        </StackItem>\r\n        <Separator vertical />\r\n        <StackItem className={classes.userColumn} grow={1}>\r\n          <Stack horizontalAlign=\"center\">\r\n            <Label>Flows</Label>\r\n            {\r\n              editing\r\n                ? (\r\n                  <FlowPicker\r\n                    style={{ width: '90%' }}\r\n                    options={flows}\r\n                    showCheckboxes\r\n                    showDeleteIcon={false}\r\n                    onSelect={(item) => setData((prev) => {\r\n                      if (prev.flows) {\r\n                        return ({\r\n                          ...prev,\r\n                          flows: prev.flows.concat(item.data),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        flows: rule.flows.concat(item.data),\r\n                      });\r\n                    })}\r\n                    onRemove={(item) => setData((prev) => {\r\n                      if (prev.flows) {\r\n                        return ({\r\n                          ...prev,\r\n                          flows: prev.flows.filter((u) => u.id !== item.data.id),\r\n                        });\r\n                      }\r\n                      return ({\r\n                        ...prev,\r\n                        flows: rule.flows.filter((u) => u.id !== item.data.id),\r\n                      });\r\n                    })}\r\n                    selected={\r\n                      data.flows\r\n                        ? data.flows.map((u) => ({ key: u.id, data: u }))\r\n                        : rule.flows.map((u) => ({ key: u.id, data: u }))\r\n                    }\r\n                  />\r\n                )\r\n                : (\r\n                  rule.flows.map((f) => (\r\n                    <Chip\r\n                      style={{\r\n                        backgroundColor: f.color ?? 'transparent',\r\n                        padding: 3,\r\n                        whiteSpace: 'pre-wrap',\r\n                        width: '50%',\r\n                        marginLeft: 32,\r\n                        marginTop: 4,\r\n                      }}\r\n                    >\r\n                      <Text variant=\"medium\">{f.name}</Text>\r\n                    </Chip>\r\n                  ))\r\n                )\r\n            }\r\n          </Stack>\r\n        </StackItem>\r\n      </Stack>\r\n      <Separator className={classes.separator}>Flags</Separator>\r\n      <Checkbox\r\n        checked={data.isBackgroundTask ?? rule.isBackgroundTask}\r\n        label=\"Background\"\r\n        disabled={!editing}\r\n        onChange={handleDataChange('isBackgroundTask', (args) => args[0].target.checked)}\r\n      />\r\n      <Checkbox\r\n        checked={rule.isSharedTask}\r\n        label=\"Shared\"\r\n        disabled\r\n      />\r\n      <Separator className={classes.separator}>Created</Separator>\r\n      <Stack horizontalAlign=\"center\">\r\n        <Text variant=\"medium\">{rule.createdUser?.username}</Text>\r\n        <Text variant=\"medium\">{new Date(rule.createdDate).toLocaleString()}</Text>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nRuleDetails.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  editing: PropTypes.bool.isRequired,\r\n  setEditing: PropTypes.func.isRequired,\r\n  setRules: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default RuleDetails;\r\n","import TaskRules from './TaskRules';\r\n\r\nexport default TaskRules;\r\n","import React, { useState } from 'react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport {\r\n  DetailsListLayoutMode, PanelType, PrimaryButton, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport PageHeader from '../shared/page-header';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport TaskRuleService from '../../services/tasks/TaskRuleService';\r\nimport usePanel from '../ui-hooks/usePanel';\r\nimport AddRule from './components/add-rule/AddRule';\r\nimport { useFetch } from '../../services/hooks';\r\nimport RuleDetails from './components/rule-details/RuleDetails';\r\n\r\nconst TaskRules = () => {\r\n  // TODO: later add options to retrieve only tasks of active teams\r\n  const [rules, setRules] = useFetch(TaskRuleService.baseUrl);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n  const newPanel = usePanel(\r\n    AddRule, {\r\n      headerText: 'Create new rule',\r\n      onRenderFooterContent: () => (\r\n        <PrimaryButton text=\"Create\" type=\"submit\" form=\"add-task-rule-form\" />\r\n      ),\r\n    }, {\r\n      setRules,\r\n    },\r\n  );\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const detailsPanel = usePanel(\r\n    RuleDetails, {\r\n      headerText: 'Rule Details',\r\n      isLightDismiss: !editing,\r\n      type: PanelType.medium,\r\n      isFooterAtBottom: true,\r\n      onDismiss: (_isOpen, setOpen) => () => {\r\n        setEditing(false);\r\n        setOpen(false);\r\n      },\r\n    }, {\r\n      id: selectionDetails.items.length > 0 ? selectionDetails.items[0].id : null,\r\n      editing,\r\n      setEditing,\r\n      setRules,\r\n    },\r\n  );\r\n\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'createdDate',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n    },\r\n  );\r\n\r\n  const [columns] = useState([\r\n    {\r\n      key: 'title',\r\n      name: ' Title',\r\n      fieldName: 'title',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'type',\r\n      name: ' Type',\r\n      fieldName: 'type',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: '',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'users',\r\n      name: ' Users',\r\n      fieldName: 'users',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 300,\r\n      maxWidth: 400,\r\n      onRender: (item) => item.users.map((u) => u.username).join(', '),\r\n      sort: (a, b) => (\r\n        a.users[0]?.username?.toLowerCase() < b.users[0]?.username?.toLowerCase()\r\n          ? -1\r\n          : 1\r\n      ),\r\n      filterValueAccessor: (item) => item.users.map((u) => u.username).join(' '),\r\n    },\r\n    {\r\n      key: 'createdDate',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      isResizable: true,\r\n      iconName: 'People',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      onRender: (item) => (<div>{new Date(item.createdDate).toLocaleString()}</div>),\r\n    },\r\n  ]);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <PageHeader text=\"Rules\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => { newPanel.setOpen(true); },\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: rules,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => detailsPanel.setOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      {newPanel.render}\r\n      {detailsPanel.render}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TaskRules;\r\n","import Tasks from './Tasks';\r\n\r\nexport default Tasks;\r\n","import React from 'react';\r\nimport DocumentTitle from 'react-document-title';\r\nimport { Container } from 'react-grid-system';\r\nimport { useRouteMatch, Switch, Route } from 'react-router-dom';\r\nimport AuthorizationRedirectComponent from '../../components/shared/authorization-redirect-component';\r\nimport TaskDashboard from '../../components/task-dashboard/TaskDashboard';\r\nimport TaskFlows from '../../components/task-flows';\r\nimport TaskPlanning from '../../components/task-planning/TaskPlanning';\r\nimport TaskRules from '../../components/task-rules';\r\nimport constants from '../../utils/constants';\r\n\r\nconst Tasks = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Switch>\r\n        <Route exact path={`${path}`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK.code}\r\n            grant={constants.securities.TASK.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task Dashboard\">\r\n              <TaskDashboard />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/planning`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_PLANNING.code}\r\n            grant={constants.securities.TASK_PLANNING.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Planning\">\r\n              <TaskPlanning />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/task-rules`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_RULE.code}\r\n            grant={constants.securities.TASK_RULE.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task Rules\">\r\n              <TaskRules />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route path={`${path}/task-flows`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK_FLOW.code}\r\n            grant={constants.securities.TASK_FLOW.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Flows\">\r\n              <TaskFlows />\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n        <Route exact path={`${path}/:id`}>\r\n          <AuthorizationRedirectComponent\r\n            code={constants.securities.TASK.code}\r\n            grant={constants.securities.TASK.grants.read}\r\n            to=\"/\"\r\n            failureNotification={{\r\n              header: 'No Access',\r\n              content: 'No permission to access this page. Please contact your administrator.',\r\n            }}\r\n          >\r\n            <DocumentTitle title=\"Task\">\r\n              <div>Task</div>\r\n            </DocumentTitle>\r\n          </AuthorizationRedirectComponent>\r\n        </Route>\r\n      </Switch>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tasks;\r\n","import { useContext, useEffect } from 'react';\r\nimport ConnectionService from '../../../services/ConnectionService';\r\nimport GlobalContext from '../../../services/GlobalContext';\r\n\r\nconst ConnectionManager = () => {\r\n  const global = useContext(GlobalContext);\r\n  // ConnectionService.connectSSE();\r\n\r\n  useEffect(() => {\r\n    async function run() {\r\n      if (global.user) {\r\n        const con = await ConnectionService.connectSSE();\r\n        con.addEventListener('init', (evt) => {\r\n          global.setContext((prev) => ({\r\n            ...prev,\r\n            connectionId: JSON.parse(evt.data)[0],\r\n            connection: con,\r\n          }));\r\n        });\r\n      }\r\n    }\r\n    run();\r\n  }, [global.user]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ConnectionManager;\r\n","import App from './App';\n\nexport default App;\n","import {\n  KeytipLayer, KeyCodes, ThemeProvider,\n} from '@fluentui/react';\nimport DocumentTitle from 'react-document-title';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport React, { useState, useEffect, useContext } from 'react';\nimport GlobalContext from '../../services/GlobalContext';\nimport AuthorizationService from '../../services/AuthorizationService';\nimport UserInfoProvider from '../shared/user-info-provider';\nimport UserSecuritiesProvider from '../shared/user-securities-provider';\nimport Navigation from '../navigation/Navigation';\nimport AppraisalsPage from '../../routes/appraisals';\nimport HomePage from '../../routes/home';\nimport SettingsPage from '../../routes/settings';\nimport ReportingPage from '../../routes/reporting';\nimport LoginRequired from '../shared/login-required';\nimport LoginPage from '../../routes/login';\nimport { selectTheme } from '../../themes';\nimport NotificationContainer from '../notification/NotificationContainer';\nimport Tasks from '../../routes/tasks';\nimport ConnectionManager from '../shared/connection-manager/ConnectionManager';\n\nconst App = () => {\n  const [context, setContext] = useState({\n    user: null,\n    Authorize: AuthorizationService.Authorize,\n    setContext: null,\n    userPreferences: {\n      theme: selectTheme(),\n    },\n  });\n  const initContext = useContext(GlobalContext);\n\n  const { userPreferences } = context;\n  const { theme } = userPreferences;\n\n  useEffect(() => {\n    setContext((prev) => ({\n      ...initContext,\n      ...prev,\n      setContext,\n    }));\n  }, [initContext]);\n\n  return (\n    <GlobalContext.Provider value={context}>\n      <ThemeProvider applyTo=\"body\" theme={theme}>\n        <ConnectionManager />\n        <NotificationContainer timeout={10000} />\n        <Router>\n          <UserInfoProvider ctx={context} setCtx={setContext} />\n          <UserSecuritiesProvider />\n          <Navigation />\n          <LoginRequired />\n          <KeytipLayer\n            keytipStartSequences={[{\n              key: 'a',\n              modifierKeys: [KeyCodes.alt],\n            }]}\n          />\n          {/* The page switch */}\n          <Switch>\n            <div style={{ marginTop: '40px' }}>\n              <Route path=\"/appraisals\">\n                <DocumentTitle title=\"Appraisals\">\n                  <AppraisalsPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/audits\">\n                <DocumentTitle title=\"Audits\">\n                  <h1>IN PROGRESS</h1>\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/reporting\">\n                <DocumentTitle title=\"Reporting\">\n                  <ReportingPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/settings\">\n                <DocumentTitle title=\"Settings\">\n                  <SettingsPage />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/tasks\">\n                <DocumentTitle title=\"Tasks\">\n                  <Tasks />\n                </DocumentTitle>\n              </Route>\n              <Route path=\"/login\">\n                <DocumentTitle title=\"Sign in\">\n                  <LoginPage ctx={context} setCtx={setContext} />\n                </DocumentTitle>\n              </Route>\n              <Route exact path=\"/\">\n                <HomePage ctx={context} setCtx={setContext} />\n              </Route>\n            </div>\n          </Switch>\n        </Router>\n      </ThemeProvider>\n    </GlobalContext.Provider>\n  );\n};\n\nexport default App;\n","/* eslint-disable react/jsx-filename-extension */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { initializeIcons } from '@uifabric/icons';\nimport App from './components/app';\nimport './styles/reset.css';\n\ninitializeIcons();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import Accordion from './Accordion';\r\n\r\nexport default Accordion;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, Text, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport { downloadBlob } from 'download.js';\r\nimport ReportingService from '../../../../services/ReportingService';\r\nimport Accordion from '../../../shared/accordion';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst CreateTemplatePanel = ({ isOpen, setOpen }) => {\r\n  const classes = useStyles();\r\n  const [aggregation, setAggregation] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [file, setFile] = useState(null);\r\n  const [sample, setSample] = useState('');\r\n  const [openAcordion, setOpenAccordion] = useState({\r\n    aggregation: true,\r\n    sample: false,\r\n  });\r\n\r\n  const handleChange = (set) => (evt) => {\r\n    if (evt && evt.target) {\r\n      if (set) set(evt.target.value);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (evt) => {\r\n    if (evt && evt.target) {\r\n      const filelist = evt.target.files;\r\n      if (filelist.length > 0) {\r\n        setFile(filelist[0]);\r\n      } else {\r\n        setFile(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', aggregation);\r\n    formData.append('name', name);\r\n    formData.append('template', file);\r\n\r\n    const result = await ReportingService.generateTemplate(formData);\r\n    await downloadBlob(file.name, result);\r\n  };\r\n\r\n  const handleSample = async () => {\r\n    const result = await ReportingService.getSample(aggregation);\r\n    if (result && result.data) {\r\n      setSample(JSON.stringify(result.data, null, 4));\r\n      setOpenAccordion({\r\n        aggregation: false,\r\n        sample: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', aggregation);\r\n    formData.append('name', name);\r\n    formData.append('template', file);\r\n\r\n    await ReportingService.createTemplate(formData);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton type=\"submit\" form=\"new-template-form\">Create</PrimaryButton>\r\n      <DefaultButton onClick={handleSample}>Sample</DefaultButton>\r\n      <DefaultButton onClick={handleGenerate}>Generate</DefaultButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Cancel</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText=\"Create template\"\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <form id=\"new-template-form\" onSubmit={handleSubmit}>\r\n        <Container\r\n          fluid\r\n          className={classes.root}\r\n        >\r\n          <Separator>Aggregation</Separator>\r\n          <Row justify=\"center\">\r\n            <Text variant=\"mediumPlus\">\r\n              Create a valid MongoDB aggregation.\r\n              Test and verify if it returns valid info below.\r\n              For more info, refer to MongoDB\r\n              {' '}\r\n              <a href=\"https://docs.mongodb.com/manual/aggregation/\" target=\"_blank\" rel=\"noopener noreferrer\">documentation</a>\r\n              .\r\n            </Text>\r\n          </Row>\r\n          <Accordion\r\n            items={[\r\n              {\r\n                key: 'aggregation',\r\n                text: 'Aggregation',\r\n                isOpen: openAcordion.aggregation,\r\n                render: () => (\r\n                  <Row>\r\n                    <Col xs={12}>\r\n                      <TextField\r\n                        multiline\r\n                        value={aggregation}\r\n                        onChange={handleChange(setAggregation)}\r\n                        autoAdjustHeight\r\n                        required\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                ),\r\n              },\r\n              {\r\n                key: 'sample',\r\n                text: 'Sample Data',\r\n                isOpen: openAcordion.sample,\r\n                render: () => (\r\n                  <Row>\r\n                    <Col xs={12}>\r\n                      <TextField\r\n                        multiline\r\n                        readOnly\r\n                        value={sample}\r\n                        autoAdjustHeight\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                ),\r\n              },\r\n            ]}\r\n            onRenderItem={(item) => item.render()}\r\n            onToggle={(evt, item, open) => setOpenAccordion((prev) => ({\r\n              ...prev,\r\n              [item.key]: open,\r\n            }))}\r\n          />\r\n          <Separator>Template</Separator>\r\n          <Row justify=\"center\">\r\n            <Text variant=\"mediumPlus\">\r\n              Specify your template name, then attach your template file.\r\n              { ' ' }\r\n              (Ex: All user info, or Items per user).\r\n            </Text>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={12}>\r\n              <TextField\r\n                label=\"Template name\"\r\n                value={name}\r\n                onChange={handleChange(setName)}\r\n                required\r\n              />\r\n              <TextField\r\n                styles={{\r\n                  fieldGroup: {\r\n                    padding: '8px',\r\n                    height: 'auto',\r\n                  },\r\n                }}\r\n                onChange={handleFileUpload}\r\n                type=\"file\"\r\n                label=\"Template file\"\r\n                required\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </form>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nCreateTemplatePanel.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default CreateTemplatePanel;\r\n","import CreateTemplatePanel from './CreateTemplatePanel';\r\n\r\nexport default CreateTemplatePanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst TemplateDetailsPanel = ({\r\n  id, isOpen, setOpen, setEdit,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [template, setTemplate] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await ReportingService.getTemplate(id);\r\n      if (mounted) {\r\n        setTemplate(data);\r\n      }\r\n    }\r\n    if (id) run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id]);\r\n\r\n  const handleDownload = () => {\r\n    ReportingService.downloadTemplate(id, template.filename || 'template');\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setEdit(true);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleEdit}>Edit</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText={`Details - ${template ? template.name : ''}`}\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n      isLightDismiss\r\n    >\r\n      <Container\r\n        fluid\r\n        className={classes.root}\r\n      >\r\n        <Separator>General</Separator>\r\n        {\r\n          template\r\n          && (\r\n            <>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField label=\"Name: \" value={template && template.name} readOnly underlined />\r\n                  <TextField label=\"Created by: \" value={template && template.createdUser && template.createdUser.username} readOnly underlined />\r\n                  <TextField label=\"Created on: \" value={template && new Date(template.createdDate).toLocaleString()} readOnly underlined />\r\n                  {\r\n              template.modifiedUser\r\n              && (\r\n              <>\r\n                <TextField label=\"Modified by: \" value={template.modifiedUser.username} readOnly underlined />\r\n                <TextField label=\"Modified on: \" value={template.modifiedDate && new Date(template.modifiedDate).toLocaleString()} readOnly underlined />\r\n              </>\r\n              )\r\n            }\r\n                </Col>\r\n              </Row>\r\n              <Separator>Details</Separator>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField label=\"Filename: \" value={template.filename} readOnly underlined />\r\n                </Col>\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <ActionButton\r\n                    iconProps={{\r\n                      iconName: 'DownloadDocument',\r\n                    }}\r\n                    text=\"Download template\"\r\n                    onClick={handleDownload}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={6}>\r\n                  <TextField\r\n                    readOnly\r\n                    multiline\r\n                    autoAdjustHeight\r\n                    value={template.aggregation || ''}\r\n                    label=\"Aggregation\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )\r\n        }\r\n      </Container>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nTemplateDetailsPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  setEdit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TemplateDetailsPanel;\r\n","import TemplateDetailsPanel from './TemplateDetailsPanel';\r\n\r\nexport default TemplateDetailsPanel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ActionButton,\r\n  DefaultButton, Icon, makeStyles, Panel, PanelType, PrimaryButton, Separator, Stack, TextField,\r\n} from '@fluentui/react';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../../../services/ReportingService';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    '& > * + *': {\r\n      marginTop: '16px',\r\n    },\r\n  },\r\n}));\r\n\r\nconst TemplateEditPanel = ({\r\n  id, isOpen, updateTemplates, setOpen,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [template, setTemplate] = useState({});\r\n  const [update, setUpdate] = useState({});\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const data = await ReportingService.getTemplate(id);\r\n      if (mounted) {\r\n        setTemplate(data);\r\n        setUpdate({\r\n          name: data.name,\r\n          filename: data.filename,\r\n          aggregation: data.aggregation,\r\n        });\r\n      }\r\n    }\r\n    if (id) {\r\n      run();\r\n    }\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [id]);\r\n\r\n  const handleUpdate = (field) => (evt) => {\r\n    if (evt && evt.target) {\r\n      setUpdate((prev) => ({\r\n        ...prev,\r\n        [field]: evt.target.value,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (evt) => {\r\n    if (evt && evt.target) {\r\n      const filelist = evt.target.files;\r\n      if (filelist.length > 0) {\r\n        setFile(filelist[0]);\r\n        setUpdate((prev) => ({\r\n          ...prev,\r\n          filename: filelist[0].name,\r\n        }));\r\n      } else {\r\n        setFile(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    ReportingService.downloadTemplate(id, template.filename || 'template');\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const formData = new FormData();\r\n    formData.append('aggregation', update.aggregation);\r\n    formData.append('name', update.name);\r\n    formData.append('filename', update.filename);\r\n    if (file) formData.append('template', file);\r\n    const updateResult = await ReportingService.updateTemplate(template.id, formData);\r\n    setTemplate(updateResult);\r\n    updateTemplates(updateResult);\r\n    setOpen(false);\r\n  };\r\n\r\n  const onRenderLabel = (labelId, controlId, iconName) => (options) => (\r\n    <label\r\n      style={{\r\n        lineHeight: '2em',\r\n        fontWeight: 600,\r\n      }}\r\n      htmlFor={controlId}\r\n      id={labelId}\r\n    >\r\n      <Icon iconName={iconName} />\r\n      { ' ' }\r\n      {options.label}\r\n    </label>\r\n  );\r\n\r\n  const onRenderFooter = () => (\r\n    <Stack\r\n      horizontal\r\n      horizontalAlign=\"start\"\r\n      tokens={{\r\n        childrenGap: 10,\r\n      }}\r\n    >\r\n      <PrimaryButton onClick={handleSave}>Update</PrimaryButton>\r\n      <DefaultButton onClick={() => setOpen(false)}>Close</DefaultButton>\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Panel\r\n      isOpen={isOpen}\r\n      onDismiss={() => setOpen(false)}\r\n      headerText={`Edit - ${template ? template.name : ''}`}\r\n      type={PanelType.large}\r\n      onRenderFooterContent={onRenderFooter}\r\n    >\r\n      <Container\r\n        fluid\r\n        className={classes.root}\r\n      >\r\n        <Separator>General</Separator>\r\n        {\r\n          template\r\n          && (\r\n            <>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    label=\"Name: \"\r\n                    value={update && update.name}\r\n                    onChange={handleUpdate('name')}\r\n                    underlined\r\n                  />\r\n                  <TextField label=\"Created by: \" value={template && template.createdUser && template.createdUser.username} readOnly underlined tabIndex={-1} />\r\n                  <TextField label=\"Created on: \" value={template && new Date(template.createdDate).toLocaleString()} readOnly underlined tabIndex={-1} />\r\n                  {\r\n              template.modifiedUser\r\n              && (\r\n              <>\r\n                <TextField label=\"Modified by: \" value={template.modifiedUser.username} readOnly underlined tabIndex={-1} />\r\n                <TextField label=\"Modified on: \" value={template.modifiedDate && new Date(template.modifiedDate).toLocaleString()} readOnly underlined tabIndex={-1} />\r\n              </>\r\n              )\r\n            }\r\n                </Col>\r\n              </Row>\r\n              <Separator>Details</Separator>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    label=\"Filename: \"\r\n                    value={update.filename}\r\n                    onChange={handleUpdate('filename')}\r\n                    underlined\r\n                  />\r\n                </Col>\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <ActionButton\r\n                    iconProps={{\r\n                      iconName: 'DownloadDocument',\r\n                    }}\r\n                    text=\"Download template\"\r\n                    onClick={handleDownload}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={4}>\r\n                  <TextField\r\n                    styles={{\r\n                      fieldGroup: {\r\n                        padding: '8px',\r\n                        height: 'auto',\r\n                      },\r\n                    }}\r\n                    onChange={handleFileUpload}\r\n                    type=\"file\"\r\n                    label=\"Template file\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row justify=\"start\">\r\n                <Col xs={12} sm={8} md={6}>\r\n                  <TextField\r\n                    onRenderLabel={onRenderLabel(\r\n                      'label-aggregation-edit',\r\n                      'aggregation-edit',\r\n                      'Edit',\r\n                    )}\r\n                    multiline\r\n                    autoAdjustHeight\r\n                    value={update.aggregation || ''}\r\n                    onChange={handleUpdate('aggregation')}\r\n                    label=\"Aggregation\"\r\n                    aria-labelledby=\"label-aggregation-edit\"\r\n                    id=\"aggregation-edit\"\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )\r\n        }\r\n      </Container>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nTemplateEditPanel.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  updateTemplates: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TemplateEditPanel;\r\n","import {\r\n  DetailsListLayoutMode, Icon, SelectionMode, Separator,\r\n} from '@fluentui/react';\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Col, Container, Row } from 'react-grid-system';\r\nimport ReportingService from '../../services/ReportingService';\r\nimport CommandTable from '../shared/command-table/CommandTable';\r\nimport PageHeader from '../shared/page-header/PageHeader';\r\nimport CreateTemplatePanel from './components/create-panel';\r\nimport TemplateDetailsPanel from './components/details-panel';\r\nimport TemplateEditPanel from './components/edit-panel/TemplateEditPanel';\r\n\r\nconst ItemType = ({ item }) => {\r\n  if (item.filename) {\r\n    let iconName;\r\n    const tokens = item.filename.split('.');\r\n    const ext = tokens[tokens.length - 1];\r\n    switch (ext) {\r\n      case 'xlsx':\r\n        iconName = 'ExcelLogo';\r\n        break;\r\n      case 'docx':\r\n        iconName = 'WordLogo';\r\n        break;\r\n      default:\r\n        iconName = 'FileBug';\r\n        break;\r\n    }\r\n\r\n    return (\r\n      <div style={{ textAlign: 'center' }}>\r\n        <Icon styles={{ root: { fontSize: '1.3em' } }} iconName={iconName} />\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst ReportTemplates = () => {\r\n  const [templates, setTemplates] = useState([]);\r\n  const [createPanelOpen, setCreatePanelOpen] = useState(false);\r\n  const [detailsPanelOpen, setDetailsPanelOpen] = useState(false);\r\n  const [editPanelOpen, setEditPanelOpen] = useState(false);\r\n  const [selectionDetails, setSelectionDetails] = useState({\r\n    count: 0,\r\n    items: [],\r\n  });\r\n  const [columns] = useState([\r\n    {\r\n      key: 'type',\r\n      name: ' Type',\r\n      fieldName: 'name',\r\n      iconName: 'ToDoLogoBottom',\r\n      minWidth: 70,\r\n      maxWidth: 70,\r\n      onRender: (item) => <ItemType item={item} />,\r\n    },\r\n    {\r\n      key: 'name',\r\n      name: ' Name',\r\n      fieldName: 'name',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'FileTemplate',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n    },\r\n    {\r\n      key: 'filename',\r\n      name: ' Filename',\r\n      fieldName: 'filename',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'FileBug',\r\n      minWidth: 100,\r\n      maxWidth: 200,\r\n    },\r\n    {\r\n      key: 'createdby',\r\n      name: ' Created by',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'Contact',\r\n      minWidth: 100,\r\n      maxWidth: 300,\r\n      sort: (a, b) => (a.createdUser.username < b.createdUser.username ? -1 : 1),\r\n      onRender: (item) => item.createdUser.username,\r\n    },\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  ]);\r\n  const [sortedColumn] = useState(\r\n    {\r\n      key: 'createdon',\r\n      name: ' Created on',\r\n      fieldName: 'createdDate',\r\n      isSorted: true,\r\n      isSortedDescending: true,\r\n      isSortable: true,\r\n      isFilterable: true,\r\n      iconName: 'DateTime',\r\n      minWidth: 200,\r\n      maxWidth: 300,\r\n      onRender: (item) => (new Date(item.createdDate).toLocaleString()),\r\n    },\r\n  );\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function run() {\r\n      const result = await ReportingService.getTemplates();\r\n      if (mounted) {\r\n        setTemplates(result);\r\n      }\r\n    }\r\n    run();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <PageHeader text=\"Templates\" />\r\n      <Separator />\r\n      <Row>\r\n        <Col xs={12}>\r\n          <CommandTable\r\n            commandItems={[\r\n              {\r\n                key: 'createItem',\r\n                text: 'Create',\r\n                iconProps: { iconName: 'BoxAdditionSolid' },\r\n                onClick: () => setCreatePanelOpen(true),\r\n              },\r\n              {\r\n                key: 'details',\r\n                text: 'Details',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'ProfileSearch' },\r\n                onClick: () => setDetailsPanelOpen(true),\r\n              },\r\n              {\r\n                key: 'editItem',\r\n                text: 'Edit',\r\n                disabled: selectionDetails.count === 0,\r\n                iconProps: { iconName: 'Edit' },\r\n                onClick: () => setEditPanelOpen(true),\r\n              },\r\n            ]}\r\n            tableProps={{\r\n              items: templates,\r\n              columns,\r\n              setSelectionDetails,\r\n              selectionMode: SelectionMode.single,\r\n              onItemInvoked: () => setDetailsPanelOpen(true),\r\n              layoutMode: DetailsListLayoutMode.justified,\r\n              sortedCol: sortedColumn,\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <CreateTemplatePanel\r\n        isOpen={createPanelOpen}\r\n        setOpen={setCreatePanelOpen}\r\n      />\r\n      <TemplateDetailsPanel\r\n        isOpen={detailsPanelOpen}\r\n        setOpen={setDetailsPanelOpen}\r\n        id={selectionDetails.items.length > 0\r\n          ? selectionDetails.items[0].id\r\n          : ''}\r\n        setEdit={setEditPanelOpen}\r\n      />\r\n      <TemplateEditPanel\r\n        isOpen={editPanelOpen}\r\n        setOpen={setEditPanelOpen}\r\n        updateTemplates={(template) => setTemplates(\r\n          (prev) => prev.map((t) => (t.id === template.id ? template : t)),\r\n        )}\r\n        id={selectionDetails.items.length > 0\r\n          ? selectionDetails.items[0].id\r\n          : ''}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nItemType.propTypes = {\r\n  item: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ReportTemplates;\r\n","import axios from 'axios';\nimport { downloadBlob } from 'download.js';\nimport NotificationService from './NotificationService';\n\nconst ReportingService = {\n  /**\n   * Templates\n   */\n  templatesPath: '/api/reporting/templates',\n  templatePath: (id) => `/api/reporting/templates/${id}`,\n  templateDownloadPath: (id) => `/api/reporting/templates/${id}/download`,\n  templateParametersPath: (id) => `/api/reporting/templates/${id}/parameters`,\n  generateTemplatePath: '/api/reporting/templates/generate',\n  templateSamplePath: '/api/reporting/templates/sample',\n\n  async getTemplates() {\n    try {\n      const response = await axios.get(this.templatesPath);\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getTemplate(id) {\n    try {\n      const response = await axios.get(this.templatePath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async createTemplate(formdata) {\n    try {\n      const response = await axios.post(this.templatesPath, formdata, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      if (response.status === 200) {\n        NotificationService\n          .notifySuccess('Tempalte successfully created');\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async updateTemplate(id, update) {\n    try {\n      const response = await axios.put(this.templatePath(id), update, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async downloadTemplate(id, filename) {\n    try {\n      const response = await axios.post(this.templateDownloadPath(id), null, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        await downloadBlob(filename, response.data);\n      }\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async getTempalteParameters(id) {\n    try {\n      const response = await axios.get(this.templateParametersPath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError(err.response && err.response.data && err.response.data.error);\n      throw err;\n    }\n  },\n\n  async generateTemplate(formdata) {\n    try {\n      const response = await axios.post(this.generateTemplatePath, formdata, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        NotificationService\n          .notifySuccess('Tempalte successfully generated');\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getSample(aggregation) {\n    try {\n      const response = await axios.post(this.templateSamplePath, { aggregation });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  /**\n   * Reports\n   */\n  appraisalReportPath: '/api/reporting/reports/appraisal-report',\n  reportPath: (id) => `/api/reporting/reports/${id}`,\n  postReportGeneratePath: (id) => `/api/reporting/reports/${id}/generate`,\n  reportsPath: '/api/reporting/reports',\n\n  async generateAppraisalReport(params) {\n    try {\n      const response = await axios.post(this.appraisalReportPath, params, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        return response.data;\n      } if (response.status === 204) {\n        NotificationService\n          .notifyError('No data available for this filter');\n        return null;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      if (err.response && err.response.status === 400) {\n        NotificationService.notifyError('Invalid filters provided');\n      } else {\n        NotificationService\n          .notifyError(err.message);\n      }\n      return null;\n    }\n  },\n\n  async getReports() {\n    try {\n      const response = await axios.get(this.reportsPath);\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async getReport(id) {\n    try {\n      const response = await axios.get(this.reportPath(id));\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async addReport(formData) {\n    try {\n      const result = await axios.post(this.reportsPath, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      return result.data;\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async updateReport(id, update) {\n    try {\n      const result = await axios.put(this.reportPath(id), update);\n      return result.data;\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n\n  async generateReport(id, params) {\n    try {\n      const response = await axios.post(this.postReportGeneratePath(id), params, {\n        responseType: 'blob',\n      });\n      if (response.status === 200) {\n        return response.data;\n      }\n      throw new Error(`Server response: ${response.status} - ${response.statusText}`);\n    } catch (err) {\n      NotificationService\n        .notifyError((err.response && err.response.data && err.response.data.error));\n      throw err;\n    }\n  },\n};\n\nexport default ReportingService;\n","/**\r\n * A Table with Command Panel ad a Search box.\r\n * Standartized to be used univarsally on any lists.\r\n */\r\nimport React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Container, Row, Col,\r\n} from 'react-grid-system';\r\nimport {\r\n  CommandBar, SearchBox, Separator, Stack,\r\n} from '@fluentui/react';\r\nimport Table from '../table';\r\n\r\nconst CommandTable = ({ commandItems, tableProps }) => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row>\r\n        <Col xs={12}>\r\n          <Stack horizontalAlign=\"stretch\">\r\n            <Row align=\"start\">\r\n              <Col xs={12} sm={9}>\r\n                <CommandBar items={commandItems} />\r\n              </Col>\r\n              <Col xs={12} sm={3}>\r\n                <SearchBox\r\n                  placeholder=\"Search\"\r\n                  value={searchValue}\r\n                  onChange={(e) => setSearchValue(e && e.target ? e.target.value : '')}\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Separator />\r\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\r\n            <Table {...tableProps} searchValue={searchValue} />\r\n          </Stack>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nCommandTable.propTypes = {\r\n  commandItems: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    iconProps: PropTypes.shape({\r\n      iconName: PropTypes.string,\r\n    }),\r\n    onClick: PropTypes.func,\r\n  })),\r\n  tableProps: PropTypes.shape({\r\n    columns: PropTypes.arrayOf(PropTypes.shape({\r\n      key: PropTypes.string,\r\n      name: PropTypes.string,\r\n      fieldName: PropTypes.string,\r\n      minWidth: PropTypes.number,\r\n      maxWidth: PropTypes.number,\r\n      isSortable: PropTypes.bool,\r\n      isFilterable: PropTypes.bool,\r\n      isResizable: PropTypes.bool,\r\n      sort: PropTypes.func,\r\n      onRender: PropTypes.func,\r\n    })).isRequired,\r\n    items: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n    searchValue: PropTypes.string,\r\n    sortedCol: PropTypes.shape({\r\n      key: PropTypes.string,\r\n      name: PropTypes.string,\r\n      fieldName: PropTypes.string,\r\n      minWidth: PropTypes.number,\r\n      maxWidth: PropTypes.number,\r\n      isSortable: PropTypes.bool,\r\n      isFilterable: PropTypes.bool,\r\n      isResizable: PropTypes.bool,\r\n      sort: PropTypes.func,\r\n      onRender: PropTypes.func,\r\n      isSorted: PropTypes.bool,\r\n      isSortedDescending: PropTypes.bool,\r\n    }),\r\n    setSelectionDetails: PropTypes.func,\r\n  }).isRequired,\r\n};\r\n\r\nCommandTable.defaultProps = {\r\n  commandItems: null,\r\n};\r\n\r\nexport default CommandTable;\r\n","import EventEmitter from 'eventemitter3';\r\n\r\nconst eventEmitter = new EventEmitter();\r\n\r\nconst Emitter = {\r\n  on: (event, fn) => eventEmitter.on(event, fn),\r\n  once: (event, fn) => eventEmitter.once(event, fn),\r\n  off: (event, fn) => eventEmitter.off(event, fn),\r\n  emit: (event, payload) => eventEmitter.emit(event, payload),\r\n};\r\n\r\nObject.freeze(Emitter);\r\n\r\nexport default Emitter;\r\n","import Emitter from './Emitter';\r\n\r\nexport default Emitter;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Stack, Text } from '@fluentui/react';\n\nconst styles = {\n  root: {\n    marginTop: '16px',\n    marginBottom: '16px',\n    align: 'center',\n  },\n};\n\nconst PageHeader = ({ text }) => (\n  <Stack horizontal horizontalAlign=\"center\">\n    <Text variant=\"xLarge\" styles={styles}>{text}</Text>\n  </Stack>\n);\n\nPageHeader.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default PageHeader;\n","import React, {\r\n  useEffect,\r\n  useState,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Icon, Text, concatStyleSets, makeStyles,\r\n} from '@fluentui/react';\r\nimport { Collapse } from 'react-collapse';\r\nimport clsx from 'clsx';\r\nimport './styles.css';\r\n\r\nconst defstyles = (theme, compact = false) => ({\r\n  root: {\r\n    boxShadow: theme.effects.elevation4,\r\n    width: '100%',\r\n    border: `1px solid ${theme.palette.themeLight}`,\r\n  },\r\n  container: {\r\n    outline: 'none',\r\n    borderTop: `1px solid ${theme.palette.themeLight}`,\r\n    '&:first-child': {\r\n      borderTop: 'none',\r\n    },\r\n    '& > div:first-child': {\r\n      outline: 'none',\r\n    },\r\n  },\r\n  header: {\r\n    cursor: 'pointer',\r\n    padding: `${compact ? '8px' : '16px'}`,\r\n  },\r\n  headerIcon: {\r\n    fontSize: '0.7em',\r\n    transition: '.2s transform',\r\n  },\r\n  headerIconOpen: {\r\n    transform: 'rotate(90deg)',\r\n    transformOrigin: 'center',\r\n  },\r\n  itemContent: {\r\n    padding: `${compact ? '8px' : '16px'}`,\r\n  },\r\n});\r\n\r\n/**\r\n * DEFAULT RENDER FUNCTIONS\r\n */\r\n\r\nconst defaultRenderHeaderFold = (item, isOpen, classes) => (\r\n  <span style={{\r\n    paddingRight: '8px',\r\n  }}\r\n  >\r\n    <Icon\r\n      className={clsx({\r\n        [classes.headerIcon]: true,\r\n        [classes.headerIconOpen]: isOpen,\r\n      })}\r\n      iconName=\"ChevronRightMed\"\r\n    />\r\n  </span>\r\n);\r\n\r\nconst defaultRenderHeaderText = (item) => <Text variant=\"medium\">{item.text}</Text>;\r\n\r\nconst defaultRenderItemContent = (item) => (\r\n  <p>\r\n    {item.text}\r\n  </p>\r\n);\r\n\r\n/*\r\n      Header has:\r\n       ____________________________\r\n      | (Fold button)             |\r\n      | >    Header text          |\r\n      |___________________________|\r\n*/\r\nconst defaultRenderHeader = (item, headerProps, classProps) => {\r\n  const classes = classProps;\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      flexFlow: 'row nowrap',\r\n      alignItems: 'center',\r\n    }}\r\n    >\r\n      {headerProps.onRenderHeaderFold(item, headerProps.isOpen, classes)}\r\n      {headerProps.onRenderHeaderText(item, headerProps.isOpen, classes)}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AccordionItemContainer = ({\r\n  item, headerProps, onRenderItem, isOpen, onToggle, classes,\r\n}) => (\r\n  <div\r\n    className={classes.container}\r\n  >\r\n    <div\r\n      role=\"menuitem\"\r\n      tabIndex={0}\r\n      onClick={(evt) => onToggle(evt, item, !isOpen)}\r\n      onKeyPress={(evt) => onToggle(evt, item, !isOpen)}\r\n      className={classes.header}\r\n    >\r\n      {headerProps.onRenderHeader(item, { ...headerProps, isOpen }, classes)}\r\n    </div>\r\n    <Collapse isOpened={isOpen}>\r\n      <div className={classes.itemContent}>\r\n        {onRenderItem(item)}\r\n      </div>\r\n    </Collapse>\r\n  </div>\r\n);\r\n\r\n/**\r\n * Accordion Component\r\n * onRenderHeader - renders the whole header\r\n * onRenderHeaderFold - custom render for the fold item\r\n * onRenderHeaderText - customer render for the header text content\r\n */\r\nconst Accordion = ({\r\n  items,\r\n  getKey,\r\n  headerProps,\r\n  onRenderItem,\r\n  exclusive,\r\n  styles,\r\n  compact,\r\n  onToggle,\r\n}) => {\r\n  // Concatenate user provided styles with default styles if needed\r\n  const classes = makeStyles((theme) => concatStyleSets(defstyles(theme, compact), styles))();\r\n  const [open, setOpen] = useState(() => {\r\n    const result = {};\r\n    items.forEach((item) => {\r\n      const key = getKey(item);\r\n      result[key] = Boolean(item.isOpen) || false;\r\n    });\r\n    return result;\r\n  });\r\n  const defHeaderProps = {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n    ...headerProps,\r\n  };\r\n\r\n  const handleSetOpen = (item) => {\r\n    if (!exclusive) {\r\n      return (evt, i, val) => setOpen((prev) => ({\r\n        ...prev,\r\n        [getKey(item)]: val,\r\n      }));\r\n    }\r\n    return (evt, i, val) => setOpen((prev) => {\r\n      const copy = { ...prev };\r\n      const itemKey = getKey(item);\r\n      Object.keys(copy).forEach((key) => {\r\n        copy[key] = (key === itemKey ? val : false);\r\n      });\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setOpen(() => {\r\n      const result = {};\r\n      items.forEach((item) => {\r\n        const key = getKey(item);\r\n        result[key] = Boolean(item.isOpen) || false;\r\n      });\r\n      return result;\r\n    });\r\n  }, [items, getKey]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {\r\n        items.map((item) => (\r\n          <AccordionItemContainer\r\n            item={item}\r\n            headerProps={defHeaderProps}\r\n            onRenderItem={onRenderItem}\r\n            isOpen={Boolean(open[getKey(item)])}\r\n            setOpen={handleSetOpen(item)}\r\n            getKey={getKey}\r\n            classes={classes}\r\n            key={getKey(item)}\r\n            onToggle={onToggle || handleSetOpen(item)}\r\n          />\r\n        ))\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nAccordion.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string,\r\n    text: PropTypes.string,\r\n    header: PropTypes.string,\r\n    isOpen: PropTypes.bool,\r\n  })).isRequired,\r\n  getKey: PropTypes.func,\r\n  onRenderItem: PropTypes.func,\r\n  exclusive: PropTypes.bool,\r\n  headerProps: PropTypes.shape({\r\n    onRenderHeader: PropTypes.func,\r\n    onRenderHeaderFold: PropTypes.func,\r\n    onRenderHeaderText: PropTypes.func,\r\n  }),\r\n  styles: PropTypes.shape({\r\n    root: PropTypes.shape({}),\r\n    container: PropTypes.shape({}),\r\n    header: PropTypes.shape({}),\r\n    headerIcon: PropTypes.shape({}),\r\n    headerIconOpen: PropTypes.shape({}),\r\n    itemContent: PropTypes.shape({}),\r\n  }),\r\n  compact: PropTypes.bool,\r\n  onToggle: PropTypes.func,\r\n};\r\n\r\nAccordion.defaultProps = {\r\n  getKey: (item) => item.key,\r\n  onRenderItem: defaultRenderItemContent,\r\n  exclusive: false,\r\n  headerProps: {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n  },\r\n  styles: {},\r\n  compact: false,\r\n  onToggle: null,\r\n};\r\n\r\nAccordionItemContainer.propTypes = {\r\n  item: PropTypes.shape({}).isRequired,\r\n  onRenderItem: PropTypes.func.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  headerProps: PropTypes.shape({\r\n    onRenderHeader: PropTypes.func,\r\n    onRenderHeaderFold: PropTypes.func,\r\n    onRenderHeaderText: PropTypes.func,\r\n  }),\r\n  classes: PropTypes.shape({\r\n    root: PropTypes.string,\r\n    container: PropTypes.string,\r\n    header: PropTypes.string,\r\n    headerIcon: PropTypes.string,\r\n    headerIconOpen: PropTypes.string,\r\n    itemContent: PropTypes.string,\r\n  }).isRequired,\r\n  onToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nAccordionItemContainer.defaultProps = {\r\n  headerProps: {\r\n    onRenderHeader: defaultRenderHeader,\r\n    onRenderHeaderFold: defaultRenderHeaderFold,\r\n    onRenderHeaderText: defaultRenderHeaderText,\r\n  },\r\n};\r\n\r\nexport default Accordion;\r\n"],"sourceRoot":""}